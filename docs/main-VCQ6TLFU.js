import{$ as lt,$a as am,A as yu,Aa as sh,Ab as sP,B as xk,Ba as Zw,Bb as aP,C as zw,Ca as ir,D as mo,Da as ah,E as Ck,Ea as Fk,F as Rk,Fa as im,G as tm,Ga as Vk,H as ui,Ha as qt,I as Gw,Ia as jk,J as Dk,Ja as Uk,K as em,Ka as Bk,L as bu,La as t_,M as Kw,Ma as qk,N as kk,Na as X,O as go,Oa as it,P as Ge,Pa as xt,Q as $w,Qa as wu,R as nm,Ra as Gn,S as Ke,Sa as qr,T as we,Ta as Et,U as vo,Ua as e_,V as wt,Va as uh,W as Yt,Wa as ch,X as Pk,Xa as zk,Y as kt,Ya as om,Z as Hw,Za as Gk,_ as G,_a as sm,a as _k,aa as eh,ab as n_,b as Ik,ba as Nk,bb as Kk,c as fo,ca as nh,cb as r_,d as jw,da as tn,db as $k,e as Uw,ea as Xt,eb as i_,f as Br,fa as Ms,fb as um,g as Ir,ga as rm,gb as Hk,h as Yp,ha as Ok,hb as o_,i as Ek,ia as rh,ib as cm,j as po,ja as yo,jb as Wk,k as Os,ka as Ww,kb as Qk,l as mu,la as ci,lb as Yk,m as be,ma as li,mb as lm,n as ct,na as qn,nb as Xk,o as th,oa as zn,ob as Jk,p as Tk,pa as Qw,pb as en,q as Ak,qa as Yw,qb as Zk,r as yt,ra as Xw,rb as s_,s as gu,sa as bo,sb as tP,t as nr,ta as Ls,tb as eP,u as Bw,ua as Mk,ub as lh,v as Zp,va as ih,vb as nP,w as qw,wa as Lk,wb as rP,x as Sk,xa as rr,xb as iP,y as Er,ya as Jw,yb as oP,z as vu,za as oh,zb as Fs}from"./chunk-2E5TRCNY.js";import{a as uP,b as a_,c as cP,d as hh,e as u_,f as hm,g as lP,h as hP,i as c_,j as ue,k as Vs,l as hi,m as dm,n as dh,o as dP,p as fP,q as wo,r as Kn}from"./chunk-O3OEKMUX.js";import{a as et,b as je,d as Ur,e as a6,f as Fw,g as Vw,h as D,i as ut,j as Jl,l as O,m as N,n as Xp,o as Zl,p as re,t as Jp}from"./chunk-YMCF4HWH.js";function vN(e){return ku(void 0,e)}function ku(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!PK(r)||(e[r]=ku(e[r],t[r]));return e}function PK(e){return e!=="__proto__"}function bN(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Jl({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),c="";return[mN(JSON.stringify(n)),mN(JSON.stringify(a)),c].join(".")}function Ao(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ao())}function uI(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _N(){return typeof self=="object"&&self.self===self}function IN(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function EN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TN(){return Ao().indexOf("Electron/")>=0}function AN(){var e=Ao();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function SN(){return Ao().indexOf("MSAppHost/")>=0}function xN(){return!uI()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MK(e,t){return e.replace(LK,function(n,r){var i=t[r];return i!=null?String(i):"<"+r+"?>"})}function cI(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function CN(e,t){var n=new FK(e,t);return n.subscribe.bind(n)}function VK(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&typeof e[i]=="function")return!0}return!1}function aI(){}function Ie(e){return e&&e._delegate?e._delegate:e}var gN,RK,DK,kK,mN,yN,NK,OK,Mm,LK,XX,FK,JX,Vh=Ur(()=>{"use strict";Jp();gN=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},RK=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=e[n++],a=e[n++],c=e[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{var s=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},DK={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],a=i+1<e.length,c=a?e[i+1]:0,l=i+2<e.length,d=l?e[i+2]:0,p=s>>2,g=(s&3)<<4|c>>4,v=(c&15)<<2|d>>6,b=d&63;l||(b=64,a||(v=64)),r.push(n[p],n[g],n[v],n[b])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gN(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):RK(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],a=i<e.length,c=a?n[e.charAt(i)]:0;++i;var l=i<e.length,d=l?n[e.charAt(i)]:64;++i;var p=i<e.length,g=p?n[e.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw Error();var v=s<<2|c>>4;if(r.push(v),d!==64){var b=c<<4&240|d>>2;if(r.push(b),g!==64){var _=d<<6&192|g;r.push(_)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},kK=function(e){var t=gN(e);return DK.encodeByteArray(t,!0)},mN=function(e){return kK(e).replace(/\./g,"")};yN=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,i))}},e}();NK="FirebaseError",OK=function(e){ut(t,e);function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name=NK,Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,Mm.prototype.create),s}return t}(Error),Mm=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+t,a=this.errors[t],c=a?MK(a,i):"Error",l=this.serviceName+": "+c+" ("+s+").",d=new OK(s,l,i);return d},e}();LK=/\{\$([^}]+)}/g;XX=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,n){n||(n=0);var r=this.W_;if(typeof t=="string")for(var i=0;i<16;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(var i=16;i<80;i++){var s=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(s<<1|s>>>31)&4294967295}for(var a=this.chain_[0],c=this.chain_[1],l=this.chain_[2],d=this.chain_[3],p=this.chain_[4],g,v,i=0;i<80;i++){i<40?i<20?(g=d^c&(l^d),v=1518500249):(g=c^l^d,v=1859775393):i<60?(g=c&l|d&(c|l),v=2400959708):(g=c^l^d,v=3395469782);var s=(a<<5|a>>>27)+g+p+v+r[i]&4294967295;p=d,d=l,l=(c<<30|c>>>2)&4294967295,c=a,a=s}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295},e.prototype.update=function(t,n){if(t!=null){n===void 0&&(n=t.length);for(var r=n-this.blockSize,i=0,s=this.buf_,a=this.inbuf_;i<n;){if(a===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[a]=t.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<n;)if(s[a]=t[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}},e.prototype.digest=function(){var t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t},e}();FK=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(i){r.error(i)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var i=this,s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VK(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=aI),s.error===void 0&&(s.error=aI),s.complete===void 0&&(s.complete=aI);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch{}}),this.observers.push(s),a},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();JX=4*60*60*1e3;});function UK(e){return e===Bs?void 0:e}function BK(e){return e.instantiationMode==="EAGER"}var Pu,Bs,jK,RN,lI=Ur(()=>{"use strict";Jp();Vh();Pu=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},e}();Bs="[DEFAULT]";jK=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(t){var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new yN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n,r=this.normalizeInstanceIdentifier(t?.identifier),i=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,!!this.shouldAutoInitialize()){if(BK(t))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}try{for(var i=Xp(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=Zl(s.value,2),c=a[0],l=a[1],d=this.normalizeInstanceIdentifier(c);try{var p=this.getOrInitializeService({instanceIdentifier:d});l.resolve(p)}catch{}}}catch(g){n={error:g}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},e.prototype.clearInstance=function(t){t===void 0&&(t=Bs),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return O(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(re(re([],Zl(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),Zl(t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=Bs),this.instances.has(t)},e.prototype.getOptions=function(t){return t===void 0&&(t=Bs),this.instancesOptions.get(t)||{}},e.prototype.initialize=function(t){var n,r;t===void 0&&(t={});var i=t.options,s=i===void 0?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:a,options:s});try{for(var l=Xp(this.instancesDeferred.entries()),d=l.next();!d.done;d=l.next()){var p=Zl(d.value,2),g=p[0],v=p[1],b=this.normalizeInstanceIdentifier(g);a===b&&v.resolve(c)}}catch(_){n={error:_}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return c},e.prototype.onInit=function(t,n){var r,i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);var a=this.instances.get(i);return a&&t(a,i),function(){s.delete(t)}},e.prototype.invokeOnInitCallbacks=function(t,n){var r,i,s=this.onInitCallbacks.get(n);if(s)try{for(var a=Xp(s),c=a.next();!c.done;c=a.next()){var l=c.value;try{l(t,n)}catch{}}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype.getOrInitializeService=function(t){var n=t.instanceIdentifier,r=t.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:UK(n),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch{}return s||null},e.prototype.normalizeInstanceIdentifier=function(t){return t===void 0&&(t=Bs),this.component?this.component.multipleInstances?t:Bs:t},e.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},e}();RN=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new jK(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()});function zr(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,c=s.length;a<c;a++,i++)r[i]=s[a];return r}function kN(e){hI.forEach(function(t){t.setLogLevel(e)})}function PN(e,t){for(var n=function(a){var c=null;t&&t.level&&(c=DN[t.level]),e===null?a.userLogHandler=null:a.userLogHandler=function(l,d){for(var p=[],g=2;g<arguments.length;g++)p[g-2]=arguments[g];var v=p.map(function(b){if(b==null)return null;if(typeof b=="string")return b;if(typeof b=="number"||typeof b=="boolean")return b.toString();if(b instanceof Error)return b.message;try{return JSON.stringify(b)}catch{return null}}).filter(function(b){return b}).join(" ");d>=(c??l.logLevel)&&e({level:Ft[d].toLowerCase(),message:v,args:p,type:l.name})}},r=0,i=hI;r<i.length;r++){var s=i[r];n(s)}}var qs,hI,Ft,DN,qK,zK,GK,Lm,Fm=Ur(()=>{"use strict";hI=[],Ft=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(Ft||{}),DN={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},qK=Ft.INFO,zK=(qs={},qs[Ft.DEBUG]="log",qs[Ft.VERBOSE]="log",qs[Ft.INFO]="info",qs[Ft.WARN]="warn",qs[Ft.ERROR]="error",qs),GK=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=new Date().toISOString(),s=zK[t];if(s)console[s].apply(console,zr(["["+i+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},Lm=function(){function e(t){this.name=t,this._logLevel=qK,this._logHandler=GK,this._userLogHandler=null,hI.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ft))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?DN[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zr([this,Ft.DEBUG],t)),this._logHandler.apply(this,zr([this,Ft.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zr([this,Ft.VERBOSE],t)),this._logHandler.apply(this,zr([this,Ft.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zr([this,Ft.INFO],t)),this._logHandler.apply(this,zr([this,Ft.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zr([this,Ft.WARN],t)),this._logHandler.apply(this,zr([this,Ft.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zr([this,Ft.ERROR],t)),this._logHandler.apply(this,zr([this,Ft.ERROR],t))},e}()});function a9(e){var t={},n=new Map,r={__esModule:!0,initializeApp:a,app:s,registerVersion:d,setLogLevel:kN,onLog:p,apps:null,SDK_VERSION:s9,INTERNAL:{registerComponent:l,removeApp:i,components:n,useAsService:g}};r.default=r,Object.defineProperty(r,"apps",{get:c});function i(v){delete t[v]}function s(v){if(v=v||jm,!cI(t,v))throw Nu.create("no-app",{appName:v});return t[v]}s.App=e;function a(v,b){if(b===void 0&&(b={}),typeof b!="object"||b===null){var _=b;b={name:_}}var I=b;I.name===void 0&&(I.name=jm);var T=I.name;if(typeof T!="string"||!T)throw Nu.create("bad-app-name",{appName:String(T)});if(cI(t,T))throw Nu.create("duplicate-app",{appName:T});var S=new e(v,I,r);return t[T]=S,S}function c(){return Object.keys(t).map(function(v){return t[v]})}function l(v){var b=v.name;if(n.has(b))return Ou.debug("There were multiple attempts to register component "+b+"."),v.type==="PUBLIC"?r[b]:null;if(n.set(b,v),v.type==="PUBLIC"){var _=function(M){if(M===void 0&&(M=s()),typeof M[b]!="function")throw Nu.create("invalid-app-argument",{appName:b});return M[b]()};v.serviceProps!==void 0&&ku(_,v.serviceProps),r[b]=_,e.prototype[b]=function(){for(var M=[],k=0;k<arguments.length;k++)M[k]=arguments[k];var z=this._getService.bind(this,b);return z.apply(this,v.multipleInstances?M:[])}}for(var I=0,T=Object.keys(t);I<T.length;I++){var S=T[I];t[S]._addComponent(v)}return v.type==="PUBLIC"?r[b]:null}function d(v,b,_){var I,T=(I=o9[v])!==null&&I!==void 0?I:v;_&&(T+="-"+_);var S=T.match(/\s|\//),M=b.match(/\s|\//);if(S||M){var k=['Unable to register library "'+T+'" with version "'+b+'":'];S&&k.push('library name "'+T+'" contains illegal characters (whitespace or "/")'),S&&M&&k.push("and"),M&&k.push('version name "'+b+'" contains illegal characters (whitespace or "/")'),Ou.warn(k.join(" "));return}l(new Pu(T+"-version",function(){return{library:T,version:b}},"VERSION"))}function p(v,b){if(v!==null&&typeof v!="function")throw Nu.create("invalid-log-argument");PN(v,b)}function g(v,b){if(b==="serverAuth")return null;var _=b;return _}return r}function ON(){var e=a9(Vm);e.INTERNAL=Jl(Jl({},e.INTERNAL),{createFirebaseNamespace:ON,extendNamespace:t,createSubscribe:CN,ErrorFactory:Mm,deepExtend:ku});function t(n){ku(e,n)}return e}function c9(e){var t=e.getComponent();return t?.type==="VERSION"}function l9(e,t){e.INTERNAL.registerComponent(new Pu("platform-logger",function(n){return new u9(n)},"PRIVATE")),e.registerVersion(NN,$K,t),e.registerVersion("fire-js","")}var So,KK,Nu,NN,$K,HK,WK,QK,YK,XK,JK,ZK,t9,e9,n9,r9,i9,pn,jm,o9,Ou,Vm,s9,fI,u9,dI,h9,MN,dt,jh=Ur(()=>{"use strict";Jp();Vh();lI();Fm();KK=(So={},So["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",So["bad-app-name"]="Illegal App name: '{$appName}",So["duplicate-app"]="Firebase App named '{$appName}' already exists",So["app-deleted"]="Firebase App named '{$appName}' already deleted",So["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",So["invalid-log-argument"]="First argument to `onLog` must be null or a function.",So),Nu=new Mm("app","Firebase",KK),NN="@firebase/app",$K="0.6.30",HK="@firebase/analytics",WK="@firebase/app-check",QK="@firebase/auth",YK="@firebase/database",XK="@firebase/functions",JK="@firebase/installations",ZK="@firebase/messaging",t9="@firebase/performance",e9="@firebase/remote-config",n9="@firebase/storage",r9="@firebase/firestore",i9="firebase-wrapper";jm="[DEFAULT]",o9=(pn={},pn[NN]="fire-core",pn[HK]="fire-analytics",pn[WK]="fire-app-check",pn[QK]="fire-auth",pn[YK]="fire-rtdb",pn[XK]="fire-fn",pn[JK]="fire-iid",pn[ZK]="fire-fcm",pn[t9]="fire-perf",pn[e9]="fire-rc",pn[n9]="fire-gcs",pn[r9]="fire-fst",pn["fire-js"]="fire-js",pn[i9]="fire-js-all",pn);Ou=new Lm("@firebase/app");Vm=function(){function e(t,n,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=vN(t),this.container=new RN(n.name),this._addComponent(new Pu("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(s){return i._addComponent(s)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){var r;n===void 0&&(n=jm),this.checkDestroyed_();var i=this.container.getProvider(t);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=jm),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){Ou.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Nu.create("app-deleted",{appName:this.name_})},e}();Vm.prototype.name&&Vm.prototype.options||Vm.prototype.delete||console.log("dc");s9="8.10.0";fI=ON();u9=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(c9(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();_N()&&self.firebase!==void 0&&(Ou.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `),dI=self.firebase.SDK_VERSION,dI&&dI.indexOf("LITE")>=0&&Ou.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `));h9=fI.initializeApp;fI.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return uI()&&Ou.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),h9.apply(void 0,e)};MN=fI;l9(MN);dt=MN});var FN={};a6(FN,{default:()=>dt});var d9,LN,VN=Ur(()=>{"use strict";jh();jh();d9="firebase",LN="8.10.1";dt.registerVersion(d9,LN,"app");dt.SDK_VERSION=LN});var jN=Ur(()=>{"use strict";jh();(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){o!=Array.prototype&&o!=Object.prototype&&(o[u]=h.value)};function n(o){o=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,o];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}return globalThis}var r=n(this);function i(o,u){if(u){var h=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var m=o[f];m in h||(h[m]={}),h=h[m]}o=o[o.length-1],f=h[o],u=u(f),u!=f&&u!=null&&t(h,o,{configurable:!0,writable:!0,value:u})}}function s(o){var u=0;return function(){return u<o.length?{done:!1,value:o[u++]}:{done:!0}}}function a(o){var u=typeof Symbol<"u"&&Symbol.iterator&&o[Symbol.iterator];return u?u.call(o):{next:s(o)}}i("Promise",function(o){function u(w){this.b=0,this.c=void 0,this.a=[];var E=this.f();try{w(E.resolve,E.reject)}catch(P){E.reject(P)}}function h(){this.a=null}function f(w){return w instanceof u?w:new u(function(E){E(w)})}if(o)return o;h.prototype.b=function(w){if(this.a==null){this.a=[];var E=this;this.c(function(){E.g()})}this.a.push(w)};var m=r.setTimeout;h.prototype.c=function(w){m(w,0)},h.prototype.g=function(){for(;this.a&&this.a.length;){var w=this.a;this.a=[];for(var E=0;E<w.length;++E){var P=w[E];w[E]=null;try{P()}catch(V){this.f(V)}}}this.a=null},h.prototype.f=function(w){this.c(function(){throw w})},u.prototype.f=function(){function w(V){return function(pt){P||(P=!0,V.call(E,pt))}}var E=this,P=!1;return{resolve:w(this.m),reject:w(this.g)}},u.prototype.m=function(w){if(w===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(w instanceof u)this.s(w);else{t:switch(typeof w){case"object":var E=w!=null;break t;case"function":E=!0;break t;default:E=!1}E?this.v(w):this.h(w)}},u.prototype.v=function(w){var E=void 0;try{E=w.then}catch(P){this.g(P);return}typeof E=="function"?this.u(E,w):this.h(w)},u.prototype.g=function(w){this.i(2,w)},u.prototype.h=function(w){this.i(1,w)},u.prototype.i=function(w,E){if(this.b!=0)throw Error("Cannot settle("+w+", "+E+"): Promise already settled in state"+this.b);this.b=w,this.c=E,this.l()},u.prototype.l=function(){if(this.a!=null){for(var w=0;w<this.a.length;++w)y.b(this.a[w]);this.a=null}};var y=new h;return u.prototype.s=function(w){var E=this.f();w.Ra(E.resolve,E.reject)},u.prototype.u=function(w,E){var P=this.f();try{w.call(E,P.resolve,P.reject)}catch(V){P.reject(V)}},u.prototype.then=function(w,E){function P(Lt,ze){return typeof Lt=="function"?function(Vi){try{V(Lt(Vi))}catch(Lw){pt(Lw)}}:ze}var V,pt,Bt=new u(function(Lt,ze){V=Lt,pt=ze});return this.Ra(P(w,V),P(E,pt)),Bt},u.prototype.catch=function(w){return this.then(void 0,w)},u.prototype.Ra=function(w,E){function P(){switch(V.b){case 1:w(V.c);break;case 2:E(V.c);break;default:throw Error("Unexpected state: "+V.b)}}var V=this;this.a==null?y.b(P):this.a.push(P)},u.resolve=f,u.reject=function(w){return new u(function(E,P){P(w)})},u.race=function(w){return new u(function(E,P){for(var V=a(w),pt=V.next();!pt.done;pt=V.next())f(pt.value).Ra(E,P)})},u.all=function(w){var E=a(w),P=E.next();return P.done?f([]):new u(function(V,pt){function Bt(Vi){return function(Lw){Lt[Vi]=Lw,ze--,ze==0&&V(Lt)}}var Lt=[],ze=0;do Lt.push(void 0),ze++,f(P.value).Ra(Bt(Lt.length-1),pt),P=E.next();while(!P.done)})},u});var c=c||{},l=this||self,d=/^[\w+/_-]+[=]{0,2}$/,p=null;function g(o){return(o=o.querySelector&&o.querySelector("script[nonce]"))&&(o=o.nonce||o.getAttribute("nonce"))&&d.test(o)?o:""}function v(){}function b(o){var u=typeof o;return u!="object"?u:o?Array.isArray(o)?"array":u:"null"}function _(o){var u=b(o);return u=="array"||u=="object"&&typeof o.length=="number"}function I(o){return b(o)=="function"}function T(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function S(o){return Object.prototype.hasOwnProperty.call(o,M)&&o[M]||(o[M]=++k)}var M="closure_uid_"+(1e9*Math.random()>>>0),k=0;function z(o,u,h){return o.call.apply(o.bind,arguments)}function H(o,u,h){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var m=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(m,f),o.apply(u,m)}}return function(){return o.apply(u,arguments)}}function L(o,u,h){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?L=z:L=H,L.apply(null,arguments)}function mt(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),o.apply(this,f)}}var fn=Date.now;function ht(o,u){function h(){}h.prototype=u.prototype,o.bb=u.prototype,o.prototype=new h,o.prototype.constructor=o}function Pi(o){return o}function A(o,u,h){this.code=fl+o,this.message=u||nq[o]||"",this.a=h||null}ht(A,Error),A.prototype.w=function(){var o={code:this.code,message:this.message};return this.a&&(o.serverResponse=this.a),o},A.prototype.toJSON=function(){return this.w()};function x1(o){var u=o&&o.code;return u?new A(u.substring(fl.length),o.message,o.serverResponse):null}var fl="auth/",nq={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},nb={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function pl(o){for(var u in nb)if(nb[u].id===o)return o=nb[u],{firebaseEndpoint:o.Ua,secureTokenEndpoint:o.$a,identityPlatformEndpoint:o.Xa};return null}var ml;ml=pl("__EID__")?"__EID__":void 0;function C1(o){if(!o)return!1;try{return!!o.$goog_Thenable}catch{return!1}}function Jn(o){if(Error.captureStackTrace)Error.captureStackTrace(this,Jn);else{var u=Error().stack;u&&(this.stack=u)}o&&(this.message=String(o))}ht(Jn,Error),Jn.prototype.name="CustomError";function rb(o,u){o=o.split("%s");for(var h="",f=o.length-1,m=0;m<f;m++)h+=o[m]+(m<u.length?u[m]:"%s");Jn.call(this,h+o[f])}ht(rb,Jn),rb.prototype.name="AssertionError";function Ga(o,u){throw new rb("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1))}function ib(o,u){this.c=o,this.f=u,this.b=0,this.a=null}ib.prototype.get=function(){if(0<this.b){this.b--;var o=this.a;this.a=o.next,o.next=null}else o=this.c();return o};function R1(o,u){o.f(u),100>o.b&&(o.b++,u.next=o.a,o.a=u)}function D1(){this.b=this.a=null}var k1=new ib(function(){return new ob},function(o){o.reset()});D1.prototype.add=function(o,u){var h=k1.get();h.set(o,u),this.b?this.b.next=h:this.a=h,this.b=h};function rq(){var o=iC,u=null;return o.a&&(u=o.a,o.a=o.a.next,o.a||(o.b=null),u.next=null),u}function ob(){this.next=this.b=this.a=null}ob.prototype.set=function(o,u){this.a=o,this.b=u,this.next=null},ob.prototype.reset=function(){this.next=this.b=this.a=null};var P1=Array.prototype.indexOf?function(o,u){return Array.prototype.indexOf.call(o,u,void 0)}:function(o,u){if(typeof o=="string")return typeof u!="string"||u.length!=1?-1:o.indexOf(u,0);for(var h=0;h<o.length;h++)if(h in o&&o[h]===u)return h;return-1},se=Array.prototype.forEach?function(o,u,h){Array.prototype.forEach.call(o,u,h)}:function(o,u,h){for(var f=o.length,m=typeof o=="string"?o.split(""):o,y=0;y<f;y++)y in m&&u.call(h,m[y],y,o)};function iq(o,u){for(var h=typeof o=="string"?o.split(""):o,f=o.length-1;0<=f;--f)f in h&&u.call(void 0,h[f],f,o)}var oq=Array.prototype.filter?function(o,u){return Array.prototype.filter.call(o,u,void 0)}:function(o,u){for(var h=o.length,f=[],m=0,y=typeof o=="string"?o.split(""):o,w=0;w<h;w++)if(w in y){var E=y[w];u.call(void 0,E,w,o)&&(f[m++]=E)}return f},Hf=Array.prototype.map?function(o,u){return Array.prototype.map.call(o,u,void 0)}:function(o,u){for(var h=o.length,f=Array(h),m=typeof o=="string"?o.split(""):o,y=0;y<h;y++)y in m&&(f[y]=u.call(void 0,m[y],y,o));return f},sq=Array.prototype.some?function(o,u){return Array.prototype.some.call(o,u,void 0)}:function(o,u){for(var h=o.length,f=typeof o=="string"?o.split(""):o,m=0;m<h;m++)if(m in f&&u.call(void 0,f[m],m,o))return!0;return!1};function aq(o){t:{for(var u=U3,h=o.length,f=typeof o=="string"?o.split(""):o,m=0;m<h;m++)if(m in f&&u.call(void 0,f[m],m,o)){u=m;break t}u=-1}return 0>u?null:typeof o=="string"?o.charAt(u):o[u]}function Ni(o,u){return 0<=P1(o,u)}function Wf(o,u){u=P1(o,u);var h;return(h=0<=u)&&Array.prototype.splice.call(o,u,1),h}function Nr(o,u){var h=0;iq(o,function(f,m){u.call(void 0,f,m,o)&&Array.prototype.splice.call(o,m,1).length==1&&h++})}function sb(o){return Array.prototype.concat.apply([],arguments)}function fs(o){var u=o.length;if(0<u){for(var h=Array(u),f=0;f<u;f++)h[f]=o[f];return h}return[]}var N1=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]},uq=/&/g,cq=/</g,lq=/>/g,hq=/"/g,dq=/'/g,fq=/\x00/g,pq=/[\x00&<>"']/;function Wt(o,u){return o.indexOf(u)!=-1}function ab(o,u){return o<u?-1:o>u?1:0}var Ka;t:{var O1=l.navigator;if(O1){var M1=O1.userAgent;if(M1){Ka=M1;break t}}Ka=""}function Fe(o){return Wt(Ka,o)}function L1(o,u){for(var h in o)u.call(void 0,o[h],h,o)}function ps(o){for(var u in o)return!1;return!0}function ro(o){var u={},h;for(h in o)u[h]=o[h];return u}var F1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fn(o,u){for(var h,f,m=1;m<arguments.length;m++){f=arguments[m];for(h in f)o[h]=f[h];for(var y=0;y<F1.length;y++)h=F1[y],Object.prototype.hasOwnProperty.call(f,h)&&(o[h]=f[h])}}function V1(o,u){t:{try{var h=o&&o.ownerDocument,f=h&&(h.defaultView||h.parentWindow);if(f=f||l,f.Element&&f.Location){var m=f;break t}}catch{}m=null}if(m&&typeof m[u]<"u"&&(!o||!(o instanceof m[u])&&(o instanceof m.Location||o instanceof m.Element))){if(T(o))try{var y=o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o)}catch{y="<object could not be stringified>"}else y=o===void 0?"undefined":o===null?"null":typeof o;Ga("Argument is not a %s (or a non-Element, non-Location mock); got: %s",u,y)}}function ti(o,u){this.a=o===Qf&&u||"",this.b=j1}ti.prototype.ta=!0,ti.prototype.sa=function(){return this.a},ti.prototype.toString=function(){return"Const{"+this.a+"}"};function ub(o){return o instanceof ti&&o.constructor===ti&&o.b===j1?o.a:(Ga("expected object of type Const, got '"+o+"'"),"type_error:Const")}var j1={},Qf={},Yf;function U1(){if(Yf===void 0){var o=null,u=l.trustedTypes;if(u&&u.createPolicy){try{o=u.createPolicy("goog#html",{createHTML:Pi,createScript:Pi,createScriptURL:Pi})}catch(h){l.console&&l.console.error(h.message)}Yf=o}else Yf=o}return Yf}function $a(o,u){this.a=u===q1?o:""}$a.prototype.ta=!0,$a.prototype.sa=function(){return this.a.toString()},$a.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function B1(o){return o instanceof $a&&o.constructor===$a?o.a:(Ga("expected object of type TrustedResourceUrl, got '"+o+"' of type "+b(o)),"type_error:TrustedResourceUrl")}function cb(o,u){var h=ub(o);if(!gq.test(h))throw Error("Invalid TrustedResourceUrl format: "+h);return o=h.replace(mq,function(f,m){if(!Object.prototype.hasOwnProperty.call(u,m))throw Error('Found marker, "'+m+'", in format string, "'+h+'", but no valid label mapping found in args: '+JSON.stringify(u));return f=u[m],f instanceof ti?ub(f):encodeURIComponent(String(f))}),vq(o)}var mq=/%{(\w+)}/g,gq=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,q1={};function vq(o){var u=U1();return o=u?u.createScriptURL(o):o,new $a(o,q1)}function Vn(o,u){this.a=u===gl?o:""}Vn.prototype.ta=!0,Vn.prototype.sa=function(){return this.a.toString()},Vn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Xf(o){return o instanceof Vn&&o.constructor===Vn?o.a:(Ga("expected object of type SafeUrl, got '"+o+"' of type "+b(o)),"type_error:SafeUrl")}var yq=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,bq=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,z1=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function G1(o){if(o instanceof Vn)return o;if(o=typeof o=="object"&&o.ta?o.sa():String(o),z1.test(o))o=new Vn(o,gl);else{o=String(o),o=o.replace(/(%0A|%0D)/g,"");var u=o.match(bq);o=u&&yq.test(u[1])?new Vn(o,gl):null}return o}function K1(o){return o instanceof Vn?o:(o=typeof o=="object"&&o.ta?o.sa():String(o),z1.test(o)||(o="about:invalid#zClosurez"),new Vn(o,gl))}var gl={},$1=new Vn("about:invalid#zClosurez",gl);function Ha(o,u,h){this.a=h===H1?o:""}Ha.prototype.ta=!0,Ha.prototype.sa=function(){return this.a.toString()},Ha.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function wq(o){return o instanceof Ha&&o.constructor===Ha?o.a:(Ga("expected object of type SafeHtml, got '"+o+"' of type "+b(o)),"type_error:SafeHtml")}var H1={};function _q(o,u){V1(o,"HTMLScriptElement"),o.src=B1(u),(u=o.ownerDocument&&o.ownerDocument.defaultView)&&u!=l?u=g(u.document):(p===null&&(p=g(l.document)),u=p),u&&o.setAttribute("nonce",u)}function W1(o,u,h,f){return o=o instanceof Vn?o:K1(o),u=u||l,h=h instanceof ti?ub(h):h||"",u.open(Xf(o),h,f,void 0)}function Q1(o,u){for(var h=o.split("%s"),f="",m=Array.prototype.slice.call(arguments,1);m.length&&1<h.length;)f+=h.shift()+m.shift();return f+h.join("%s")}function lb(o){return pq.test(o)&&(o.indexOf("&")!=-1&&(o=o.replace(uq,"&amp;")),o.indexOf("<")!=-1&&(o=o.replace(cq,"&lt;")),o.indexOf(">")!=-1&&(o=o.replace(lq,"&gt;")),o.indexOf('"')!=-1&&(o=o.replace(hq,"&quot;")),o.indexOf("'")!=-1&&(o=o.replace(dq,"&#39;")),o.indexOf("\0")!=-1&&(o=o.replace(fq,"&#0;"))),o}function hb(o){return hb[" "](o),o}hb[" "]=v;function Iq(o,u){var h=Sq;return Object.prototype.hasOwnProperty.call(h,o)?h[o]:h[o]=u(o)}var Eq=Fe("Opera"),Or=Fe("Trident")||Fe("MSIE"),Y1=Fe("Edge"),Tq=Y1||Or,X1=Fe("Gecko")&&!(Wt(Ka.toLowerCase(),"webkit")&&!Fe("Edge"))&&!(Fe("Trident")||Fe("MSIE"))&&!Fe("Edge"),Aq=Wt(Ka.toLowerCase(),"webkit")&&!Fe("Edge");function J1(){var o=l.document;return o?o.documentMode:void 0}var Jf;t:{var db="",fb=function(){var o=Ka;if(X1)return/rv:([^\);]+)(\)|;)/.exec(o);if(Y1)return/Edge\/([\d\.]+)/.exec(o);if(Or)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o);if(Aq)return/WebKit\/(\S+)/.exec(o);if(Eq)return/(?:Version)[ \/]?(\S+)/.exec(o)}();if(fb&&(db=fb?fb[1]:""),Or){var pb=J1();if(pb!=null&&pb>parseFloat(db)){Jf=String(pb);break t}}Jf=db}var Sq={};function Z1(o){return Iq(o,function(){for(var u=0,h=N1(String(Jf)).split("."),f=N1(String(o)).split("."),m=Math.max(h.length,f.length),y=0;u==0&&y<m;y++){var w=h[y]||"",E=f[y]||"";do{if(w=/(\d*)(\D*)(.*)/.exec(w)||["","","",""],E=/(\d*)(\D*)(.*)/.exec(E)||["","","",""],w[0].length==0&&E[0].length==0)break;u=ab(w[1].length==0?0:parseInt(w[1],10),E[1].length==0?0:parseInt(E[1],10))||ab(w[2].length==0,E[2].length==0)||ab(w[2],E[2]),w=w[3],E=E[3]}while(u==0)}return 0<=u})}var mb;if(l.document&&Or){var tC=J1();mb=tC||parseInt(Jf,10)||void 0}else mb=void 0;var io=mb;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var xq=!Or||9<=Number(io);function vl(o){var u=document;return typeof o=="string"?u.getElementById(o):o}function eC(o,u){L1(u,function(h,f){h&&typeof h=="object"&&h.ta&&(h=h.sa()),f=="style"?o.style.cssText=h:f=="class"?o.className=h:f=="for"?o.htmlFor=h:nC.hasOwnProperty(f)?o.setAttribute(nC[f],h):f.lastIndexOf("aria-",0)==0||f.lastIndexOf("data-",0)==0?o.setAttribute(f,h):o[f]=h})}var nC={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Cq(o,u,h){var f=arguments,m=document,y=String(f[0]),w=f[1];if(!xq&&w&&(w.name||w.type)){if(y=["<",y],w.name&&y.push(' name="',lb(w.name),'"'),w.type){y.push(' type="',lb(w.type),'"');var E={};Fn(E,w),delete E.type,w=E}y.push(">"),y=y.join("")}return y=Zf(m,y),w&&(typeof w=="string"?y.className=w:Array.isArray(w)?y.className=w.join(" "):eC(y,w)),2<f.length&&Rq(m,y,f),y}function Rq(o,u,h){function f(E){E&&u.appendChild(typeof E=="string"?o.createTextNode(E):E)}for(var m=2;m<h.length;m++){var y=h[m];if(!_(y)||T(y)&&0<y.nodeType)f(y);else{t:{if(y&&typeof y.length=="number"){if(T(y)){var w=typeof y.item=="function"||typeof y.item=="string";break t}if(I(y)){w=typeof y.item=="function";break t}}w=!1}se(w?fs(y):y,f)}}}function Zf(o,u){return u=String(u),o.contentType==="application/xhtml+xml"&&(u=u.toLowerCase()),o.createElement(u)}function rC(o){l.setTimeout(function(){throw o},0)}var gb;function Dq(){var o=l.MessageChannel;if(typeof o>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Fe("Presto")&&(o=function(){var m=Zf(document,"IFRAME");m.style.display="none",document.documentElement.appendChild(m);var y=m.contentWindow;m=y.document,m.open(),m.close();var w="callImmediate"+Math.random(),E=y.location.protocol=="file:"?"*":y.location.protocol+"//"+y.location.host;m=L(function(P){(E=="*"||P.origin==E)&&P.data==w&&this.port1.onmessage()},this),y.addEventListener("message",m,!1),this.port1={},this.port2={postMessage:function(){y.postMessage(w,E)}}}),typeof o<"u"&&!Fe("Trident")&&!Fe("MSIE")){var u=new o,h={},f=h;return u.port1.onmessage=function(){if(h.next!==void 0){h=h.next;var m=h.Hb;h.Hb=null,m()}},function(m){f.next={Hb:m},f=f.next,u.port2.postMessage(0)}}return function(m){l.setTimeout(m,0)}}function tp(o,u){ep||kq(),vb||(ep(),vb=!0),iC.add(o,u)}var ep;function kq(){if(l.Promise&&l.Promise.resolve){var o=l.Promise.resolve(void 0);ep=function(){o.then(oC)}}else ep=function(){var u=oC;!I(l.setImmediate)||l.Window&&l.Window.prototype&&!Fe("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(gb||(gb=Dq()),gb(u)):l.setImmediate(u)}}var vb=!1,iC=new D1;function oC(){for(var o;o=rq();){try{o.a.call(o.b)}catch(u){rC(u)}R1(k1,o)}vb=!1}function St(o,u){if(this.a=ms,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,o!=v)try{var h=this;o.call(u,function(f){gs(h,yl,f)},function(f){if(!(f instanceof Wa))try{throw f instanceof Error?f:Error("Promise rejected.")}catch{}gs(h,Oi,f)})}catch(f){gs(this,Oi,f)}}var ms=0,yl=2,Oi=3;function sC(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}sC.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var aC=new ib(function(){return new sC},function(o){o.reset()});function yb(o,u,h){var f=aC.get();return f.g=o,f.b=u,f.f=h,f}function at(o){if(o instanceof St)return o;var u=new St(v);return gs(u,yl,o),u}function ee(o){return new St(function(u,h){h(o)})}function uC(o,u,h){dC(o,u,h,null)||tp(mt(u,o))}function Pq(o){return new St(function(u,h){var f=o.length,m=[];if(f)for(var y=function(V,pt){f--,m[V]=pt,f==0&&u(m)},w=function(V){h(V)},E=0,P;E<o.length;E++)P=o[E],uC(P,mt(y,E),w);else u(m)})}function cC(o){return new St(function(u){var h=o.length,f=[];if(h)for(var m=function(E,P,V){h--,f[E]=P?{Qb:!0,value:V}:{Qb:!1,reason:V},h==0&&u(f)},y=0,w;y<o.length;y++)w=o[y],uC(w,mt(m,y,!0),mt(m,y,!1));else u(f)})}St.prototype.then=function(o,u,h){return hC(this,I(o)?o:null,I(u)?u:null,h)},St.prototype.$goog_Thenable=!0,e=St.prototype,e.oa=function(o,u){return o=yb(o,o,u),o.c=!0,bb(this,o),this},e.o=function(o,u){return hC(this,null,o,u)},e.cancel=function(o){if(this.a==ms){var u=new Wa(o);tp(function(){lC(this,u)},this)}};function lC(o,u){if(o.a==ms)if(o.c){var h=o.c;if(h.b){for(var f=0,m=null,y=null,w=h.b;w&&(w.c||(f++,w.a==o&&(m=w),!(m&&1<f)));w=w.next)m||(y=w);m&&(h.a==ms&&f==1?lC(h,u):(y?(f=y,f.next==h.f&&(h.f=f),f.next=f.next.next):pC(h),mC(h,m,Oi,u)))}o.c=null}else gs(o,Oi,u)}function bb(o,u){o.b||o.a!=yl&&o.a!=Oi||fC(o),o.f?o.f.next=u:o.b=u,o.f=u}function hC(o,u,h,f){var m=yb(null,null,null);return m.a=new St(function(y,w){m.g=u?function(E){try{var P=u.call(f,E);y(P)}catch(V){w(V)}}:y,m.b=h?function(E){try{var P=h.call(f,E);P===void 0&&E instanceof Wa?w(E):y(P)}catch(V){w(V)}}:w}),m.a.c=o,bb(o,m),m.a}e.$c=function(o){this.a=ms,gs(this,yl,o)},e.ad=function(o){this.a=ms,gs(this,Oi,o)};function gs(o,u,h){o.a==ms&&(o===h&&(u=Oi,h=new TypeError("Promise cannot resolve to itself")),o.a=1,dC(h,o.$c,o.ad,o)||(o.i=h,o.a=u,o.c=null,fC(o),u!=Oi||h instanceof Wa||Oq(o,h)))}function dC(o,u,h,f){if(o instanceof St)return bb(o,yb(u||v,h||null,f)),!0;if(C1(o))return o.then(u,h,f),!0;if(T(o))try{var m=o.then;if(I(m))return Nq(o,m,u,h,f),!0}catch(y){return h.call(f,y),!0}return!1}function Nq(o,u,h,f,m){function y(P){E||(E=!0,f.call(m,P))}function w(P){E||(E=!0,h.call(m,P))}var E=!1;try{u.call(o,w,y)}catch(P){y(P)}}function fC(o){o.h||(o.h=!0,tp(o.gc,o))}function pC(o){var u=null;return o.b&&(u=o.b,o.b=u.next,u.next=null),o.b||(o.f=null),u}e.gc=function(){for(var o;o=pC(this);)mC(this,o,this.a,this.i);this.h=!1};function mC(o,u,h,f){if(h==Oi&&u.b&&!u.c)for(;o&&o.g;o=o.c)o.g=!1;if(u.a)u.a.c=null,gC(u,h,f);else try{u.c?u.g.call(u.f):gC(u,h,f)}catch(m){vC.call(null,m)}R1(aC,u)}function gC(o,u,h){u==yl?o.g.call(o.f,h):o.b&&o.b.call(o.f,h)}function Oq(o,u){o.g=!0,tp(function(){o.g&&vC.call(null,u)})}var vC=rC;function Wa(o){Jn.call(this,o)}ht(Wa,Jn),Wa.prototype.name="cancel";function np(){wb!=0&&(yC[S(this)]=this),this.ya=this.ya,this.pa=this.pa}var wb=0,yC={};np.prototype.ya=!1;function bC(o){if(!o.ya&&(o.ya=!0,o.Da(),wb!=0)){var u=S(o);if(wb!=0&&o.pa&&0<o.pa.length)throw Error(o+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete yC[u]}}np.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Mq=Object.freeze||function(o){return o},wC=!Or||9<=Number(io),Lq=Or&&!Z1("9"),Fq=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{l.addEventListener("test",v,u),l.removeEventListener("test",v,u)}catch{}return o}();function jn(o,u){this.type=o,this.b=this.target=u,this.defaultPrevented=!1}jn.prototype.preventDefault=function(){this.defaultPrevented=!0};function vs(o,u){if(jn.call(this,o?o.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,o){var h=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.b=u,u=o.relatedTarget){if(X1){t:{try{hb(u.nodeName);var m=!0;break t}catch{}m=!1}m||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Vq[o.pointerType]||"",this.a=o,o.defaultPrevented&&this.preventDefault()}}ht(vs,jn);var Vq=Mq({2:"touch",3:"pen",4:"mouse"});vs.prototype.preventDefault=function(){vs.bb.preventDefault.call(this);var o=this.a;if(o.preventDefault)o.preventDefault();else if(o.returnValue=!1,Lq)try{(o.ctrlKey||112<=o.keyCode&&123>=o.keyCode)&&(o.keyCode=-1)}catch{}},vs.prototype.g=function(){return this.a};var bl="closure_listenable_"+(1e6*Math.random()|0),jq=0;function Uq(o,u,h,f,m){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!f,this.Wa=m,this.key=++jq,this.wa=this.Qa=!1}function rp(o){o.wa=!0,o.listener=null,o.proxy=null,o.src=null,o.Wa=null}function ip(o){this.src=o,this.a={},this.b=0}ip.prototype.add=function(o,u,h,f,m){var y=o.toString();o=this.a[y],o||(o=this.a[y]=[],this.b++);var w=Ib(o,u,f,m);return-1<w?(u=o[w],h||(u.Qa=!1)):(u=new Uq(u,this.src,y,!!f,m),u.Qa=h,o.push(u)),u};function _b(o,u){var h=u.type;h in o.a&&Wf(o.a[h],u)&&(rp(u),o.a[h].length==0&&(delete o.a[h],o.b--))}function Ib(o,u,h,f){for(var m=0;m<o.length;++m){var y=o[m];if(!y.wa&&y.listener==u&&y.capture==!!h&&y.Wa==f)return m}return-1}var Eb="closure_lm_"+(1e6*Math.random()|0),Tb={},_C=0;function yr(o,u,h,f,m){if(f&&f.once)Ab(o,u,h,f,m);else if(Array.isArray(u))for(var y=0;y<u.length;y++)yr(o,u[y],h,f,m);else h=xb(h),o&&o[bl]?xC(o,u,h,T(f)?!!f.capture:!!f,m):IC(o,u,h,!1,f,m)}function IC(o,u,h,f,m,y){if(!u)throw Error("Invalid event type");var w=T(m)?!!m.capture:!!m,E=op(o);if(E||(o[Eb]=E=new ip(o)),h=E.add(u,h,f,w,y),!h.proxy){if(f=Bq(),h.proxy=f,f.src=o,f.listener=h,o.addEventListener)Fq||(m=w),m===void 0&&(m=!1),o.addEventListener(u.toString(),f,m);else if(o.attachEvent)o.attachEvent(TC(u.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");_C++}}function Bq(){var o=qq,u=wC?function(h){return o.call(u.src,u.listener,h)}:function(h){if(h=o.call(u.src,u.listener,h),!h)return h};return u}function Ab(o,u,h,f,m){if(Array.isArray(u))for(var y=0;y<u.length;y++)Ab(o,u[y],h,f,m);else h=xb(h),o&&o[bl]?Cb(o,u,h,T(f)?!!f.capture:!!f,m):IC(o,u,h,!0,f,m)}function Zn(o,u,h,f,m){if(Array.isArray(u))for(var y=0;y<u.length;y++)Zn(o,u[y],h,f,m);else f=T(f)?!!f.capture:!!f,h=xb(h),o&&o[bl]?(o=o.v,u=String(u).toString(),u in o.a&&(y=o.a[u],h=Ib(y,h,f,m),-1<h&&(rp(y[h]),Array.prototype.splice.call(y,h,1),y.length==0&&(delete o.a[u],o.b--)))):o&&(o=op(o))&&(u=o.a[u.toString()],o=-1,u&&(o=Ib(u,h,f,m)),(h=-1<o?u[o]:null)&&EC(h))}function EC(o){if(typeof o!="number"&&o&&!o.wa){var u=o.src;if(u&&u[bl])_b(u.v,o);else{var h=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(h,f,o.capture):u.detachEvent?u.detachEvent(TC(h),f):u.addListener&&u.removeListener&&u.removeListener(f),_C--,(h=op(u))?(_b(h,o),h.b==0&&(h.src=null,u[Eb]=null)):rp(o)}}}function TC(o){return o in Tb?Tb[o]:Tb[o]="on"+o}function AC(o,u,h,f){var m=!0;if((o=op(o))&&(u=o.a[u.toString()]))for(u=u.concat(),o=0;o<u.length;o++){var y=u[o];y&&y.capture==h&&!y.wa&&(y=SC(y,f),m=m&&y!==!1)}return m}function SC(o,u){var h=o.listener,f=o.Wa||o.src;return o.Qa&&EC(o),h.call(f,u)}function qq(o,u){if(o.wa)return!0;if(!wC){if(!u)t:{u=["window","event"];for(var h=l,f=0;f<u.length;f++)if(h=h[u[f]],h==null){u=null;break t}u=h}if(f=u,u=new vs(f,this),h=!0,!(0>f.keyCode||f.returnValue!=null)){t:{var m=!1;if(f.keyCode==0)try{f.keyCode=-1;break t}catch{m=!0}(m||f.returnValue==null)&&(f.returnValue=!0)}for(f=[],m=u.b;m;m=m.parentNode)f.push(m);for(o=o.type,m=f.length-1;0<=m;m--){u.b=f[m];var y=AC(f[m],o,!0,u);h=h&&y}for(m=0;m<f.length;m++)u.b=f[m],y=AC(f[m],o,!1,u),h=h&&y}return h}return SC(o,new vs(u,this))}function op(o){return o=o[Eb],o instanceof ip?o:null}var Sb="__closure_events_fn_"+(1e9*Math.random()>>>0);function xb(o){return I(o)?o:(o[Sb]||(o[Sb]=function(u){return o.handleEvent(u)}),o[Sb])}function An(){np.call(this),this.v=new ip(this),this.bc=this,this.hb=null}ht(An,np),An.prototype[bl]=!0,An.prototype.addEventListener=function(o,u,h,f){yr(this,o,u,h,f)},An.prototype.removeEventListener=function(o,u,h,f){Zn(this,o,u,h,f)},An.prototype.dispatchEvent=function(o){var u,h=this.hb;if(h)for(u=[];h;h=h.hb)u.push(h);h=this.bc;var f=o.type||o;if(typeof o=="string")o=new jn(o,h);else if(o instanceof jn)o.target=o.target||h;else{var m=o;o=new jn(f,h),Fn(o,m)}if(m=!0,u)for(var y=u.length-1;0<=y;y--){var w=o.b=u[y];m=sp(w,f,!0,o)&&m}if(w=o.b=h,m=sp(w,f,!0,o)&&m,m=sp(w,f,!1,o)&&m,u)for(y=0;y<u.length;y++)w=o.b=u[y],m=sp(w,f,!1,o)&&m;return m},An.prototype.Da=function(){if(An.bb.Da.call(this),this.v){var o=this.v,u=0,h;for(h in o.a){for(var f=o.a[h],m=0;m<f.length;m++)++u,rp(f[m]);delete o.a[h],o.b--}}this.hb=null};function xC(o,u,h,f,m){o.v.add(String(u),h,!1,f,m)}function Cb(o,u,h,f,m){o.v.add(String(u),h,!0,f,m)}function sp(o,u,h,f){if(u=o.v.a[String(u)],!u)return!0;u=u.concat();for(var m=!0,y=0;y<u.length;++y){var w=u[y];if(w&&!w.wa&&w.capture==h){var E=w.listener,P=w.Wa||w.src;w.Qa&&_b(o.v,w),m=E.call(P,f)!==!1&&m}}return m&&!f.defaultPrevented}function Rb(o,u,h){if(I(o))h&&(o=L(o,h));else if(o&&typeof o.handleEvent=="function")o=L(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Qa(o){var u=null;return new St(function(h,f){u=Rb(function(){h(void 0)},o),u==-1&&f(Error("Failed to schedule timer."))}).o(function(h){throw l.clearTimeout(u),h})}function CC(o){if(o.X&&typeof o.X=="function")return o.X();if(typeof o=="string")return o.split("");if(_(o)){for(var u=[],h=o.length,f=0;f<h;f++)u.push(o[f]);return u}u=[],h=0;for(f in o)u[h++]=o[f];return u}function RC(o){if(o.Y&&typeof o.Y=="function")return o.Y();if(!o.X||typeof o.X!="function"){if(_(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(var f in o)u[h++]=f;return u}}function zq(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(_(o)||typeof o=="string")se(o,u,void 0);else for(var h=RC(o),f=CC(o),m=f.length,y=0;y<m;y++)u.call(void 0,f[y],h&&h[y],o)}function Ya(o,u){this.b={},this.a=[],this.c=0;var h=arguments.length;if(1<h){if(h%2)throw Error("Uneven number of arguments");for(var f=0;f<h;f+=2)this.set(arguments[f],arguments[f+1])}else if(o)if(o instanceof Ya)for(h=o.Y(),f=0;f<h.length;f++)this.set(h[f],o.get(h[f]));else for(f in o)this.set(f,o[f])}e=Ya.prototype,e.X=function(){Db(this);for(var o=[],u=0;u<this.a.length;u++)o.push(this.b[this.a[u]]);return o},e.Y=function(){return Db(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function Db(o){if(o.c!=o.a.length){for(var u=0,h=0;u<o.a.length;){var f=o.a[u];ys(o.b,f)&&(o.a[h++]=f),u++}o.a.length=h}if(o.c!=o.a.length){var m={};for(h=u=0;u<o.a.length;)f=o.a[u],ys(m,f)||(o.a[h++]=f,m[f]=1),u++;o.a.length=h}}e.get=function(o,u){return ys(this.b,o)?this.b[o]:u},e.set=function(o,u){ys(this.b,o)||(this.c++,this.a.push(o)),this.b[o]=u},e.forEach=function(o,u){for(var h=this.Y(),f=0;f<h.length;f++){var m=h[f],y=this.get(m);o.call(u,y,m,this)}};function ys(o,u){return Object.prototype.hasOwnProperty.call(o,u)}var DC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gq(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var f=o[h].indexOf("="),m=null;if(0<=f){var y=o[h].substring(0,f);m=o[h].substring(f+1)}else y=o[h];u(y,m?decodeURIComponent(m.replace(/\+/g," ")):"")}}}function oo(o,u){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var h;o instanceof oo?(this.i=u!==void 0?u:o.i,wl(this,o.c),this.l=o.l,this.a=o.a,_l(this,o.g),this.f=o.f,kb(this,OC(o.b)),this.h=o.h):o&&(h=String(o).match(DC))?(this.i=!!u,wl(this,h[1]||"",!0),this.l=Il(h[2]||""),this.a=Il(h[3]||"",!0),_l(this,h[4]),this.f=Il(h[5]||"",!0),kb(this,h[6]||"",!0),this.h=Il(h[7]||"")):(this.i=!!u,this.b=new bs(null,this.i))}oo.prototype.toString=function(){var o=[],u=this.c;u&&o.push(El(u,kC,!0),":");var h=this.a;return(h||u=="file")&&(o.push("//"),(u=this.l)&&o.push(El(u,kC,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.g,h!=null&&o.push(":",String(h))),(h=this.f)&&(this.a&&h.charAt(0)!="/"&&o.push("/"),o.push(El(h,h.charAt(0)=="/"?Hq:$q,!0))),(h=this.b.toString())&&o.push("?",h),(h=this.h)&&o.push("#",El(h,Qq)),o.join("")},oo.prototype.resolve=function(o){var u=new oo(this),h=!!o.c;h?wl(u,o.c):h=!!o.l,h?u.l=o.l:h=!!o.a,h?u.a=o.a:h=o.g!=null;var f=o.f;if(h)_l(u,o.g);else if(h=!!o.f){if(f.charAt(0)!="/")if(this.a&&!this.f)f="/"+f;else{var m=u.f.lastIndexOf("/");m!=-1&&(f=u.f.substr(0,m+1)+f)}if(m=f,m==".."||m==".")f="";else if(Wt(m,"./")||Wt(m,"/.")){f=m.lastIndexOf("/",0)==0,m=m.split("/");for(var y=[],w=0;w<m.length;){var E=m[w++];E=="."?f&&w==m.length&&y.push(""):E==".."?((1<y.length||y.length==1&&y[0]!="")&&y.pop(),f&&w==m.length&&y.push("")):(y.push(E),f=!0)}f=y.join("/")}else f=m}return h?u.f=f:h=o.b.toString()!=="",h?kb(u,OC(o.b)):h=!!o.h,h&&(u.h=o.h),u};function wl(o,u,h){o.c=h?Il(u,!0):u,o.c&&(o.c=o.c.replace(/:$/,""))}function _l(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.g=u}else o.g=null}function kb(o,u,h){u instanceof bs?(o.b=u,Yq(o.b,o.i)):(h||(u=El(u,Wq)),o.b=new bs(u,o.i))}function ge(o,u,h){o.b.set(u,h)}function br(o,u){return o.b.get(u)}function Un(o){return o instanceof oo?new oo(o):new oo(o,void 0)}function ap(o,u,h,f){var m=new oo(null,void 0);return o&&wl(m,o),u&&(m.a=u),h&&_l(m,h),f&&(m.f=f),m}function Il(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function El(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Kq),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Kq(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var kC=/[#\/\?@]/g,$q=/[#\?:]/g,Hq=/[#\?]/g,Wq=/[#\?@]/g,Qq=/#/g;function bs(o,u){this.b=this.a=null,this.c=o||null,this.f=!!u}function so(o){o.a||(o.a=new Ya,o.b=0,o.c&&Gq(o.c,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}function PC(o){var u=RC(o);if(typeof u>"u")throw Error("Keys are undefined");var h=new bs(null,void 0);o=CC(o);for(var f=0;f<u.length;f++){var m=u[f],y=o[f];Array.isArray(y)?NC(h,m,y):h.add(m,y)}return h}e=bs.prototype,e.add=function(o,u){so(this),this.c=null,o=Xa(this,o);var h=this.a.get(o);return h||this.a.set(o,h=[]),h.push(u),this.b+=1,this};function ei(o,u){so(o),u=Xa(o,u),ys(o.a.b,u)&&(o.c=null,o.b-=o.a.get(u).length,o=o.a,ys(o.b,u)&&(delete o.b[u],o.c--,o.a.length>2*o.c&&Db(o)))}e.clear=function(){this.a=this.c=null,this.b=0};function Pb(o,u){return so(o),u=Xa(o,u),ys(o.a.b,u)}e.forEach=function(o,u){so(this),this.a.forEach(function(h,f){se(h,function(m){o.call(u,m,f,this)},this)},this)},e.Y=function(){so(this);for(var o=this.a.X(),u=this.a.Y(),h=[],f=0;f<u.length;f++)for(var m=o[f],y=0;y<m.length;y++)h.push(u[f]);return h},e.X=function(o){so(this);var u=[];if(typeof o=="string")Pb(this,o)&&(u=sb(u,this.a.get(Xa(this,o))));else{o=this.a.X();for(var h=0;h<o.length;h++)u=sb(u,o[h])}return u},e.set=function(o,u){return so(this),this.c=null,o=Xa(this,o),Pb(this,o)&&(this.b-=this.a.get(o).length),this.a.set(o,[u]),this.b+=1,this},e.get=function(o,u){return o?(o=this.X(o),0<o.length?String(o[0]):u):u};function NC(o,u,h){ei(o,u),0<h.length&&(o.c=null,o.a.set(Xa(o,u),fs(h)),o.b+=h.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var o=[],u=this.a.Y(),h=0;h<u.length;h++){var f=u[h],m=encodeURIComponent(String(f));f=this.X(f);for(var y=0;y<f.length;y++){var w=m;f[y]!==""&&(w+="="+encodeURIComponent(String(f[y]))),o.push(w)}}return this.c=o.join("&")};function OC(o){var u=new bs;return u.c=o.c,o.a&&(u.a=new Ya(o.a),u.b=o.b),u}function Xa(o,u){return u=String(u),o.f&&(u=u.toLowerCase()),u}function Yq(o,u){u&&!o.f&&(so(o),o.c=null,o.a.forEach(function(h,f){var m=f.toLowerCase();f!=m&&(ei(this,f),NC(this,m,h))},o)),o.f=u}function MC(o){var u=[];return Nb(new Xq,o,u),u.join("")}function Xq(){}function Nb(o,u,h){if(u==null)h.push("null");else{if(typeof u=="object"){if(Array.isArray(u)){var f=u;u=f.length,h.push("[");for(var m="",y=0;y<u;y++)h.push(m),Nb(o,f[y],h),m=",";h.push("]");return}if(u instanceof String||u instanceof Number||u instanceof Boolean)u=u.valueOf();else{h.push("{"),m="";for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(y=u[f],typeof y!="function"&&(h.push(m),FC(f,h),h.push(":"),Nb(o,y,h),m=","));h.push("}");return}}switch(typeof u){case"string":FC(u,h);break;case"number":h.push(isFinite(u)&&!isNaN(u)?String(u):"null");break;case"boolean":h.push(String(u));break;case"function":h.push("null");break;default:throw Error("Unknown type: "+typeof u)}}}var LC={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},Jq=/\uffff/.test("\uFFFF")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function FC(o,u){u.push('"',o.replace(Jq,function(h){var f=LC[h];return f||(f="\\u"+(h.charCodeAt(0)|65536).toString(16).substr(1),LC[h]=f),f}),'"')}function Ob(){var o=Ze();return Or&&!!io&&io==11||/Edge\/\d+/.test(o)}function Tl(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function VC(o,u){u=u||l.window;var h="about:blank";o&&(h=Xf(G1(o)||$1)),u.location.href=h}function jC(o,u){var h=[],f;for(f in o)f in u?typeof o[f]!=typeof u[f]?h.push(f):typeof o[f]=="object"&&o[f]!=null&&u[f]!=null?0<jC(o[f],u[f]).length&&h.push(f):o[f]!==u[f]&&h.push(f):h.push(f);for(f in u)f in o||h.push(f);return h}function Zq(){var o=Ze();return o=Ja(o)!=zC?null:(o=o.match(/\sChrome\/(\d+)/i))&&o.length==2?parseInt(o[1],10):null,o&&30>o?!1:!Or||!io||9<io}function UC(o){return o=(o||Ze()).toLowerCase(),!!(o.match(/android/)||o.match(/webos/)||o.match(/iphone|ipad|ipod/)||o.match(/blackberry/)||o.match(/windows phone/)||o.match(/iemobile/))}function ws(o){o=o||l.window;try{o.close()}catch{}}function BC(o,u,h){var f=Math.floor(1e9*Math.random()).toString();u=u||500,h=h||600;var m=(window.screen.availHeight-h)/2,y=(window.screen.availWidth-u)/2;u={width:u,height:h,top:0<m?m:0,left:0<y?y:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},h=Ze().toLowerCase(),f&&(u.target=f,Wt(h,"crios/")&&(u.target="_blank")),Ja(Ze())==Fb&&(o=o||"http://localhost",u.scrollbars=!0),h=o||"",(o=u)||(o={}),f=window,u=h instanceof Vn?h:G1(typeof h.href<"u"?h.href:String(h))||$1,h=o.target||h.target,m=[];for(w in o)switch(w){case"width":case"height":case"top":case"left":m.push(w+"="+o[w]);break;case"target":case"noopener":case"noreferrer":break;default:m.push(w+"="+(o[w]?1:0))}var w=m.join(",");if((Fe("iPhone")&&!Fe("iPod")&&!Fe("iPad")||Fe("iPad")||Fe("iPod"))&&f.navigator&&f.navigator.standalone&&h&&h!="_self"?(w=Zf(document,"A"),V1(w,"HTMLAnchorElement"),u=u instanceof Vn?u:K1(u),w.href=Xf(u),w.setAttribute("target",h),o.noreferrer&&w.setAttribute("rel","noreferrer"),o=document.createEvent("MouseEvent"),o.initMouseEvent("click",!0,!0,f,1),w.dispatchEvent(o),w={}):o.noreferrer?(w=W1("",f,h,w),o=Xf(u),w&&(Tq&&Wt(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),w.opener=null,o='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+lb(o)+'">',o=(f=U1())?f.createHTML(o):o,o=new Ha(o,null,H1),f=w.document)&&(f.write(wq(o)),f.close())):(w=W1(u,f,h,w))&&o.noopener&&(w.opener=null),w)try{w.focus()}catch{}return w}function t3(o){return new St(function(u){function h(){Qa(2e3).then(function(){if(!o||o.closed)u();else return h()})}return h()})}var e3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n3=/^[^@]+@[^@]+$/;function up(){var o=null;return new St(function(u){l.document.readyState=="complete"?u():(o=function(){u()},Ab(window,"load",o))}).o(function(u){throw Zn(window,"load",o),u})}function r3(){return Mb(void 0)?up().then(function(){return new St(function(o,u){var h=l.document,f=setTimeout(function(){u(Error("Cordova framework is not ready."))},1e3);h.addEventListener("deviceready",function(){clearTimeout(f),o()},!1)})}):ee(Error("Cordova must run in an Android or iOS file scheme."))}function Mb(o){return o=o||Ze(),!(tu()!=="file:"&&tu()!=="ionic:"||!o.toLowerCase().match(/iphone|ipad|ipod|android/))}function Lb(){var o=l.window;try{return!(!o||o==o.top)}catch{return!1}}function Mr(){return typeof l.WorkerGlobalScope<"u"&&typeof l.importScripts=="function"}function ni(){return dt.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":dt.INTERNAL.hasOwnProperty("node")?"Node":Mr()?"Worker":"Browser"}function qC(){var o=ni();return o==="ReactNative"||o==="Node"}function i3(){for(var o=50,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}var Fb="Firefox",zC="Chrome";function Ja(o){var u=o.toLowerCase();if(Wt(u,"opera/")||Wt(u,"opr/")||Wt(u,"opios/"))return"Opera";if(Wt(u,"iemobile"))return"IEMobile";if(Wt(u,"msie")||Wt(u,"trident/"))return"IE";if(Wt(u,"edge/"))return"Edge";if(Wt(u,"firefox/"))return Fb;if(Wt(u,"silk/"))return"Silk";if(Wt(u,"blackberry"))return"Blackberry";if(Wt(u,"webos"))return"Webos";if(!Wt(u,"safari/")||Wt(u,"chrome/")||Wt(u,"crios/")||Wt(u,"android"))if(!Wt(u,"chrome/")&&!Wt(u,"crios/")||Wt(u,"edge/")){if(Wt(u,"android"))return"Android";if((o=o.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&o.length==2)return o[1]}else return zC;else return"Safari";return"Other"}var GC={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Za(o,u){u=u||[];var h=[],f={},m;for(m in GC)f[GC[m]]=!0;for(m=0;m<u.length;m++)typeof f[u[m]]<"u"&&(delete f[u[m]],h.push(u[m]));return h.sort(),u=h,u.length||(u=["FirebaseCore-web"]),h=ni(),h==="Browser"?(f=Ze(),h=Ja(f)):h==="Worker"&&(f=Ze(),h=Ja(f)+"-"+h),h+"/JsCore/"+o+"/"+u.join(",")}function Ze(){return l.navigator&&l.navigator.userAgent||""}function ne(o,u){o=o.split("."),u=u||l;for(var h=0;h<o.length&&typeof u=="object"&&u!=null;h++)u=u[o[h]];return h!=o.length&&(u=void 0),u}function Vb(){try{var o=l.localStorage,u=Is();if(o)return o.setItem(u,"1"),o.removeItem(u),Ob()?!!l.indexedDB:!0}catch{return Mr()&&!!l.indexedDB}return!1}function _s(){return(cp()||tu()==="chrome-extension:"||Mb())&&!qC()&&Vb()&&!Mr()}function cp(){return tu()==="http:"||tu()==="https:"}function tu(){return l.location&&l.location.protocol||null}function Al(o){return o=o||Ze(),!(UC(o)||Ja(o)==Fb)}function Sl(o){return typeof o>"u"?null:MC(o)}function KC(o){var u={},h;for(h in o)o.hasOwnProperty(h)&&o[h]!==null&&o[h]!==void 0&&(u[h]=o[h]);return u}function eu(o){if(o!==null)return JSON.parse(o)}function Is(o){return o||Math.floor(1e9*Math.random()).toString()}function $C(o){return o=o||Ze(),!(Ja(o)=="Safari"||o.toLowerCase().match(/iphone|ipad|ipod/))}function HC(){var o=l.___jsl;if(o&&o.H){for(var u in o.H)if(o.H[u].r=o.H[u].r||[],o.H[u].L=o.H[u].L||[],o.H[u].r=o.H[u].L.concat(),o.CP)for(var h=0;h<o.CP.length;h++)o.CP[h]=null}}function ao(o,u){if(o>u)throw Error("Short delay should be less than long delay!");this.a=o,this.c=u,o=Ze(),u=ni(),this.b=UC(o)||u==="ReactNative"}ao.prototype.get=function(){var o=l.navigator;return!(o&&typeof o.onLine=="boolean"&&(cp()||tu()==="chrome-extension:"||typeof o.connection<"u"))||o.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function jb(){var o=l.document;return o&&typeof o.visibilityState<"u"?o.visibilityState=="visible":!0}function o3(){var o=l.document,u=null;return jb()||!o?at():new St(function(h){u=function(){jb()&&(o.removeEventListener("visibilitychange",u,!1),h())},o.addEventListener("visibilitychange",u,!1)}).o(function(h){throw o.removeEventListener("visibilitychange",u,!1),h})}function xl(o){try{var u=new Date(parseInt(o,10));if(!isNaN(u.getTime())&&!/[^0-9]/.test(o))return u.toUTCString()}catch{}return null}function WC(){return!(!ne("fireauth.oauthhelper",l)&&!ne("fireauth.iframe",l))}function s3(){var o=l.navigator;return o&&o.serviceWorker&&o.serviceWorker.controller||null}function a3(){var o=l.navigator;return o&&o.serviceWorker?at().then(function(){return o.serviceWorker.ready}).then(function(u){return u.active||null}).o(function(){return null}):at(null)}var QC={};function Ub(o){QC[o]||(QC[o]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(o))}var Bb;try{var qb={};Object.defineProperty(qb,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(qb,"abcd",{configurable:!0,enumerable:!0,value:2}),Bb=qb.abcd==2}catch{Bb=!1}function tt(o,u,h){Bb?Object.defineProperty(o,u,{configurable:!0,enumerable:!0,value:h}):o[u]=h}function Sn(o,u){if(u)for(var h in u)u.hasOwnProperty(h)&&tt(o,h,u[h])}function ri(o){var u={};return Sn(u,o),u}function u3(o){var u={},h;for(h in o)o.hasOwnProperty(h)&&(u[h]=o[h]);return u}function c3(o,u){if(!u||!u.length)return!0;if(!o)return!1;for(var h=0;h<u.length;h++){var f=o[u[h]];if(f==null||f==="")return!1}return!0}function zb(o){var u=o;if(typeof o=="object"&&o!=null){u="length"in o?[]:{};for(var h in o)tt(u,h,zb(o[h]))}return u}function Gb(o){var u=o&&(o[Wb]?"phone":null);if(u&&o&&o[Hb]){tt(this,"uid",o[Hb]),tt(this,"displayName",o[YC]||null);var h=null;o[$b]&&(h=new Date(o[$b]).toUTCString()),tt(this,"enrollmentTime",h),tt(this,"factorId",u)}else throw new A("internal-error","Internal assert: invalid MultiFactorInfo object")}Gb.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function Kb(o){try{var u=new Cl(o)}catch{u=null}return u}var YC="displayName",$b="enrolledAt",Hb="mfaEnrollmentId",Wb="phoneInfo";function Cl(o){Gb.call(this,o),tt(this,"phoneNumber",o[Wb])}ht(Cl,Gb),Cl.prototype.w=function(){var o=Cl.bb.w.call(this);return o.phoneNumber=this.phoneNumber,o};function l3(o){var u={},h=o[h3],f=o[f3],m=o[p3];if(o=Kb(o[d3]),!m||m!=lp&&m!=Rl&&!h||m==Rl&&!f||m==Qb&&!o)throw Error("Invalid checkActionCode response!");m==Rl?(u[JC]=h||null,u[ZC]=h||null,u[XC]=f):(u[JC]=f||null,u[ZC]=f||null,u[XC]=h||null),u[m3]=o||null,tt(this,v3,m),tt(this,g3,zb(u))}var Qb="REVERT_SECOND_FACTOR_ADDITION",lp="EMAIL_SIGNIN",Rl="VERIFY_AND_CHANGE_EMAIL",h3="email",d3="mfaInfo",f3="newEmail",p3="requestType",XC="email",JC="fromEmail",m3="multiFactorInfo",ZC="previousEmail",g3="data",v3="operation";function Yb(o){o=Un(o);var u=br(o,tR)||null,h=br(o,eR)||null,f=br(o,nR)||null;if(f=f&&_3[f]||null,!u||!h||!f)throw new A("argument-error",tR+", "+eR+"and "+nR+" are required in a valid action code URL.");Sn(this,{apiKey:u,operation:f,code:h,continueUrl:br(o,y3)||null,languageCode:br(o,b3)||null,tenantId:br(o,w3)||null})}var tR="apiKey",eR="oobCode",y3="continueUrl",b3="languageCode",nR="mode",w3="tenantId",_3={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Qb,signIn:lp,verifyAndChangeEmail:Rl,verifyEmail:"VERIFY_EMAIL"};function rR(o){try{return new Yb(o)}catch{return null}}function hp(o){var u=o[I3];if(typeof u>"u")throw new A("missing-continue-uri");if(typeof u!="string"||typeof u=="string"&&!u.length)throw new A("invalid-continue-uri");this.h=u,this.b=this.a=null,this.g=!1;var h=o[iR];if(h&&typeof h=="object"){u=h[cR];var f=h[aR];if(h=h[uR],typeof u=="string"&&u.length){if(this.a=u,typeof f<"u"&&typeof f!="boolean")throw new A("argument-error",aR+" property must be a boolean when specified.");if(this.g=!!f,typeof h<"u"&&(typeof h!="string"||typeof h=="string"&&!h.length))throw new A("argument-error",uR+" property must be a non empty string when specified.");this.b=h||null}else{if(typeof u<"u")throw new A("argument-error",cR+" property must be a non empty string when specified.");if(typeof f<"u"||typeof h<"u")throw new A("missing-android-pkg-name")}}else if(typeof h<"u")throw new A("argument-error",iR+" property must be a non null object when specified.");if(this.f=null,(u=o[sR])&&typeof u=="object"){if(u=u[lR],typeof u=="string"&&u.length)this.f=u;else if(typeof u<"u")throw new A("argument-error",lR+" property must be a non empty string when specified.")}else if(typeof u<"u")throw new A("argument-error",sR+" property must be a non null object when specified.");if(u=o[Xb],typeof u<"u"&&typeof u!="boolean")throw new A("argument-error",Xb+" property must be a boolean when specified.");if(this.c=!!u,o=o[oR],typeof o<"u"&&(typeof o!="string"||typeof o=="string"&&!o.length))throw new A("argument-error",oR+" property must be a non empty string when specified.");this.i=o||null}var iR="android",oR="dynamicLinkDomain",Xb="handleCodeInApp",sR="iOS",I3="url",aR="installApp",uR="minimumVersion",cR="packageName",lR="bundleId";function dp(o){var u={};u.continueUrl=o.h,u.canHandleCodeInApp=o.c,(u.androidPackageName=o.a)&&(u.androidMinimumVersion=o.b,u.androidInstallApp=o.g),u.iOSBundleId=o.f,u.dynamicLinkDomain=o.i;for(var h in u)u[h]===null&&delete u[h];return u}function E3(o){return Hf(o,function(u){return u=u.toString(16),1<u.length?u:"0"+u}).join("")}var Dl=null;function T3(o){var u=[];return A3(o,function(h){u.push(h)}),u}function A3(o,u){function h(P){for(;f<o.length;){var V=o.charAt(f++),pt=Dl[V];if(pt!=null)return pt;if(!/^[\s\xa0]*$/.test(V))throw Error("Unknown base64 encoding at char: "+V)}return P}S3();for(var f=0;;){var m=h(-1),y=h(0),w=h(64),E=h(64);if(E===64&&m===-1)break;u(m<<2|y>>4),w!=64&&(u(y<<4&240|w>>2),E!=64&&u(w<<6&192|E))}}function S3(){if(!Dl){Dl={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],h=0;5>h;h++)for(var f=o.concat(u[h].split("")),m=0;m<f.length;m++){var y=f[m];Dl[y]===void 0&&(Dl[y]=m)}}}function fp(o){var u=hR(o);if(!(u&&u.sub&&u.iss&&u.aud&&u.exp))throw Error("Invalid JWT");this.h=o,this.a=u.exp,this.i=u.sub,o=Date.now()/1e3,this.g=u.iat||(o>this.a?this.a:o),this.b=u.provider_id||u.firebase&&u.firebase.sign_in_provider||null,this.f=u.firebase&&u.firebase.tenant||null,this.c=!!u.is_anonymous||this.b=="anonymous"}fp.prototype.T=function(){return this.f},fp.prototype.l=function(){return this.c},fp.prototype.toString=function(){return this.h};function pp(o){try{return new fp(o)}catch{return null}}function hR(o){if(!o||(o=o.split("."),o.length!=3))return null;o=o[1];for(var u=(4-o.length%4)%4,h=0;h<u;h++)o+=".";try{var f=T3(o);for(o=[],h=u=0;u<f.length;){var m=f[u++];if(128>m)o[h++]=String.fromCharCode(m);else if(191<m&&224>m){var y=f[u++];o[h++]=String.fromCharCode((m&31)<<6|y&63)}else if(239<m&&365>m){y=f[u++];var w=f[u++],E=f[u++],P=((m&7)<<18|(y&63)<<12|(w&63)<<6|E&63)-65536;o[h++]=String.fromCharCode(55296+(P>>10)),o[h++]=String.fromCharCode(56320+(P&1023))}else y=f[u++],w=f[u++],o[h++]=String.fromCharCode((m&15)<<12|(y&63)<<6|w&63)}return JSON.parse(o.join(""))}catch{}return null}var dR="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),mp=["client_id","response_type","scope","redirect_uri","state"],Jb={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:mp},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:mp},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:mp},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:dR},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Zb(o){for(var u in Jb)if(Jb[u].fa==o)return Jb[u];return null}function fR(o){var u={};u["facebook.com"]=mR,u["google.com"]=vR,u["github.com"]=gR,u["twitter.com"]=yR;var h=o&&o[pR];try{if(h)return u[h]?new u[h](o):new ii(o);if(typeof o[t0]<"u")return new e0(o)}catch{}return null}var t0="idToken",pR="providerId";function e0(o){var u=o[pR];if(!u&&o[t0]){var h=pp(o[t0]);h&&h.b&&(u=h.b)}if(!u)throw Error("Invalid additional user info!");(u=="anonymous"||u=="custom")&&(u=null),h=!1,typeof o.isNewUser<"u"?h=!!o.isNewUser:o.kind==="identitytoolkit#SignupNewUserResponse"&&(h=!0),tt(this,"providerId",u),tt(this,"isNewUser",h)}function ii(o){e0.call(this,o),o=eu(o.rawUserInfo||"{}"),tt(this,"profile",zb(o||{}))}ht(ii,e0);function mR(o){if(ii.call(this,o),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}ht(mR,ii);function gR(o){if(ii.call(this,o),this.providerId!="github.com")throw Error("Invalid provider ID!");tt(this,"username",this.profile&&this.profile.login||null)}ht(gR,ii);function vR(o){if(ii.call(this,o),this.providerId!="google.com")throw Error("Invalid provider ID!")}ht(vR,ii);function yR(o){if(ii.call(this,o),this.providerId!="twitter.com")throw Error("Invalid provider ID!");tt(this,"username",o.screenName||null)}ht(yR,ii);function bR(o){var u=Un(o),h=br(u,"link"),f=br(Un(h),"link");return u=br(u,"deep_link_id"),br(Un(u),"link")||u||f||h||o}function gp(o,u){if(!o&&!u)throw new A("internal-error","Internal assert: no raw session string available");if(o&&u)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=o||null,this.b=u||null,this.type=this.a?kl:vp}var kl="enroll",vp="signin";gp.prototype.Ha=function(){return this.a?at(this.a):at(this.b)},gp.prototype.w=function(){return this.type==kl?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function nu(){}nu.prototype.ka=function(){},nu.prototype.b=function(){},nu.prototype.c=function(){},nu.prototype.w=function(){};function ru(o,u){return o.then(function(h){if(h[Vr]){var f=pp(h[Vr]);if(!f||u!=f.i)throw new A("user-mismatch");return h}throw new A("user-mismatch")}).o(function(h){throw h&&h.code&&h.code==fl+"user-not-found"?new A("user-mismatch"):h})}function Es(o,u){if(u)this.a=u;else throw new A("internal-error","failed to construct a credential");tt(this,"providerId",o),tt(this,"signInMethod",o)}Es.prototype.ka=function(o){return A0(o,n0(this))},Es.prototype.b=function(o,u){var h=n0(this);return h.idToken=u,S0(o,h)},Es.prototype.c=function(o,u){return ru(x0(o,n0(this)),u)};function n0(o){return{pendingToken:o.a,requestUri:"http://localhost"}}Es.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function x3(o){if(o&&o.providerId&&o.signInMethod&&o.providerId.indexOf("saml.")==0&&o.pendingToken)try{return new Es(o.providerId,o.pendingToken)}catch{}return null}function Mi(o,u,h){if(this.a=null,u.idToken||u.accessToken)u.idToken&&tt(this,"idToken",u.idToken),u.accessToken&&tt(this,"accessToken",u.accessToken),u.nonce&&!u.pendingToken&&tt(this,"nonce",u.nonce),u.pendingToken&&(this.a=u.pendingToken);else if(u.oauthToken&&u.oauthTokenSecret)tt(this,"accessToken",u.oauthToken),tt(this,"secret",u.oauthTokenSecret);else throw new A("internal-error","failed to construct a credential");tt(this,"providerId",o),tt(this,"signInMethod",h)}Mi.prototype.ka=function(o){return A0(o,r0(this))},Mi.prototype.b=function(o,u){var h=r0(this);return h.idToken=u,S0(o,h)},Mi.prototype.c=function(o,u){var h=r0(this);return ru(x0(o,h),u)};function r0(o){var u={};return o.idToken&&(u.id_token=o.idToken),o.accessToken&&(u.access_token=o.accessToken),o.secret&&(u.oauth_token_secret=o.secret),u.providerId=o.providerId,o.nonce&&!o.a&&(u.nonce=o.nonce),u={postBody:PC(u).toString(),requestUri:"http://localhost"},o.a&&(delete u.postBody,u.pendingToken=o.a),u}Mi.prototype.w=function(){var o={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(o.oauthIdToken=this.idToken),this.accessToken&&(o.oauthAccessToken=this.accessToken),this.secret&&(o.oauthTokenSecret=this.secret),this.nonce&&(o.nonce=this.nonce),this.a&&(o.pendingToken=this.a),o};function C3(o){if(o&&o.providerId&&o.signInMethod){var u={idToken:o.oauthIdToken,accessToken:o.oauthTokenSecret?null:o.oauthAccessToken,oauthTokenSecret:o.oauthTokenSecret,oauthToken:o.oauthTokenSecret&&o.oauthAccessToken,nonce:o.nonce,pendingToken:o.pendingToken};try{return new Mi(o.providerId,u,o.signInMethod)}catch{}}return null}function Ts(o,u){this.Qc=u||[],Sn(this,{providerId:o,isOAuthProvider:!0}),this.Jb={},this.qb=(Zb(o)||{}).Ja||null,this.pb=null}Ts.prototype.Ka=function(o){return this.Jb=ro(o),this};function wR(o){if(typeof o!="string"||o.indexOf("saml.")!=0)throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');Ts.call(this,o,[])}ht(wR,Ts);function tr(o){Ts.call(this,o,mp),this.a=[]}ht(tr,Ts),tr.prototype.Ca=function(o){return Ni(this.a,o)||this.a.push(o),this},tr.prototype.Rb=function(){return fs(this.a)},tr.prototype.credential=function(o,u){var h;if(T(o)?h={idToken:o.idToken||null,accessToken:o.accessToken||null,nonce:o.rawNonce||null}:h={idToken:o||null,accessToken:u||null},!h.idToken&&!h.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new Mi(this.providerId,h,this.providerId)};function As(){tr.call(this,"facebook.com")}ht(As,tr),tt(As,"PROVIDER_ID","facebook.com"),tt(As,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function _R(o){if(!o)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return T(o)&&(u=o.accessToken),new As().credential({accessToken:u})}function Ss(){tr.call(this,"github.com")}ht(Ss,tr),tt(Ss,"PROVIDER_ID","github.com"),tt(Ss,"GITHUB_SIGN_IN_METHOD","github.com");function IR(o){if(!o)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return T(o)&&(u=o.accessToken),new Ss().credential({accessToken:u})}function xs(){tr.call(this,"google.com"),this.Ca("profile")}ht(xs,tr),tt(xs,"PROVIDER_ID","google.com"),tt(xs,"GOOGLE_SIGN_IN_METHOD","google.com");function ER(o,u){var h=o;return T(o)&&(h=o.idToken,u=o.accessToken),new xs().credential({idToken:h,accessToken:u})}function iu(){Ts.call(this,"twitter.com",dR)}ht(iu,Ts),tt(iu,"PROVIDER_ID","twitter.com"),tt(iu,"TWITTER_SIGN_IN_METHOD","twitter.com");function TR(o,u){var h=o;if(T(h)||(h={oauthToken:o,oauthTokenSecret:u}),!h.oauthToken||!h.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Mi("twitter.com",h,"twitter.com")}function uo(o,u,h){this.a=o,this.f=u,tt(this,"providerId","password"),tt(this,"signInMethod",h===wr.EMAIL_LINK_SIGN_IN_METHOD?wr.EMAIL_LINK_SIGN_IN_METHOD:wr.EMAIL_PASSWORD_SIGN_IN_METHOD)}uo.prototype.ka=function(o){return this.signInMethod==wr.EMAIL_LINK_SIGN_IN_METHOD?Ct(o,fz,{email:this.a,oobCode:this.f}):Ct(o,JR,{email:this.a,password:this.f})},uo.prototype.b=function(o,u){return this.signInMethod==wr.EMAIL_LINK_SIGN_IN_METHOD?Ct(o,pz,{idToken:u,email:this.a,oobCode:this.f}):Ct(o,XR,{idToken:u,email:this.a,password:this.f})},uo.prototype.c=function(o,u){return ru(this.ka(o),u)},uo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function R3(o){return o&&o.email&&o.password?new uo(o.email,o.password,o.signInMethod):null}function wr(){Sn(this,{providerId:"password",isOAuthProvider:!1})}function AR(o,u){if(u=i0(u),!u)throw new A("argument-error","Invalid email link!");return new uo(o,u.code,wr.EMAIL_LINK_SIGN_IN_METHOD)}function i0(o){return o=bR(o),(o=rR(o))&&o.operation===lp?o:null}Sn(wr,{PROVIDER_ID:"password"}),Sn(wr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Sn(wr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function co(o){if(!(o.fb&&o.eb||o.La&&o.ea))throw new A("internal-error");this.a=o,tt(this,"providerId","phone"),this.fa="phone",tt(this,"signInMethod","phone")}co.prototype.ka=function(o){return o.gb(Pl(this))},co.prototype.b=function(o,u){var h=Pl(this);return h.idToken=u,Ct(o,Oz,h)},co.prototype.c=function(o,u){var h=Pl(this);return h.operation="REAUTH",o=Ct(o,Mz,h),ru(o,u)},co.prototype.w=function(){var o={providerId:"phone"};return this.a.fb&&(o.verificationId=this.a.fb),this.a.eb&&(o.verificationCode=this.a.eb),this.a.La&&(o.temporaryProof=this.a.La),this.a.ea&&(o.phoneNumber=this.a.ea),o};function D3(o){if(o&&o.providerId==="phone"&&(o.verificationId&&o.verificationCode||o.temporaryProof&&o.phoneNumber)){var u={};return se(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(h){o[h]&&(u[h]=o[h])}),new co(u)}return null}function Pl(o){return o.a.La&&o.a.ea?{temporaryProof:o.a.La,phoneNumber:o.a.ea}:{sessionInfo:o.a.fb,code:o.a.eb}}function Li(o){try{this.a=o||dt.auth()}catch{throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Sn(this,{providerId:"phone",isOAuthProvider:!1})}Li.prototype.gb=function(o,u){var h=this.a.a;return at(u.verify()).then(function(f){if(typeof f!="string")throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(u.type){case"recaptcha":var m=T(o)?o.session:null,y=T(o)?o.phoneNumber:o,w;return m&&m.type==kl?w=m.Ha().then(function(E){return iz(h,{idToken:E,phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:f}})}):m&&m.type==vp?w=m.Ha().then(function(E){return oz(h,{mfaPendingCredential:E,mfaEnrollmentId:o.multiFactorHint&&o.multiFactorHint.uid||o.multiFactorUid,phoneSignInInfo:{recaptchaToken:f}})}):w=rz(h,{phoneNumber:y,recaptchaToken:f}),w.then(function(E){return typeof u.reset=="function"&&u.reset(),E},function(E){throw typeof u.reset=="function"&&u.reset(),E});default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function SR(o,u){if(!o)throw new A("missing-verification-id");if(!u)throw new A("missing-verification-code");return new co({fb:o,eb:u})}Sn(Li,{PROVIDER_ID:"phone"}),Sn(Li,{PHONE_SIGN_IN_METHOD:"phone"});function o0(o){if(o.temporaryProof&&o.phoneNumber)return new co({La:o.temporaryProof,ea:o.phoneNumber});var u=o&&o.providerId;if(!u||u==="password")return null;var h=o&&o.oauthAccessToken,f=o&&o.oauthTokenSecret,m=o&&o.nonce,y=o&&o.oauthIdToken,w=o&&o.pendingToken;try{switch(u){case"google.com":return ER(y,h);case"facebook.com":return _R(h);case"github.com":return IR(h);case"twitter.com":return TR(h,f);default:return h||f||y||w?w?u.indexOf("saml.")==0?new Es(u,w):new Mi(u,{pendingToken:w,idToken:o.oauthIdToken,accessToken:o.oauthAccessToken},u):new tr(u).credential({idToken:y,accessToken:h,rawNonce:m}):null}}catch{return null}}function s0(o){if(!o.isOAuthProvider)throw new A("invalid-oauth-provider")}function Lr(o,u,h,f,m,y,w){if(this.c=o,this.b=u||null,this.g=h||null,this.f=f||null,this.i=y||null,this.h=w||null,this.a=m||null,this.g||this.a){if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}else throw new A("invalid-auth-event")}Lr.prototype.getUid=function(){var o=[];return o.push(this.c),this.b&&o.push(this.b),this.f&&o.push(this.f),this.h&&o.push(this.h),o.join("-")},Lr.prototype.T=function(){return this.h},Lr.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function xR(o){return o=o||{},o.type?new Lr(o.type,o.eventId,o.urlResponse,o.sessionId,o.error&&x1(o.error),o.postBody,o.tenantId):null}function k3(){this.b=null,this.a=[]}var a0=null;function P3(o){var u=a0;u.a.push(o),u.b||(u.b=function(h){for(var f=0;f<u.a.length;f++)u.a[f](h)},o=ne("universalLinks.subscribe",l),typeof o=="function"&&o(null,u.b))}function u0(o){var u="unauthorized-domain",h=void 0,f=Un(o);o=f.a,f=f.c,f=="chrome-extension"?h=Q1("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):f=="http"||f=="https"?h=Q1("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):u="operation-not-supported-in-this-environment",A.call(this,u,h)}ht(u0,A);function Nl(o,u,h){A.call(this,o,h),o=u||{},o.Kb&&tt(this,"email",o.Kb),o.ea&&tt(this,"phoneNumber",o.ea),o.credential&&tt(this,"credential",o.credential),o.$b&&tt(this,"tenantId",o.$b)}ht(Nl,A),Nl.prototype.w=function(){var o={code:this.code,message:this.message};this.email&&(o.email=this.email),this.phoneNumber&&(o.phoneNumber=this.phoneNumber),this.tenantId&&(o.tenantId=this.tenantId);var u=this.credential&&this.credential.w();return u&&Fn(o,u),o},Nl.prototype.toJSON=function(){return this.w()};function yp(o){if(o.code){var u=o.code||"";u.indexOf(fl)==0&&(u=u.substring(fl.length));var h={credential:o0(o),$b:o.tenantId};if(o.email)h.Kb=o.email;else if(o.phoneNumber)h.ea=o.phoneNumber;else if(!h.credential)return new A(u,o.message||void 0);return new Nl(u,h,o.message)}return null}function Ol(){}Ol.prototype.c=null;function CR(o){return o.c||(o.c=o.b())}var c0;function bp(){}ht(bp,Ol),bp.prototype.a=function(){var o=RR(this);return o?new ActiveXObject(o):new XMLHttpRequest},bp.prototype.b=function(){var o={};return RR(this)&&(o[0]=!0,o[1]=!0),o};function RR(o){if(!o.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var u=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],h=0;h<u.length;h++){var f=u[h];try{return new ActiveXObject(f),o.f=f}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return o.f}c0=new bp;function wp(){}ht(wp,Ol),wp.prototype.a=function(){var o=new XMLHttpRequest;if("withCredentials"in o)return o;if(typeof XDomainRequest<"u")return new DR;throw Error("Unsupported browser")},wp.prototype.b=function(){return{}};function DR(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=L(this.qc,this),this.a.onerror=L(this.Tb,this),this.a.onprogress=L(this.rc,this),this.a.ontimeout=L(this.vc,this)}e=DR.prototype,e.open=function(o,u,h){if(h!=null&&!h)throw Error("Only async requests are supported.");this.a.open(o,u)},e.send=function(o){if(o)if(typeof o=="string")this.a.send(o);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(o){return o.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,l0(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",l0(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,l0(this,1)};function l0(o,u){o.readyState=u,o.onreadystatechange&&o.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function h0(o,u,h){this.reset(o,u,h,void 0,void 0)}h0.prototype.a=null;var N3=0;h0.prototype.reset=function(o,u,h,f,m){typeof m=="number"||N3++,f||fn(),delete this.a};function d0(o){this.f=o,this.b=this.c=this.a=null}function Ml(o,u){this.name=o,this.value=u}Ml.prototype.toString=function(){return this.name};var kR=new Ml("SEVERE",1e3),f0=new Ml("WARNING",900),O3=new Ml("CONFIG",700),M3=new Ml("FINE",500);function PR(o){return o.c?o.c:o.a?PR(o.a):(Ga("Root logger has no level set."),null)}d0.prototype.log=function(o,u,h){if(o.value>=PR(this).value)for(I(u)&&(u=u()),o=new h0(o,String(u),this.f),h&&(o.a=h),h=this;h;)h=h.a};var p0={},_p=null;function m0(o){_p||(_p=new d0(""),p0[""]=_p,_p.c=O3);var u;if(!(u=p0[o])){u=new d0(o);var h=o.lastIndexOf("."),f=o.substr(h+1);h=m0(o.substr(0,h)),h.b||(h.b={}),h.b[f]=u,u.a=h,p0[o]=u}return u}function _r(o,u){o&&o.log(M3,u,void 0)}function Ip(o){this.f=o}ht(Ip,Ol),Ip.prototype.a=function(){return new Ep(this.f)},Ip.prototype.b=function(o){return function(){return o}}({});function Ep(o){An.call(this),this.u=o,this.h=void 0,this.readyState=g0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=m0("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}ht(Ep,An);var g0=0;e=Ep.prototype,e.open=function(o,u){if(this.readyState!=g0)throw this.abort(),Error("Error reopening a connection");this.s=o,this.f=u,this.readyState=1,Fl(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var u={headers:this.l,method:this.s,credentials:this.h,cache:void 0};o&&(u.body=o),this.u.fetch(new Request(this.f,u)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,Ll(this)),this.readyState=g0},e.uc=function(o){this.a&&(this.g=o,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=o.headers,this.readyState=2,Fl(this)),this.a&&(this.readyState=3,Fl(this),this.a&&(this.responseType==="arraybuffer"?o.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof l.ReadableStream<"u"&&"body"in o?(this.response=this.responseText="",this.c=o.body.getReader(),this.m=new TextDecoder,NR(this)):o.text().then(this.tc.bind(this),this.Va.bind(this)))))};function NR(o){o.c.read().then(o.pc.bind(o)).catch(o.Va.bind(o))}e.pc=function(o){if(this.a){var u=this.m.decode(o.value?o.value:new Uint8Array(0),{stream:!o.done});u&&(this.response=this.responseText+=u),o.done?Ll(this):Fl(this),this.readyState==3&&NR(this)}},e.tc=function(o){this.a&&(this.response=this.responseText=o,Ll(this))},e.sc=function(o){this.a&&(this.response=o,Ll(this))},e.Va=function(o){var u=this.i;u&&u.log(f0,"Failed to fetch url "+this.f,o instanceof Error?o:Error(o)),this.a&&Ll(this)};function Ll(o){o.readyState=4,o.g=null,o.c=null,o.m=null,Fl(o)}e.setRequestHeader=function(o,u){this.l.append(o,u)},e.getResponseHeader=function(o){return this.b?this.b.get(o.toLowerCase())||"":((o=this.i)&&o.log(f0,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var o=this.i;return o&&o.log(f0,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}o=[];for(var u=this.b.entries(),h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function Fl(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ep.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(o){this.h=o?"include":"same-origin"}});function Vl(o){An.call(this),this.headers=new Ya,this.D=o||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=OR,this.u=this.S=!1}ht(Vl,An);var OR="";Vl.prototype.b=m0("goog.net.XhrIo");var L3=/^https?$/i,F3=["POST","PUT"];function V3(o,u,h,f,m){if(o.a)throw Error("[goog.net.XhrIo] Object is active with another request="+o.l+"; newUri="+u);h=h?h.toUpperCase():"GET",o.l=u,o.h="",o.P=h,o.J=!1,o.c=!0,o.a=o.D?o.D.a():c0.a(),o.C=o.D?CR(o.D):CR(c0),o.a.onreadystatechange=L(o.Wb,o);try{_r(o.b,Fi(o,"Opening Xhr")),o.N=!0,o.a.open(h,String(u),!0),o.N=!1}catch(w){_r(o.b,Fi(o,"Error opening Xhr: "+w.message)),MR(o,w);return}u=f||"";var y=new Ya(o.headers);m&&zq(m,function(w,E){y.set(E,w)}),m=aq(y.Y()),f=l.FormData&&u instanceof l.FormData,!Ni(F3,h)||m||f||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),y.forEach(function(w,E){this.a.setRequestHeader(E,w)},o),o.m&&(o.a.responseType=o.m),"withCredentials"in o.a&&o.a.withCredentials!==o.S&&(o.a.withCredentials=o.S);try{VR(o),0<o.g&&(o.u=j3(o.a),_r(o.b,Fi(o,"Will abort after "+o.g+"ms if incomplete, xhr2 "+o.u)),o.u?(o.a.timeout=o.g,o.a.ontimeout=L(o.Ma,o)):o.s=Rb(o.Ma,o.g,o)),_r(o.b,Fi(o,"Sending request")),o.i=!0,o.a.send(u),o.i=!1}catch(w){_r(o.b,Fi(o,"Send error: "+w.message)),MR(o,w)}}function j3(o){return Or&&Z1(9)&&typeof o.timeout=="number"&&o.ontimeout!==void 0}function U3(o){return o.toLowerCase()=="content-type"}e=Vl.prototype,e.Ma=function(){typeof c<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",_r(this.b,Fi(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function MR(o,u){o.c=!1,o.a&&(o.f=!0,o.a.abort(),o.f=!1),o.h=u,LR(o),Tp(o)}function LR(o){o.J||(o.J=!0,o.dispatchEvent("complete"),o.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(_r(this.b,Fi(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Tp(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Tp(this,!0)),Vl.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?FR(this):this.Jc())},e.Jc=function(){FR(this)};function FR(o){if(o.c&&typeof c<"u"){if(o.C[1]&&jl(o)==4&&Ap(o)==2)_r(o.b,Fi(o,"Local request error detected and ignored"));else if(o.i&&jl(o)==4)Rb(o.Wb,0,o);else if(o.dispatchEvent("readystatechange"),jl(o)==4){_r(o.b,Fi(o,"Request complete")),o.c=!1;try{var u=Ap(o);t:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break t;default:h=!1}var f;if(!(f=h)){var m;if(m=u===0){var y=String(o.l).match(DC)[1]||null;if(!y&&l.self&&l.self.location){var w=l.self.location.protocol;y=w.substr(0,w.length-1)}m=!L3.test(y?y.toLowerCase():"")}f=m}if(f)o.dispatchEvent("complete"),o.dispatchEvent("success");else{try{var E=2<jl(o)?o.a.statusText:""}catch(P){_r(o.b,"Can not get status: "+P.message),E=""}o.h=E+" ["+Ap(o)+"]",LR(o)}}finally{Tp(o)}}}}function Tp(o,u){if(o.a){VR(o);var h=o.a,f=o.C[0]?v:null;o.a=null,o.C=null,u||o.dispatchEvent("ready");try{h.onreadystatechange=f}catch(m){(o=o.b)&&o.log(kR,"Problem encountered resetting onreadystatechange: "+m.message,void 0)}}}function VR(o){o.a&&o.u&&(o.a.ontimeout=null),o.s&&(l.clearTimeout(o.s),o.s=null)}function jl(o){return o.a?o.a.readyState:0}function Ap(o){try{return 2<jl(o)?o.a.status:-1}catch{return-1}}function B3(o){try{return o.a?o.a.responseText:""}catch(u){return _r(o.b,"Can not get responseText: "+u.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case OR:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var o=this.b;return o&&o.log(kR,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(u){return _r(this.b,"Can not get response: "+u.message),null}};function Fi(o,u){return u+" ["+o.P+" "+o.l+" "+Ap(o)+"]"}function Cs(o){var u=G3;this.g=[],this.u=u,this.s=o||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}Cs.prototype.cancel=function(o){if(this.a)this.c instanceof Cs&&this.c.cancel();else{if(this.b){var u=this.b;delete this.b,o?u.cancel(o):(u.l--,0>=u.l&&u.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(o=new Bl(this),Sp(this),Ul(this,!1,o))}},Cs.prototype.m=function(o,u){this.i=!1,Ul(this,o,u)};function Ul(o,u,h){o.a=!0,o.c=h,o.f=!u,UR(o)}function Sp(o){if(o.a){if(!o.v)throw new xp(o);o.v=!1}}function q3(o,u){v0(o,null,u,void 0)}function v0(o,u,h,f){o.g.push([u,h,f]),o.a&&UR(o)}Cs.prototype.then=function(o,u,h){var f,m,y=new St(function(w,E){f=w,m=E});return v0(this,f,function(w){w instanceof Bl?y.cancel():m(w)}),y.then(o,u,h)},Cs.prototype.$goog_Thenable=!0;function jR(o){return sq(o.g,function(u){return I(u[1])})}function UR(o){if(o.h&&o.a&&jR(o)){var u=o.h,h=Cp[u];h&&(l.clearTimeout(h.a),delete Cp[u]),o.h=0}o.b&&(o.b.l--,delete o.b),u=o.c;for(var f=h=!1;o.g.length&&!o.i;){var m=o.g.shift(),y=m[0],w=m[1];if(m=m[2],y=o.f?w:y)try{var E=y.call(m||o.s,u);E!==void 0&&(o.f=o.f&&(E==u||E instanceof Error),o.c=u=E),(C1(u)||typeof l.Promise=="function"&&u instanceof l.Promise)&&(f=!0,o.i=!0)}catch(P){u=P,o.f=!0,jR(o)||(h=!0)}}o.c=u,f&&(E=L(o.m,o,!0),f=L(o.m,o,!1),u instanceof Cs?(v0(u,E,f),u.C=!0):u.then(E,f)),h&&(u=new BR(u),Cp[u.a]=u,o.h=u.a)}function xp(){Jn.call(this)}ht(xp,Jn),xp.prototype.message="Deferred has already fired",xp.prototype.name="AlreadyCalledError";function Bl(){Jn.call(this)}ht(Bl,Jn),Bl.prototype.message="Deferred was canceled",Bl.prototype.name="CanceledError";function BR(o){this.a=l.setTimeout(L(this.c,this),0),this.b=o}BR.prototype.c=function(){throw delete Cp[this.a],this.b};var Cp={};function y0(o){var u={},h=u.document||document,f=B1(o).toString(),m=Zf(document,"SCRIPT"),y={Xb:m,Ma:void 0},w=new Cs(y),E=null,P=u.timeout!=null?u.timeout:5e3;return 0<P&&(E=window.setTimeout(function(){Rp(m,!0);var V=new b0($3,"Timeout reached for loading script "+f);Sp(w),Ul(w,!1,V)},P),y.Ma=E),m.onload=m.onreadystatechange=function(){m.readyState&&m.readyState!="loaded"&&m.readyState!="complete"||(Rp(m,u.xd||!1,E),Sp(w),Ul(w,!0,null))},m.onerror=function(){Rp(m,!0,E);var V=new b0(K3,"Error while loading script "+f);Sp(w),Ul(w,!1,V)},y=u.attributes||{},Fn(y,{type:"text/javascript",charset:"UTF-8"}),eC(m,y),_q(m,o),z3(h).appendChild(m),w}function z3(o){var u;return(u=(o||document).getElementsByTagName("HEAD"))&&u.length!=0?u[0]:o.documentElement}function G3(){if(this&&this.Xb){var o=this.Xb;o&&o.tagName=="SCRIPT"&&Rp(o,!0,this.Ma)}}function Rp(o,u,h){h!=null&&l.clearTimeout(h),o.onload=v,o.onerror=v,o.onreadystatechange=v,u&&window.setTimeout(function(){o&&o.parentNode&&o.parentNode.removeChild(o)},0)}var K3=0,$3=1;function b0(o,u){var h="Jsloader error (code #"+o+")";u&&(h+=": "+u),Jn.call(this,h),this.code=o}ht(b0,Jn);function Dp(o){this.f=o}ht(Dp,Ol),Dp.prototype.a=function(){return new this.f},Dp.prototype.b=function(){return{}};function Fr(o,u,h){if(this.c=o,o=u||{},this.l=o.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=o.secureTokenTimeout||H3,this.g=ro(o.secureTokenHeaders||W3),this.h=o.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=o.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=o.firebaseTimeout||Q3,this.a=ro(o.firebaseHeaders||Y3),h&&(this.a["X-Client-Version"]=h,this.g["X-Client-Version"]=h),h=ni()=="Node",h=l.XMLHttpRequest||h&&dt.INTERNAL.node&&dt.INTERNAL.node.XMLHttpRequest,!h&&!Mr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Mr()?this.f=new Ip(self):qC()?this.f=new Dp(h):this.f=new wp,this.b=null}var w0,Vr="idToken",H3=new ao(3e4,6e4),W3={"Content-Type":"application/x-www-form-urlencoded"},Q3=new ao(3e4,6e4),Y3={"Content-Type":"application/json"};function qR(o,u){u?o.a["X-Firebase-Locale"]=u:delete o.a["X-Firebase-Locale"]}function kp(o,u){u&&(o.l=_0("https://securetoken.googleapis.com/v1/token",u),o.h=_0("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",u),o.i=_0("https://identitytoolkit.googleapis.com/v2/",u))}function _0(o,u){return o=Un(o),u=Un(u.url),o.f=o.a+o.f,wl(o,u.c),o.a=u.a,_l(o,u.g),o.toString()}function zR(o,u){u?(o.a["X-Client-Version"]=u,o.g["X-Client-Version"]=u):(delete o.a["X-Client-Version"],delete o.g["X-Client-Version"])}Fr.prototype.T=function(){return this.b};function GR(o,u,h,f,m,y,w){Zq()||Mr()?o=L(o.u,o):(w0||(w0=new St(function(E,P){J3(E,P)})),o=L(o.s,o)),o(u,h,f,m,y,w)}Fr.prototype.u=function(o,u,h,f,m,y){if(Mr()&&(typeof l.fetch>"u"||typeof l.Headers>"u"||typeof l.Request>"u"))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var w=new Vl(this.f);if(y){w.g=Math.max(0,y);var E=setTimeout(function(){w.dispatchEvent("timeout")},y)}xC(w,"complete",function(){E&&clearTimeout(E);var P=null;try{P=JSON.parse(B3(this))||null}catch{P=null}u&&u(P)}),Cb(w,"ready",function(){E&&clearTimeout(E),bC(this)}),Cb(w,"timeout",function(){E&&clearTimeout(E),bC(this),u&&u(null)}),V3(w,o,h,f,m)};var X3=new ti(Qf,"https://apis.google.com/js/client.js?onload=%{onload}"),KR="__fcb"+Math.floor(1e6*Math.random()).toString();function J3(o,u){if(((window.gapi||{}).client||{}).request)o();else{l[KR]=function(){((window.gapi||{}).client||{}).request?o():u(Error("CORS_UNSUPPORTED"))};var h=cb(X3,{onload:KR});q3(y0(h),function(){u(Error("CORS_UNSUPPORTED"))})}}Fr.prototype.s=function(o,u,h,f,m){var y=this;w0.then(function(){window.gapi.client.setApiKey(y.c);var w=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:o,method:h,body:f,headers:m,authType:"none",callback:function(E){window.gapi.auth.setToken(w),u&&u(E)}})}).o(function(w){u&&u({error:{message:w&&w.message||"CORS_UNSUPPORTED"}})})};function Z3(o,u){return new St(function(h,f){u.grant_type=="refresh_token"&&u.refresh_token||u.grant_type=="authorization_code"&&u.code?GR(o,o.l+"?key="+encodeURIComponent(o.c),function(m){m?m.error?f(R0(m)):m.access_token&&m.refresh_token?h(m):f(new A("internal-error")):f(new A("network-request-failed"))},"POST",PC(u).toString(),o.g,o.m.get()):f(new A("internal-error"))})}function $R(o,u,h,f,m,y,w){var E=Un(u+h);ge(E,"key",o.c),w&&ge(E,"cb",Date.now().toString());var P=f=="GET";if(P)for(var V in m)m.hasOwnProperty(V)&&ge(E,V,m[V]);return new St(function(pt,Bt){GR(o,E.toString(),function(Lt){Lt?Lt.error?Bt(R0(Lt,y||{})):pt(Lt):Bt(new A("network-request-failed"))},f,P?void 0:MC(KC(m)),o.a,o.v.get())})}function Rs(o){if(o=o.email,typeof o!="string"||!n3.test(o))throw new A("invalid-email")}function HR(o){"email"in o&&Rs(o)}function tz(o,u){return Ct(o,lz,{identifier:u,continueUri:cp()?Tl():"http://localhost"}).then(function(h){return h.signinMethods||[]})}function ez(o){return Ct(o,Iz,{}).then(function(u){return u.authorizedDomains||[]})}function Bn(o){if(!o[Vr])throw o.mfaPendingCredential?new A("multi-factor-auth-required",null,ro(o)):new A("internal-error")}function I0(o){if(o.phoneNumber||o.temporaryProof){if(!o.phoneNumber||!o.temporaryProof)throw new A("internal-error")}else{if(!o.sessionInfo)throw new A("missing-verification-id");if(!o.code)throw new A("missing-verification-code")}}Fr.prototype.Ab=function(){return Ct(this,Sz,{})},Fr.prototype.Cb=function(o,u){return Ct(this,YR,{idToken:o,email:u})},Fr.prototype.Db=function(o,u){return Ct(this,XR,{idToken:o,password:u})};var nz={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=Fr.prototype,e.Eb=function(o,u){var h={idToken:o},f=[];return L1(nz,function(m,y){var w=u[y];w===null?f.push(m):y in u&&(h[y]=w)}),f.length&&(h.deleteAttribute=f),Ct(this,YR,h)},e.wb=function(o,u){return o={requestType:"PASSWORD_RESET",email:o},Fn(o,u),Ct(this,_z,o)},e.xb=function(o,u){return o={requestType:"EMAIL_SIGNIN",email:o},Fn(o,u),Ct(this,yz,o)},e.vb=function(o,u){return o={requestType:"VERIFY_EMAIL",idToken:o},Fn(o,u),Ct(this,bz,o)},e.Fb=function(o,u,h){return o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:u},Fn(o,h),Ct(this,wz,o)};function rz(o,u){return Ct(o,Az,u)}e.gb=function(o){return Ct(this,Nz,o)};function iz(o,u){return Ct(o,xz,u).then(function(h){return h.phoneSessionInfo.sessionInfo})}function WR(o){if(!o.phoneVerificationInfo)throw new A("internal-error");if(!o.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!o.phoneVerificationInfo.code)throw new A("missing-verification-code")}function oz(o,u){return Ct(o,Cz,u).then(function(h){return h.phoneResponseInfo.sessionInfo})}function sz(o,u,h){return Ct(o,dz,{idToken:u,deleteProvider:h})}function E0(o){if(!o.requestUri||!o.sessionId&&!o.postBody&&!o.pendingToken)throw new A("internal-error")}function T0(o,u){return u.oauthIdToken&&u.providerId&&u.providerId.indexOf("oidc.")==0&&!u.pendingToken&&(o.sessionId?u.nonce=o.sessionId:o.postBody&&(o=new bs(o.postBody),Pb(o,"nonce")&&(u.nonce=o.get("nonce")))),u}function QR(o){var u=null;if(o.needConfirmation?(o.code="account-exists-with-different-credential",u=yp(o)):o.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(o.code="credential-already-in-use",u=yp(o)):o.errorMessage=="EMAIL_EXISTS"?(o.code="email-already-in-use",u=yp(o)):o.errorMessage&&(u=ZR(o.errorMessage)),u)throw u;Bn(o)}function A0(o,u){return u.returnIdpCredential=!0,Ct(o,Rz,u)}function S0(o,u){return u.returnIdpCredential=!0,Ct(o,kz,u)}function x0(o,u){return u.returnIdpCredential=!0,u.autoCreate=!1,Ct(o,Dz,u)}function C0(o){if(!o.oobCode)throw new A("invalid-action-code")}e.ob=function(o,u){return Ct(this,Tz,{oobCode:o,newPassword:u})},e.Sa=function(o){return Ct(this,uz,{oobCode:o})},e.kb=function(o){return Ct(this,az,{oobCode:o})};var az={endpoint:"setAccountInfo",A:C0,Z:"email",B:!0},uz={endpoint:"resetPassword",A:C0,G:function(o){var u=o.requestType;if(!u||!o.email&&u!="EMAIL_SIGNIN"&&u!="VERIFY_AND_CHANGE_EMAIL")throw new A("internal-error")},B:!0},cz={endpoint:"signupNewUser",A:function(o){if(Rs(o),!o.password)throw new A("weak-password")},G:Bn,V:!0,B:!0},lz={endpoint:"createAuthUri",B:!0},hz={endpoint:"deleteAccount",O:["idToken"]},dz={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(o){if(!Array.isArray(o.deleteProvider))throw new A("internal-error")}},fz={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Rs,G:Bn,V:!0,B:!0},pz={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Rs,G:Bn,V:!0},mz={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:WR,G:Bn,B:!0,Na:!0},gz={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:WR,G:Bn,B:!0,Na:!0},vz={endpoint:"getAccountInfo"},yz={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="EMAIL_SIGNIN")throw new A("internal-error");Rs(o)},Z:"email",B:!0},bz={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(o){if(o.requestType!="VERIFY_EMAIL")throw new A("internal-error")},Z:"email",B:!0},wz={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(o){if(o.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new A("internal-error")},Z:"email",B:!0},_z={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="PASSWORD_RESET")throw new A("internal-error");Rs(o)},Z:"email",B:!0},Iz={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Ez={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(o){if(!o.recaptchaSiteKey)throw new A("internal-error")}},Tz={endpoint:"resetPassword",A:C0,Z:"email",B:!0},Az={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},YR={endpoint:"setAccountInfo",O:["idToken"],A:HR,V:!0},XR={endpoint:"setAccountInfo",O:["idToken"],A:function(o){if(HR(o),!o.password)throw new A("weak-password")},G:Bn,V:!0},Sz={endpoint:"signupNewUser",G:Bn,V:!0,B:!0},xz={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(o){if(!o.phoneEnrollmentInfo)throw new A("internal-error");if(!o.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!o.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(o){if(!o.phoneSessionInfo||!o.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Cz={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(o){if(!o.phoneSignInInfo||!o.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(o){if(!o.phoneResponseInfo||!o.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Rz={endpoint:"verifyAssertion",A:E0,Za:T0,G:QR,V:!0,B:!0},Dz={endpoint:"verifyAssertion",A:E0,Za:T0,G:function(o){if(o.errorMessage&&o.errorMessage=="USER_NOT_FOUND")throw new A("user-not-found");if(o.errorMessage)throw ZR(o.errorMessage);Bn(o)},V:!0,B:!0},kz={endpoint:"verifyAssertion",A:function(o){if(E0(o),!o.idToken)throw new A("internal-error")},Za:T0,G:QR,V:!0},Pz={endpoint:"verifyCustomToken",A:function(o){if(!o.token)throw new A("invalid-custom-token")},G:Bn,V:!0,B:!0},JR={endpoint:"verifyPassword",A:function(o){if(Rs(o),!o.password)throw new A("wrong-password")},G:Bn,V:!0,B:!0},Nz={endpoint:"verifyPhoneNumber",A:I0,G:Bn,B:!0},Oz={endpoint:"verifyPhoneNumber",A:function(o){if(!o.idToken)throw new A("internal-error");I0(o)},G:function(o){if(o.temporaryProof)throw o.code="credential-already-in-use",yp(o);Bn(o)}},Mz={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:I0,G:Bn,B:!0},Lz={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(o){if(!!o[Vr]^!!o.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function Ct(o,u,h){if(!c3(h,u.O))return ee(new A("internal-error"));var f=!!u.Na,m=u.Vb||"POST",y;return at(h).then(u.A).then(function(){return u.V&&(h.returnSecureToken=!0),u.B&&o.b&&typeof h.tenantId>"u"&&(h.tenantId=o.b),f?$R(o,o.i,u.endpoint,m,h,u.Ib,u.mb||!1):$R(o,o.h,u.endpoint,m,h,u.Ib,u.mb||!1)}).then(function(w){return y=w,u.Za?u.Za(h,y):y}).then(u.G).then(function(){if(!u.Z)return y;if(!(u.Z in y))throw new A("internal-error");return y[u.Z]})}function ZR(o){return R0({error:{errors:[{message:o}],code:400,message:o}})}function R0(o,u){var h=(o.error&&o.error.errors&&o.error.errors[0]||{}).reason||"",f={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(h=f[h]?new A(f[h]):null)return h;h=o.error&&o.error.message||"",f={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Fn(f,u||{}),u=(u=h.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<u.length?u[1]:void 0;for(var m in f)if(h.indexOf(m)===0)return new A(f[m],u);return!u&&o&&(u=Sl(o)),new A("internal-error",u)}function Fz(o){this.b=o,this.a=null,this.sb=Vz(this)}function Vz(o){return Gz().then(function(){return new St(function(u,h){ne("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:ne("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(f){function m(){clearTimeout(y),u()}o.a=f,o.a.restyle({setHideOnLeave:!1});var y=setTimeout(function(){h(Error("Network Error"))},zz.get());f.ping(m).then(m,function(){h(Error("Network Error"))})})})})}function jz(o,u){return o.sb.then(function(){return new St(function(h){o.a.send(u.type,u,h,ne("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function Uz(o,u){o.sb.then(function(){o.a.register("authEvent",u,ne("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var Bz=new ti(Qf,"https://apis.google.com/js/api.js?onload=%{onload}"),qz=new ao(3e4,6e4),zz=new ao(5e3,15e3),Pp=null;function Gz(){return Pp||(Pp=new St(function(o,u){function h(){HC(),ne("gapi.load")("gapi.iframes",{callback:o,ontimeout:function(){HC(),u(Error("Network Error"))},timeout:qz.get()})}if(ne("gapi.iframes.Iframe"))o();else if(ne("gapi.load"))h();else{var f="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[f]=function(){ne("gapi.load")?h():u(Error("Network Error"))},f=cb(Bz,{onload:f}),at(y0(f)).o(function(){u(Error("Network Error"))})}}).o(function(o){throw Pp=null,o}))}function tD(o,u,h,f){this.l=o,this.h=u,this.i=h,this.g=f,this.f=null,this.g?(o=Un(this.g.url),o=ap(o.c,o.a,o.g,"/emulator/auth/iframe")):o=ap("https",this.l,null,"/__/auth/iframe"),this.a=o,ge(this.a,"apiKey",this.h),ge(this.a,"appName",this.i),this.b=null,this.c=[]}tD.prototype.toString=function(){return this.f?ge(this.a,"v",this.f):ei(this.a.b,"v"),this.b?ge(this.a,"eid",this.b):ei(this.a.b,"eid"),this.c.length?ge(this.a,"fw",this.c.join(",")):ei(this.a.b,"fw"),this.a.toString()};function D0(o,u,h,f,m,y){this.u=o,this.s=u,this.c=h,this.m=f,this.v=y,this.i=this.g=this.l=null,this.a=m,this.h=this.f=null}D0.prototype.zb=function(o){return this.h=o,this},D0.prototype.toString=function(){if(this.v){var o=Un(this.v.url);o=ap(o.c,o.a,o.g,"/emulator/auth/handler")}else o=ap("https",this.u,null,"/__/auth/handler");if(ge(o,"apiKey",this.s),ge(o,"appName",this.c),ge(o,"authType",this.m),this.a.isOAuthProvider){var u=this.a;try{var h=dt.app(this.c).auth().la()}catch{h=null}u.pb=h,ge(o,"providerId",this.a.providerId),h=this.a,u=KC(h.Jb);for(var f in u)u[f]=u[f].toString();f=h.Qc,u=ro(u);for(var m=0;m<f.length;m++){var y=f[m];y in u&&delete u[y]}h.qb&&h.pb&&!u[h.qb]&&(u[h.qb]=h.pb),ps(u)||ge(o,"customParameters",Sl(u))}if(typeof this.a.Rb=="function"&&(h=this.a.Rb(),h.length&&ge(o,"scopes",h.join(","))),this.l?ge(o,"redirectUrl",this.l):ei(o.b,"redirectUrl"),this.g?ge(o,"eventId",this.g):ei(o.b,"eventId"),this.i?ge(o,"v",this.i):ei(o.b,"v"),this.b)for(var w in this.b)this.b.hasOwnProperty(w)&&!br(o,w)&&ge(o,w,this.b[w]);return this.h?ge(o,"tid",this.h):ei(o.b,"tid"),this.f?ge(o,"eid",this.f):ei(o.b,"eid"),w=k0(this.c),w.length&&ge(o,"fw",w.join(",")),o.toString()};function k0(o){try{return dt.app(o).auth().Ga()}catch{return[]}}function eD(o,u,h,f,m,y){this.s=o,this.g=u,this.b=h,this.f=y,this.c=f||null,this.i=m||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function nD(o){var u=Tl();return ez(o).then(function(h){t:{var f=Un(u),m=f.c;f=f.a;for(var y=0;y<h.length;y++){var w=h[y],E=f,P=m;if(w.indexOf("chrome-extension://")==0?E=Un(w).a==E&&P=="chrome-extension":P!="http"&&P!="https"?E=!1:e3.test(w)?E=E==w:(w=w.split(".").join("\\."),E=new RegExp("^(.+\\."+w+"|"+w+")$","i").test(E)),E){h=!0;break t}}h=!1}if(!h)throw new u0(Tl())})}function rD(o){return o.m||(o.m=up().then(function(){if(!o.u){var u=o.c,h=o.i,f=k0(o.b),m=new tD(o.s,o.g,o.b,o.f);m.f=u,m.b=h,m.c=fs(f||[]),o.u=m.toString()}o.v=new Fz(o.u),Kz(o)})),o.m}e=eD.prototype,e.Pb=function(o,u,h){var f=new A("popup-closed-by-user"),m=new A("web-storage-unsupported"),y=this,w=!1;return this.ma().then(function(){$z(y).then(function(E){E||(o&&ws(o),u(m),w=!0)})}).o(function(){}).then(function(){if(!w)return t3(o)}).then(function(){if(!w)return Qa(h).then(function(){u(f)})})},e.Yb=function(){var o=Ze();return!Al(o)&&!$C(o)},e.Ub=function(){return!1},e.Nb=function(o,u,h,f,m,y,w,E){if(!o)return ee(new A("popup-blocked"));if(w&&!Al())return this.ma().o(function(V){ws(o),m(V)}),f(),at();this.a||(this.a=nD(iD(this)));var P=this;return this.a.then(function(){var V=P.ma().o(function(pt){throw ws(o),m(pt),pt});return f(),V}).then(function(){if(s0(h),!w){var V=ql(P.s,P.g,P.b,u,h,null,y,P.c,void 0,P.i,E,P.f);VC(V,o)}}).o(function(V){throw V.code=="auth/network-request-failed"&&(P.a=null),V})};function iD(o){return o.l||(o.C=o.c?Za(o.c,k0(o.b)):null,o.l=new Fr(o.g,pl(o.i),o.C),o.f&&kp(o.l,o.f)),o.l}e.Ob=function(o,u,h,f){this.a||(this.a=nD(iD(this)));var m=this;return this.a.then(function(){s0(u);var y=ql(m.s,m.g,m.b,o,u,Tl(),h,m.c,void 0,m.i,f,m.f);VC(y)}).o(function(y){throw y.code=="auth/network-request-failed"&&(m.a=null),y})},e.ma=function(){var o=this;return rD(this).then(function(){return o.v.sb}).o(function(){throw o.a=null,new A("network-request-failed")})},e.ac=function(){return!0};function ql(o,u,h,f,m,y,w,E,P,V,pt,Bt){return o=new D0(o,u,h,f,m,Bt),o.l=y,o.g=w,o.i=E,o.b=ro(P||null),o.f=V,o.zb(pt).toString()}function Kz(o){if(!o.v)throw Error("IfcHandler must be initialized!");Uz(o.v,function(u){var h={};if(u&&u.authEvent){var f=!1;for(u=xR(u.authEvent),h=0;h<o.h.length;h++)f=o.h[h](u)||f;return h={},h.status=f?"ACK":"ERROR",at(h)}return h.status="ERROR",at(h)})}function $z(o){var u={type:"webStorageSupport"};return rD(o).then(function(){return jz(o.v,u)}).then(function(h){if(h&&h.length&&typeof h[0].webStorageSupport<"u")return h[0].webStorageSupport;throw Error()})}e.Ea=function(o){this.h.push(o)},e.Ta=function(o){Nr(this.h,function(u){return u==o})};function oD(o){if(this.a=o||dt.INTERNAL.reactNative&&dt.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=oD.prototype,e.get=function(o){return at(this.a.getItem(o)).then(function(u){return u&&eu(u)})},e.set=function(o,u){return at(this.a.setItem(o,Sl(u)))},e.U=function(o){return at(this.a.removeItem(o))},e.ca=function(){},e.ia=function(){};function sD(o){this.b=o,this.a={},this.f=L(this.c,this)}var aD=[];function Hz(){var o=Mr()?self:null;if(se(aD,function(h){h.b==o&&(u=h)}),!u){var u=new sD(o);aD.push(u)}return u}sD.prototype.c=function(o){var u=o.data.eventType,h=o.data.eventId,f=this.a[u];if(f&&0<f.length){o.ports[0].postMessage({status:"ack",eventId:h,eventType:u,response:null});var m=[];se(f,function(y){m.push(at().then(function(){return y(o.origin,o.data.data)}))}),cC(m).then(function(y){var w=[];se(y,function(E){w.push({fulfilled:E.Qb,value:E.value,reason:E.reason?E.reason.message:void 0})}),se(w,function(E){for(var P in E)typeof E[P]>"u"&&delete E[P]}),o.ports[0].postMessage({status:"done",eventId:h,eventType:u,response:w})})}};function uD(o,u,h){ps(o.a)&&o.b.addEventListener("message",o.f),typeof o.a[u]>"u"&&(o.a[u]=[]),o.a[u].push(h)}function cD(o){this.a=o}cD.prototype.postMessage=function(o,u){this.a.postMessage(o,u)};function lD(o){this.c=o,this.b=!1,this.a=[]}function hD(o,u,h,f){var m,y=h||{},w,E,P,V=null;if(o.b)return ee(Error("connection_unavailable"));var pt=f?800:50,Bt=typeof MessageChannel<"u"?new MessageChannel:null;return new St(function(Lt,ze){Bt?(m=Math.floor(Math.random()*Math.pow(10,20)).toString(),Bt.port1.start(),E=setTimeout(function(){ze(Error("unsupported_event"))},pt),w=function(Vi){Vi.data.eventId===m&&(Vi.data.status==="ack"?(clearTimeout(E),P=setTimeout(function(){ze(Error("timeout"))},3e3)):Vi.data.status==="done"?(clearTimeout(P),typeof Vi.data.response<"u"?Lt(Vi.data.response):ze(Error("unknown_error"))):(clearTimeout(E),clearTimeout(P),ze(Error("invalid_response"))))},V={messageChannel:Bt,onMessage:w},o.a.push(V),Bt.port1.addEventListener("message",w),o.c.postMessage({eventType:u,eventId:m,data:y},[Bt.port2])):ze(Error("connection_unavailable"))}).then(function(Lt){return P0(o,V),Lt}).o(function(Lt){throw P0(o,V),Lt})}function P0(o,u){if(u){var h=u.messageChannel,f=u.onMessage;h&&(h.port1.removeEventListener("message",f),h.port1.close()),Nr(o.a,function(m){return m==u})}}lD.prototype.close=function(){for(;0<this.a.length;)P0(this,this.a[0]);this.b=!0};function dD(){if(!M0())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var o=this;Mr()&&self?(this.v=Hz(),uD(this.v,"keyChanged",function(u,h){return mD(o).then(function(f){return 0<f.length&&se(o.a,function(m){m(f)}),{keyProcessed:Ni(f,h.key)}})}),uD(this.v,"ping",function(){return at(["keyChanged"])})):a3().then(function(u){(o.h=u)&&(o.g=new lD(new cD(u)),hD(o.g,"ping",null,!0).then(function(h){h[0].fulfilled&&Ni(h[0].value,"keyChanged")&&(o.s=!0)}).o(function(){}))})}var N0;function Wz(o){return new St(function(u,h){var f=o.m.deleteDatabase("firebaseLocalStorageDb");f.onsuccess=function(){u()},f.onerror=function(m){h(Error(m.target.error))}})}function fD(o){return new St(function(u,h){var f=o.m.open("firebaseLocalStorageDb",1);f.onerror=function(m){try{m.preventDefault()}catch{}h(Error(m.target.error))},f.onupgradeneeded=function(m){m=m.target.result;try{m.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(y){h(y)}},f.onsuccess=function(m){m=m.target.result,m.objectStoreNames.contains("firebaseLocalStorage")?u(m):Wz(o).then(function(){return fD(o)}).then(function(y){u(y)}).o(function(y){h(y)})}})}function O0(o){return o.i||(o.i=fD(o)),o.i}function Np(o,u){function h(m,y){O0(o).then(u).then(m).o(function(w){if(3<++f)y(w);else return O0(o).then(function(E){return E.close(),o.i=void 0,h(m,y)}).o(function(E){y(E)})})}var f=0;return new St(h)}function M0(){try{return!!l.indexedDB}catch{return!1}}function zl(o){return o.objectStore("firebaseLocalStorage")}function Gl(o,u){return o.transaction(["firebaseLocalStorage"],u?"readwrite":"readonly")}function ou(o){return new St(function(u,h){o.onsuccess=function(f){f&&f.target?u(f.target.result):u()},o.onerror=function(f){h(f.target.error)}})}e=dD.prototype,e.set=function(o,u){var h=this,f=!1;return Np(this,function(m){return m=zl(Gl(m,!0)),ou(m.get(o))}).then(function(m){return Np(h,function(y){if(y=zl(Gl(y,!0)),m)return m.value=u,ou(y.put(m));h.b++,f=!0;var w={};return w.fbase_key=o,w.value=u,ou(y.add(w))})}).then(function(){return h.c[o]=u,pD(h,o)}).oa(function(){f&&h.b--})};function pD(o,u){return o.g&&o.h&&s3()===o.h?hD(o.g,"keyChanged",{key:u},o.s).then(function(){}).o(function(){}):at()}e.get=function(o){return Np(this,function(u){return ou(zl(Gl(u,!1)).get(o))}).then(function(u){return u&&u.value})},e.U=function(o){var u=this,h=!1;return Np(this,function(f){return h=!0,u.b++,ou(zl(Gl(f,!0)).delete(o))}).then(function(){return delete u.c[o],pD(u,o)}).oa(function(){h&&u.b--})};function mD(o){return O0(o).then(function(u){var h=zl(Gl(u,!1));return h.getAll?ou(h.getAll()):new St(function(f,m){var y=[],w=h.openCursor();w.onsuccess=function(E){(E=E.target.result)?(y.push(E.value),E.continue()):f(y)},w.onerror=function(E){m(E.target.error)}})}).then(function(u){var h={},f=[];if(o.b==0){for(f=0;f<u.length;f++)h[u[f].fbase_key]=u[f].value;f=jC(o.c,h),o.c=h}return f})}e.ca=function(o){this.a.length==0&&Qz(this),this.a.push(o)},e.ia=function(o){Nr(this.a,function(u){return u==o}),this.a.length==0&&gD(this)};function Qz(o){function u(){o.f=setTimeout(function(){o.l=mD(o).then(function(h){0<h.length&&se(o.a,function(f){f(h)})}).then(function(){u()}).o(function(h){h.message!="STOP_EVENT"&&u()})},800)}gD(o),u()}function gD(o){o.l&&o.l.cancel("STOP_EVENT"),o.f&&(clearTimeout(o.f),o.f=null)}function vD(o){var u=this,h=null;this.a=[],this.type="indexedDB",this.c=o,this.b=at().then(function(){if(M0()){var f=Is(),m="__sak"+f;return N0||(N0=new dD),h=N0,h.set(m,f).then(function(){return h.get(m)}).then(function(y){if(y!==f)throw Error("indexedDB not supported!");return h.U(m)}).then(function(){return h}).o(function(){return u.c})}return u.c}).then(function(f){return u.type=f.type,f.ca(function(m){se(u.a,function(y){y(m)})}),f})}e=vD.prototype,e.get=function(o){return this.b.then(function(u){return u.get(o)})},e.set=function(o,u){return this.b.then(function(h){return h.set(o,u)})},e.U=function(o){return this.b.then(function(u){return u.U(o)})},e.ca=function(o){this.a.push(o)},e.ia=function(o){Nr(this.a,function(u){return u==o})};function Kl(){this.a={},this.type="inMemory"}e=Kl.prototype,e.get=function(o){return at(this.a[o])},e.set=function(o,u){return this.a[o]=u,at()},e.U=function(o){return delete this.a[o],at()},e.ca=function(){},e.ia=function(){};function Op(){if(!Yz())throw ni()=="Node"?new A("internal-error","The LocalStorage compatibility library was not found."):new A("web-storage-unsupported");this.a=yD()||dt.INTERNAL.node.localStorage,this.type="localStorage"}function yD(){try{var o=l.localStorage,u=Is();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch{return null}}function Yz(){var o=ni()=="Node";if(o=yD()||o&&dt.INTERNAL.node&&dt.INTERNAL.node.localStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=Op.prototype,e.get=function(o){var u=this;return at().then(function(){var h=u.a.getItem(o);return eu(h)})},e.set=function(o,u){var h=this;return at().then(function(){var f=Sl(u);f===null?h.U(o):h.a.setItem(o,f)})},e.U=function(o){var u=this;return at().then(function(){u.a.removeItem(o)})},e.ca=function(o){l.window&&yr(l.window,"storage",o)},e.ia=function(o){l.window&&Zn(l.window,"storage",o)};function L0(){this.type="nullStorage"}e=L0.prototype,e.get=function(){return at(null)},e.set=function(){return at()},e.U=function(){return at()},e.ca=function(){},e.ia=function(){};function F0(){if(!Xz())throw ni()=="Node"?new A("internal-error","The SessionStorage compatibility library was not found."):new A("web-storage-unsupported");this.a=bD()||dt.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function bD(){try{var o=l.sessionStorage,u=Is();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch{return null}}function Xz(){var o=ni()=="Node";if(o=bD()||o&&dt.INTERNAL.node&&dt.INTERNAL.node.sessionStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=F0.prototype,e.get=function(o){var u=this;return at().then(function(){var h=u.a.getItem(o);return eu(h)})},e.set=function(o,u){var h=this;return at().then(function(){var f=Sl(u);f===null?h.U(o):h.a.setItem(o,f)})},e.U=function(o){var u=this;return at().then(function(){u.a.removeItem(o)})},e.ca=function(){},e.ia=function(){};function Jz(){var o={};o.Browser=Zz,o.Node=t5,o.ReactNative=e5,o.Worker=n5,this.a=o[ni()]}var V0,Zz={F:Op,cb:F0},t5={F:Op,cb:F0},e5={F:oD,cb:L0},n5={F:Op,cb:L0},su={rd:"local",NONE:"none",td:"session"};function r5(o){var u=new A("invalid-persistence-type"),h=new A("unsupported-persistence-type");t:{for(f in su)if(su[f]==o){var f=!0;break t}f=!1}if(!f||typeof o!="string")throw u;switch(ni()){case"ReactNative":if(o==="session")throw h;break;case"Node":if(o!=="none")throw h;break;case"Worker":if(o==="session"||!M0()&&o!=="none")throw h;break;default:if(!Vb()&&o!=="none")throw h}}function wD(){var o=!!(!$C(Ze())&&Lb()),u=Al(),h=Vb();this.m=o,this.h=u,this.l=h,this.a={},V0||(V0=new Jz),o=V0;try{this.g=!Ob()&&WC()||!l.indexedDB?new o.a.F:new vD(Mr()?new Kl:new o.a.F)}catch{this.g=new Kl,this.h=!0}try{this.i=new o.a.cb}catch{this.i=new Kl}this.v=new Kl,this.f=L(this.Zb,this),this.b={}}var j0;function $l(){return j0||(j0=new wD),j0}function Ds(o,u){switch(u){case"session":return o.i;case"none":return o.v;default:return o.g}}function au(o,u){return"firebase:"+o.name+(u?":"+u:"")}function i5(o,u,h){var f=au(u,h),m=Ds(o,u.F);return o.get(u,h).then(function(y){var w=null;try{w=eu(l.localStorage.getItem(f))}catch{}if(w&&!y)return l.localStorage.removeItem(f),o.set(u,w,h);w&&y&&m.type!="localStorage"&&l.localStorage.removeItem(f)})}e=wD.prototype,e.get=function(o,u){return Ds(this,o.F).get(au(o,u))};function uu(o,u,h){return h=au(u,h),u.F=="local"&&(o.b[h]=null),Ds(o,u.F).U(h)}e.set=function(o,u,h){var f=au(o,h),m=this,y=Ds(this,o.F);return y.set(f,u).then(function(){return y.get(f)}).then(function(w){o.F=="local"&&(m.b[f]=w)})},e.addListener=function(o,u,h){o=au(o,u),this.l&&(this.b[o]=l.localStorage.getItem(o)),ps(this.a)&&(Ds(this,"local").ca(this.f),this.h||(Ob()||!WC())&&l.indexedDB||!this.l||o5(this)),this.a[o]||(this.a[o]=[]),this.a[o].push(h)},e.removeListener=function(o,u,h){o=au(o,u),this.a[o]&&(Nr(this.a[o],function(f){return f==h}),this.a[o].length==0&&delete this.a[o]),ps(this.a)&&(Ds(this,"local").ia(this.f),U0(this))};function o5(o){U0(o),o.c=setInterval(function(){for(var u in o.a){var h=l.localStorage.getItem(u),f=o.b[u];h!=f&&(o.b[u]=h,h=new vs({type:"storage",key:u,target:window,oldValue:f,newValue:h,a:!0}),o.Zb(h))}},1e3)}function U0(o){o.c&&(clearInterval(o.c),o.c=null)}e.Zb=function(o){if(o&&o.g){var u=o.a.key;if(u==null)for(var h in this.a){var f=this.b[h];typeof f>"u"&&(f=null);var m=l.localStorage.getItem(h);m!==f&&(this.b[h]=m,this.nb(h))}else if(u.indexOf("firebase:")==0&&this.a[u]){if(typeof o.a.a<"u"?Ds(this,"local").ia(this.f):U0(this),this.m){if(h=l.localStorage.getItem(u),f=o.a.newValue,f!==h)f!==null?l.localStorage.setItem(u,f):l.localStorage.removeItem(u);else if(this.b[u]===f&&typeof o.a.a>"u")return}var y=this;h=function(){(typeof o.a.a<"u"||y.b[u]!==l.localStorage.getItem(u))&&(y.b[u]=l.localStorage.getItem(u),y.nb(u))},Or&&io&&io==10&&l.localStorage.getItem(u)!==o.a.newValue&&o.a.newValue!==o.a.oldValue?setTimeout(h,10):h()}}else se(o,L(this.nb,this))},e.nb=function(o){this.a[o]&&se(this.a[o],function(u){u()})};function s5(o){this.a=o,this.b=$l()}var B0={name:"authEvent",F:"local"};function a5(o){return o.b.get(B0,o.a).then(function(u){return xR(u)})}function u5(){this.a=$l()}function c5(){this.b=-1}function Mp(o,u){this.b=_D,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=o,this.h=u,this.l=l.Int32Array?new Int32Array(64):Array(64),Lp===void 0&&(l.Int32Array?Lp=new Int32Array(TD):Lp=TD),this.reset()}var Lp;ht(Mp,c5);for(var _D=64,l5=_D-1,ID=[],q0=0;q0<l5;q0++)ID[q0]=0;var ED=sb(128,ID);Mp.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):fs(this.h)};function z0(o){for(var u=o.f,h=o.l,f=0,m=0;m<u.length;)h[f++]=u[m]<<24|u[m+1]<<16|u[m+2]<<8|u[m+3],m=4*f;for(u=16;64>u;u++){m=h[u-15]|0,f=h[u-2]|0;var y=(h[u-16]|0)+((m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3)|0,w=(h[u-7]|0)+((f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10)|0;h[u]=y+w|0}f=o.a[0]|0,m=o.a[1]|0;var E=o.a[2]|0,P=o.a[3]|0,V=o.a[4]|0,pt=o.a[5]|0,Bt=o.a[6]|0;for(y=o.a[7]|0,u=0;64>u;u++){var Lt=((f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10))+(f&m^f&E^m&E)|0;w=V&pt^~V&Bt,y=y+((V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7))|0,w=w+(Lp[u]|0)|0,w=y+(w+(h[u]|0)|0)|0,y=Bt,Bt=pt,pt=V,V=P+w|0,P=E,E=m,m=f,f=w+Lt|0}o.a[0]=o.a[0]+f|0,o.a[1]=o.a[1]+m|0,o.a[2]=o.a[2]+E|0,o.a[3]=o.a[3]+P|0,o.a[4]=o.a[4]+V|0,o.a[5]=o.a[5]+pt|0,o.a[6]=o.a[6]+Bt|0,o.a[7]=o.a[7]+y|0}function G0(o,u,h){h===void 0&&(h=u.length);var f=0,m=o.c;if(typeof u=="string")for(;f<h;)o.f[m++]=u.charCodeAt(f++),m==o.b&&(z0(o),m=0);else if(_(u))for(;f<h;){var y=u[f++];if(!(typeof y=="number"&&0<=y&&255>=y&&y==(y|0)))throw Error("message must be a byte array");o.f[m++]=y,m==o.b&&(z0(o),m=0)}else throw Error("message must be string or array");o.c=m,o.g+=h}var TD=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function AD(){Mp.call(this,8,h5)}ht(AD,Mp);var h5=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function SD(o,u,h,f,m,y){this.v=o,this.i=u,this.l=h,this.m=f||null,this.u=m||null,this.s=y,this.h=u+":"+h,this.C=new u5,this.g=new s5(this.h),this.f=null,this.b=[],this.a=this.c=null}function Fp(o){return new A("invalid-cordova-configuration",o)}e=SD.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=r3().then(function(){if(typeof ne("universalLinks.subscribe",l)!="function")throw Fp("cordova-universal-links-plugin-fix is not installed");if(typeof ne("BuildInfo.packageName",l)>"u")throw Fp("cordova-plugin-buildinfo is not installed");if(typeof ne("cordova.plugins.browsertab.openUrl",l)!="function")throw Fp("cordova-plugin-browsertab is not installed");if(typeof ne("cordova.InAppBrowser.open",l)!="function")throw Fp("cordova-plugin-inappbrowser is not installed")},function(){throw new A("cordova-not-ready")})};function d5(){for(var o=20,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}function f5(o){var u=new AD;G0(u,o),o=[];var h=8*u.g;56>u.c?G0(u,ED,56-u.c):G0(u,ED,u.b-(u.c-56));for(var f=63;56<=f;f--)u.f[f]=h&255,h/=256;for(z0(u),f=h=0;f<u.i;f++)for(var m=24;0<=m;m-=8)o[h++]=u.a[f]>>m&255;return E3(o)}e.Pb=function(o,u){return u(new A("operation-not-supported-in-this-environment")),at()},e.Nb=function(){return ee(new A("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(o,u,h,f){if(this.c)return ee(new A("redirect-operation-pending"));var m=this,y=l.document,w=null,E=null,P=null,V=null;return this.c=at().then(function(){return s0(u),CD(m)}).then(function(){return p5(m,o,u,h,f)}).then(function(){return new St(function(pt,Bt){E=function(){var Lt=ne("cordova.plugins.browsertab.close",l);return pt(),typeof Lt=="function"&&Lt(),m.a&&typeof m.a.close=="function"&&(m.a.close(),m.a=null),!1},m.Ea(E),P=function(){w||(w=Qa(2e3).then(function(){Bt(new A("redirect-cancelled-by-user"))}))},V=function(){jb()&&P()},y.addEventListener("resume",P,!1),Ze().toLowerCase().match(/android/)||y.addEventListener("visibilitychange",V,!1)}).o(function(pt){return K0(m).then(function(){throw pt})})}).oa(function(){P&&y.removeEventListener("resume",P,!1),V&&y.removeEventListener("visibilitychange",V,!1),w&&w.cancel(),E&&m.Ta(E),m.c=null})};function p5(o,u,h,f,m){var y=d5(),w=new Lr(u,f,null,y,new A("no-auth-event"),null,m),E=ne("BuildInfo.packageName",l);if(typeof E!="string")throw new A("invalid-cordova-configuration");var P=ne("BuildInfo.displayName",l),V={};if(Ze().toLowerCase().match(/iphone|ipad|ipod/))V.ibi=E;else if(Ze().toLowerCase().match(/android/))V.apn=E;else return ee(new A("operation-not-supported-in-this-environment"));P&&(V.appDisplayName=P),y=f5(y),V.sessionId=y;var pt=ql(o.v,o.i,o.l,u,h,null,f,o.m,V,o.u,m,o.s);return o.ma().then(function(){var Bt=o.h;return o.C.a.set(B0,w.w(),Bt)}).then(function(){var Bt=ne("cordova.plugins.browsertab.isAvailable",l);if(typeof Bt!="function")throw new A("invalid-cordova-configuration");var Lt=null;Bt(function(ze){if(ze){if(Lt=ne("cordova.plugins.browsertab.openUrl",l),typeof Lt!="function")throw new A("invalid-cordova-configuration");Lt(pt)}else{if(Lt=ne("cordova.InAppBrowser.open",l),typeof Lt!="function")throw new A("invalid-cordova-configuration");ze=Ze(),o.a=Lt(pt,ze.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||ze.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function xD(o,u){for(var h=0;h<o.b.length;h++)try{o.b[h](u)}catch{}}function CD(o){return o.f||(o.f=o.ma().then(function(){return new St(function(u){function h(f){return u(f),o.Ta(h),!1}o.Ea(h),m5(o)})})),o.f}function K0(o){var u=null;return a5(o.g).then(function(h){return u=h,h=o.g,uu(h.b,B0,h.a)}).then(function(){return u})}function m5(o){function u(w){f=!0,m&&m.cancel(),K0(o).then(function(E){var P=h;if(E&&w&&w.url){var V=null;P=bR(w.url),P.indexOf("/__/auth/callback")!=-1&&(V=Un(P),V=eu(br(V,"firebaseError")||null),V=(V=typeof V=="object"?x1(V):null)?new Lr(E.c,E.b,null,null,V,null,E.T()):new Lr(E.c,E.b,P,E.f,null,null,E.T())),P=V||h}xD(o,P)})}var h=new Lr("unknown",null,null,null,new A("no-auth-event")),f=!1,m=Qa(500).then(function(){return K0(o).then(function(){f||xD(o,h)})}),y=l.handleOpenURL;l.handleOpenURL=function(w){if(w.toLowerCase().indexOf(ne("BuildInfo.packageName",l).toLowerCase()+"://")==0&&u({url:w}),typeof y=="function")try{y(w)}catch(E){console.error(E)}},a0||(a0=new k3),P3(u)}e.Ea=function(o){this.b.push(o),CD(this).o(function(u){u.code==="auth/invalid-cordova-configuration"&&(u=new Lr("unknown",null,null,null,new A("no-auth-event")),o(u))})},e.Ta=function(o){Nr(this.b,function(u){return u==o})};function g5(o){this.a=o,this.b=$l()}var $0={name:"pendingRedirect",F:"session"};function v5(o){return o.b.set($0,"pending",o.a)}function H0(o){return uu(o.b,$0,o.a)}function y5(o){return o.b.get($0,o.a).then(function(u){return u=="pending"})}function Vp(o,u,h,f){this.i={},this.u=0,this.D=o,this.v=u,this.m=h,this.J=f,this.h=[],this.f=!1,this.l=L(this.s,this),this.b=new Up,this.C=new VD,this.g=new g5(MD(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=RD(this.D,this.v,this.m,ml,this.J)}function RD(o,u,h,f,m){var y=dt.SDK_VERSION||null;return Mb()?new SD(o,u,h,y,f,m):new eD(o,u,h,y,f,m)}Vp.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=RD(this.D,this.v,this.m,null,this.J),this.i={}};function DD(o){o.f||(o.f=!0,o.a.Ea(o.l));var u=o.a;return o.a.ma().o(function(h){throw o.a==u&&o.reset(),h})}function kD(o){o.a.Yb()&&DD(o).o(function(u){var h=new Lr("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Q0(u)&&o.s(h)}),o.a.Ub()||LD(o.b)}function jp(o,u){Ni(o.h,u)||o.h.push(u),o.f||y5(o.g).then(function(h){h?H0(o.g).then(function(){DD(o).o(function(f){var m=new Lr("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Q0(f)&&o.s(m)})}):kD(o)}).o(function(){kD(o)})}function W0(o,u){Nr(o.h,function(h){return h==u})}Vp.prototype.s=function(o){if(!o)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),o&&o.getUid()&&this.i.hasOwnProperty(o.getUid()))return!1;for(var u=!1,h=0;h<this.h.length;h++){var f=this.h[h];if(f.Gb(o.c,o.b)){(u=this.c[o.c])&&(u.h(o,f),o&&(o.f||o.b)&&(this.i[o.getUid()]=!0,this.u=Date.now())),u=!0;break}}return LD(this.b),u};var b5=new ao(2e3,1e4),w5=new ao(3e4,6e4);Vp.prototype.ra=function(){return this.b.ra()};function PD(o,u,h,f,m,y,w){return o.a.Nb(u,h,f,function(){o.f||(o.f=!0,o.a.Ea(o.l))},function(){o.reset()},m,y,w)}function Q0(o){return!!(o&&o.code=="auth/cordova-not-ready")}function ND(o,u,h,f,m){var y;return v5(o.g).then(function(){return o.a.Ob(u,h,f,m).o(function(w){if(Q0(w))throw new A("operation-not-supported-in-this-environment");return y=w,H0(o.g).then(function(){throw y})}).then(function(){return o.a.ac()?new St(function(){}):H0(o.g).then(function(){return o.ra()}).then(function(){}).o(function(){})})})}function OD(o,u,h,f,m){return o.a.Pb(f,function(y){u.na(h,null,y,m)},b5.get())}var Y0={};function MD(o,u,h){return o=o+":"+u,h&&(o=o+":"+h.url),o}function X0(o,u,h,f){var m=MD(u,h,f);return Y0[m]||(Y0[m]=new Vp(o,u,h,f)),Y0[m]}function Up(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}Up.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Up.prototype.h=function(o,u){if(o){this.reset(),this.g=!0;var h=o.c,f=o.b,m=o.a&&o.a.code=="auth/web-storage-unsupported",y=o.a&&o.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!m&&!y),h!="unknown"||m||y?o.a?(ks(this,!0,null,o.a),at()):u.Fa(h,f)?_5(this,o,u):ee(new A("invalid-auth-event")):(ks(this,!1,null,null),at())}else ee(new A("invalid-auth-event"))};function LD(o){o.g||(o.g=!0,ks(o,!1,null,null))}function Bp(o){o.g&&!o.i&&ks(o,!1,null,null)}function _5(o,u,h){h=h.Fa(u.c,u.b);var f=u.g,m=u.f,y=u.i,w=u.T(),E=!!u.c.match(/Redirect$/);h(f,m,w,y).then(function(P){ks(o,E,P,null)}).o(function(P){ks(o,E,null,P)})}function I5(o,u){if(o.b=function(){return ee(u)},o.c.length)for(var h=0;h<o.c.length;h++)o.c[h](u)}function FD(o,u){if(o.b=function(){return at(u)},o.f.length)for(var h=0;h<o.f.length;h++)o.f[h](u)}function ks(o,u,h,f){u?f?I5(o,f):FD(o,h):FD(o,{user:null}),o.f=[],o.c=[]}Up.prototype.ra=function(){var o=this;return new St(function(u,h){o.b?o.b().then(u,h):(o.f.push(u),o.c.push(h),E5(o))})};function E5(o){var u=new A("timeout");o.a&&o.a.cancel(),o.a=Qa(w5.get()).then(function(){o.b||(o.g=!0,ks(o,!0,null,u))})}function VD(){}VD.prototype.h=function(o,u){if(o){var h=o.c,f=o.b;o.a?(u.na(o.c,null,o.a,o.b),at()):u.Fa(h,f)?T5(o,u):ee(new A("invalid-auth-event"))}else ee(new A("invalid-auth-event"))};function T5(o,u){var h=o.b,f=o.c;u.Fa(f,h)(o.g,o.f,o.T(),o.i).then(function(m){u.na(f,m,null,h)}).o(function(m){u.na(f,null,m,h)})}function jD(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(o){this.jb=o},enumerable:!1})}function J0(o,u){this.a=u,tt(this,"verificationId",o)}J0.prototype.confirm=function(o){return o=SR(this.verificationId,o),this.a(o)};function Z0(o,u,h,f){return new Li(o).gb(u,h).then(function(m){return new J0(m,f)})}function A5(o){var u=hR(o);if(!(u&&u.exp&&u.auth_time&&u.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Sn(this,{token:o,expirationTime:xl(1e3*u.exp),authTime:xl(1e3*u.auth_time),issuedAtTime:xl(1e3*u.iat),signInProvider:u.firebase&&u.firebase.sign_in_provider?u.firebase.sign_in_provider:null,signInSecondFactor:u.firebase&&u.firebase.sign_in_second_factor?u.firebase.sign_in_second_factor:null,claims:u})}function tw(o,u,h){var f=u&&u[BD];if(!f)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=o,this.f=ro(u),this.g=h,this.c=new gp(null,f),this.b=[];var m=this;se(u[UD]||[],function(y){(y=Kb(y))&&m.b.push(y)}),tt(this,"auth",this.a),tt(this,"session",this.c),tt(this,"hints",this.b)}var UD="mfaInfo",BD="mfaPendingCredential";tw.prototype.Rc=function(o){var u=this;return o.tb(this.a.a,this.c).then(function(h){var f=ro(u.f);return delete f[UD],delete f[BD],Fn(f,h),u.g(f)})};function ew(o,u,h,f){A.call(this,"multi-factor-auth-required",f,u),this.b=new tw(o,u,h),tt(this,"resolver",this.b)}ht(ew,A);function qD(o,u,h){if(o&&T(o.serverResponse)&&o.code==="auth/multi-factor-auth-required")try{return new ew(u,o.serverResponse,h,o.message)}catch{}return null}function zD(){}zD.prototype.tb=function(o,u,h){return u.type==kl?S5(this,o,u,h):x5(this,o,u)};function S5(o,u,h,f){return h.Ha().then(function(m){return m={idToken:m},typeof f<"u"&&(m.displayName=f),Fn(m,{phoneVerificationInfo:Pl(o.a)}),Ct(u,mz,m)})}function x5(o,u,h){return h.Ha().then(function(f){return f={mfaPendingCredential:f},Fn(f,{phoneVerificationInfo:Pl(o.a)}),Ct(u,gz,f)})}function nw(o){tt(this,"factorId",o.fa),this.a=o}ht(nw,zD);function GD(o){if(nw.call(this,o),this.a.fa!=Li.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}ht(GD,nw);function cu(o,u){jn.call(this,o);for(var h in u)this[h]=u[h]}ht(cu,jn);function rw(o,u){this.a=o,this.b=[],this.c=L(this.yc,this),yr(this.a,"userReloaded",this.c);var h=[];u&&u.multiFactor&&u.multiFactor.enrolledFactors&&se(u.multiFactor.enrolledFactors,function(f){var m=null,y={};if(f){f.uid&&(y[Hb]=f.uid),f.displayName&&(y[YC]=f.displayName),f.enrollmentTime&&(y[$b]=new Date(f.enrollmentTime).toISOString()),f.phoneNumber&&(y[Wb]=f.phoneNumber);try{m=new Cl(y)}catch{}f=m}else f=null;f&&h.push(f)}),qp(this,h)}function C5(o){var u=[];return se(o.mfaInfo||[],function(h){(h=Kb(h))&&u.push(h)}),u}e=rw.prototype,e.yc=function(o){qp(this,C5(o.hd))};function qp(o,u){o.b=u,tt(o,"enrolledFactors",u)}e.Sb=function(){return this.a.I().then(function(o){return new gp(o,null)})},e.fc=function(o,u){var h=this,f=this.a.a;return this.Sb().then(function(m){return o.tb(f,m,u)}).then(function(m){return oi(h.a,m),h.a.reload()})},e.bd=function(o){var u=this,h=typeof o=="string"?o:o.uid,f=this.a.a;return this.a.I().then(function(m){return Ct(f,Lz,{idToken:m,mfaEnrollmentId:h})}).then(function(m){var y=oq(u.b,function(w){return w.uid!=h});return qp(u,y),oi(u.a,m),u.a.reload().o(function(w){if(w.code!="auth/user-token-expired")throw w})})},e.w=function(){return{multiFactor:{enrolledFactors:Hf(this.b,function(o){return o.w()})}}};function iw(o,u,h){if(this.h=o,this.i=u,this.g=h,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}iw.prototype.start=function(){this.a=this.c,ow(this,!0)};function R5(o,u){return u?(o.a=o.c,o.g()):(u=o.a,o.a*=2,o.a>o.f&&(o.a=o.f),u)}function ow(o,u){o.stop(),o.b=Qa(R5(o,u)).then(function(){return o3()}).then(function(){return o.h()}).then(function(){ow(o,!0)}).o(function(h){o.i(h)&&ow(o,!1)})}iw.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function sw(o){this.f=o,this.b=this.a=null,this.c=Date.now()}sw.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function KD(o,u){typeof u>"u"&&(o.b?(u=o.b,u=u.a-u.g):u=0),o.c=Date.now()+1e3*u}function $D(o,u){o.b=pp(u[Vr]||""),o.a=u.refreshToken,u=u.expiresIn,KD(o,typeof u<"u"?Number(u):void 0)}function D5(o,u){o.b=u.b,o.a=u.a,o.c=u.c}function k5(o,u){return Z3(o.f,u).then(function(h){return o.b=pp(h.access_token),o.a=h.refresh_token,KD(o,h.expires_in),{accessToken:o.b.toString(),refreshToken:o.a}}).o(function(h){throw h.code=="auth/user-token-expired"&&(o.a=null),h})}sw.prototype.getToken=function(o){return o=!!o,this.b&&!this.a?ee(new A("user-token-expired")):o||!this.b||Date.now()>this.c-3e4?this.a?k5(this,{grant_type:"refresh_token",refresh_token:this.a}):at(null):at({accessToken:this.b.toString(),refreshToken:this.a})};function zp(o,u){this.a=o||null,this.b=u||null,Sn(this,{lastSignInTime:xl(u||null),creationTime:xl(o||null)})}function P5(o){return new zp(o.a,o.b)}zp.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function N5(o,u,h,f,m,y){Sn(this,{uid:o,displayName:f||null,photoURL:m||null,email:h||null,phoneNumber:y||null,providerId:u})}function er(o,u,h){this.N=[],this.l=o.apiKey,this.m=o.appName,this.s=o.authDomain||null;var f=dt.SDK_VERSION?Za(dt.SDK_VERSION):null;this.a=new Fr(this.l,pl(ml),f),(this.u=o.emulatorConfig||null)&&kp(this.a,this.u),this.h=new sw(this.a),fw(this,u[Vr]),$D(this.h,u),tt(this,"refreshToken",this.h.a),WD(this,h||{}),An.call(this),this.P=!1,this.s&&_s()&&(this.b=X0(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=O5(this),this.ba=L(this.ib,this);var m=this;this.za=null,this.Pa=function(y){m.xa(y.h)},this.qa=null,this.Ba=function(y){aw(m,y.c)},this.$=null,this.aa=[],this.Oa=function(y){Hl(m,y.f)},this.ja=null,this.S=new rw(this,h),tt(this,"multiFactor",this.S)}ht(er,An),er.prototype.xa=function(o){this.za=o,qR(this.a,o)};function aw(o,u){o.u=u,kp(o.a,u),o.b&&(u=o.b,o.b=X0(o.s,o.l,o.m,o.u),o.P&&(W0(u,o),jp(o.b,o)))}er.prototype.la=function(){return this.za};function uw(o,u){o.qa&&Zn(o.qa,"languageCodeChanged",o.Pa),(o.qa=u)&&yr(u,"languageCodeChanged",o.Pa)}function cw(o,u){o.$&&Zn(o.$,"emulatorConfigChanged",o.Ba),(o.$=u)&&yr(u,"emulatorConfigChanged",o.Ba)}function Hl(o,u){o.aa=u,zR(o.a,dt.SDK_VERSION?Za(dt.SDK_VERSION,o.aa):null)}er.prototype.Ga=function(){return fs(this.aa)};function lw(o,u){o.ja&&Zn(o.ja,"frameworkChanged",o.Oa),(o.ja=u)&&yr(u,"frameworkChanged",o.Oa)}er.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function hw(o){try{return dt.app(o.m).auth()}catch{throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+o.m+"'!")}}function O5(o){return new iw(function(){return o.I(!0)},function(u){return!!(u&&u.code=="auth/network-request-failed")},function(){var u=o.h.c-Date.now()-3e5;return 0<u?u:0})}function HD(o){o.J||o.D.b||(o.D.start(),Zn(o,"tokenChanged",o.ba),yr(o,"tokenChanged",o.ba))}function dw(o){Zn(o,"tokenChanged",o.ba),o.D.stop()}function fw(o,u){o.Aa=u,tt(o,"_lat",u)}function M5(o,u){Nr(o.W,function(h){return h==u})}function Ps(o){for(var u=[],h=0;h<o.W.length;h++)u.push(o.W[h](o));return cC(u).then(function(){return o})}function Wl(o){o.b&&!o.P&&(o.P=!0,jp(o.b,o))}function WD(o,u){Sn(o,{uid:u.uid,displayName:u.displayName||null,photoURL:u.photoURL||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,isAnonymous:u.isAnonymous||!1,tenantId:u.tenantId||null,metadata:new zp(u.createdAt,u.lastLoginAt),providerData:[]}),o.a.b=o.tenantId}tt(er.prototype,"providerId","firebase");function QD(){}function pw(o){return at().then(function(){if(o.J)throw new A("app-deleted")})}function mw(o){return Hf(o.providerData,function(u){return u.providerId})}function gw(o,u){u&&(YD(o,u.providerId),o.providerData.push(u))}function YD(o,u){Nr(o.providerData,function(h){return h.providerId==u})}function lo(o,u,h){(u!="uid"||h)&&o.hasOwnProperty(u)&&tt(o,u,h)}function Gp(o,u){o!=u&&(Sn(o,{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,emailVerified:u.emailVerified,phoneNumber:u.phoneNumber,isAnonymous:u.isAnonymous,tenantId:u.tenantId,providerData:[]}),u.metadata?tt(o,"metadata",P5(u.metadata)):tt(o,"metadata",new zp),se(u.providerData,function(h){gw(o,h)}),D5(o.h,u.h),tt(o,"refreshToken",o.h.a),qp(o.S,u.S.b))}e=er.prototype,e.reload=function(){var o=this;return Ve(this,pw(this).then(function(){return vw(o).then(function(){return Ps(o)}).then(QD)}))};function vw(o){return o.I().then(function(u){var h=o.isAnonymous;return L5(o,u).then(function(){return h||lo(o,"isAnonymous",!1),u})})}e.oc=function(o){return this.I(o).then(function(u){return new A5(u)})},e.I=function(o){var u=this;return Ve(this,pw(this).then(function(){return u.h.getToken(o)}).then(function(h){if(!h)throw new A("internal-error");return h.accessToken!=u.Aa&&(fw(u,h.accessToken),u.dispatchEvent(new cu("tokenChanged"))),lo(u,"refreshToken",h.refreshToken),h.accessToken}))};function oi(o,u){u[Vr]&&o.Aa!=u[Vr]&&($D(o.h,u),o.dispatchEvent(new cu("tokenChanged")),fw(o,u[Vr]),lo(o,"refreshToken",o.h.a))}function L5(o,u){return Ct(o.a,vz,{idToken:u}).then(L(o.Kc,o))}e.Kc=function(o){if(o=o.users,!o||!o.length)throw new A("internal-error");o=o[0],WD(this,{uid:o.localId,displayName:o.displayName,photoURL:o.photoUrl,email:o.email,emailVerified:!!o.emailVerified,phoneNumber:o.phoneNumber,lastLoginAt:o.lastLoginAt,createdAt:o.createdAt,tenantId:o.tenantId});for(var u=F5(o),h=0;h<u.length;h++)gw(this,u[h]);lo(this,"isAnonymous",!(this.email&&o.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new cu("userReloaded",{hd:o}))};function F5(o){return(o=o.providerUserInfo)&&o.length?Hf(o,function(u){return new N5(u.rawId,u.providerId,u.email,u.displayName,u.photoUrl,u.phoneNumber)}):[]}e.Lc=function(o){return Ub("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(o)},e.ub=function(o){var u=this,h=null;return Ve(this,o.c(this.a,this.uid).then(function(f){return oi(u,f),h=Ql(u,f,"reauthenticate"),u.i=null,u.reload()}).then(function(){return h}),!0)};function Kp(o,u){return vw(o).then(function(){if(Ni(mw(o),u))return Ps(o).then(function(){throw new A("provider-already-linked")})})}e.Cc=function(o){return Ub("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(o)},e.rb=function(o){var u=this,h=null;return Ve(this,Kp(this,o.providerId).then(function(){return u.I()}).then(function(f){return o.b(u.a,f)}).then(function(f){return h=Ql(u,f,"link"),XD(u,f)}).then(function(){return h}))},e.Dc=function(o,u){var h=this;return Ve(this,Kp(this,"phone").then(function(){return Z0(hw(h),o,u,L(h.rb,h))}))},e.Mc=function(o,u){var h=this;return Ve(this,at().then(function(){return Z0(hw(h),o,u,L(h.ub,h))}),!0)};function Ql(o,u,h){var f=o0(u);return u=fR(u),ri({user:o,credential:f,additionalUserInfo:u,operationType:h})}function XD(o,u){return oi(o,u),o.reload().then(function(){return o})}e.Cb=function(o){var u=this;return Ve(this,this.I().then(function(h){return u.a.Cb(h,o)}).then(function(h){return oi(u,h),u.reload()}))},e.ed=function(o){var u=this;return Ve(this,this.I().then(function(h){return o.b(u.a,h)}).then(function(h){return oi(u,h),u.reload()}))},e.Db=function(o){var u=this;return Ve(this,this.I().then(function(h){return u.a.Db(h,o)}).then(function(h){return oi(u,h),u.reload()}))},e.Eb=function(o){if(o.displayName===void 0&&o.photoURL===void 0)return pw(this);var u=this;return Ve(this,this.I().then(function(h){return u.a.Eb(h,{displayName:o.displayName,photoUrl:o.photoURL})}).then(function(h){return oi(u,h),lo(u,"displayName",h.displayName||null),lo(u,"photoURL",h.photoUrl||null),se(u.providerData,function(f){f.providerId==="password"&&(tt(f,"displayName",u.displayName),tt(f,"photoURL",u.photoURL))}),Ps(u)}).then(QD))},e.cd=function(o){var u=this;return Ve(this,vw(this).then(function(h){return Ni(mw(u),o)?sz(u.a,h,[o]).then(function(f){var m={};return se(f.providerUserInfo||[],function(y){m[y.providerId]=!0}),se(mw(u),function(y){m[y]||YD(u,y)}),m[Li.PROVIDER_ID]||tt(u,"phoneNumber",null),Ps(u)}):Ps(u).then(function(){throw new A("no-such-provider")})}))},e.delete=function(){var o=this;return Ve(this,this.I().then(function(u){return Ct(o.a,hz,{idToken:u})}).then(function(){o.dispatchEvent(new cu("userDeleted"))})).then(function(){for(var u=0;u<o.N.length;u++)o.N[u].cancel("app-deleted");uw(o,null),cw(o,null),lw(o,null),o.N=[],o.J=!0,dw(o),tt(o,"refreshToken",null),o.b&&W0(o.b,o)})},e.Gb=function(o,u){return!!(o=="linkViaPopup"&&(this.g||null)==u&&this.f||o=="reauthViaPopup"&&(this.g||null)==u&&this.f||o=="linkViaRedirect"&&(this.ga||null)==u||o=="reauthViaRedirect"&&(this.ga||null)==u)},e.na=function(o,u,h,f){o!="linkViaPopup"&&o!="reauthViaPopup"||f!=(this.g||null)||(h&&this.C?this.C(h):u&&!h&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="linkViaPopup"&&u==(this.g||null)?L(this.Lb,this):o=="reauthViaPopup"&&u==(this.g||null)?L(this.Mb,this):o=="linkViaRedirect"&&(this.ga||null)==u?L(this.Lb,this):o=="reauthViaRedirect"&&(this.ga||null)==u?L(this.Mb,this):null},e.Ec=function(o){var u=this;return JD(this,"linkViaPopup",o,function(){return Kp(u,o.providerId).then(function(){return Ps(u)})},!1)},e.Nc=function(o){return JD(this,"reauthViaPopup",o,function(){return at()},!0)};function JD(o,u,h,f,m){if(!_s())return ee(new A("operation-not-supported-in-this-environment"));if(o.i&&!m)return ee(o.i);var y=Zb(h.providerId),w=Is(o.uid+":::"),E=null;(!Al()||Lb())&&o.s&&h.isOAuthProvider&&(E=ql(o.s,o.l,o.m,u,h,null,w,dt.SDK_VERSION||null,null,null,o.tenantId,o.u));var P=BC(E,y&&y.va,y&&y.ua);return f=f().then(function(){if(tk(o),!m)return o.I().then(function(){})}).then(function(){return PD(o.b,P,u,h,w,!!E,o.tenantId)}).then(function(){return new St(function(V,pt){o.na(u,null,new A("cancelled-popup-request"),o.g||null),o.f=V,o.C=pt,o.g=w,o.c=OD(o.b,o,u,P,w)})}).then(function(V){return P&&ws(P),V?ri(V):null}).o(function(V){throw P&&ws(P),V}),Ve(o,f,m)}e.Fc=function(o){var u=this;return ZD(this,"linkViaRedirect",o,function(){return Kp(u,o.providerId)},!1)},e.Oc=function(o){return ZD(this,"reauthViaRedirect",o,function(){return at()},!0)};function ZD(o,u,h,f,m){if(!_s())return ee(new A("operation-not-supported-in-this-environment"));if(o.i&&!m)return ee(o.i);var y=null,w=Is(o.uid+":::");return f=f().then(function(){if(tk(o),!m)return o.I().then(function(){})}).then(function(){return o.ga=w,Ps(o)}).then(function(E){return o.ha&&(E=o.ha,E=E.b.set(yw,o.w(),E.a)),E}).then(function(){return ND(o.b,u,h,w,o.tenantId)}).o(function(E){if(y=E,o.ha)return nk(o.ha);throw y}).then(function(){if(y)throw y}),Ve(o,f,m)}function tk(o){if(!o.b||!o.P)throw o.b&&!o.P?new A("internal-error"):new A("auth-domain-config-required")}e.Lb=function(o,u,h,f){var m=this;this.c&&(this.c.cancel(),this.c=null);var y=null;return h=this.I().then(function(w){return S0(m.a,{requestUri:o,postBody:f,sessionId:u,idToken:w})}).then(function(w){return y=Ql(m,w,"link"),XD(m,w)}).then(function(){return y}),Ve(this,h)},e.Mb=function(o,u,h,f){var m=this;this.c&&(this.c.cancel(),this.c=null);var y=null,w=at().then(function(){return ru(x0(m.a,{requestUri:o,sessionId:u,postBody:f,tenantId:h}),m.uid)}).then(function(E){return y=Ql(m,E,"reauthenticate"),oi(m,E),m.i=null,m.reload()}).then(function(){return y});return Ve(this,w,!0)},e.vb=function(o){var u=this,h=null;return Ve(this,this.I().then(function(f){return h=f,typeof o>"u"||ps(o)?{}:dp(new hp(o))}).then(function(f){return u.a.vb(h,f)}).then(function(f){if(u.email!=f)return u.reload()}).then(function(){}))},e.Fb=function(o,u){var h=this,f=null;return Ve(this,this.I().then(function(m){return f=m,typeof u>"u"||ps(u)?{}:dp(new hp(u))}).then(function(m){return h.a.Fb(f,o,m)}).then(function(m){if(h.email!=m)return h.reload()}).then(function(){}))};function Ve(o,u,h){var f=V5(o,u,h);return o.N.push(f),f.oa(function(){Wf(o.N,f)}),f.o(function(m){var y=null;throw m&&m.code==="auth/multi-factor-auth-required"&&(y=qD(m.w(),hw(o),L(o.jc,o))),y||m})}e.jc=function(o){var u=null,h=this;return o=ru(at(o),h.uid).then(function(f){return u=Ql(h,f,"reauthenticate"),oi(h,f),h.i=null,h.reload()}).then(function(){return u}),Ve(this,o,!0)};function V5(o,u,h){return o.i&&!h?(u.cancel(),ee(o.i)):u.o(function(f){throw!f||f.code!="auth/user-disabled"&&f.code!="auth/user-token-expired"||(o.i||o.dispatchEvent(new cu("userInvalidated")),o.i=f),f})}e.toJSON=function(){return this.w()},e.w=function(){var o={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&Fn(o,this.metadata.w()),se(this.providerData,function(u){o.providerData.push(u3(u))}),Fn(o,this.S.w()),o};function ek(o){if(!o.apiKey)return null;var u={apiKey:o.apiKey,authDomain:o.authDomain,appName:o.appName,emulatorConfig:o.emulatorConfig},h={};if(o.stsTokenManager&&o.stsTokenManager.accessToken){h[Vr]=o.stsTokenManager.accessToken,h.refreshToken=o.stsTokenManager.refreshToken||null;var f=o.stsTokenManager.expirationTime;f&&(h.expiresIn=(f-Date.now())/1e3)}else return null;var m=new er(u,h,o);return o.providerData&&se(o.providerData,function(y){y&&gw(m,ri(y))}),o.redirectEventId&&(m.ga=o.redirectEventId),m}function j5(o,u,h,f){var m=new er(o,u);return h&&(m.ha=h),f&&Hl(m,f),m.reload().then(function(){return m})}function U5(o,u,h,f){var m=o.h,y={};return y[Vr]=m.b&&m.b.toString(),y.refreshToken=m.a,u=new er(u||{apiKey:o.l,authDomain:o.s,appName:o.m},y),h&&(u.ha=h),f&&Hl(u,f),Gp(u,o),u}function B5(o){this.a=o,this.b=$l()}var yw={name:"redirectUser",F:"session"};function nk(o){return uu(o.b,yw,o.a)}function q5(o,u){return o.b.get(yw,o.a).then(function(h){return h&&u&&(h.authDomain=u),ek(h||{})})}function bw(o){this.a=o,this.b=$l(),this.c=null,this.f=z5(this),this.b.addListener(si("local"),this.a,L(this.g,this))}bw.prototype.g=function(){var o=this,u=si("local");lu(this,function(){return at().then(function(){return o.c&&o.c.F!="local"?o.b.get(u,o.a):null}).then(function(h){if(h)return ww(o,"local").then(function(){o.c=u})})})};function ww(o,u){var h=[],f;for(f in su)su[f]!==u&&h.push(uu(o.b,si(su[f]),o.a));return h.push(uu(o.b,_w,o.a)),Pq(h)}function z5(o){var u=si("local"),h=si("session"),f=si("none");return i5(o.b,u,o.a).then(function(){return o.b.get(h,o.a)}).then(function(m){return m?h:o.b.get(f,o.a).then(function(y){return y?f:o.b.get(u,o.a).then(function(w){return w?u:o.b.get(_w,o.a).then(function(E){return E?si(E):u})})})}).then(function(m){return o.c=m,ww(o,m.F)}).o(function(){o.c||(o.c=u)})}var _w={name:"persistence",F:"session"};function si(o){return{name:"authUser",F:o}}bw.prototype.yb=function(o){var u=null,h=this;return r5(o),lu(this,function(){return o!=h.c.F?h.b.get(h.c,h.a).then(function(f){return u=f,ww(h,o)}).then(function(){if(h.c=si(o),u)return h.b.set(h.c,u,h.a)}):at()})};function G5(o){return lu(o,function(){return o.b.set(_w,o.c.F,o.a)})}function rk(o,u){return lu(o,function(){return o.b.set(o.c,u.w(),o.a)})}function ik(o){return lu(o,function(){return uu(o.b,o.c,o.a)})}function ok(o,u,h){return lu(o,function(){return o.b.get(o.c,o.a).then(function(f){return f&&u&&(f.authDomain=u),f&&h&&(f.emulatorConfig=h),ek(f||{})})})}function lu(o,u){return o.f=o.f.then(u,u),o.f}function jr(o){if(this.l=!1,tt(this,"settings",new jD),tt(this,"app",o),$t(this).options&&$t(this).options.apiKey)o=dt.SDK_VERSION?Za(dt.SDK_VERSION):null,this.a=new Fr($t(this).options&&$t(this).options.apiKey,pl(ml),o);else throw new A("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=dt.INTERNAL.createSubscribe(L(this.zc,this)),this.W=void 0,this.ib=dt.INTERNAL.createSubscribe(L(this.Ac,this)),hu(this,null),this.i=new bw($t(this).options.apiKey+":"+$t(this).name),this.D=new B5($t(this).options.apiKey+":"+$t(this).name),this.$=he(this,Y5(this)),this.h=he(this,X5(this)),this.ba=!1,this.ja=L(this.Zc,this),this.Ba=L(this.da,this),this.qa=L(this.mc,this),this.za=L(this.wc,this),this.Aa=L(this.xc,this),this.b=null,H5(this),this.INTERNAL={},this.INTERNAL.delete=L(this.delete,this),this.INTERNAL.logFramework=L(this.Gc,this),this.u=0,An.call(this),$5(this),this.J=[],this.R=null}ht(jr,An);function sk(o){jn.call(this,"languageCodeChanged"),this.h=o}ht(sk,jn);function ak(o){jn.call(this,"emulatorConfigChanged"),this.c=o}ht(ak,jn);function uk(o){jn.call(this,"frameworkChanged"),this.f=o}ht(uk,jn),e=jr.prototype,e.yb=function(o){return o=this.i.yb(o),he(this,o)},e.xa=function(o){this.aa===o||this.l||(this.aa=o,qR(this.a,this.aa),this.dispatchEvent(new sk(this.la())))},e.la=function(){return this.aa},e.fd=function(){var o=l.navigator;this.xa(o&&(o.languages&&o.languages[0]||o.language||o.userLanguage)||null)},e.gd=function(o,u){if(!this.R){if(!/^https?:\/\//.test(o))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");u=u?!!u.disableWarnings:!1,K5(u),this.R={url:o,ec:u},this.settings.jb=!0,kp(this.a,this.R),this.dispatchEvent(new ak(this.R))}};function K5(o){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!o&&up().then(function(){var u=l.document.createElement("div");u.innerText="Running in emulator mode. Do not use with production credentials.",u.style.position="fixed",u.style.width="100%",u.style.backgroundColor="#ffffff",u.style.border=".1em solid #000000",u.style.color="#b50000",u.style.bottom="0px",u.style.left="0px",u.style.margin="0px",u.style.zIndex=1e4,u.style.textAlign="center",u.classList.add("firebase-emulator-warning"),l.document.body.appendChild(u)})}e.Gc=function(o){this.J.push(o),zR(this.a,dt.SDK_VERSION?Za(dt.SDK_VERSION,this.J):null),this.dispatchEvent(new uk(this.J))},e.Ga=function(){return fs(this.J)},e.zb=function(o){this.S===o||this.l||(this.S=o,this.a.b=this.S)},e.T=function(){return this.S};function $5(o){Object.defineProperty(o,"lc",{get:function(){return this.la()},set:function(u){this.xa(u)},enumerable:!1}),o.aa=null,Object.defineProperty(o,"ti",{get:function(){return this.T()},set:function(u){this.zb(u)},enumerable:!1}),o.S=null,Object.defineProperty(o,"emulatorConfig",{get:function(){if(this.R){var u=Un(this.R.url);u=ri({protocol:u.c,host:u.a,port:u.g,options:ri({disableWarnings:this.R.ec})})}else u=null;return u},enumerable:!1})}e.toJSON=function(){return{apiKey:$t(this).options.apiKey,authDomain:$t(this).options.authDomain,appName:$t(this).name,currentUser:It(this)&&It(this).w()}};function Iw(o){return o.Oa||ee(new A("auth-domain-config-required"))}function H5(o){var u=$t(o).options.authDomain,h=$t(o).options.apiKey;u&&_s()&&(o.Oa=o.$.then(function(){if(!o.l){if(o.b=X0(u,h,$t(o).name,o.R),jp(o.b,o),It(o)&&Wl(It(o)),o.m){Wl(o.m);var f=o.m;f.xa(o.la()),uw(f,o),f=o.m,Hl(f,o.J),lw(f,o),f=o.m,aw(f,o.R),cw(f,o),o.m=null}return o.b}}))}e.Gb=function(o,u){switch(o){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==u&&!!this.f;default:return!1}},e.na=function(o,u,h,f){o=="signInViaPopup"&&this.g==f&&(h&&this.C?this.C(h):u&&!h&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="signInViaRedirect"||o=="signInViaPopup"&&this.g==u&&this.f?L(this.ic,this):null},e.ic=function(o,u,h,f){var m=this,y={requestUri:o,postBody:f,sessionId:u,tenantId:h};return this.c&&(this.c.cancel(),this.c=null),m.$.then(function(){return Ns(m,A0(m.a,y))})},e.Xc=function(o){if(!_s())return ee(new A("operation-not-supported-in-this-environment"));var u=this,h=Zb(o.providerId),f=Is(),m=null;(!Al()||Lb())&&$t(this).options.authDomain&&o.isOAuthProvider&&(m=ql($t(this).options.authDomain,$t(this).options.apiKey,$t(this).name,"signInViaPopup",o,null,f,dt.SDK_VERSION||null,null,null,this.T(),this.R));var y=BC(m,h&&h.va,h&&h.ua);return h=Iw(this).then(function(w){return PD(w,y,"signInViaPopup",o,f,!!m,u.T())}).then(function(){return new St(function(w,E){u.na("signInViaPopup",null,new A("cancelled-popup-request"),u.g),u.f=w,u.C=E,u.g=f,u.c=OD(u.b,u,"signInViaPopup",y,f)})}).then(function(w){return y&&ws(y),w?ri(w):null}).o(function(w){throw y&&ws(y),w}),he(this,h)},e.Yc=function(o){if(!_s())return ee(new A("operation-not-supported-in-this-environment"));var u=this,h=Iw(this).then(function(){return G5(u.i)}).then(function(){return ND(u.b,"signInViaRedirect",o,void 0,u.T())});return he(this,h)};function ck(o){if(!_s())return ee(new A("operation-not-supported-in-this-environment"));var u=Iw(o).then(function(){return o.b.ra()}).then(function(h){return h?ri(h):null});return he(o,u)}e.ra=function(){var o=this;return ck(this).then(function(u){return o.b&&Bp(o.b.b),u}).o(function(u){throw o.b&&Bp(o.b.b),u})},e.dd=function(o){if(!o)return ee(new A("null-user"));if(this.S!=o.tenantId)return ee(new A("tenant-id-mismatch"));var u=this,h={};h.apiKey=$t(this).options.apiKey,h.authDomain=$t(this).options.authDomain,h.appName=$t(this).name;var f=U5(o,h,u.D,u.Ga());return he(this,this.h.then(function(){if($t(u).options.apiKey!=o.l)return f.reload()}).then(function(){return It(u)&&o.uid==It(u).uid?(Gp(It(u),o),u.da(o)):(hu(u,f),Wl(f),u.da(f))}).then(function(){Yl(u)}))};function W5(o,u){var h={};return h.apiKey=$t(o).options.apiKey,h.authDomain=$t(o).options.authDomain,h.appName=$t(o).name,o.R&&(h.emulatorConfig=o.R),o.$.then(function(){return j5(h,u,o.D,o.Ga())}).then(function(f){return It(o)&&f.uid==It(o).uid?(Gp(It(o),f),o.da(f)):(hu(o,f),Wl(f),o.da(f))}).then(function(){Yl(o)})}function hu(o,u){It(o)&&(M5(It(o),o.Ba),Zn(It(o),"tokenChanged",o.qa),Zn(It(o),"userDeleted",o.za),Zn(It(o),"userInvalidated",o.Aa),dw(It(o))),u&&(u.W.push(o.Ba),yr(u,"tokenChanged",o.qa),yr(u,"userDeleted",o.za),yr(u,"userInvalidated",o.Aa),0<o.u&&HD(u)),tt(o,"currentUser",u),u&&(u.xa(o.la()),uw(u,o),Hl(u,o.J),lw(u,o),aw(u,o.R),cw(u,o))}e.Bb=function(){var o=this,u=this.h.then(function(){return o.b&&Bp(o.b.b),It(o)?(hu(o,null),ik(o.i).then(function(){Yl(o)})):at()});return he(this,u)};function Q5(o){var u=q5(o.D,$t(o).options.authDomain).then(function(h){return(o.m=h)&&(h.ha=o.D),nk(o.D)});return he(o,u)}function Y5(o){var u=$t(o).options.authDomain,h=Q5(o).then(function(){return ok(o.i,u,o.R)}).then(function(f){return f?(f.ha=o.D,o.m&&(o.m.ga||null)==(f.ga||null)?f:f.reload().then(function(){return rk(o.i,f).then(function(){return f})}).o(function(m){return m.code=="auth/network-request-failed"?f:ik(o.i)})):null}).then(function(f){hu(o,f||null)});return he(o,h)}function X5(o){return o.$.then(function(){return ck(o)}).o(function(){}).then(function(){if(!o.l)return o.ja()}).o(function(){}).then(function(){if(!o.l){o.ba=!0;var u=o.i;u.b.addListener(si("local"),u.a,o.ja)}})}e.Zc=function(){var o=this;return ok(this.i,$t(this).options.authDomain).then(function(u){if(!o.l){var h;if(h=It(o)&&u){h=It(o).uid;var f=u.uid;h=h==null||h===""||f===void 0||f===null||f===""?!1:h==f}if(h)return Gp(It(o),u),It(o).I();(It(o)||u)&&(hu(o,u),u&&(Wl(u),u.ha=o.D),o.b&&jp(o.b,o),Yl(o))}})},e.da=function(o){return rk(this.i,o)},e.mc=function(){Yl(this),this.da(It(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()};function Ns(o,u){var h=null,f=null;return he(o,u.then(function(m){return h=o0(m),f=fR(m),W5(o,m)},function(m){var y=null;throw m&&m.code==="auth/multi-factor-auth-required"&&(y=qD(m.w(),o,L(o.kc,o))),y||m}).then(function(){return ri({user:It(o),credential:h,additionalUserInfo:f,operationType:"signIn"})}))}e.kc=function(o){var u=this;return this.h.then(function(){return Ns(u,at(o))})},e.zc=function(o){var u=this;this.addAuthTokenListener(function(){o.next(It(u))})},e.Ac=function(o){var u=this;J5(this,function(){o.next(It(u))})},e.Ic=function(o,u,h){var f=this;return this.ba&&Promise.resolve().then(function(){typeof o=="function"?o(It(f)):typeof o.next=="function"&&o.next(It(f))}),this.Pa(o,u,h)},e.Hc=function(o,u,h){var f=this;return this.ba&&Promise.resolve().then(function(){f.W=f.getUid(),typeof o=="function"?o(It(f)):typeof o.next=="function"&&o.next(It(f))}),this.ib(o,u,h)},e.nc=function(o){var u=this,h=this.h.then(function(){return It(u)?It(u).I(o).then(function(f){return{accessToken:f}}):null});return he(this,h)},e.Tc=function(o){var u=this;return this.h.then(function(){return Ns(u,Ct(u.a,Pz,{token:o}))}).then(function(h){var f=h.user;return lo(f,"isAnonymous",!1),u.da(f),h})},e.Uc=function(o,u){var h=this;return this.h.then(function(){return Ns(h,Ct(h.a,JR,{email:o,password:u}))})},e.dc=function(o,u){var h=this;return this.h.then(function(){return Ns(h,Ct(h.a,cz,{email:o,password:u}))})},e.ab=function(o){var u=this;return this.h.then(function(){return Ns(u,o.ka(u.a))})},e.Sc=function(o){return Ub("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(o)},e.Ab=function(){var o=this;return this.h.then(function(){var u=It(o);if(u&&u.isAnonymous){var h=ri({providerId:null,isNewUser:!1});return ri({user:u,credential:null,additionalUserInfo:h,operationType:"signIn"})}return Ns(o,o.a.Ab()).then(function(f){var m=f.user;return lo(m,"isAnonymous",!0),o.da(m),f})})};function $t(o){return o.app}function It(o){return o.currentUser}e.getUid=function(){return It(this)&&It(this).uid||null};function $p(o){return It(o)&&It(o)._lat||null}function Yl(o){if(o.ba){for(var u=0;u<o.s.length;u++)o.s[u]&&o.s[u]($p(o));if(o.W!==o.getUid()&&o.N.length)for(o.W=o.getUid(),u=0;u<o.N.length;u++)o.N[u]&&o.N[u]($p(o))}}e.cc=function(o){this.addAuthTokenListener(o),this.u++,0<this.u&&It(this)&&HD(It(this))},e.Pc=function(o){var u=this;se(this.s,function(h){h==o&&u.u--}),0>this.u&&(this.u=0),this.u==0&&It(this)&&dw(It(this)),this.removeAuthTokenListener(o)},e.addAuthTokenListener=function(o){var u=this;this.s.push(o),he(this,this.h.then(function(){u.l||Ni(u.s,o)&&o($p(u))}))},e.removeAuthTokenListener=function(o){Nr(this.s,function(u){return u==o})};function J5(o,u){o.N.push(u),he(o,o.h.then(function(){!o.l&&Ni(o.N,u)&&o.W!==o.getUid()&&(o.W=o.getUid(),u($p(o)))}))}e.delete=function(){this.l=!0;for(var o=0;o<this.P.length;o++)this.P[o].cancel("app-deleted");return this.P=[],this.i&&(o=this.i,o.b.removeListener(si("local"),o.a,this.ja)),this.b&&(W0(this.b,this),Bp(this.b.b)),Promise.resolve()};function he(o,u){return o.P.push(u),u.oa(function(){Wf(o.P,u)}),u}e.hc=function(o){return he(this,tz(this.a,o))},e.Bc=function(o){return!!i0(o)},e.xb=function(o,u){var h=this;return he(this,at().then(function(){var f=new hp(u);if(!f.c)throw new A("argument-error",Xb+" must be true when sending sign in link to email");return dp(f)}).then(function(f){return h.a.xb(o,f)}).then(function(){}))},e.jd=function(o){return this.Sa(o).then(function(u){return u.data.email})},e.ob=function(o,u){return he(this,this.a.ob(o,u).then(function(){}))},e.Sa=function(o){return he(this,this.a.Sa(o).then(function(u){return new l3(u)}))},e.kb=function(o){return he(this,this.a.kb(o).then(function(){}))},e.wb=function(o,u){var h=this;return he(this,at().then(function(){return typeof u>"u"||ps(u)?{}:dp(new hp(u))}).then(function(f){return h.a.wb(o,f)}).then(function(){}))},e.Wc=function(o,u){return he(this,Z0(this,o,u,L(this.ab,this)))},e.Vc=function(o,u){var h=this;return he(this,at().then(function(){var f=u||Tl(),m=AR(o,f);if(f=i0(f),!f)throw new A("argument-error","Invalid email link!");if(f.tenantId!==h.T())throw new A("tenant-id-mismatch");return h.ab(m)}))};function Xl(){}Xl.prototype.render=function(){},Xl.prototype.reset=function(){},Xl.prototype.getResponse=function(){},Xl.prototype.execute=function(){};function du(){this.a={},this.b=1e12}var Ew=null;du.prototype.render=function(o,u){return this.a[this.b.toString()]=new Hp(o,u),this.b++},du.prototype.reset=function(o){var u=Tw(this,o);o=lk(o),u&&o&&(u.delete(),delete this.a[o])},du.prototype.getResponse=function(o){return(o=Tw(this,o))?o.getResponse():null},du.prototype.execute=function(o){(o=Tw(this,o))&&o.execute()};function Tw(o,u){return(u=lk(u))&&o.a[u]||null}function lk(o){return(o=typeof o>"u"?1e12:o)?o.toString():null}function Hp(o,u){this.g=!1,this.c=u,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=vl(o);var h=this;this.i=function(){h.execute()},this.h?this.execute():yr(this.f,"click",this.i)}Hp.prototype.getResponse=function(){return Aw(this),this.b},Hp.prototype.execute=function(){Aw(this);var o=this;this.a||(this.a=setTimeout(function(){o.b=i3();var u=o.c.callback,h=o.c["expired-callback"];if(u)try{u(o.b)}catch{}o.a=setTimeout(function(){if(o.a=null,o.b=null,h)try{h()}catch{}o.h&&o.execute()},6e4)},500))},Hp.prototype.delete=function(){Aw(this),this.g=!0,clearTimeout(this.a),this.a=null,Zn(this.f,"click",this.i)};function Aw(o){if(o.g)throw Error("reCAPTCHA mock was already deleted!")}function Sw(){}tt(Sw,"FACTOR_ID","phone");function xw(){}xw.prototype.g=function(){return Ew||(Ew=new du),at(Ew)},xw.prototype.c=function(){};var Cw=null;function Rw(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Z5=new ti(Qf,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),t6=new ao(3e4,6e4);Rw.prototype.g=function(o){var u=this;return new St(function(h,f){var m=setTimeout(function(){f(new A("network-request-failed"))},t6.get());if(!l.grecaptcha||o!==u.f&&!u.b){l[u.a]=function(){if(l.grecaptcha){u.f=o;var w=l.grecaptcha.render;l.grecaptcha.render=function(E,P){return E=w(E,P),u.b++,E},clearTimeout(m),h(l.grecaptcha)}else clearTimeout(m),f(new A("internal-error"));delete l[u.a]};var y=cb(Z5,{onload:u.a,hl:o||""});at(y0(y)).o(function(){clearTimeout(m),f(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(m),h(l.grecaptcha)})},Rw.prototype.c=function(){this.b--};var Dw=null;function kw(o,u,h,f,m,y,w){if(tt(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=u,this.g=null,w?(Cw||(Cw=new xw),w=Cw):(Dw||(Dw=new Rw),w=Dw),this.m=w,this.a=h||{theme:"light",type:"image"},this.h=[],this.a[fk])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[e6]==="invisible",!l.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!vl(u)||!this.i&&vl(u).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Fr(o,y||null,m||null),this.u=f||function(){return null};var E=this;this.l=[];var P=this.a[hk];this.a[hk]=function(pt){if(pk(E,pt),typeof P=="function")P(pt);else if(typeof P=="string"){var Bt=ne(P,l);typeof Bt=="function"&&Bt(pt)}};var V=this.a[dk];this.a[dk]=function(){if(pk(E,null),typeof V=="function")V();else if(typeof V=="string"){var pt=ne(V,l);typeof pt=="function"&&pt()}}}var hk="callback",dk="expired-callback",fk="sitekey",e6="size";function pk(o,u){for(var h=0;h<o.l.length;h++)try{o.l[h](u)}catch{}}function n6(o,u){Nr(o.l,function(h){return h==u})}function Pw(o,u){return o.h.push(u),u.oa(function(){Wf(o.h,u)}),u}e=kw.prototype,e.Ia=function(){var o=this;return this.f?this.f:this.f=Pw(this,at().then(function(){if(cp()&&!Mr())return up();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return o.m.g(o.u())}).then(function(u){return o.g=u,Ct(o.s,Ez,{})}).then(function(u){o.a[fk]=u.recaptchaSiteKey}).o(function(u){throw o.f=null,u}))},e.render=function(){Wp(this);var o=this;return Pw(this,this.Ia().then(function(){if(o.c===null){var u=o.v;if(!o.i){var h=vl(u);u=Cq("DIV"),h.appendChild(u)}o.c=o.g.render(u,o.a)}return o.c}))},e.verify=function(){Wp(this);var o=this;return Pw(this,this.render().then(function(u){return new St(function(h){var f=o.g.getResponse(u);if(f)h(f);else{var m=function(y){y&&(n6(o,m),h(y))};o.l.push(m),o.i&&o.g.execute(o.c)}})}))},e.reset=function(){Wp(this),this.c!==null&&this.g.reset(this.c)};function Wp(o){if(o.J)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){Wp(this),this.J=!0,this.m.c();for(var o=0;o<this.h.length;o++)this.h[o].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){o=vl(this.v);for(var u;u=o.firstChild;)o.removeChild(u)}};function Nw(o,u,h){var f=!1;try{this.b=h||dt.app()}catch{throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)h=this.b.options.apiKey;else throw new A("invalid-api-key");var m=this,y=null;try{y=this.b.auth().Ga()}catch{}try{f=this.b.auth().settings.appVerificationDisabledForTesting}catch{}y=dt.SDK_VERSION?Za(dt.SDK_VERSION,y):null,kw.call(this,h,o,u,function(){try{var w=m.b.auth().la()}catch{w=null}return w},y,pl(ml),f)}ht(Nw,kw);function mk(o,u,h,f){t:{h=Array.prototype.slice.call(h);for(var m=0,y=!1,w=0;w<u.length;w++)if(u[w].optional)y=!0;else{if(y)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");m++}if(y=u.length,h.length<m||y<h.length)f="Expected "+(m==y?m==1?"1 argument":m+" arguments":m+"-"+y+" arguments")+" but got "+h.length+".";else{for(m=0;m<h.length;m++)if(y=u[m].optional&&h[m]===void 0,!u[m].M(h[m])&&!y){if(u=u[m],0>m||m>=gk.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");h=gk[m],f=(f?"":h+" argument ")+(u.name?'"'+u.name+'" ':"")+"must be "+u.K+".";break t}f=null}}if(f)throw new A("argument-error",o+" failed: "+f)}var gk="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Z(o,u){return{name:o||"",K:"a valid string",optional:!!u,M:function(h){return typeof h=="string"}}}function Ow(o,u){return{name:o||"",K:"a boolean",optional:!!u,M:function(h){return typeof h=="boolean"}}}function Se(o,u){return{name:o||"",K:"a valid object",optional:!!u,M:T}}function fu(o,u){return{name:o||"",K:"a function",optional:!!u,M:function(h){return typeof h=="function"}}}function ai(o,u){return{name:o||"",K:"null",optional:!!u,M:function(h){return h===null}}}function r6(){return{name:"",K:"an HTML element",optional:!1,M:function(o){return!!(o&&o instanceof Element)}}}function i6(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(o){return!!(o&&o instanceof jr)}}}function o6(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(o){return!!(o&&o instanceof dt.app.App)}}}function ho(o){return{name:o?o+"Credential":"credential",K:o?"a valid "+o+" credential":"a valid credential",optional:!1,M:function(u){if(!u)return!1;var h=!o||u.providerId===o;return!(!u.ka||!h)}}}function vk(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(o){return o?!!o.tb:!1}}}function pu(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}}function Mw(o,u){return T(o)&&typeof o.type=="string"&&o.type===u&&typeof o.Ha=="function"}function yk(o){return T(o)&&typeof o.uid=="string"}function Qp(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||typeof o.type!="string"||typeof o.verify!="function")}}}function ve(o,u,h,f){return{name:h||"",K:o.K+" or "+u.K,optional:!!f,M:function(m){return o.M(m)||u.M(m)}}}function ae(o,u){for(var h in u){var f=u[h].name;o[f]=wk(f,o[h],u[h].j)}}function bk(o,u){for(var h in u){var f=u[h].name;f!==h&&Object.defineProperty(o,f,{get:mt(function(m){return this[m]},h),set:mt(function(m,y,w,E){mk(m,[w],[E],!0),this[y]=E},f,h,u[h].lb),enumerable:!0})}}function ye(o,u,h,f){o[u]=wk(u,h,f)}function wk(o,u,h){function f(){var w=Array.prototype.slice.call(arguments);return mk(m,h,w),u.apply(this,w)}if(!h)return u;var m=s6(o),y;for(y in u)f[y]=u[y];for(y in u.prototype)f.prototype[y]=u.prototype[y];return f}function s6(o){return o=o.split("."),o[o.length-1]}ae(jr.prototype,{kb:{name:"applyActionCode",j:[Z("code")]},Sa:{name:"checkActionCode",j:[Z("code")]},ob:{name:"confirmPasswordReset",j:[Z("code"),Z("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Z("email"),Z("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Z("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Z("emailLink")]},Hc:{name:"onAuthStateChanged",j:[ve(Se(),fu(),"nextOrObserver"),fu("opt_error",!0),fu("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[ve(Se(),fu(),"nextOrObserver"),fu("opt_error",!0),fu("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Z("email"),ve(Se("opt_actionCodeSettings",!0),ai(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Z("email"),Se("actionCodeSettings")]},yb:{name:"setPersistence",j:[Z("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ho()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[ho()]},Tc:{name:"signInWithCustomToken",j:[Z("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Z("email"),Z("password")]},Vc:{name:"signInWithEmailLink",j:[Z("email"),Z("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Z("phoneNumber"),Qp()]},Xc:{name:"signInWithPopup",j:[pu()]},Yc:{name:"signInWithRedirect",j:[pu()]},dd:{name:"updateCurrentUser",j:[ve(function(o){return{name:"user",K:"an instance of Firebase User",optional:!!o,M:function(u){return!!(u&&u instanceof er)}}}(),ai(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Z(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Z("url"),Se("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Z("code")]}}),bk(jr.prototype,{lc:{name:"languageCode",lb:ve(Z(),ai(),"languageCode")},ti:{name:"tenantId",lb:ve(Z(),ai(),"tenantId")}}),jr.Persistence=su,jr.Persistence.LOCAL="local",jr.Persistence.SESSION="session",jr.Persistence.NONE="none",ae(er.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Ow("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ow("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ho()]},rb:{name:"linkWithCredential",j:[ho()]},Dc:{name:"linkWithPhoneNumber",j:[Z("phoneNumber"),Qp()]},Ec:{name:"linkWithPopup",j:[pu()]},Fc:{name:"linkWithRedirect",j:[pu()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ho()]},ub:{name:"reauthenticateWithCredential",j:[ho()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Z("phoneNumber"),Qp()]},Nc:{name:"reauthenticateWithPopup",j:[pu()]},Oc:{name:"reauthenticateWithRedirect",j:[pu()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[ve(Se("opt_actionCodeSettings",!0),ai(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Z(null,!0)]},cd:{name:"unlink",j:[Z("provider")]},Cb:{name:"updateEmail",j:[Z("email")]},Db:{name:"updatePassword",j:[Z("password")]},ed:{name:"updatePhoneNumber",j:[ho("phone")]},Eb:{name:"updateProfile",j:[Se("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Z("email"),ve(Se("opt_actionCodeSettings",!0),ai(null,!0),"opt_actionCodeSettings",!0)]}}),ae(du.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ae(Xl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ae(St.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),bk(jD.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Ow("appVerificationDisabledForTesting")}}),ae(J0.prototype,{confirm:{name:"confirm",j:[Z("verificationCode")]}}),ye(nu,"fromJSON",function(o){o=typeof o=="string"?JSON.parse(o):o;for(var u,h=[C3,R3,D3,x3],f=0;f<h.length;f++)if(u=h[f](o))return u;return null},[ve(Z(),Se(),"json")]),ye(wr,"credential",function(o,u){return new uo(o,u)},[Z("email"),Z("password")]),ae(uo.prototype,{w:{name:"toJSON",j:[Z(null,!0)]}}),ae(As.prototype,{Ca:{name:"addScope",j:[Z("scope")]},Ka:{name:"setCustomParameters",j:[Se("customOAuthParameters")]}}),ye(As,"credential",_R,[ve(Z(),Se(),"token")]),ye(wr,"credentialWithLink",AR,[Z("email"),Z("emailLink")]),ae(Ss.prototype,{Ca:{name:"addScope",j:[Z("scope")]},Ka:{name:"setCustomParameters",j:[Se("customOAuthParameters")]}}),ye(Ss,"credential",IR,[ve(Z(),Se(),"token")]),ae(xs.prototype,{Ca:{name:"addScope",j:[Z("scope")]},Ka:{name:"setCustomParameters",j:[Se("customOAuthParameters")]}}),ye(xs,"credential",ER,[ve(Z(),ve(Se(),ai()),"idToken"),ve(Z(),ai(),"accessToken",!0)]),ae(iu.prototype,{Ka:{name:"setCustomParameters",j:[Se("customOAuthParameters")]}}),ye(iu,"credential",TR,[ve(Z(),Se(),"token"),Z("secret",!0)]),ae(tr.prototype,{Ca:{name:"addScope",j:[Z("scope")]},credential:{name:"credential",j:[ve(Z(),ve(Se(),ai()),"optionsOrIdToken"),ve(Z(),ai(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Se("customOAuthParameters")]}}),ae(Mi.prototype,{w:{name:"toJSON",j:[Z(null,!0)]}}),ae(Es.prototype,{w:{name:"toJSON",j:[Z(null,!0)]}}),ye(Li,"credential",SR,[Z("verificationId"),Z("verificationCode")]),ae(Li.prototype,{gb:{name:"verifyPhoneNumber",j:[ve(Z(),function(o,u){return{name:o||"phoneInfoOptions",K:"valid phone info options",optional:!!u,M:function(h){return h?h.session&&h.phoneNumber?Mw(h.session,kl)&&typeof h.phoneNumber=="string":h.session&&h.multiFactorHint?Mw(h.session,vp)&&yk(h.multiFactorHint):h.session&&h.multiFactorUid?Mw(h.session,vp)&&typeof h.multiFactorUid=="string":h.phoneNumber?typeof h.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Qp()]}}),ae(co.prototype,{w:{name:"toJSON",j:[Z(null,!0)]}}),ae(A.prototype,{toJSON:{name:"toJSON",j:[Z(null,!0)]}}),ae(Nl.prototype,{toJSON:{name:"toJSON",j:[Z(null,!0)]}}),ae(u0.prototype,{toJSON:{name:"toJSON",j:[Z(null,!0)]}}),ae(ew.prototype,{toJSON:{name:"toJSON",j:[Z(null,!0)]}}),ae(tw.prototype,{Rc:{name:"resolveSignIn",j:[vk()]}}),ae(rw.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[vk(),Z("displayName",!0)]},bd:{name:"unenroll",j:[ve({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:yk},Z(),"multiFactorInfoIdentifier")]}}),ae(Nw.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ye(Yb,"parseLink",rR,[Z("link")]),ye(Sw,"assertion",function(o){return new GD(o)},[ho("phone")]),function(){if(typeof dt<"u"&&dt.INTERNAL&&dt.INTERNAL.registerComponent){var o={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lp,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Qb,VERIFY_AND_CHANGE_EMAIL:Rl,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:jr,AuthCredential:nu,Error:A};ye(o,"EmailAuthProvider",wr,[]),ye(o,"FacebookAuthProvider",As,[]),ye(o,"GithubAuthProvider",Ss,[]),ye(o,"GoogleAuthProvider",xs,[]),ye(o,"TwitterAuthProvider",iu,[]),ye(o,"OAuthProvider",tr,[Z("providerId")]),ye(o,"SAMLAuthProvider",wR,[Z("providerId")]),ye(o,"PhoneAuthProvider",Li,[i6()]),ye(o,"RecaptchaVerifier",Nw,[ve(Z(),r6(),"recaptchaContainer"),Se("recaptchaParameters",!0),o6()]),ye(o,"ActionCodeURL",Yb,[]),ye(o,"PhoneMultiFactorGenerator",Sw,[]),dt.INTERNAL.registerComponent({name:"auth",instanceFactory:function(u){return u=u.getProvider("app").getImmediate(),new jr(u)},multipleInstances:!1,serviceProps:o,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(u){u.getProvider("auth-internal").initialize()}}),dt.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(u){return u=u.getProvider("auth").getImmediate(),{getUid:L(u.getUid,u),getToken:L(u.nc,u),addAuthTokenListener:L(u.cc,u),removeAuthTokenListener:L(u.Pc,u)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),dt.registerVersion("@firebase/auth","0.16.8"),dt.INTERNAL.extendNamespace({User:er})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})});var f9={};var UN=Ur(()=>{"use strict";jN()});function p9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");II(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function ZN(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $m(){}function EI(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Qh(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function g9(e){return Object.prototype.hasOwnProperty.call(e,pI)&&e[pI]||(e[pI]=++v9)}function y9(e,t,n){return e.call.apply(e.bind,arguments)}function b9(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function nn(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?nn=y9:nn=b9,nn.apply(null,arguments)}function Um(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function on(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[i].apply(r,a)}}function xo(){this.s=this.s,this.o=this.o}function I9(e){t:{for(var t=f$,n=e.length,r=typeof e=="string"?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break t}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function qN(e){return Array.prototype.concat.apply([],arguments)}function LI(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Hm(e){return/^[\s\xa0]*$/.test(e)}function xn(e,t){return e.indexOf(t)!=-1}function mI(e,t){return e<t?-1:e>t?1:0}function FI(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function nO(e){var t={};for(var n in e)t[n]=e[n];return t}function rO(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var s=0;s<GN.length;s++)n=GN[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function VI(e){return VI[" "](e),e}function E9(e){var t=S9;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}function sO(){var e=gt.document;return e?e.documentMode:void 0}function x9(){return E9(function(){for(var e=0,t=zN(String(Wm)).split("."),n=zN("9").split("."),r=Math.max(t.length,n.length),i=0;e==0&&i<r;i++){var s=t[i]||"",a=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s[0].length==0&&a[0].length==0)break;e=mI(s[1].length==0?0:parseInt(s[1],10),a[1].length==0?0:parseInt(a[1],10))||mI(s[2].length==0,a[2].length==0)||mI(s[2],a[2]),s=s[3],a=a[3]}while(e==0)}return 0<=e})}function mn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Gh(e,t){if(mn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(oO){t:{try{VI(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:D9[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Gh.Z.h.call(this)}}function P9(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++k9,this.ca=this.fa=!1}function eg(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ng(e){this.src=e,this.g={},this.h=0}function SI(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=tO(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(eg(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function xI(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}function aO(e,t,n,r,i){if(r&&r.once)return cO(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)aO(e,t[s],n,r,i);return null}return n=qI(n),e&&e[Yh]?e.N(t,n,Qh(r)?!!r.capture:!!r,i):uO(e,t,n,!1,r,i)}function uO(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=Qh(i)?!!i.capture:!!i,c=BI(e);if(c||(e[jI]=c=new ng(e)),n=c.add(t,n,r,a,s),n.proxy)return n;if(r=N9(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R9||(i=a),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hO(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function N9(){function e(n){return t.call(e.src,e.listener,n)}var t=O9;return e}function cO(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)cO(e,t[s],n,r,i);return null}return n=qI(n),e&&e[Yh]?e.O(t,n,Qh(r)?!!r.capture:!!r,i):uO(e,t,n,!0,r,i)}function lO(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)lO(e,t[s],n,r,i);else r=Qh(r)?!!r.capture:!!r,n=qI(n),e&&e[Yh]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=xI(s,n,r,i),-1<n&&(eg(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=BI(e))&&(t=e.g[t.toString()],e=-1,t&&(e=xI(t,n,r,i)),(n=-1<e?t[e]:null)&&UI(n))}function UI(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[Yh])SI(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hO(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=BI(t))?(SI(n,e),n.h==0&&(n.src=null,t[jI]=null)):eg(e)}}}function hO(e){return e in bI?bI[e]:bI[e]="on"+e}function O9(e,t){if(e.ca)e=!0;else{t=new Gh(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&UI(e),e=n.call(r,t)}return e}function BI(e){return e=e[jI],e instanceof ng?e:null}function qI(e){return typeof e=="function"?e:(e[wI]||(e[wI]=function(t){return e.handleEvent(t)}),e[wI])}function He(){xo.call(this),this.i=new ng(this),this.P=this,this.I=null}function rn(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,typeof t=="string")t=new mn(t,e);else if(t instanceof mn)t.target=t.target||e;else{var i=t;t=new mn(r,e),rO(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=Gm(a,r,!0,t)&&i}if(a=t.g=e,i=Gm(a,r,!0,t)&&i,i=Gm(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)a=t.g=n[s],i=Gm(a,r,!1,t)&&i}function Gm(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.ca&&a.capture==n){var c=a.listener,l=a.ia||a.src;a.fa&&SI(e.i,a),i=c.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}function M9(){var e=fO,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}function V9(e){gt.setTimeout(function(){throw e},0)}function GI(e,t){CI||j9(),RI||(CI(),RI=!0),fO.add(e,t)}function j9(){var e=gt.Promise.resolve(void 0);CI=function(){e.then(U9)}}function U9(){for(var e;e=M9();){try{e.h.call(e.g)}catch(n){V9(n)}var t=dO;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}RI=!1}function rg(e,t){He.call(this),this.h=e||1,this.g=t||gt,this.j=nn(this.kb,this),this.l=Date.now()}function KI(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function $I(e,t,n){if(typeof e=="function")n&&(e=nn(e,n));else if(e&&typeof e.handleEvent=="function")e=nn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:gt.setTimeout(e,t||0)}function pO(e){e.g=$I(function(){e.g=null,e.i&&(e.i=!1,pO(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}function Kh(e){xo.call(this),this.h=e,this.g={}}function mO(e,t,n,r){Array.isArray(n)||(n&&(KN[0]=n.toString()),n=KN);for(var i=0;i<n.length;i++){var s=aO(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function gO(e){FI(e.g,function(t,n){this.g.hasOwnProperty(n)&&UI(t)},e),e.g={}}function ig(){this.g=!0}function q9(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",c=s.split("&"),l=0;l<c.length;l++){var d=c[l].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");a=2<=g.length&&g[1]=="type"?a+(p+"="+d+"&"):a+(p+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+a})}function z9(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+a})}function Mu(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+K9(e,n)+(r?" "+r:"")})}function G9(e,t){e.info(function(){return"TIMEOUT: "+t})}function K9(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return zI(n)}catch{return t}}function og(){return $N=$N||new He}function vO(e){mn.call(this,Hs.Ma,e)}function $h(e){var t=og();rn(t,new vO(t,e))}function yO(e,t){mn.call(this,Hs.STAT_EVENT,e),this.stat=t}function Rn(e){var t=og();rn(t,new yO(t,e))}function bO(e,t){mn.call(this,Hs.Na,e),this.size=t}function Xh(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return gt.setTimeout(function(){e()},t)}function HI(){}function HN(e){return e.h||(e.h=e.i())}function _O(){}function WI(){mn.call(this,"d")}function QI(){mn.call(this,"c")}function ag(){}function Zh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Kh(this),this.P=$9,e=TI?125:void 0,this.W=new rg(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new IO}function IO(){this.i=null,this.g="",this.h=!1}function PI(e,t,n){e.K=1,e.v=cg(Bi(t)),e.s=n,e.U=!0,EO(e,null)}function EO(e,t){e.F=Date.now(),td(e),e.A=Bi(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),DO(n.h,"t",r),e.C=0,n=e.l.H,e.h=new IO,e.g=YO(e.l,n?t:null,!e.s),0<e.O&&(e.L=new B9(nn(e.Ia,e,e.g),e.O)),mO(e.V,e.g,"readystatechange",e.gb),t=e.H?nO(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),$h(1),q9(e.j,e.u,e.A,e.m,e.X,e.s)}function TO(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function AO(e,t,n){for(var r=!0,i;!e.I&&e.C<n.length;)if(i=H9(e,n),i==Qm){t==4&&(e.o=4,Rn(14),r=!1),Mu(e.j,e.m,null,"[Incomplete Response]");break}else if(i==kI){e.o=4,Rn(15),Mu(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Mu(e.j,e.m,i,null),NI(e,i);TO(e)&&i!=Qm&&i!=kI&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,Rn(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),iE(t),t.L=!0,Rn(11))):(Mu(e.j,e.m,n,"[Invalid Chunked Response]"),zs(e),qh(e))}function H9(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?Qm:(n=Number(t.substring(n,r)),isNaN(n)?kI:(r+=1,r+n>t.length?Qm:(t=t.substr(r,n),e.C=r+n,t)))}function td(e){e.Y=Date.now()+e.P,SO(e,e.P)}function SO(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=Xh(nn(e.eb,e),t)}function ug(e){e.B&&(gt.clearTimeout(e.B),e.B=null)}function qh(e){e.l.G==0||e.I||$O(e.l,e)}function zs(e){ug(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,KI(e.W),gO(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function NI(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||OI(n.i,e))){if(n.I=e.N,!e.J&&OI(n.i,e)&&n.G==3){try{var r=n.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){t:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)Zm(n),dg(n);else break t;rE(n),Rn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=Xh(nn(n.ab,n),6e3));if(1>=NO(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Gs(n,11)}else if((e.J||n.g==e)&&Zm(n),!Hm(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],n.G==2)if(s[0]=="c"){n.J=s[1],n.la=s[2];var a=s[3];a!=null&&(n.ma=a,n.h.info("VER="+n.ma));var c=s[4];c!=null&&(n.za=c,n.h.info("SVER="+n.za));var l=s[5];l!=null&&typeof l=="number"&&0<l&&(r=1.5*l,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var d=e.g;if(d){var p=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var g=r.i;!g.g&&(xn(p,"spdy")||xn(p,"quic")||xn(p,"h2"))&&(g.j=g.l,g.g=new Set,g.h&&(JI(g,g.h),g.h=null))}if(r.D){var v=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.sa=v,ie(r.F,r.D,v))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var b=e;if(r.oa=QO(r,r.H?r.la:null,r.W),b.J){OO(r.i,b);var _=b,I=r.K;I&&_.setTimeout(I),_.B&&(ug(_),td(_)),r.g=b}else GO(r);0<n.l.length&&fg(n)}else s[0]!="stop"&&s[0]!="close"||Gs(n,7);else n.G==3&&(s[0]=="stop"||s[0]=="close"?s[0]=="stop"?Gs(n,7):nE(n):s[0]!="noop"&&n.j&&n.j.wa(s),n.A=0)}}$h(4)}catch{}}function W9(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(EI(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function YI(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(EI(e)||typeof e=="string")eO(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if(EI(e)||typeof e=="string"){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=W9(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Fu(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Fu)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function XI(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ks(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)r=e.g[t],Ks(i,r)||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ks(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Q9(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function $s(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof $s){this.g=t!==void 0?t:e.g,Ym(this,e.j),this.s=e.s,Xm(this,e.i),Jm(this,e.m),this.l=e.l,t=e.h;var n=new Hh;n.i=t.i,t.g&&(n.g=new Fu(t.g),n.h=t.h),WN(this,n),this.o=e.o}else e&&(n=String(e).match(xO))?(this.g=!!t,Ym(this,n[1]||"",!0),this.s=zh(n[2]||""),Xm(this,n[3]||"",!0),Jm(this,n[4]),this.l=zh(n[5]||"",!0),WN(this,n[6]||"",!0),this.o=zh(n[7]||"")):(this.g=!!t,this.h=new Hh(null,this.g))}function Bi(e){return new $s(e)}function Ym(e,t,n){e.j=n?zh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Xm(e,t,n){e.i=n?zh(t,!0):t}function Jm(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function WN(e,t,n){t instanceof Hh?(e.h=t,r$(e.h,e.g)):(n||(t=Bh(t,e$)),e.h=new Hh(t,e.g))}function ie(e,t,n){e.h.set(t,n)}function cg(e){return ie(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Y9(e){return e instanceof $s?Bi(e):new $s(e,void 0)}function X9(e,t,n,r){var i=new $s(null,void 0);return e&&Ym(i,e),t&&Xm(i,t),n&&Jm(i,n),r&&(i.l=r),i}function zh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Bh(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,J9),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function J9(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}function Hh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Co(e){e.g||(e.g=new Fu,e.h=0,e.i&&Q9(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function CO(e,t){Co(e),t=Vu(e,t),Ks(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,Ks(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&XI(e)))}function RO(e,t){return Co(e),t=Vu(e,t),Ks(e.g.h,t)}function DO(e,t,n){CO(e,t),0<n.length&&(e.i=null,e.g.set(Vu(e,t),LI(n)),e.h+=n.length)}function Vu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function r$(e,t){t&&!e.j&&(Co(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(CO(this,r),DO(this,i,n))},e)),e.j=t}function kO(e){this.l=e||o$,gt.PerformanceNavigationTiming?(e=gt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(gt.g&&gt.g.Ea&&gt.g.Ea()&&gt.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function PO(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function NO(e){return e.h?1:e.g?e.g.size:0}function OI(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function JI(e,t){e.g?e.g.add(t):e.h=t}function OO(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function MO(e){var t,n;if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){var r=e.i;try{for(var i=ZN(e.g.values()),s=i.next();!s.done;s=i.next()){var a=s.value;r=r.concat(a.D)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return LI(e.i)}function ZI(){}function s$(){this.g=new ZI}function a$(e,t,n){var r=n||"";try{YI(e,function(i,s){var a=i;Qh(i)&&(a=zI(i)),t.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function u$(e,t){var n=new ig;if(gt.Image){var r=new Image;r.onload=Um(Km,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Um(Km,n,r,"TestLoadImage: error",!1,t),r.onabort=Um(Km,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Um(Km,n,r,"TestLoadImage: timeout",!1,t),gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Km(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function ed(e){this.l=e.$b||null,this.j=e.ib||!1}function lg(e,t){He.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=tE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}function LO(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function nd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Wh(e)}function Wh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function xe(e){He.call(this),this.headers=new Fu,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=FO,this.K=this.L=!1}function d$(e){return Lu&&x9()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function f$(e){return e.toLowerCase()=="content-type"}function YN(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,VO(e),hg(e)}function VO(e){e.D||(e.D=!0,rn(e,"complete"),rn(e,"error"))}function jO(e){if(e.h&&typeof MI<"u"&&(!e.C[1]||Ui(e)!=4||e.ba()!=2)){if(e.v&&Ui(e)==4)$I(e.Fa,0,e);else if(rn(e,"readystatechange"),Ui(e)==4){e.h=!1;try{var t=e.ba();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var r;if(!(r=n)){var i;if(i=t===0){var s=String(e.H).match(xO)[1]||null;if(!s&&gt.self&&gt.self.location){var a=gt.self.location.protocol;s=a.substr(0,a.length-1)}i=!l$.test(s?s.toLowerCase():"")}r=i}if(r)rn(e,"complete"),rn(e,"success");else{e.m=6;try{var c=2<Ui(e)?e.g.statusText:""}catch{c=""}e.j=c+" ["+e.ba()+"]",VO(e)}}finally{hg(e)}}}}function hg(e,t){if(e.g){UO(e);var n=e.g,r=e.C[0]?$m:null;e.g=null,e.C=null,t||rn(e,"ready");try{n.onreadystatechange=r}catch{}}}function UO(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(gt.clearTimeout(e.A),e.A=null)}function Ui(e){return e.g?e.g.readyState:0}function XN(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case FO:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function p$(e){var t="";return FI(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function eE(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=p$(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):ie(e,t,n))}function Uh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function BO(e){this.za=0,this.l=[],this.h=new ig,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Uh("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Uh("baseRetryDelayMs",5e3,e),this.$a=Uh("retryDelaySeedMs",1e4,e),this.Ya=Uh("forwardChannelMaxRetries",2,e),this.ra=Uh("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new kO(e&&e.concurrentRequestLimit),this.Ca=new s$,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}function nE(e){if(qO(e),e.G==3){var t=e.V++,n=Bi(e.F);ie(n,"SID",e.J),ie(n,"RID",t),ie(n,"TYPE","terminate"),rd(e,n),t=new Zh(e,e.h,t,void 0),t.K=2,t.v=cg(Bi(n)),n=!1,gt.navigator&&gt.navigator.sendBeacon&&(n=gt.navigator.sendBeacon(t.v.toString(),"")),!n&&gt.Image&&(new Image().src=t.v,n=!0),n||(t.g=YO(t.l,null),t.g.ea(t.v)),t.F=Date.now(),td(t)}WO(e)}function dg(e){e.g&&(iE(e),e.g.cancel(),e.g=null)}function qO(e){dg(e),e.u&&(gt.clearTimeout(e.u),e.u=null),Zm(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&gt.clearTimeout(e.m),e.m=null)}function _I(e,t){e.l.push(new i$(e.Za++,t)),e.G==3&&fg(e)}function fg(e){PO(e.i)||e.m||(e.m=!0,GI(e.Ha,e),e.C=0)}function m$(e,t){return NO(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=Xh(nn(e.Ha,e,t),HO(e,e.C)),e.C++,!0)}function JN(e,t){var n;t?n=t.m:n=e.V++;var r=Bi(e.F);ie(r,"SID",e.J),ie(r,"RID",n),ie(r,"AID",e.U),rd(e,r),e.o&&e.s&&eE(r,e.o,e.s),n=new Zh(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=zO(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),JI(e.i,n),PI(n,r,t)}function rd(e,t){e.j&&YI({},function(n,r){ie(t,r,n)})}function zO(e,t,n){n=Math.min(e.l.length,n);var r=e.j?nn(e.j.Oa,e.j,e):null;t:for(var i=e.l,s=-1;;){var a=["count="+n];s==-1?0<n?(s=i[0].h,a.push("ofs="+s)):s=0:a.push("ofs="+s);for(var c=!0,l=0;l<n;l++){var d=i[l].h,p=i[l].g;if(d-=s,0>d)s=Math.max(0,i[l].h-100),c=!1;else try{a$(p,a,"req"+d+"_")}catch{r&&r(p)}}if(c){r=a.join("&");break t}}return e=e.l.splice(0,n),t.D=e,r}function GO(e){e.g||e.u||(e.Y=1,GI(e.Ga,e),e.A=0)}function rE(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=Xh(nn(e.Ga,e),HO(e,e.A)),e.A++,!0)}function iE(e){e.B!=null&&(gt.clearTimeout(e.B),e.B=null)}function KO(e){e.g=new Zh(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=Bi(e.oa);ie(t,"RID","rpc"),ie(t,"SID",e.J),ie(t,"CI",e.N?"0":"1"),ie(t,"AID",e.U),rd(e,t),ie(t,"TYPE","xmlhttp"),e.o&&e.s&&eE(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=cg(Bi(t)),n.s=null,n.U=!0,EO(n,e)}function Zm(e){e.v!=null&&(gt.clearTimeout(e.v),e.v=null)}function $O(e,t){var n=null;if(e.g==t){Zm(e),iE(e),e.g=null;var r=2}else if(OI(e.i,t))n=t.D,OO(e.i,t),r=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r=og(),rn(r,new bO(r,n,t,i)),fg(e)}else GO(e);else if(i=t.o,i==3||i==0&&0<e.I||!(r==1&&m$(e,t)||r==2&&rE(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Gs(e,5);break;case 4:Gs(e,10);break;case 3:Gs(e,6);break;default:Gs(e,2)}}}function HO(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Gs(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var r=nn(e.jb,e);n||(n=new $s("//www.google.com/images/cleardot.gif"),gt.location&&gt.location.protocol=="http"||Ym(n,"https"),cg(n)),u$(n.toString(),r)}else Rn(2);e.G=0,e.j&&e.j.va(t),WO(e),qO(e)}function WO(e){e.G=0,e.I=-1,e.j&&((MO(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,LI(e.l),e.l.length=0),e.j.ua())}function QO(e,t,n){var r=Y9(n);if(r.i!="")t&&Xm(r,t+"."+r.i),Jm(r,r.m);else{var i=gt.location;r=X9(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&FI(e.aa,function(s,a){ie(r,a,s)}),t=e.D,n=e.sa,t&&n&&ie(r,t,n),ie(r,"VER",e.ma),rd(e,r),r}function YO(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new xe(new ed({ib:!0})):new xe(e.qa),t.L=e.H,t}function XO(){}function tg(){if(Lu&&!(10<=Number(C9)))throw Error("Environmental error: no available transport.")}function ur(e,t){He.call(this),this.g=new BO(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Hm(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Hm(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new ju(this)}function JO(e){WI.call(this);var t=e.__sm__;if(t){t:{for(var n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ZO(){QI.call(this),this.status=1}function ju(e){this.g=e}var II,m9,J,MI,gt,pI,v9,w9,_9,tO,eO,zN,Cn,gI,vI,GN,T9,Lu,iO,TI,oO,A9,Wm,Bm,qm,zm,S9,AI,yI,C9,R9,D9,Yh,k9,jI,bI,wI,zI,L9,dO,F9,CI,RI,fO,B9,KN,Hs,$N,sg,wO,Jh,DI,$9,kI,Qm,xO,QN,Z9,t$,e$,n$,i$,o$,tE,c$,FO,l$,h$,tM,eM,pg,nM,rM,oE,iM,id,oM,sE=Ur(()=>{"use strict";II=function(e,t){return II=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},II(e,t)};m9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},MI=MI||{},gt=m9||self;pI="closure_uid_"+(1e9*Math.random()>>>0),v9=0;w9=0,_9={};xo.prototype.s=!1;xo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),w9!=0)){var e=g9(this);delete _9[e]}};xo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};tO=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},eO=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=typeof e=="string"?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};zN=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};t:{if(gI=gt.navigator,gI&&(vI=gI.userAgent,vI)){Cn=vI;break t}Cn=""}GN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");VI[" "]=$m;T9=xn(Cn,"Opera"),Lu=xn(Cn,"Trident")||xn(Cn,"MSIE"),iO=xn(Cn,"Edge"),TI=iO||Lu,oO=xn(Cn,"Gecko")&&!(xn(Cn.toLowerCase(),"webkit")&&!xn(Cn,"Edge"))&&!(xn(Cn,"Trident")||xn(Cn,"MSIE"))&&!xn(Cn,"Edge"),A9=xn(Cn.toLowerCase(),"webkit")&&!xn(Cn,"Edge");t:{if(Bm="",qm=function(){var e=Cn;if(oO)return/rv:([^\);]+)(\)|;)/.exec(e);if(iO)return/Edge\/([\d\.]+)/.exec(e);if(Lu)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(A9)return/WebKit\/(\S+)/.exec(e);if(T9)return/(?:Version)[ \/]?(\S+)/.exec(e)}(),qm&&(Bm=qm?qm[1]:""),Lu&&(zm=sO(),zm!=null&&zm>parseFloat(Bm))){Wm=String(zm);break t}Wm=Bm}S9={};gt.document&&Lu?(yI=sO(),AI=yI||parseInt(Wm,10)||void 0):AI=void 0;C9=AI,R9=function(){if(!gt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{gt.addEventListener("test",$m,t),gt.removeEventListener("test",$m,t)}catch{}return e}();mn.prototype.h=function(){this.defaultPrevented=!0};on(Gh,mn);D9={2:"touch",3:"pen",4:"mouse"};Gh.prototype.h=function(){Gh.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};Yh="closure_listenable_"+(1e6*Math.random()|0),k9=0;ng.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var a=xI(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):(t=new P9(t,this.src,s,!!r,i),t.fa=n,e.push(t)),t};jI="closure_lm_"+(1e6*Math.random()|0),bI={};wI="__closure_events_fn_"+(1e9*Math.random()>>>0);on(He,xo);He.prototype[Yh]=!0;He.prototype.removeEventListener=function(e,t,n,r){lO(this,e,t,n,r)};He.prototype.M=function(){if(He.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)eg(n[r]);delete e.g[t],e.h--}}this.I=null};He.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};He.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};zI=gt.JSON.stringify;L9=function(){function e(){this.h=this.g=null}return e.prototype.add=function(t,n){var r=dO.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r},e}(),dO=new(function(){function e(t,n){this.i=t,this.j=n,this.h=0,this.g=null}return e.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},e}())(function(){return new F9},function(e){return e.reset()}),F9=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(t,n){this.h=t,this.g=n,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();RI=!1,fO=new L9;on(rg,He);J=rg.prototype;J.da=!1;J.S=null;J.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),rn(this,"tick"),this.da&&(KI(this),this.start()))}};J.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};J.M=function(){rg.Z.M.call(this),KI(this),delete this.g};B9=function(e){p9(t,e);function t(n,r){var i=e.call(this)||this;return i.m=n,i.j=r,i.h=null,i.i=!1,i.g=null,i}return t.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:pO(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(xo);on(Kh,xo);KN=[];Kh.prototype.M=function(){Kh.Z.M.call(this),gO(this)};Kh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};ig.prototype.Aa=function(){this.g=!1};ig.prototype.info=function(){};Hs={},$N=null;Hs.Ma="serverreachability";on(vO,mn);Hs.STAT_EVENT="statevent";on(yO,mn);Hs.Na="timingevent";on(bO,mn);sg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},wO={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};HI.prototype.h=null;Jh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};on(WI,mn);on(QI,mn);on(ag,HI);ag.prototype.g=function(){return new XMLHttpRequest};ag.prototype.i=function(){return{}};DI=new ag;$9=45e3,kI={},Qm={};J=Zh.prototype;J.setTimeout=function(e){this.P=e};J.gb=function(e){e=e.target;var t=this.L;t&&Ui(e)==3?t.l():this.Ia(e)};J.Ia=function(e){try{if(e==this.g)t:{var t=Ui(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(t!=3||TI||this.g&&(this.h.h||this.g.ga()||XN(this.g)))){this.I||t!=4||n==7||(n==8||0>=r?$h(3):$h(2)),ug(this);var i=this.g.ba();this.N=i;e:if(TO(this)){var s=XN(this.g);e="";var a=s.length,c=Ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zs(this),qh(this);var l="";break e}this.h.i=new gt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:c&&n==a-1});s.splice(0,a),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=i==200,z9(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){e:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hm(d)){var g=d;break e}}g=null}if(i=g)Mu(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,NI(this,i);else{this.i=!1,this.o=3,Rn(12),zs(this),qh(this);break t}}this.U?(AO(this,t,l),TI&&this.i&&t==3&&(mO(this.V,this.W,"tick",this.fb),this.W.start())):(Mu(this.j,this.m,l,null),NI(this,l)),t==4&&zs(this),this.i&&!this.I&&(t==4?$O(this.l,this):(this.i=!1,td(this)))}else i==400&&0<l.indexOf("Unknown SID")?(this.o=3,Rn(12)):(this.o=0,Rn(13)),zs(this),qh(this)}}}catch{}finally{}};J.fb=function(){if(this.g){var e=Ui(this.g),t=this.g.ga();this.C<t.length&&(ug(this),AO(this,e,t),this.i&&e!=4&&td(this))}};J.cancel=function(){this.I=!0,zs(this)};J.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(G9(this.j,this.A),this.K!=2&&($h(3),Rn(17)),zs(this),this.o=2,qh(this)):SO(this,this.Y-e)};J=Fu.prototype;J.R=function(){XI(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};J.T=function(){return XI(this),this.g.concat()};J.get=function(e,t){return Ks(this.h,e)?this.h[e]:t};J.set=function(e,t){Ks(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};J.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};xO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;$s.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Bh(t,QN,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Bh(t,QN,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(Bh(n,n.charAt(0)=="/"?t$:Z9,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Bh(n,n$)),e.join("")};QN=/[#\/\?@]/g,Z9=/[#\?:]/g,t$=/[#\?]/g,e$=/[#\?@]/g,n$=/#/g;J=Hh.prototype;J.add=function(e,t){Co(this),this.i=null,e=Vu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};J.forEach=function(e,t){Co(this),this.g.forEach(function(n,r){eO(n,function(i){e.call(t,i,r,this)},this)},this)};J.T=function(){Co(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n};J.R=function(e){Co(this);var t=[];if(typeof e=="string")RO(this,e)&&(t=qN(t,this.g.get(Vu(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=qN(t,e[n])}return t};J.set=function(e,t){return Co(this),this.i=null,e=Vu(this,e),RO(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};J.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};J.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var a=i;r[s]!==""&&(a+="="+encodeURIComponent(String(r[s]))),e.push(a)}}return this.i=e.join("&")};i$=function(){function e(t,n){this.h=t,this.g=n}return e}();o$=10;kO.prototype.cancel=function(){var e,t;if(this.i=MO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=ZN(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}};ZI.prototype.stringify=function(e){return gt.JSON.stringify(e,void 0)};ZI.prototype.parse=function(e){return gt.JSON.parse(e,void 0)};on(ed,HI);ed.prototype.g=function(){return new lg(this.l,this.j)};ed.prototype.i=function(e){return function(){return e}}({});on(lg,He);tE=0;J=lg.prototype;J.open=function(e,t){if(this.readyState!=tE)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Wh(this)};J.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||gt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};J.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nd(this)),this.readyState=tE};J.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wh(this)),this.g&&(this.readyState=3,Wh(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof gt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;LO(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};J.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?nd(this):Wh(this),this.readyState==3&&LO(this)}};J.Ua=function(e){this.g&&(this.response=this.responseText=e,nd(this))};J.Ta=function(e){this.g&&(this.response=e,nd(this))};J.ha=function(){this.g&&nd(this)};J.setRequestHeader=function(e,t){this.v.append(e,t)};J.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};J.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};Object.defineProperty(lg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});c$=gt.JSON.parse;on(xe,He);FO="",l$=/^https?$/i,h$=["POST","PUT"];J=xe.prototype;J.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():DI.g(),this.C=this.u?HN(this.u):HN(DI),this.g.onreadystatechange=nn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){YN(this,s);return}e=n||"";var i=new Fu(this.headers);r&&YI(r,function(s,a){i.set(a,s)}),r=I9(i.T()),n=gt.FormData&&e instanceof gt.FormData,!(0<=tO(h$,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,a){this.g.setRequestHeader(a,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{UO(this),0<this.B&&((this.K=d$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nn(this.pa,this)):this.A=$I(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){YN(this,s)}};J.pa=function(){typeof MI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rn(this,"timeout"),this.abort(8))};J.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,rn(this,"complete"),rn(this,"abort"),hg(this))};J.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hg(this,!0)),xe.Z.M.call(this)};J.Fa=function(){this.s||(this.F||this.v||this.l?jO(this):this.cb())};J.cb=function(){jO(this)};J.ba=function(){try{return 2<Ui(this)?this.g.status:-1}catch{return-1}};J.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};J.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),c$(t)}};J.Da=function(){return this.m};J.La=function(){return typeof this.j=="string"?this.j:String(this.j)};J=BO.prototype;J.ma=8;J.G=1;J.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};J.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Zh(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=nO(n),rO(n,this.P)):n=this.P),this.o===null&&(t.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){e:{var s=this.l[i];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break e}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break t}if(r===4096||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=zO(this,t,r),i=Bi(this.F),ie(i,"RID",e),ie(i,"CVER",22),this.D&&ie(i,"X-HTTP-Session-Id",this.D),rd(this,i),this.o&&n&&eE(i,this.o,n),JI(this.i,t),this.Ra&&ie(i,"TYPE","init"),this.ja?(ie(i,"$req",r),ie(i,"SID","null"),t.$=!0,PI(t,i,null)):PI(t,i,r),this.G=2}}else this.G==3&&(e?JN(this,e):this.l.length==0||PO(this.i)||JN(this))};J.Ga=function(){if(this.u=null,KO(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Xh(nn(this.bb,this),e)}};J.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Rn(10),dg(this),KO(this))};J.ab=function(){this.v!=null&&(this.v=null,dg(this),rE(this),Rn(19))};J.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Rn(2)):(this.h.info("Failed to ping google.com"),Rn(1))};J=XO.prototype;J.xa=function(){};J.wa=function(){};J.va=function(){};J.ua=function(){};J.Oa=function(){};tg.prototype.g=function(e,t){return new ur(e,t)};on(ur,He);ur.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),GI(nn(e.hb,e,t))),Rn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=QO(e,null,e.W),fg(e)};ur.prototype.close=function(){nE(this.g)};ur.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,_I(this.g,t)}else this.v?(t={},t.__data__=zI(e),_I(this.g,t)):_I(this.g,e)};ur.prototype.M=function(){this.g.j=null,delete this.j,nE(this.g),delete this.g,ur.Z.M.call(this)};on(JO,WI);on(ZO,QI);on(ju,XO);ju.prototype.xa=function(){rn(this.g,"a")};ju.prototype.wa=function(e){rn(this.g,new JO(e))};ju.prototype.va=function(e){rn(this.g,new ZO(e))};ju.prototype.ua=function(){rn(this.g,"b")};tg.prototype.createWebChannel=tg.prototype.g;ur.prototype.send=ur.prototype.u;ur.prototype.open=ur.prototype.m;ur.prototype.close=ur.prototype.close;sg.NO_ERROR=0;sg.TIMEOUT=8;sg.HTTP_ERROR=6;wO.COMPLETE="complete";_O.EventType=Jh;Jh.OPEN="a";Jh.CLOSE="b";Jh.ERROR="c";Jh.MESSAGE="d";He.prototype.listen=He.prototype.N;xe.prototype.listenOnce=xe.prototype.O;xe.prototype.getLastError=xe.prototype.La;xe.prototype.getLastErrorCode=xe.prototype.Da;xe.prototype.getStatus=xe.prototype.ba;xe.prototype.getResponseJson=xe.prototype.Qa;xe.prototype.getResponseText=xe.prototype.ga;xe.prototype.send=xe.prototype.ea;tM=function(){return new tg},eM=function(){return og()},pg=sg,nM=wO,rM=Hs,oE={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},iM=ed,id=_O,oM=xe});function hE(){return Gr.logLevel}function q(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Gr.logLevel<=Ft.DEBUG){var r=t.map(AE);Gr.debug.apply(Gr,re(["Firestore (8.10.1): "+e],r))}}function De(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Gr.logLevel<=Ft.ERROR){var r=t.map(AE);Gr.error.apply(Gr,re(["Firestore (8.10.1): "+e],r))}}function Ag(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Gr.logLevel<=Ft.WARN){var r=t.map(AE);Gr.warn.apply(Gr,re(["Firestore (8.10.1): "+e],r))}}function AE(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}var t}function rt(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw De(t),new Error(t)}function ft(e,t){e||rt()}function Q(e,t){return e}function g$(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Rt(e,t){return e<t?-1:e>t?1:0}function $u(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function m2(e){return e+"\0"}function sM(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ra(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function g2(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function jo(e){if(ft(!!e),typeof e=="string"){var t=0,n=y$.exec(e);if(ft(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Re(e.seconds),nanos:Re(e.nanos)}}function Re(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Wu(e){return typeof e=="string"?Pn.fromBase64String(e):Pn.fromUint8Array(e)}function SE(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function y2(e){var t=e.mapValue.fields.__previous_value__;return SE(t)?y2(t):t}function ld(e){var t=jo(e.mapValue.fields.__local_write_time__.timestampValue);return new kn(t.seconds,t.nanos)}function ia(e){return e==null}function Sg(e){return e===0&&1/e==-1/0}function b2(e){return typeof e=="number"&&Number.isInteger(e)&&!Sg(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Zs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?SE(e)?4:10:rt()}function yi(e,t){var n=Zs(e);if(n!==Zs(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ld(e).isEqual(ld(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var s=jo(r.timestampValue),a=jo(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return Wu(r.bytesValue).isEqual(Wu(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return Re(r.geoPointValue.latitude)===Re(i.geoPointValue.latitude)&&Re(r.geoPointValue.longitude)===Re(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Re(r.integerValue)===Re(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var s=Re(r.doubleValue),a=Re(i.doubleValue);return s===a?Sg(s)===Sg(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return $u(e.arrayValue.values||[],t.arrayValue.values||[],yi);case 10:return function(r,i){var s=r.mapValue.fields||{},a=i.mapValue.fields||{};if(sM(s)!==sM(a))return!1;for(var c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!yi(s[c],a[c])))return!1;return!0}(e,t);default:return rt()}}function hd(e,t){return(e.values||[]).find(function(n){return yi(n,t)})!==void 0}function Qu(e,t){var n=Zs(e),r=Zs(t);if(n!==r)return Rt(n,r);switch(n){case 0:return 0;case 1:return Rt(e.booleanValue,t.booleanValue);case 2:return function(i,s){var a=Re(i.integerValue||i.doubleValue),c=Re(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return aM(e.timestampValue,t.timestampValue);case 4:return aM(ld(e),ld(t));case 5:return Rt(e.stringValue,t.stringValue);case 6:return function(i,s){var a=Wu(i),c=Wu(s);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,s){for(var a=i.split("/"),c=s.split("/"),l=0;l<a.length&&l<c.length;l++){var d=Rt(a[l],c[l]);if(d!==0)return d}return Rt(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,s){var a=Rt(Re(i.latitude),Re(s.latitude));return a!==0?a:Rt(Re(i.longitude),Re(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,s){for(var a=i.values||[],c=s.values||[],l=0;l<a.length&&l<c.length;++l){var d=Qu(a[l],c[l]);if(d)return d}return Rt(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,s){var a=i.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(var p=0;p<c.length&&p<d.length;++p){var g=Rt(c[p],d[p]);if(g!==0)return g;var v=Qu(a[c[p]],l[d[p]]);if(v!==0)return v}return Rt(c.length,d.length)}(e.mapValue,t.mapValue);default:throw rt()}}function aM(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Rt(e,t);var n=jo(e),r=jo(t),i=Rt(n.seconds,r.seconds);return i!==0?i:Rt(n.nanos,r.nanos)}function xE(e){return dE(e)}function dE(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var i=jo(r);return"time("+i.seconds+","+i.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Wu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ot.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",s=!0,a=0,c=r.values||[];a<c.length;a++)s?s=!1:i+=",",i+=dE(c[a]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",s=!0,a=0,c=Object.keys(r.fields||{}).sort();a<c.length;a++){var l=c[a];s?s=!1:i+=",",i+=l+":"+dE(r.fields[l])}return i+"}"}(e.mapValue):rt();var t,n}function xg(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function fE(e){return!!e&&"integerValue"in e}function CE(e){return!!e&&"arrayValue"in e}function uM(e){return!!e&&"nullValue"in e}function cM(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function bg(e){return!!e&&"mapValue"in e}function ad(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ra(e.mapValue.fields,function(i,s){return t.mapValue.fields[i]=ad(s)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ad(e.arrayValue.values[r]);return n}return Object.assign({},e)}function w2(e){var t=[];return ra(e.fields,function(n,r){var i=new $r([n]);if(bg(r)){var s=w2(r.mapValue).fields;if(s.length===0)t.push(i);else for(var a=0,c=s;a<c.length;a++){var l=c[a];t.push(i.child(l))}}else t.push(i)}),new Hu(t)}function lM(e,t,n,r,i,s,a){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),new b$(e,t,n,r,i,s,a)}function wd(e){var t=Q(e);if(t.h===null){var n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+xE(i.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),ia(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Rg(t.startAt)),t.endAt&&(n+="|ub:",n+=Rg(t.endAt)),t.h=n}return t.h}function Bg(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!x$(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],s=t.filters[r],i.op!==s.op||!i.field.isEqual(s.field)||!yi(i.value,s.value))return!1;var i,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!dM(e.startAt,t.startAt)&&dM(e.endAt,t.endAt)}function Cg(e){return ot.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function _2(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return ot.fromName(r.referenceValue)})}function Rg(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return xE(t)}).join(",")}function x$(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function hM(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var s=t[i],a=e.position[i];if(r=s.field.isKeyField()?ot.comparator(ot.fromName(a.referenceValue),n.key):Qu(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function dM(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!yi(e.position[n],t.position[n]))return!1;return!0}function I2(e,t,n,r,i,s,a,c){return new Ki(e,t,n,r,i,s,a,c)}function hc(e){return new Ki(e)}function wg(e){return!ia(e.limit)&&e.limitType==="F"}function Dg(e){return!ia(e.limit)&&e.limitType==="L"}function RE(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function DE(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function kE(e){return e.collectionGroup!==null}function Yu(e){var t=Q(e);if(t.p===null){t.p=[];var n=DE(t),r=RE(t);if(n!==null&&r===null)n.isKeyField()||t.p.push(new Ku(n)),t.p.push(new Ku($r.keyField(),"asc"));else{for(var i=!1,s=0,a=t.explicitOrderBy;s<a.length;s++){var c=a[s];t.p.push(c),c.field.isKeyField()&&(i=!0)}if(!i){var l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Ku($r.keyField(),l))}}}return t.p}function Sr(e){var t=Q(e);if(!t.T)if(t.limitType==="F")t.T=lM(t.path,t.collectionGroup,Yu(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Yu(t);r<i.length;r++){var s=i[r],a=s.dir==="desc"?"asc":"desc";n.push(new Ku(s.field,a))}var c=t.endAt?new dd(t.endAt.position,!t.endAt.before):null,l=t.startAt?new dd(t.startAt.position,!t.startAt.before):null;t.T=lM(t.path,t.collectionGroup,n,t.filters,t.limit,c,l)}return t.T}function E2(e,t,n){return new Ki(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _d(e,t){return Bg(Sr(e),Sr(t))&&e.limitType===t.limitType}function T2(e){return wd(Sr(e))+"|lt:"+e.limitType}function pE(e){return"Query(target="+function(t){var n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+xE(i.value);var i}).join(", ")+"]"),ia(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Rg(t.startAt)),t.endAt&&(n+=", endAt: "+Rg(t.endAt)),"Target("+n+")"}(Sr(e))+"; limitType="+e.limitType+")"}function Id(e,t){return t.isFoundDocument()&&function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ot.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(e,t)&&function(n,r){for(var i=0,s=n.explicitOrderBy;i<s.length;i++){var a=s[i];if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var i=0,s=n.filters;i<s.length;i++)if(!s[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!hM(n.startAt,Yu(n),r))&&(!n.endAt||!hM(n.endAt,Yu(n),r))}(e,t)}function A2(e){return function(t,n){for(var r=!1,i=0,s=Yu(e);i<s.length;i++){var a=s[i],c=C$(a,t,n);if(c!==0)return c;r=r||a.field.isKeyField()}return 0}}function C$(e,t,n){var r=e.field.isKeyField()?ot.comparator(t.key,n.key):function(i,s,a){var c=s.data.field(i),l=a.data.field(i);return c!==null&&l!==null?Qu(c,l):rt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function S2(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sg(t)?"-0":t}}function x2(e){return{integerValue:""+e}}function C2(e,t){return b2(t)?x2(t):S2(e,t)}function R$(e,t,n){return e instanceof Xu?function(r,i){var s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,t):e instanceof ta?D2(e,t):e instanceof ea?k2(e,t):function(r,i){var s=R2(r,i),a=fM(s)+fM(r.A);return fE(s)&&fE(r.A)?x2(a):S2(r.R,a)}(e,t)}function D$(e,t,n){return e instanceof ta?D2(e,t):e instanceof ea?k2(e,t):n}function R2(e,t){return e instanceof Ju?fE(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}function D2(e,t){for(var n=P2(t),r=function(a){n.some(function(c){return yi(c,a)})||n.push(a)},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}function k2(e,t){for(var n=P2(t),r=function(a){n=n.filter(function(c){return!yi(c,a)})},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}function fM(e){return Re(e.integerValue||e.doubleValue)}function P2(e){return CE(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function _g(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}function P$(e,t,n){e instanceof Td?function(r,i,s){var a=r.value.clone(),c=gM(r.fieldTransforms,i,s.transformResults);a.setAll(c),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Bo?function(r,i,s){if(_g(r.precondition,i)){var a=gM(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(N2(r)),c.setAll(a),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}else i.convertToUnknownDocument(s.version)}(e,t,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function mE(e,t,n){e instanceof Td?function(r,i,s){if(_g(r.precondition,i)){var a=r.value.clone(),c=vM(r.fieldTransforms,s,i);a.setAll(c),i.convertToFoundDocument(mM(i),a).setHasLocalMutations()}}(e,t,n):e instanceof Bo?function(r,i,s){if(_g(r.precondition,i)){var a=vM(r.fieldTransforms,s,i),c=i.data;c.setAll(N2(r)),c.setAll(a),i.convertToFoundDocument(mM(i),c).setHasLocalMutations()}}(e,t,n):function(r,i){_g(r.precondition,i)&&i.convertToNoDocument(At.min())}(e,t)}function N$(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var s=i[r],a=t.data.field(s.field),c=R2(s.transform,a||null);c!=null&&(n==null&&(n=hr.empty()),n.set(s.field,c))}return n||null}function pM(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&$u(n,r,function(i,s){return function(a,c){return a.field.isEqual(c.field)&&function(l,d){return l instanceof ta&&d instanceof ta||l instanceof ea&&d instanceof ea?$u(l.elements,d.elements,yi):l instanceof Ju&&d instanceof Ju?yi(l.A,d.A):l instanceof Xu&&d instanceof Xu}(a.transform,c.transform)}(i,s)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function mM(e){return e.isFoundDocument()?e.version:At.min()}function N2(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function gM(e,t,n){var r=new Map;ft(e.length===n.length);for(var i=0;i<n.length;i++){var s=e[i],a=s.transform,c=t.data.field(s.field);r.set(s.field,D$(a,c,n[i]))}return r}function vM(e,t,n){for(var r=new Map,i=0,s=e;i<s.length;i++){var a=s[i],c=a.transform,l=n.data.field(a.field);r.set(a.field,R$(c,l,t))}return r}function O2(e){switch(e){case C.OK:return rt();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0;default:return rt()}}function M2(e){if(e===void 0)return De("GRPC error has no .code"),C.UNKNOWN;switch(e){case Ce.OK:return C.OK;case Ce.CANCELLED:return C.CANCELLED;case Ce.UNKNOWN:return C.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return C.INTERNAL;case Ce.UNAVAILABLE:return C.UNAVAILABLE;case Ce.UNAUTHENTICATED:return C.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case Ce.NOT_FOUND:return C.NOT_FOUND;case Ce.ALREADY_EXISTS:return C.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return C.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case Ce.ABORTED:return C.ABORTED;case Ce.OUT_OF_RANGE:return C.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return C.UNIMPLEMENTED;case Ce.DATA_LOSS:return C.DATA_LOSS;default:return rt()}}function Ar(){return M$}function gE(){return L$}function L2(){return F$}function zt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=V$,r=0,i=e;r<i.length;r++){var s=i[r];n=n.add(s)}return n}function Gg(){return j$}function wM(){return new wn(ot.comparator)}function _M(){return new wn(ot.comparator)}function fd(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function j2(e,t){return e.I?t.toBase64():t.toUint8Array()}function G$(e,t){return fd(e,t.toTimestamp())}function an(e){return ft(!!e),At.fromTimestamp(function(t){var n=jo(t);return new kn(n.seconds,n.nanos)}(e))}function ME(e,t){return function(n){return new Vt(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function U2(e){var t=Vt.fromString(e);return ft(W2(t)),t}function pd(e,t){return ME(e.databaseId,t.path)}function gi(e,t){var n=U2(t);if(n.get(1)!==e.databaseId.projectId)throw new U(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new U(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ot(q2(n))}function vE(e,t){return ME(e.databaseId,t)}function B2(e){var t=U2(e);return t.length===4?Vt.emptyPath():q2(t)}function md(e){return new Vt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function q2(e){return ft(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function IM(e,t,n){return{name:pd(e,t),fields:n.value.mapValue.fields}}function z2(e,t,n){var r=gi(e,t.name),i=an(t.updateTime),s=new hr({mapValue:{fields:t.fields}}),a=cn.newFoundDocument(r,i,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function kg(e,t){var n;if(t instanceof Td)n={update:IM(e,t.key,t.value)};else if(t instanceof Ad)n={delete:pd(e,t.key)};else if(t instanceof Bo)n={update:IM(e,t.key,t.data),updateMask:Q$(t.fieldMask)};else{if(!(t instanceof PE))return rt();n={verify:pd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,s){var a=s.transform;if(a instanceof Xu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ta)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ea)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ju)return{fieldPath:s.field.canonicalString(),increment:a.A};throw rt()}(0,r)})),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:G$(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:rt()}(e,t.precondition)),n}function EM(e,t){var n=t.currentDocument?function(d){return d.updateTime!==void 0?yn.updateTime(an(d.updateTime)):d.exists!==void 0?yn.exists(d.exists):yn.none()}(t.currentDocument):yn.none(),r=t.updateTransforms?t.updateTransforms.map(function(d){return function(p,g){var v=null;if("setToServerValue"in g)ft(g.setToServerValue==="REQUEST_TIME"),v=new Xu;else if("appendMissingElements"in g){var b=g.appendMissingElements.values||[];v=new ta(b)}else if("removeAllFromArray"in g){var _=g.removeAllFromArray.values||[];v=new ea(_)}else"increment"in g?v=new Ju(p,g.increment):rt();var I=$r.fromServerFormat(g.fieldPath);return new Ed(I,v)}(e,d)}):[];if(t.update){t.update.name;var i=gi(e,t.update.name),s=new hr({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(d){var p=d.fieldPaths||[];return new Hu(p.map(function(g){return $r.fromServerFormat(g)}))}(t.updateMask);return new Bo(i,s,a,n,r)}return new Td(i,s,n,r)}if(t.delete){var c=gi(e,t.delete);return new Ad(c,n)}if(t.verify){var l=gi(e,t.verify);return new PE(l,n)}return rt()}function G2(e,t){return{documents:[vE(e,t.path)]}}function K2(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=vE(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=vE(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(c){if(c.length!==0){var l=c.map(function(d){return function(p){if(p.op==="=="){if(cM(p.value))return{unaryFilter:{field:Uu(p.field),op:"IS_NAN"}};if(uM(p.value))return{unaryFilter:{field:Uu(p.field),op:"IS_NULL"}}}else if(p.op==="!="){if(cM(p.value))return{unaryFilter:{field:Uu(p.field),op:"IS_NOT_NAN"}};if(uM(p.value))return{unaryFilter:{field:Uu(p.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(p.field),op:$$(p.op),value:p.value}}}(d)});return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}}(t.filters);i&&(n.structuredQuery.where=i);var s=function(c){if(c.length!==0)return c.map(function(l){return function(d){return{field:Uu(d.field),direction:K$(d.dir)}}(l)})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);var a=function(c,l){return c.I||ia(l)?l:{value:l}}(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=TM(t.startAt)),t.endAt&&(n.structuredQuery.endAt=TM(t.endAt)),n}function $2(e){var t=B2(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ft(r===1);var s=n.from[0];s.allDescendants?i=s.collectionId:t=t.child(s.collectionId)}var a=[];n.where&&(a=H2(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(g){return function(v){return new Ku(Gu(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g)}));var l=null;n.limit&&(l=function(g){var v;return ia(v=typeof g=="object"?g.value:g)?null:v}(n.limit));var d=null;n.startAt&&(d=AM(n.startAt));var p=null;return n.endAt&&(p=AM(n.endAt)),I2(t,i,c,a,l,"F",d,p)}function H2(e){return e?e.unaryFilter!==void 0?[W$(e)]:e.fieldFilter!==void 0?[H$(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return H2(t)}).reduce(function(t,n){return t.concat(n)}):rt():[]}function TM(e){return{before:e.before,values:e.position}}function AM(e){var t=!!e.before,n=e.values||[];return new dd(n,t)}function K$(e){return B$[e]}function $$(e){return q$[e]}function Uu(e){return{fieldPath:e.canonicalString()}}function Gu(e){return $r.fromServerFormat(e.fieldPath)}function H$(e){return fr.create(Gu(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value)}function W$(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Gu(e.unaryFilter.field);return fr.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Gu(e.unaryFilter.field);return fr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Gu(e.unaryFilter.field);return fr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Gu(e.unaryFilter.field);return fr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return rt()}}function Q$(e){var t=[];return e.fields.forEach(function(n){return t.push(n.canonicalString())}),{fieldPaths:t}}function W2(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}function Kr(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=SM(t)),t=Y$(e.get(n),t);return SM(t)}function Y$(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function SM(e){return e+""}function qi(e){var t=e.length;if(ft(t>=2),t===2)return ft(e.charAt(0)===""&&e.charAt(1)===""),Vt.emptyPath();for(var n=t-2,r=[],i="",s=0;s<t;){var a=e.indexOf("",s);switch((a<0||a>n)&&rt(),e.charAt(a+1)){case"":var c=e.substring(s,a),l=void 0;i.length===0?l=c:(l=i+=c,i=""),r.push(l);break;case"":i+=e.substring(s,a),i+="\0";break;case"":i+=e.substring(s,a+1);break;default:rt()}s=a+2}return new Vt(r)}function oa(e){return e.name==="IndexedDbTransactionError"}function Ws(e){return new B(function(t,n){e.onsuccess=function(r){var i=r.target.result;t(i)},e.onerror=function(r){var i=LE(r.target.error);n(i)}})}function LE(e){var t=ec._t(Ao());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new U("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return xM||(xM=!0,setTimeout(function(){throw r},0)),r}}return e}function Qn(e,t){var n=Q(e);return ec.It(n.Mt,t)}function yE(e,t){if(t.document)return z2(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=ot.fromSegments(t.noDocument.path),r=rc(t.noDocument.readTime),i=cn.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var s=ot.fromSegments(t.unknownDocument.path);return r=rc(t.unknownDocument.version),cn.newUnknownDocument(s,r)}return rt()}function RM(e,t,n){var r=VE(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s=function(g,v){return{name:pd(g,v.key),fields:v.data.value.mapValue.fields,updateTime:fd(g,v.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new de(null,null,s,a,r,i)}if(t.isNoDocument()){var c=t.key.path.toArray(),l=nc(t.version);return a=t.hasCommittedMutations,new de(null,new J$(c,l),null,a,r,i)}if(t.isUnknownDocument()){var d=t.key.path.toArray(),p=nc(t.version);return new de(new Z$(d,p),null,null,!0,r,i)}return rt()}function VE(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Z2(e){var t=new kn(e[0],e[1]);return At.fromTimestamp(t)}function nc(e){var t=e.toTimestamp();return new X$(t.seconds,t.nanoseconds)}function rc(e){var t=new kn(e.seconds,e.nanoseconds);return At.fromTimestamp(t)}function qu(e,t){for(var n=(t.baseMutations||[]).map(function(l){return EM(e.Lt,l)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var s=t.mutations[r+1];i.updateTransforms=s.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map(function(l){return EM(e.Lt,l)}),c=kn.fromMillis(t.localWriteTimeMs);return new FE(t.batchId,c,n,a)}function sd(e){var t,n,r=rc(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?rc(e.lastLimboFreeSnapshotVersion):At.min();return e.query.documents!==void 0?(ft((n=e.query).documents.length===1),t=Sr(hc(B2(n.documents[0])))):t=function(s){return Sr($2(s))}(e.query),new Kg(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Pn.fromBase64String(e.resumeToken))}function tL(e,t){var n,r=nc(t.snapshotVersion),i=nc(t.lastLimboFreeSnapshotVersion);n=Cg(t.target)?G2(e.Lt,t.target):K2(e.Lt,t.target);var s=t.resumeToken.toBase64();return new Wn(t.targetId,wd(t.target),r,s,t.sequenceNumber,i,n)}function jE(e){var t=$2({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?E2(t,t.limit,"L"):t}function DM(e){return Qn(e,Zu.store)}function kM(e){return Qn(e,tc.store)}function PM(e){return Qn(e,Xs.store)}function eL(e,t,n){var r=e.store(Jt.store),i=e.store(gn.store),s=[],a=IDBKeyRange.only(n.batchId),c=0,l=r.$t({range:a},function(_,I,T){return c++,T.delete()});s.push(l.next(function(){ft(c===1)}));for(var d=[],p=0,g=n.mutations;p<g.length;p++){var v=g[p],b=gn.key(t,v.key.path,n.batchId);s.push(i.delete(b)),d.push(v.key)}return B.waitFor(s).next(function(){return d})}function Pg(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw rt();t=e.noDocument}return JSON.stringify(t).length}function nL(e,t,n){var r=gn.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),a=!1;return zu(e).$t({range:s,Ft:!0},function(c,l,d){var p=c[0],g=c[1];c[2],p===t&&g===i&&(a=!0),d.done()}).next(function(){return a})}function Ro(e){return Qn(e,Jt.store)}function zu(e){return Qn(e,gn.store)}function rL(e){return Qn(e,Lo.store)}function Bu(e){return Qn(e,Wn.store)}function OM(e){return Qn(e,lr.store)}function No(e){return Qn(e,un.store)}function sa(e){return O(this,void 0,void 0,function(){return N(this,function(t){if(e.code!==C.FAILED_PRECONDITION||e.message!==Q2)throw e;return q("LocalStore","Unexpectedly lost primary lease"),[2]})})}function MM(e,t){var n=e[0],r=e[1],i=t[0],s=t[1],a=Rt(n,i);return a===0?Rt(r,s):a}function gg(e,t){return No(e).put(function(n,r){return new un(0,Kr(n.path),r)}(t,e.currentSequenceNumber))}function LM(e){return Qn(e,mi.store)}function ko(e){return Qn(e,de.store)}function vg(e){return e.path.toArray()}function FM(e){e.createObjectStore(un.store,{keyPath:un.keyPath}).createIndex(un.documentTargetsIndex,un.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Wn.store,{keyPath:Wn.keyPath}).createIndex(Wn.queryTargetsIndexName,Wn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(lr.store)}function od(e){return Qn(e,cr.store)}function yg(e){return Qn(e,zi.store)}function BE(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}function aL(e,t,n,r){return new bH(e,t,n,r)}function uL(e,t){return O(this,void 0,void 0,function(){var n,r,i,s;return N(this,function(a){switch(a.label){case 0:return n=Q(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var l;return n._n.getAllMutationBatches(c).next(function(d){return l=d,r=n.persistence.getMutationQueue(t),i=new oL(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(c)}).next(function(d){for(var p=[],g=[],v=zt(),b=0,_=l;b<_.length;b++){var I=_[b];p.push(I.batchId);for(var T=0,S=I.mutations;T<S.length;T++){var M=S[T];v=v.add(M.key)}}for(var k=0,z=d;k<z.length;k++){var H=z[k];g.push(H.batchId);for(var L=0,mt=H.mutations;L<mt.length;L++){var fn=mt[L];v=v.add(fn.key)}}return i.pn(c,v).next(function(ht){return{Ln:ht,removedBatchIds:p,addedBatchIds:g}})})})];case 1:return s=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function wH(e,t){var n=Q(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=t.batch.keys(),s=n.On.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){var p=l.batch,g=p.keys(),v=B.resolve();return g.forEach(function(b){v=v.next(function(){return d.getEntry(c,b)}).next(function(_){var I=l.docVersions.get(b);ft(I!==null),_.version.compareTo(I)<0&&(p.applyToRemoteDocument(_,l),_.isValidDocument()&&d.addEntry(_,l.commitVersion))})}),v.next(function(){return a._n.removeMutationBatch(c,p)})}(n,r,t,s).next(function(){return s.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function cL(e){var t=Q(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t.qe.getLastRemoteSnapshotVersion(n)})}function _H(e,t){var n=Q(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var a=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var c=[];t.targetChanges.forEach(function(p,g){var v=i.get(g);if(v){c.push(n.qe.removeMatchingKeys(s,p.removedDocuments,g).next(function(){return n.qe.addMatchingKeys(s,p.addedDocuments,g)}));var b=p.resumeToken;if(b.approximateByteSize()>0){var _=v.withResumeToken(b,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(g,_),function(I,T,S){return ft(T.resumeToken.approximateByteSize()>0),I.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(v,_,p)&&c.push(n.qe.updateTargetData(s,_))}}});var l=Ar();if(t.documentUpdates.forEach(function(p,g){t.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(lL(s,a,t.documentUpdates,r,void 0).next(function(p){l=p})),!r.isEqual(At.min())){var d=n.qe.getLastRemoteSnapshotVersion(s).next(function(p){return n.qe.setTargetsMetadata(s,s.currentSequenceNumber,r)});c.push(d)}return B.waitFor(c).next(function(){return a.apply(s)}).next(function(){return n.Mn.En(s,l)}).next(function(){return l})}).then(function(s){return n.kn=i,s})}function lL(e,t,n,r,i){var s=zt();return n.forEach(function(a){return s=s.add(a)}),t.getEntries(e,s).next(function(a){var c=Ar();return n.forEach(function(l,d){var p=a.get(l),g=i?.get(l)||r;d.isNoDocument()&&d.version.isEqual(At.min())?(t.removeEntry(l,g),c=c.insert(l,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(d,g),c=c.insert(l,d)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",p.version," Watch version:",d.version)}),c})}function IH(e,t){var n=Q(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n._n.getNextMutationBatchAfterBatchId(r,t)})}function ic(e,t){var n=Q(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,t).next(function(s){return s?(i=s,B.resolve(i)):n.qe.allocateTargetId(r).next(function(a){return i=new Kg(t,a,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(t,r.targetId)),r})}function oc(e,t,n){return O(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:r=Q(e),i=r.kn.get(t),s=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(l){return r.persistence.referenceDelegate.removeTarget(l,i)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!oa(a=c.sent()))throw a;return q("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}})})}function Og(e,t,n){var r=Q(e),i=At.min(),s=zt();return r.persistence.runTransaction("Execute query","readonly",function(a){return function(c,l,d){var p=Q(c),g=p.Fn.get(d);return g!==void 0?B.resolve(p.kn.get(g)):p.qe.getTargetData(l,d)}(r,a,Sr(t)).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(a,c.targetId).next(function(l){s=l})}).next(function(){return r.xn.getDocumentsMatchingQuery(a,t,n?i:At.min(),n?s:zt())}).next(function(c){return{documents:c,Bn:s}})})}function hL(e,t){var n=Q(e),r=Q(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(s){return r.lt(s,t).next(function(a){return a?a.target:null})})}function dL(e){var t=Q(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,s){var a=Q(r),c=Ar(),l=VE(s),d=ko(i),p=IDBKeyRange.lowerBound(l,!0);return d.$t({index:de.readTimeIndex,range:p},function(g,v){var b=yE(a.R,v);c=c.insert(b.key,b),l=v.readTime}).next(function(){return{wn:c,readTime:Z2(l)}})}(t.On,n,t.$n)}).then(function(n){var r=n.wn,i=n.readTime;return t.$n=i,r})}function EH(e){return O(this,void 0,void 0,function(){var t;return N(this,function(n){return[2,(t=Q(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var s=ko(i),a=At.min();return s.$t({index:de.readTimeIndex,reverse:!0},function(c,l,d){l.readTime&&(a=Z2(l.readTime)),d.done()}).next(function(){return a})}(r)}).then(function(r){t.$n=r})]})})}function TH(e,t,n,r){return O(this,void 0,void 0,function(){var i,s,a,c,l,d,p,g,v,b;return N(this,function(_){switch(_.label){case 0:for(i=Q(e),s=zt(),a=Ar(),c=L2(),l=0,d=n;l<d.length;l++)p=d[l],g=t.qn(p.metadata.name),p.document&&(s=s.add(g)),a=a.insert(g,t.Un(p)),c=c.insert(g,t.Kn(p.metadata.readTime));return v=i.On.newChangeBuffer({trackRemovals:!0}),[4,ic(i,function(I){return Sr(hc(Vt.fromString("__bundle__/docs/"+I)))}(r))];case 1:return b=_.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(I){return lL(I,v,a,At.min(),c).next(function(T){return v.apply(I),T}).next(function(T){return i.qe.removeMatchingKeysForTargetId(I,b.targetId).next(function(){return i.qe.addMatchingKeys(I,s,b.targetId)}).next(function(){return i.Mn.En(I,T)}).next(function(){return T})})})]}})})}function AH(e,t,n){return n===void 0&&(n=zt()),O(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return[4,ic(e,Sr(jE(t.bundledQuery)))];case 1:return r=s.sent(),[2,(i=Q(e)).persistence.runTransaction("Save named query","readwrite",function(a){var c=an(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ke.saveNamedQuery(a,t);var l=r.withResumeToken(Pn.EMPTY_BYTE_STRING,c);return i.kn=i.kn.insert(l.targetId,l),i.qe.updateTargetData(a,l).next(function(){return i.qe.removeMatchingKeysForTargetId(a,r.targetId)}).next(function(){return i.qe.addMatchingKeys(a,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(a,t)})})]}})})}function VM(e,t){return"firestore_clients_"+e+"_"+t}function jM(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function uE(e,t){return"firestore_targets_"+e+"_"+t}function pL(){return typeof window<"u"?window:null}function Eg(){return typeof document<"u"?document:null}function $g(e){return new z$(e,!0)}function Sd(e){return O(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:if(!qo(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function fc(e){return O(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Hg(e,t){var n=Q(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),$E(n)?KE(n):mc(n).er()&&GE(n,t))}function gd(e,t){var n=Q(e),r=mc(n);n.$r.delete(t),r.er()&&gL(n,t),n.$r.size===0&&(r.er()?r.ir():qo(n)&&n.Br.set("Unknown"))}function GE(e,t){e.qr.U(t.targetId),mc(e).mr(t)}function gL(e,t){e.qr.U(t),mc(e).yr(t)}function KE(e){e.qr=new U$({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),mc(e).start(),e.Br.Sr()}function $E(e){return qo(e)&&!mc(e).tr()&&e.$r.size>0}function qo(e){return Q(e).Or.size===0}function vL(e){e.qr=void 0}function GH(e){return O(this,void 0,void 0,function(){return N(this,function(t){return e.$r.forEach(function(n,r){GE(e,n)}),[2]})})}function KH(e,t){return O(this,void 0,void 0,function(){return N(this,function(n){return vL(e),$E(e)?(e.Br.Nr(t),KE(e)):e.Br.set("Unknown"),[2]})})}function $H(e,t,n){return O(this,void 0,void 0,function(){var r,i,s;return N(this,function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof V2&&t.state===2&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(c,l){return O(this,void 0,void 0,function(){var d,p,g,v;return N(this,function(b){switch(b.label){case 0:d=l.cause,p=0,g=l.targetIds,b.label=1;case 1:return p<g.length?(v=g[p],c.$r.has(v)?[4,c.remoteSyncer.rejectListen(v,d)]:[3,3]):[3,5];case 2:b.sent(),c.$r.delete(v),c.qr.removeTarget(v),b.label=3;case 3:b.label=4;case 4:return p++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),q("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Mg(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Ig?e.qr.X(t):t instanceof F2?e.qr.rt(t):e.qr.et(t),n.isEqual(At.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,cL(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(c,l){var d=c.qr.ut(l);return d.targetChanges.forEach(function(p,g){if(p.resumeToken.approximateByteSize()>0){var v=c.$r.get(g);v&&c.$r.set(g,v.withResumeToken(p.resumeToken,l))}}),d.targetMismatches.forEach(function(p){var g=c.$r.get(p);if(g){c.$r.set(p,g.withResumeToken(Pn.EMPTY_BYTE_STRING,g.snapshotVersion)),gL(c,p);var v=new Kg(g.target,p,1,g.sequenceNumber);GE(c,v)}}),c.remoteSyncer.applyRemoteEvent(d)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return q("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,Mg(e,s)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function Mg(e,t,n){return O(this,void 0,void 0,function(){var r=this;return N(this,function(i){switch(i.label){case 0:if(!oa(t))throw t;return e.Or.add(1),[4,fc(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return cL(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return O(r,void 0,void 0,function(){return N(this,function(s){switch(s.label){case 0:return q("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return s.sent(),e.Or.delete(1),[4,Sd(e)];case 2:return s.sent(),[2]}})})}),[2]}})})}function yL(e,t){return t().catch(function(n){return Mg(e,n,t)})}function pc(e){return O(this,void 0,void 0,function(){var t,n,r,i,s;return N(this,function(a){switch(a.label){case 0:t=Q(e),n=Uo(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(c){return qo(c)&&c.Fr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,IH(t.localStore,r)];case 3:return(i=a.sent())===null?(t.Fr.length===0&&n.ir(),[3,7]):(r=i.batchId,function(c,l){c.Fr.push(l);var d=Uo(c);d.er()&&d.pr&&d.Er(l.mutations)}(t,i),[3,6]);case 4:return s=a.sent(),[4,Mg(t,s)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return bL(t)&&wL(t),[2]}})})}function bL(e){return qo(e)&&!Uo(e).tr()&&e.Fr.length>0}function wL(e){Uo(e).start()}function HH(e){return O(this,void 0,void 0,function(){return N(this,function(t){return Uo(e).Ar(),[2]})})}function WH(e){return O(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(s){for(t=Uo(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]})})}function QH(e,t,n){return O(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return r=e.Fr.shift(),i=rH.from(r,t,n),[4,yL(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,pc(e)];case 2:return s.sent(),[2]}})})}function YH(e,t){return O(this,void 0,void 0,function(){return N(this,function(n){switch(n.label){case 0:return t&&Uo(e).pr?[4,function(r,i){return O(this,void 0,void 0,function(){var s,a;return N(this,function(c){switch(c.label){case 0:return O2(a=i.code)&&a!==C.ABORTED?(s=r.Fr.shift(),Uo(r).sr(),[4,yL(r,function(){return r.remoteSyncer.rejectFailedWrite(s.batchId,i)})]):[3,3];case 1:return c.sent(),[4,pc(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return bL(e)&&wL(e),[2]}})})}function wE(e,t){return O(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return n=Q(e),t?(n.Or.delete(2),[4,Sd(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,fc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function mc(e){var t=this;return e.Ur||(e.Ur=function(n,r,i){var s=Q(n);return s.br(),new jH(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:GH.bind(null,e),Ri:KH.bind(null,e),_r:$H.bind(null,e)}),e.Mr.push(function(n){return O(t,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return n?(e.Ur.sr(),$E(e)?KE(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:r.sent(),vL(e),r.label=3;case 3:return[2]}})})})),e.Ur}function Uo(e){var t=this;return e.Kr||(e.Kr=function(n,r,i){var s=Q(n);return s.br(),new UH(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:HH.bind(null,e),Ri:YH.bind(null,e),Ir:WH.bind(null,e),Tr:QH.bind(null,e)}),e.Mr.push(function(n){return O(t,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return n?(e.Kr.sr(),[4,pc(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:r.sent(),e.Fr.length>0&&(q("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),r.label=4;case 4:return[2]}})})})),e.Kr}function gc(e,t){if(De("AsyncQueue",t+": "+e),oa(e))return new U(C.UNAVAILABLE,t+": "+e);throw e}function HE(e,t){return O(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return N(this,function(d){switch(d.label){case 0:if(n=Q(e),r=t.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new JH),!i)return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),a=s,[4,n.onListen(r)];case 2:return a.Wr=d.sent(),[3,4];case 3:return c=d.sent(),l=gc(c,"Initialization of query '"+pE(t.query)+"' failed"),[2,void t.onError(l)];case 4:return n.queries.set(r,s),s.listeners.push(t),t.zr(n.onlineState),s.Wr&&t.Hr(s.Wr)&&QE(n),[2]}})})}function WE(e,t){return O(this,void 0,void 0,function(){var n,r,i,s,a;return N(this,function(c){return n=Q(e),r=t.query,i=!1,(s=n.queries.get(r))&&(a=s.listeners.indexOf(t))>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function t8(e,t){for(var n=Q(e),r=!1,i=0,s=t;i<s.length;i++){var a=s[i],c=a.query,l=n.queries.get(c);if(l){for(var d=0,p=l.listeners;d<p.length;d++)p[d].Hr(a)&&(r=!0);l.Wr=a}}r&&QE(n)}function e8(e,t,n){var r=Q(e),i=r.queries.get(t);if(i)for(var s=0,a=i.listeners;s<a.length;s++)a[s].onError(n);r.queries.delete(t)}function QE(e){e.Gr.forEach(function(t){t.next()})}function r8(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}function a8(e,t){return O(this,void 0,void 0,function(){var n,r,i,s,a,c;return N(this,function(l){switch(l.label){case 0:return n=eT(e),(s=n.Po.get(t))?(r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro(),[3,4]):[3,1];case 1:return[4,ic(n.localStore,Sr(t))];case 2:return a=l.sent(),c=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,XE(n,t,r,c==="current")];case 3:i=l.sent(),n.isPrimaryClient&&Hg(n.remoteStore,a),l.label=4;case 4:return[2,i]}})})}function XE(e,t,n,r){return O(this,void 0,void 0,function(){var i,s,a,c,l,d;return N(this,function(p){switch(p.label){case 0:return e.Oo=function(g,v,b){return function(_,I,T,S){return O(this,void 0,void 0,function(){var M,k,z;return N(this,function(H){switch(H.label){case 0:return M=I.view._o(T),M.Nn?[4,Og(_.localStore,I.query,!1).then(function(L){var mt=L.documents;return I.view._o(mt,M)})]:[3,2];case 1:M=H.sent(),H.label=2;case 2:return k=S&&S.targetChanges.get(I.targetId),z=I.view.applyChanges(M,_.isPrimaryClient,k),[2,(_E(_,I.targetId,z.To),z.snapshot)]}})})}(e,g,v,b)},[4,Og(e.localStore,t,!0)];case 1:return i=p.sent(),s=new TL(t,i.Bn),a=s._o(i.documents),c=OE.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline"),l=s.applyChanges(a,e.isPrimaryClient,c),_E(e,n,l.To),d=new i8(t,n,s),[2,(e.Po.set(t,d),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),l.snapshot)]}})})}function u8(e,t){return O(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:return n=Q(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(a){return!_d(a,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,oc(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),gd(n.remoteStore,r.targetId),sc(n,r.targetId)}).catch(sa)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return sc(n,r.targetId),[4,oc(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function c8(e,t,n){return O(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:r=nT(e),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,function(l,d){var p,g=Q(l),v=kn.now(),b=d.reduce(function(_,I){return _.add(I.key)},zt());return g.persistence.runTransaction("Locally write mutations","readwrite",function(_){return g.Mn.pn(_,b).next(function(I){p=I;for(var T=[],S=0,M=d;S<M.length;S++){var k=M[S],z=N$(k,p.get(k.key));z!=null&&T.push(new Bo(k.key,z,w2(z.value.mapValue),yn.exists(!0)))}return g._n.addMutationBatch(_,v,T,d)})}).then(function(_){return _.applyToLocalDocumentSet(p),{batchId:_.batchId,changes:p}})}(r.localStore,t)];case 2:return i=c.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(l,d,p){var g=l.xo[l.currentUser.toKey()];g||(g=new wn(Rt)),g=g.insert(d,p),l.xo[l.currentUser.toKey()]=g}(r,i.batchId,n),[4,zo(r,i.changes)];case 3:return c.sent(),[4,pc(r.remoteStore)];case 4:return c.sent(),[3,6];case 5:return s=c.sent(),a=gc(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function AL(e,t){return O(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:n=Q(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,_H(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(s,a){var c=n.Co.get(a);c&&(ft(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.bo=!0:s.modifiedDocuments.size>0?ft(c.bo):s.removedDocuments.size>0&&(ft(c.bo),c.bo=!1))}),[4,zo(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,sa(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function KM(e,t,n){var r=Q(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var i=[];r.Po.forEach(function(s,a){var c=a.view.zr(t);c.snapshot&&i.push(c.snapshot)}),function(s,a){var c=Q(s);c.onlineState=a;var l=!1;c.queries.forEach(function(d,p){for(var g=0,v=p.listeners;g<v.length;g++)v[g].zr(a)&&(l=!0)}),l&&QE(c)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function l8(e,t,n){return O(this,void 0,void 0,function(){var r,i,s,a,c,l;return N(this,function(d){switch(d.label){case 0:return(r=Q(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(s=i&&i.key)?(a=(a=new wn(ot.comparator)).insert(s,cn.newNoDocument(s,At.min())),c=zt().add(s),l=new NE(At.min(),new Map,new Be(Rt),a,c),[4,AL(r,l)]):[3,2];case 1:return d.sent(),r.Do=r.Do.remove(s),r.Co.delete(t),tT(r),[3,4];case 2:return[4,oc(r.localStore,t,!1).then(function(){return sc(r,t,n)}).catch(sa)];case 3:d.sent(),d.label=4;case 4:return[2]}})})}function h8(e,t){return O(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:n=Q(e),r=t.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,wH(n.localStore,t)];case 2:return i=s.sent(),ZE(n,r,null),JE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,zo(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,sa(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function d8(e,t,n){return O(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:r=Q(e),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(a,c){var l=Q(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",function(d){var p;return l._n.lookupMutationBatch(d,c).next(function(g){return ft(g!==null),p=g.keys(),l._n.removeMutationBatch(d,g)}).next(function(){return l._n.performConsistencyCheck(d)}).next(function(){return l.Mn.pn(d,p)})})}(r.localStore,t)];case 2:return i=s.sent(),ZE(r,t,n),JE(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,zo(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,sa(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function f8(e,t){return O(this,void 0,void 0,function(){var n,r,i,s,a;return N(this,function(c){switch(c.label){case 0:qo((n=Q(e)).remoteStore)||q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(l){var d=Q(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(p){return d._n.getHighestUnacknowledgedBatchId(p)})}(n.localStore)];case 2:return(r=c.sent())===-1?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return s=c.sent(),a=gc(s,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}})})}function JE(e,t){(e.ko.get(t)||[]).forEach(function(n){n.resolve()}),e.ko.delete(t)}function ZE(e,t,n){var r=Q(e),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function sc(e,t,n){n===void 0&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var s=i[r];e.Po.delete(s),n&&e.vo.Mo(s,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(a){e.No.containsKey(a)||SL(e,a)})}function SL(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);n!==null&&(gd(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),tT(e))}function _E(e,t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof IL?(e.No.addReference(s.key,t),p8(e,s)):s instanceof EL?(q("SyncEngine","Document no longer in limbo: "+s.key),e.No.removeReference(s.key,t),e.No.containsKey(s.key)||SL(e,s.key)):rt()}}function p8(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(q("SyncEngine","New document in limbo: "+n),e.So.add(r),tT(e))}function tT(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new ot(Vt.fromString(t)),r=e.Fo.next();e.Co.set(r,new o8(n)),e.Do=e.Do.insert(n,r),Hg(e.remoteStore,new Kg(Sr(hc(n.path)),r,2,dr.o))}}function zo(e,t,n){return O(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:return r=Q(e),i=[],s=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(l,d){a.push(r.Oo(d,t,n).then(function(p){if(p){r.isPrimaryClient&&r.sharedClientState.updateQueryState(d.targetId,p.fromCache?"not-current":"current"),i.push(p);var g=yH.Pn(d.targetId,p);s.push(g)}}))}),[4,Promise.all(a)]);case 1:return c.sent(),r.vo._r(i),[4,function(l,d){return O(this,void 0,void 0,function(){var p,g,v,b,_,I,T,S,M;return N(this,function(k){switch(k.label){case 0:p=Q(l),k.label=1;case 1:return k.trys.push([1,3,,4]),[4,p.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(z){return B.forEach(d,function(H){return B.forEach(H.bn,function(L){return p.persistence.referenceDelegate.addReference(z,H.targetId,L)}).next(function(){return B.forEach(H.vn,function(L){return p.persistence.referenceDelegate.removeReference(z,H.targetId,L)})})})})];case 2:return k.sent(),[3,4];case 3:if(!oa(g=k.sent()))throw g;return q("LocalStore","Failed to update sequence numbers: "+g),[3,4];case 4:for(v=0,b=d;v<b.length;v++)_=b[v],I=_.targetId,_.fromCache||(T=p.kn.get(I),S=T.snapshotVersion,M=T.withLastLimboFreeSnapshotVersion(S),p.kn=p.kn.insert(I,M));return[2]}})})}(r.localStore,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function m8(e,t){return O(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return(n=Q(e)).currentUser.isEqual(t)?[3,3]:(q("SyncEngine","User change. New user:",t.toKey()),[4,uL(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(s,a){s.ko.forEach(function(c){c.forEach(function(l){l.reject(new U(C.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,zo(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function g8(e,t){var n=Q(e),r=n.Co.get(t);if(r&&r.bo)return zt().add(r.key);var i=zt(),s=n.Vo.get(t);if(!s)return i;for(var a=0,c=s;a<c.length;a++){var l=c[a],d=n.Po.get(l);i=i.unionWith(d.view.wo)}return i}function v8(e,t){return O(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:return[4,Og((n=Q(e)).localStore,t.query,!0)];case 1:return r=s.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&_E(n,t.targetId,i.To),i)]}})})}function y8(e){return O(this,void 0,void 0,function(){var t;return N(this,function(n){return[2,dL((t=Q(e)).localStore).then(function(r){return zo(t,r)})]})})}function b8(e,t,n,r){return O(this,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:return[4,function(c,l){var d=Q(c),p=Q(d._n);return d.persistence.runTransaction("Lookup mutation documents","readonly",function(g){return p.jt(g,l).next(function(v){return v?d.Mn.pn(g,v):B.resolve(null)})})}((i=Q(e)).localStore,t)];case 1:return(s=a.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,pc(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(ZE(i,t,r||null),JE(i,t),function(c,l){Q(Q(c)._n).Gt(l)}(i.localStore,t)):rt(),a.label=4;case 4:return[4,zo(i,s)];case 5:return a.sent(),[3,7];case 6:q("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}})})}function w8(e,t){return O(this,void 0,void 0,function(){var n,r,i,s,a,c,l,d;return N(this,function(p){switch(p.label){case 0:return eT(n=Q(e)),nT(n),t!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,$M(n,r.toArray())]);case 1:return i=p.sent(),n.$o=!0,[4,wE(n.remoteStore,!0)];case 2:for(p.sent(),s=0,a=i;s<a.length;s++)c=a[s],Hg(n.remoteStore,c);return[3,7];case 3:return t!==!1||n.$o===!1?[3,7]:(l=[],d=Promise.resolve(),n.Vo.forEach(function(g,v){n.sharedClientState.isLocalQueryTarget(v)?l.push(v):d=d.then(function(){return sc(n,v),oc(n.localStore,v,!0)}),gd(n.remoteStore,v)}),[4,d]);case 4:return p.sent(),[4,$M(n,l)];case 5:return p.sent(),function(g){var v=Q(g);v.Co.forEach(function(b,_){gd(v.remoteStore,_)}),v.No.ts(),v.Co=new Map,v.Do=new wn(ot.comparator)}(n),n.$o=!1,[4,wE(n.remoteStore,!1)];case 6:p.sent(),p.label=7;case 7:return[2]}})})}function $M(e,t,n){return O(this,void 0,void 0,function(){var r,i,s,a,c,l,d,p,g,v,b,_,I,T;return N(this,function(S){switch(S.label){case 0:r=Q(e),i=[],s=[],a=0,c=t,S.label=1;case 1:return a<c.length?(l=c[a],d=void 0,(p=r.Vo.get(l))&&p.length!==0?[4,ic(r.localStore,Sr(p[0]))]:[3,7]):[3,13];case 2:d=S.sent(),g=0,v=p,S.label=3;case 3:return g<v.length?(b=v[g],_=r.Po.get(b),[4,v8(r,_)]):[3,6];case 4:(I=S.sent()).snapshot&&s.push(I.snapshot),S.label=5;case 5:return g++,[3,3];case 6:return[3,11];case 7:return[4,hL(r.localStore,l)];case 8:return T=S.sent(),[4,ic(r.localStore,T)];case 9:return d=S.sent(),[4,XE(r,xL(T),l,!1)];case 10:S.sent(),S.label=11;case 11:i.push(d),S.label=12;case 12:return a++,[3,1];case 13:return[2,(r.vo._r(s),i)]}})})}function xL(e){return I2(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function _8(e){var t=Q(e);return Q(Q(t.localStore).persistence).fn()}function I8(e,t,n,r){return O(this,void 0,void 0,function(){var i,s,a;return N(this,function(c){switch(c.label){case 0:return(i=Q(e)).$o?(q("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,dL(i.localStore)];case 3:return s=c.sent(),a=NE.createSynthesizedRemoteEventForCurrentChange(t,n==="current"),[4,zo(i,s,a)];case 4:return c.sent(),[3,8];case 5:return[4,oc(i.localStore,t,!0)];case 6:return c.sent(),sc(i,t,r),[3,8];case 7:rt(),c.label=8;case 8:return[2]}})})}function E8(e,t,n){return O(this,void 0,void 0,function(){var r,i,s,a,c,l,d,p,g,v;return N(this,function(b){switch(b.label){case 0:if(!(r=eT(e)).$o)return[3,10];i=0,s=t,b.label=1;case 1:return i<s.length?(a=s[i],r.Vo.has(a)?(q("SyncEngine","Adding an already active target "+a),[3,5]):[4,hL(r.localStore,a)]):[3,6];case 2:return c=b.sent(),[4,ic(r.localStore,c)];case 3:return l=b.sent(),[4,XE(r,xL(c),l.targetId,!1)];case 4:b.sent(),Hg(r.remoteStore,l),b.label=5;case 5:return i++,[3,1];case 6:d=function(_){return N(this,function(I){switch(I.label){case 0:return r.Vo.has(_)?[4,oc(r.localStore,_,!1).then(function(){gd(r.remoteStore,_),sc(r,_)}).catch(sa)]:[3,2];case 1:I.sent(),I.label=2;case 2:return[2]}})},p=0,g=n,b.label=7;case 7:return p<g.length?(v=g[p],[5,d(v)]):[3,10];case 8:b.sent(),b.label=9;case 9:return p++,[3,7];case 10:return[2]}})})}function eT(e){var t=Q(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=AL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=g8.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=l8.bind(null,t),t.vo._r=t8.bind(null,t.eventManager),t.vo.Mo=e8.bind(null,t.eventManager),t}function nT(e){var t=Q(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=h8.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=d8.bind(null,t),t}function DL(e,t){return O(this,void 0,void 0,function(){var n,r,i=this;return N(this,function(s){switch(s.label){case 0:return e.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=s.sent(),[4,t.initialize(n)];case 2:return s.sent(),r=n.initialUser,e.setCredentialChangeListener(function(a){return O(i,void 0,void 0,function(){return N(this,function(c){switch(c.label){case 0:return r.isEqual(a)?[3,2]:[4,uL(t.localStore,a)];case 1:c.sent(),r=a,c.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function kL(e,t){return O(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,rT(e)];case 1:return n=i.sent(),q("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(s){return function(a,c){return O(this,void 0,void 0,function(){var l,d;return N(this,function(p){switch(p.label){case 0:return(l=Q(a)).asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials"),d=qo(l),l.Or.add(3),[4,fc(l)];case 1:return p.sent(),d&&l.Br.set("Unknown"),[4,l.remoteSyncer.handleCredentialChange(c)];case 2:return p.sent(),l.Or.delete(3),[4,Sd(l)];case 3:return p.sent(),[2]}})})}(t.remoteStore,s)}),e.onlineComponents=t,[2]}})})}function rT(e){return O(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(q("FirestoreClient","Using default OfflineComponentProvider"),[4,DL(e,new CL)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function Qg(e){return O(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(q("FirestoreClient","Using default OnlineComponentProvider"),[4,kL(e,new IE)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function HM(e){return rT(e).then(function(t){return t.persistence})}function PL(e){return rT(e).then(function(t){return t.localStore})}function WM(e){return Qg(e).then(function(t){return t.remoteStore})}function NL(e){return Qg(e).then(function(t){return t.syncEngine})}function ac(e){return O(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return[4,Qg(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=a8.bind(null,t.syncEngine),n.onUnlisten=u8.bind(null,t.syncEngine),n)]}})})}function QM(e,t,n){var r=this;n===void 0&&(n={});var i=new bn;return e.asyncQueue.enqueueAndForget(function(){return O(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return s=function(c,l,d,p,g){var v=new Wg({next:function(_){l.enqueueAndForget(function(){return WE(c,b)});var I=_.docs.has(d);!I&&_.fromCache?g.reject(new U(C.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&_.fromCache&&p&&p.source==="server"?g.reject(new U(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(_)},error:function(_){return g.reject(_)}}),b=new YE(hc(d.path),v,{includeMetadataChanges:!0,so:!0});return HE(c,b)},[4,ac(e)];case 1:return[2,s.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function YM(e,t,n){var r=this;n===void 0&&(n={});var i=new bn;return e.asyncQueue.enqueueAndForget(function(){return O(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return s=function(c,l,d,p,g){var v=new Wg({next:function(_){l.enqueueAndForget(function(){return WE(c,b)}),_.fromCache&&p.source==="server"?g.reject(new U(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(_)},error:function(_){return g.reject(_)}}),b=new YE(d,v,{includeMetadataChanges:!0,so:!0});return HE(c,b)},[4,ac(e)];case 1:return[2,s.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function iT(e,t,n){if(!n)throw new U(C.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function oT(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new U(C.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function ML(e,t,n,r){if(t===!0&&r===!0)throw new U(C.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function ZM(e){if(!ot.isDocumentKey(e))throw new U(C.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function t2(e){if(ot.isDocumentKey(e))throw new U(C.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Yg(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":rt()}function Ut(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new U(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Yg(e);throw new U(C.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function e2(e,t){if(t<=0)throw new U(C.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}function LL(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Ie(e),iT("collection","path",t),e instanceof vd)return t2(n=Vt.fromString.apply(Vt,re([t],r))),new Fo(e,null,n);if(!(e instanceof ce||e instanceof Fo))throw new U(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return t2(n=Vt.fromString.apply(Vt,re([e.path],r)).child(Vt.fromString(t))),new Fo(e.firestore,null,n)}function Tg(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Ie(e),arguments.length===1&&(t=p2.u()),iT("doc","path",t),e instanceof vd)return ZM(n=Vt.fromString.apply(Vt,re([t],r))),new ce(e,null,new ot(n));if(!(e instanceof ce||e instanceof Fo))throw new U(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ZM(n=e._path.child(Vt.fromString.apply(Vt,re([t],r)))),new ce(e.firestore,e instanceof Fo?e.converter:null,new ot(n))}function FL(e,t){return e=Ie(e),t=Ie(t),(e instanceof ce||e instanceof Fo)&&(t instanceof ce||t instanceof Fo)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function VL(e,t){return e=Ie(e),t=Ie(t),e instanceof pr&&t instanceof pr&&e.firestore===t.firestore&&_d(e._query,t._query)&&e.converter===t.converter}function uc(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,i=0,s=["next","error","complete"];i<s.length;i++){var a=s[i];if(a in r&&typeof r[a]=="function")return!0}return!1}(e)}function vn(e){return e._firestoreClient||UL(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function UL(e){var t,n=e._freezeSettings(),r=function(i,s,a,c){return new C8(i,s,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new x8(e._credentials,e._queue,r)}function r2(e,t,n){var r=this,i=new bn;return e.asyncQueue.enqueue(function(){return O(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,DL(e,n)];case 1:return a.sent(),[4,kL(e,t)];case 2:return a.sent(),i.resolve(),[3,4];case 3:if(!function(c){return c.name==="FirebaseError"?c.code===C.FAILED_PRECONDITION||c.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(s=a.sent()))throw s;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function i2(e){if(e._initialized||e._terminated)throw new U(C.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}function qL(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}function ua(e){var t=e._freezeSettings(),n=$g(e._databaseId);return new L8(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Xg(e,t,n,r,i,s){s===void 0&&(s={});var a=e.Uc(s.merge||s.mergeFields?2:0,t,n,i);cT("Data must be an object, but it was:",a,r);var c,l,d=$L(r,a);if(s.merge)c=new Hu(a.fieldMask),l=a.fieldTransforms;else if(s.mergeFields){for(var p=[],g=0,v=s.mergeFields;g<v.length;g++){var b=EE(t,v[g],n);if(!a.contains(b))throw new U(C.INVALID_ARGUMENT,"Field '"+b+"' is specified in your field mask but missing from your input data.");WL(p,b)||p.push(b)}c=new Hu(p),l=a.fieldTransforms.filter(function(_){return c.covers(_.field)})}else c=null,l=a.fieldTransforms;return new M8(new hr(d),c,l)}function GL(e,t,n){return new zL({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}function aT(e,t,n,r){var i=e.Uc(1,t,n);cT("Data must be an object, but it was:",i,r);var s=[],a=hr.empty();ra(r,function(l,d){var p=lT(t,l,n);d=Ie(d);var g=i.Oc(p);if(d instanceof sT)s.push(p);else{var v=ca(d,g);v!=null&&(s.push(p),a.set(p,v))}});var c=new Hu(s);return new BL(a,c,i.fieldTransforms)}function uT(e,t,n,r,i,s){var a=e.Uc(1,t,n),c=[EE(t,r,n)],l=[i];if(s.length%2!=0)throw new U(C.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var d=0;d<s.length;d+=2)c.push(EE(t,s[d])),l.push(s[d+1]);for(var p=[],g=hr.empty(),v=c.length-1;v>=0;--v)if(!WL(p,c[v])){var b=c[v],_=l[v];_=Ie(_);var I=a.Oc(b);if(_ instanceof sT)p.push(b);else{var T=ca(_,I);T!=null&&(p.push(b),g.set(b,T))}}var S=new Hu(p);return new BL(g,S,a.fieldTransforms)}function KL(e,t,n,r){return r===void 0&&(r=!1),ca(n,e.Uc(r?4:3,t))}function ca(e,t){if(HL(e=Ie(e)))return cT("Unsupported field value:",t,e),$L(e,t);if(e instanceof aa)return function(n,r){if(!qL(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.Nc!==4)throw t.Lc("Nested arrays are not supported");return function(n,r){for(var i=[],s=0,a=0,c=n;a<c.length;a++){var l=ca(c[a],r.Mc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if((n=Ie(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return C2(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=kn.fromDate(n);return{timestampValue:fd(r.R,i)}}if(n instanceof kn)return i=new kn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:fd(r.R,i)};if(n instanceof xd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof na)return{bytesValue:j2(r.R,n._byteString)};if(n instanceof ce){i=r.databaseId;var s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Lc("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:ME(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+Yg(n))}(e,t)}function $L(e,t){var n={};return g2(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ra(e,function(r,i){var s=ca(i,t.kc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function HL(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof kn||e instanceof xd||e instanceof na||e instanceof ce||e instanceof aa)}function cT(e,t,n){if(!HL(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=Yg(n);throw r==="an object"?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function EE(e,t,n){if((t=Ie(t))instanceof vi)return t._internalPath;if(typeof t=="string")return lT(e,t);throw Vg("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}function lT(e,t,n){if(t.search(B8)>=0)throw Vg("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(vi.bind.apply(vi,re([void 0],t.split("."))))()._internalPath}catch{throw Vg("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Vg(e,t,n,r,i){var s=r&&!r.isEmpty(),a=i!==void 0,c="Function "+t+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var l="";return(s||a)&&(l+=" (found",s&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new U(C.INVALID_ARGUMENT,(c+=". ")+e+l)}function WL(e,t){return e.some(function(n){return n.isEqual(t)})}function jg(e,t){return typeof t=="string"?lT(e,t):t instanceof vi?t._internalPath:t._delegate._internalPath}function z8(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function QL(e,t){return e instanceof Gi&&t instanceof Gi?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Oo&&t instanceof Oo&&e._firestore===t._firestore&&VL(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function YL(e){if(Dg(e)&&e.explicitOrderBy.length===0)throw new U(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function Do(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];e=s._apply(e)}return e}function XL(e,t,n,r){if(n[0]=Ie(n[0]),n[0]instanceof yd)return function(s,a,c,l,d){if(!l)throw new U(C.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var p=[],g=0,v=Yu(s);g<v.length;g++){var b=v[g];if(b.field.isKeyField())p.push(xg(a,l.key));else{var _=l.data.field(b.field);if(SE(_))throw new U(C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){var I=b.field.canonicalString();throw new U(C.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+I+"' (used as the orderBy) does not exist.")}p.push(_)}}return new dd(p,d)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ua(e.firestore);return function(s,a,c,l,d,p){var g=s.explicitOrderBy;if(d.length>g.length)throw new U(C.INVALID_ARGUMENT,"Too many arguments provided to "+l+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var v=[],b=0;b<d.length;b++){var _=d[b];if(g[b].field.isKeyField()){if(typeof _!="string")throw new U(C.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+l+"(), but got a "+typeof _);if(!kE(s)&&_.indexOf("/")!==-1)throw new U(C.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+l+"() must be a plain document ID, but '"+_+"' contains a slash.");var I=s.path.child(Vt.fromString(_));if(!ot.isDocumentKey(I))throw new U(C.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+l+"() must result in a valid document path, but '"+I+"' is not because it contains an odd number of segments.");var T=new ot(I);v.push(xg(a,T))}else{var S=KL(c,l,_);v.push(S)}}return new dd(v,p)}(e._query,e.firestore._databaseId,i,t,n,r)}function u2(e,t,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new U(C.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!kE(t)&&n.indexOf("/")!==-1)throw new U(C.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(Vt.fromString(n));if(!ot.isDocumentKey(r))throw new U(C.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return xg(e,new ot(r))}if(n instanceof ce)return xg(e,n._key);throw new U(C.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Yg(n)+".")}function c2(e,t){if(!Array.isArray(e)||e.length===0)throw new U(C.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new U(C.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function JL(e,t,n){if(!n.isEqual(t))throw new U(C.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Jg(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}function Mo(e,t){if((e=Ie(e)).firestore!==t)throw new U(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function l2(e,t,n){e=Ut(e,ce);var r=Ut(e.firestore,ke),i=Jg(e.converter,t,n);return Rd(r,[Xg(ua(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,yn.none())])}function h2(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=Ut(e,ce);var s=Ut(e.firestore,ke),a=ua(s);return Rd(s,[(typeof(t=Ie(t))=="string"||t instanceof vi?uT(a,"updateDoc",e._key,t,n,r):aT(a,"updateDoc",e._key,t)).toMutation(e._key,yn.exists(!0))])}function ZL(e){for(var t,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];e=Ie(e);var a={includeMetadataChanges:!1},c=0;typeof i[c]!="object"||uc(i[c])||(a=i[c],c++);var l,d,p,g={includeMetadataChanges:a.includeMetadataChanges};if(uc(i[c])){var v=i[c];i[c]=(t=v.next)===null||t===void 0?void 0:t.bind(v),i[c+1]=(n=v.error)===null||n===void 0?void 0:n.bind(v),i[c+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}if(e instanceof ce)d=Ut(e.firestore,ke),p=hc(e._key.path),l={next:function(I){i[c]&&i[c](TE(d,e,I))},error:i[c+1],complete:i[c+2]};else{var b=Ut(e,pr);d=Ut(b.firestore,ke),p=b._query;var _=new Js(d);l={next:function(I){i[c]&&i[c](new Oo(d,_,b,I))},error:i[c+1],complete:i[c+2]},YL(e._query)}return function(I,T,S,M){var k=this,z=new Wg(M),H=new YE(T,z,S);return I.asyncQueue.enqueueAndForget(function(){return O(k,void 0,void 0,function(){var L;return N(this,function(mt){switch(mt.label){case 0:return L=HE,[4,ac(I)];case 1:return[2,L.apply(void 0,[mt.sent(),H])]}})})}),function(){z.Wo(),I.asyncQueue.enqueueAndForget(function(){return O(k,void 0,void 0,function(){var L;return N(this,function(mt){switch(mt.label){case 0:return L=WE,[4,ac(I)];case 1:return[2,L.apply(void 0,[mt.sent(),H])]}})})})}}(vn(d),p,g,l)}function Rd(e,t){return function(n,r){var i=this,s=new bn;return n.asyncQueue.enqueueAndForget(function(){return O(i,void 0,void 0,function(){var a;return N(this,function(c){switch(c.label){case 0:return a=c8,[4,NL(n)];case 1:return[2,a.apply(void 0,[c.sent(),r,s])]}})})}),s.promise}(vn(e),t)}function TE(e,t,n){var r=n.docs.get(t._key),i=new Js(e);return new Gi(e,i,t._key,r,new Qs(n.hasPendingWrites,n.fromCache),t.converter)}function d2(){if(typeof Uint8Array>"u")throw new U(C.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function f2(){if(typeof atob>"u")throw new U(C.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function eF(e){var t;t=e,Gr.setLogLevel(t)}function Dn(e,t,n){return e.message=e.message.replace(t,n),e}function nF(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!uc(r))return r}return{}}function rF(e,t){var n,r,i;return{next:function(s){i.next&&i.next(t(s))},error:(n=(i=uc(e[0])?e[0]:uc(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}function Ys(e){return Ut(e,ce)}var dr,C,U,Gr,p2,kn,At,v2,Vt,v$,$r,Hu,Pn,y$,ot,hr,cn,b$,fr,w$,_$,I$,E$,T$,A$,S$,dd,Ku,Ki,qg,Xu,ta,ea,Ju,Ed,k$,yn,zg,Td,Bo,Ce,Pt,Ad,PE,O$,wn,mg,Po,Be,yM,M$,L$,F$,V$,j$,NE,OE,Ig,F2,V2,bM,U$,B$,q$,z$,X$,cr,Lo,Jt,gn,J$,Z$,de,mi,Wn,un,lr,Xs,zi,Zu,tc,tH,Q2,Y2,bn,B,X2,ec,eH,ud,nH,xM,CM,FE,rH,Kg,J2,iH,oH,UE,sH,NM,pi,aH,Ng,uH,cH,lH,hH,dH,dc,iL,fH,pH,mH,aE,gH,vH,oL,yH,sL,bH,SH,qE,We,xH,CH,RH,DH,kH,PH,NH,sn,UM,cE,BM,OH,bE,lE,fL,MH,qM,LH,FH,VH,zE,mL,jH,UH,BH,qH,zH,XH,_L,zM,Lg,JH,ZH,YE,n8,GM,EJ,IL,EL,TL,i8,o8,s8,CL,RL,T8,IE,Wg,TJ,A8,S8,x8,C8,Fg,XM,OL,JM,R8,D8,k8,P8,n2,vd,ce,pr,Fo,N8,AJ,jL,ke,vi,na,aa,xd,O8,M8,BL,zL,L8,sT,F8,V8,j8,U8,B8,yd,q8,Qs,Gi,cd,Oo,Cd,G8,K8,o2,s2,a2,hT,$8,H8,Js,W8,dT,tF,fT,Zg,pT,mT,tv,Vo,cc,lc,Dd,Q8,Ug,bd,iF,oF,sF=Ur(()=>{"use strict";Jp();Vh();Fm();sE();dr=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();dr.o=-1;C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return ut(t,e),t}(Error),Gr=new Lm("@firebase/firestore");p2=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=g$(40),s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length));return r},e}();kn=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new U(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new U(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new U(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?Rt(this.nanoseconds,t.nanoseconds):Rt(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),At=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new kn(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();v2=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&rt(),r===void 0?r=t.length-n:r>t.length-n&&rt(),this.segments=t,this.offset=n,this.len=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.comparator(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return this.length===0},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var s=t.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),Vt=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ut(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],s=0,a=n;s<a.length;s++){var c=a[s];if(c.indexOf("//")>=0)throw new U(C.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");i.push.apply(i,c.split("/").filter(function(l){return l.length>0}))}return new t(i)},t.emptyPath=function(){return new t([])},t}(v2),v$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$r=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ut(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.isValidIdentifier=function(n){return v$.test(n)},t.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(n){for(var r=[],i="",s=0,a=function(){if(i.length===0)throw new U(C.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},c=!1;s<n.length;){var l=n[s];if(l==="\\"){if(s+1===n.length)throw new U(C.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var d=n[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new U(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=d,s+=2}else l==="`"?(c=!c,s++):l!=="."||c?(i+=l,s++):(a(),s++)}if(a(),c)throw new U(C.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.emptyPath=function(){return new t([])},t}(v2),Hu=function(){function e(t){this.fields=t,t.sort($r.comparator)}return e.prototype.covers=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return $u(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),Pn=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return Rt(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();Pn.EMPTY_BYTE_STRING=new Pn("");y$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);ot=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e(Vt.fromString(t))},e.fromName=function(t){return new e(Vt.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&Vt.comparator(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,n){return Vt.comparator(t.path,n.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new Vt(t.slice()))},e}();hr=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var n=this.value,r=0;r<t.length-1;++r)if(!bg(n=(n.mapValue.fields||{})[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ad(n)},e.prototype.setAll=function(t){var n=this,r=$r.emptyPath(),i={},s=[];t.forEach(function(c,l){if(!r.isImmediateParentOf(l)){var d=n.getFieldsMap(r);n.applyChanges(d,i,s),i={},s=[],r=l.popLast()}c?i[l.lastSegment()]=ad(c):s.push(l.lastSegment())});var a=this.getFieldsMap(r);this.applyChanges(a,i,s)},e.prototype.delete=function(t){var n=this.field(t.popLast());bg(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return yi(this.value,t.value)},e.prototype.getFieldsMap=function(t){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<t.length;++r){var i=n.mapValue.fields[t.get(r)];bg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields},e.prototype.applyChanges=function(t,n,r){ra(n,function(c,l){return t[c]=l});for(var i=0,s=r;i<s.length;i++){var a=s[i];delete t[a]}},e.prototype.clone=function(){return new e(ad(this.value))},e}();cn=function(){function e(t,n,r,i,s){this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=s}return e.newInvalidDocument=function(t){return new e(t,0,At.min(),hr.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,hr.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,hr.empty(),2)},e.prototype.convertToFoundDocument=function(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=hr.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=hr.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return this.documentType!==0},e.prototype.isFoundDocument=function(){return this.documentType===1},e.prototype.isNoDocument=function(){return this.documentType===2},e.prototype.isUnknownDocument=function(){return this.documentType===3},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),b$=function(e,t,n,r,i,s,a){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.h=null};fr=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).field=n,s.op=r,s.value=i,s}return ut(t,e),t.create=function(n,r,i){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,i):new w$(n,r,i):r==="array-contains"?new E$(n,i):r==="in"?new T$(n,i):r==="not-in"?new A$(n,i):r==="array-contains-any"?new S$(n,i):new t(n,r,i)},t.l=function(n,r,i){return r==="in"?new _$(n,i):new I$(n,i)},t.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(Qu(r,this.value)):r!==null&&Zs(this.value)===Zs(r)&&this.m(Qu(r,this.value))},t.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return rt()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),w$=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,i)||this).key=ot.fromName(i.referenceValue),s}return ut(t,e),t.prototype.matches=function(n){var r=ot.comparator(n.key,this.key);return this.m(r)},t}(fr),_$=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=_2("in",r),i}return ut(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(fr),I$=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=_2("not-in",r),i}return ut(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(fr);E$=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return ut(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return CE(r)&&hd(r.arrayValue,this.value)},t}(fr),T$=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return ut(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&hd(this.value.arrayValue,r)},t}(fr),A$=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return ut(t,e),t.prototype.matches=function(n){if(hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!hd(this.value.arrayValue,r)},t}(fr),S$=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return ut(t,e),t.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!CE(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(s){return hd(r.value.arrayValue,s)})},t}(fr),dd=function(e,t){this.position=e,this.before=t};Ku=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};Ki=function(e,t,n,r,i,s,a,c){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s="F"),a===void 0&&(a=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt};qg=function(){this._=void 0};Xu=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ut(t,e),t}(qg),ta=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return ut(t,e),t}(qg);ea=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return ut(t,e),t}(qg);Ju=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).R=n,i.A=r,i}return ut(t,e),t}(qg);Ed=function(e,t){this.field=e,this.transform=t},k$=function(e,t){this.version=e,this.transformResults=t},yn=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();zg=function(){};Td=function(e){function t(n,r,i,s){s===void 0&&(s=[]);var a=this;return(a=e.call(this)||this).key=n,a.value=r,a.precondition=i,a.fieldTransforms=s,a.type=0,a}return ut(t,e),t}(zg),Bo=function(e){function t(n,r,i,s,a){a===void 0&&(a=[]);var c=this;return(c=e.call(this)||this).key=n,c.data=r,c.fieldMask=i,c.precondition=s,c.fieldTransforms=a,c.type=1,c}return ut(t,e),t}(zg);Ad=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ut(t,e),t}(zg),PE=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ut(t,e),t}(zg),O$=function(e){this.count=e};(Pt=Ce||(Ce={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";wn=function(){function e(t,n){this.comparator=t,this.root=n||Po.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Po.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Po.BLACK,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new mg(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new mg(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new mg(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new mg(this.root,t,this.comparator,!0)},e}(),mg=function(){function e(t,n,r,i){this.isReverse=i,this.nodeStack=[];for(var s=1;!t.isEmpty();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(this.nodeStack.length===0)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),Po=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return(i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();var t=this.left.check();if(t!==this.right.check())throw rt();return t+(this.isRed()?0:1)},e}();Po.EMPTY=null,Po.RED=!0,Po.BLACK=!1,Po.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw rt()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new Po(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());Be=function(){function e(t){this.comparator=t,this.data=new wn(this.comparator)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.forEachInRange=function(t,n){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}},e.prototype.forEachWhile=function(t,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null},e.prototype.getIterator=function(){return new yM(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new yM(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),yM=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),M$=new wn(ot.comparator);L$=new wn(ot.comparator);F$=new wn(ot.comparator);V$=new Be(ot.comparator);j$=new Be(Rt);NE=function(){function e(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,OE.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(At.min(),r,Gg(),Ar(),zt())},e}(),OE=function(){function e(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(Pn.EMPTY_BYTE_STRING,n,zt(),zt(),zt())},e}(),Ig=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},F2=function(e,t){this.targetId=e,this.V=t},V2=function(e,t,n,r){n===void 0&&(n=Pn.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},bM=function(){function e(){this.S=0,this.D=_M(),this.C=Pn.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},e.prototype.M=function(){var t=zt(),n=zt(),r=zt();return this.D.forEach(function(i,s){switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:rt()}}),new OE(this.C,this.N,t,n,r)},e.prototype.L=function(){this.k=!1,this.D=_M()},e.prototype.B=function(t,n){this.k=!0,this.D=this.D.insert(t,n)},e.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),U$=function(){function e(t){this.W=t,this.G=new Map,this.H=Ar(),this.J=wM(),this.Y=new Be(Rt)}return e.prototype.X=function(t){for(var n=0,r=t.v;n<r.length;n++){var i=r[n];t.P&&t.P.isFoundDocument()?this.Z(i,t.P):this.tt(i,t.key,t.P)}for(var s=0,a=t.removedTargetIds;s<a.length;s++)i=a[s],this.tt(i,t.key,t.P)},e.prototype.et=function(t){var n=this;this.forEachTarget(t,function(r){var i=n.nt(r);switch(t.state){case 0:n.st(r)&&i.O(t.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(t.resumeToken);break;case 2:i.K(),i.F||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(t.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(t.resumeToken));break;default:rt()}})},e.prototype.forEachTarget=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.G.forEach(function(i,s){r.st(s)&&n(s)})},e.prototype.rt=function(t){var n=t.targetId,r=t.V.count,i=this.ot(n);if(i){var s=i.target;if(Cg(s))if(r===0){var a=new ot(s.path);this.tt(n,a,cn.newNoDocument(a,At.min()))}else ft(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},e.prototype.ut=function(t){var n=this,r=new Map;this.G.forEach(function(a,c){var l=n.ot(c);if(l){if(a.current&&Cg(l.target)){var d=new ot(l.target.path);n.H.get(d)!==null||n.at(c,d)||n.tt(c,d,cn.newNoDocument(d,t))}a.$&&(r.set(c,a.M()),a.L())}});var i=zt();this.J.forEach(function(a,c){var l=!0;c.forEachWhile(function(d){var p=n.ot(d);return!p||p.purpose===2||(l=!1,!1)}),l&&(i=i.add(a))});var s=new NE(t,r,this.Y,this.H,i);return this.H=Ar(),this.J=wM(),this.Y=new Be(Rt),s},e.prototype.Z=function(t,n){if(this.st(t)){var r=this.at(t,n.key)?2:0;this.nt(t).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(t))}},e.prototype.tt=function(t,n,r){if(this.st(t)){var i=this.nt(t);this.at(t,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(t)),r&&(this.H=this.H.insert(n,r))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var n=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var n=this.G.get(t);return n||(n=new bM,this.G.set(t,n)),n},e.prototype.ht=function(t){var n=this.J.get(t);return n||(n=new Be(Rt),this.J=this.J.insert(t,n)),n},e.prototype.st=function(t){var n=this.ot(t)!==null;return n||q("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.ot=function(t){var n=this.G.get(t);return n&&n.F?null:this.W.lt(t)},e.prototype.it=function(t){var n=this;this.G.set(t,new bM),this.W.getRemoteKeysForTarget(t).forEach(function(r){n.tt(t,r,null)})},e.prototype.at=function(t,n){return this.W.getRemoteKeysForTarget(t).has(n)},e}();B$={asc:"ASCENDING",desc:"DESCENDING"},q$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z$=function(e,t){this.databaseId=e,this.I=t};X$=function(e,t){this.seconds=e,this.nanoseconds=t},cr=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};cr.store="owner",cr.key="owner";Lo=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Lo.store="mutationQueues",Lo.keyPath="userId";Jt=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Jt.store="mutations",Jt.keyPath="batchId",Jt.userMutationsIndex="userMutationsIndex",Jt.userMutationsKeyPath=["userId","batchId"];gn=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,Kr(n)]},e.key=function(t,n,r){return[t,Kr(n),r]},e}();gn.store="documentMutations",gn.PLACEHOLDER=new gn;J$=function(e,t){this.path=e,this.readTime=t},Z$=function(e,t){this.path=e,this.version=t},de=function(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};de.store="remoteDocuments",de.readTimeIndex="readTimeIndex",de.readTimeIndexPath="readTime",de.collectionReadTimeIndex="collectionReadTimeIndex",de.collectionReadTimeIndexPath=["parentPath","readTime"];mi=function(e){this.byteSize=e};mi.store="remoteDocumentGlobal",mi.key="remoteDocumentGlobalKey";Wn=function(e,t,n,r,i,s,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=a};Wn.store="targets",Wn.keyPath="targetId",Wn.queryTargetsIndexName="queryTargetsIndex",Wn.queryTargetsKeyPath=["canonicalId","targetId"];un=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};un.store="targetDocuments",un.keyPath=["targetId","path"],un.documentTargetsIndex="documentTargetsIndex",un.documentTargetsKeyPath=["path","targetId"];lr=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};lr.key="targetGlobalKey",lr.store="targetGlobal";Xs=function(e,t){this.collectionId=e,this.parent=t};Xs.store="collectionParents",Xs.keyPath=["collectionId","parent"];zi=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};zi.store="clientMetadata",zi.keyPath="clientId";Zu=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Zu.store="bundles",Zu.keyPath="bundleId";tc=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};tc.store="namedQueries",tc.keyPath="name";tH=re(re([],re(re([],re(re([],re(re([],[Lo.store,Jt.store,gn.store,de.store,Wn.store,cr.store,lr.store,un.store]),[zi.store])),[mi.store])),[Xs.store])),[Zu.store,tc.store]),Q2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Y2=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),bn=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},B=function(){function e(t){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(i,s){r.nextCallback=function(a){r.wrapSuccess(t,a).next(i,s)},r.catchCallback=function(a){r.wrapFailure(n,a).next(i,s)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.waitFor=function(t){return new e(function(n,r){var i=0,s=0,a=!1;t.forEach(function(c){++i,c.next(function(){++s,a&&s===i&&n()},function(l){return r(l)})}),a=!0,s===i&&n()})},e.or=function(t){for(var n=e.resolve(!1),r=function(a){n=n.next(function(c){return c?e.resolve(c):a()})},i=0,s=t;i<s.length;i++)r(s[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(s,a){i.push(n.call(r,s,a))}),this.waitFor(i)},e}(),X2=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.ft=new bn,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new ud(t,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var s=LE(i.target.error);r.ft.reject(new ud(t,s))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new ud(n,s)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(q("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new nH(n)},e}(),ec=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,e._t(Ao())===12.2&&De("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return q("SimpleDb","Removing database:",t),Ws(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB>"u")return!1;if(e.gt())return!0;var t=Ao(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.Tt)==="YES"},e.It=function(t,n){return t.store(n)},e._t=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.Et=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.At=function(t){return O(this,void 0,void 0,function(){var n,r=this;return N(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(q("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(s,a){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(l){var d=l.target.result;s(d)},c.onblocked=function(){a(new ud(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(l){var d=l.target.error;d.name==="VersionError"?a(new U(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a(new ud(t,d))},c.onupgradeneeded=function(l){q("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',l.oldVersion);var d=l.target.result;r.wt.Rt(d,c.transaction,l.oldVersion,r.version).next(function(){q("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(s){return r.bt(s)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return O(this,void 0,void 0,function(){var s,a,c,l,d;return N(this,function(p){switch(p.label){case 0:s=n==="readonly",a=0,c=function(){var g,v,b,_,I;return N(this,function(T){switch(T.label){case 0:++a,T.label=1;case 1:return T.trys.push([1,4,,5]),[4,l.At(t)];case 2:return l.db=T.sent(),g=X2.open(l.db,t,s?"readonly":"readwrite",r),v=i(g).catch(function(S){return g.abort(S),B.reject(S)}).toPromise(),b={},v.catch(function(){}),[4,g.dt];case 3:return[2,(b.value=(T.sent(),v),b)];case 4:return _=T.sent(),I=_.name!=="FirebaseError"&&a<3,q("SimpleDb","Transaction failed with error:",_.message,"Retrying:",I),l.close(),I?[3,5]:[2,{value:Promise.reject(_)}];case 5:return[2]}})},l=this,p.label=1;case 1:return[5,c()];case 2:if(typeof(d=p.sent())=="object")return[2,d.value];p.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),eH=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return Ws(this.Pt.delete())},e}(),ud=function(e){function t(n,r){var i=this;return(i=e.call(this,C.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return ut(t,e),t}(U);nH=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(q("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(q("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Ws(r)},e.prototype.add=function(t){return q("SimpleDb","ADD",this.store.name,t,t),Ws(this.store.add(t))},e.prototype.get=function(t){var n=this;return Ws(this.store.get(t)).next(function(r){return r===void 0&&(r=null),q("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return q("SimpleDb","DELETE",this.store.name,t),Ws(this.store.delete(t))},e.prototype.count=function(){return q("SimpleDb","COUNT",this.store.name),Ws(this.store.count())},e.prototype.Nt=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.xt(r,function(s,a){i.push(a)}).next(function(){return i})},e.prototype.kt=function(t,n){q("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(s,a,c){return c.delete()})},e.prototype.$t=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.xt(i,n)},e.prototype.Ot=function(t){var n=this.cursor({});return new B(function(r,i){n.onerror=function(s){var a=LE(s.target.error);i(a)},n.onsuccess=function(s){var a=s.target.result;a?t(a.primaryKey,a.value).next(function(c){c?a.continue():r()}):r()}})},e.prototype.xt=function(t,n){var r=[];return new B(function(i,s){t.onerror=function(a){s(a.target.error)},t.onsuccess=function(a){var c=a.target.result;if(c){var l=new eH(c),d=n(c.primaryKey,c.value,l);if(d instanceof B){var p=d.catch(function(g){return l.done(),B.reject(g)});r.push(p)}l.isDone?i():l.Dt===null?c.continue():c.continue(l.Dt)}else i()}}).next(function(){return B.waitFor(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.Ft?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();xM=!1;CM=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return ut(t,e),t}(Y2);FE=function(){function e(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return e.prototype.applyToRemoteDocument=function(t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var s=this.mutations[i];s.key.isEqual(t.key)&&P$(s,t,r[i])}},e.prototype.applyToLocalView=function(t){for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t.key)&&mE(a,t,this.localWriteTime);for(var i=0,s=this.mutations;i<s.length;i++){var a;(a=s[i]).key.isEqual(t.key)&&mE(a,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var n=this;this.mutations.forEach(function(r){var i=t.get(r.key),s=i;n.applyToLocalView(s),i.isValidDocument()||s.convertToNoDocument(At.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},zt())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&$u(this.mutations,t.mutations,function(n,r){return pM(n,r)})&&$u(this.baseMutations,t.baseMutations,function(n,r){return pM(n,r)})},e}(),rH=function(){function e(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return e.from=function(t,n,r){ft(t.mutations.length===r.length);for(var i=L2(),s=t.mutations,a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new e(t,n,r,i)},e}(),Kg=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=At.min()),a===void 0&&(a=At.min()),c===void 0&&(c=Pn.EMPTY_BYTE_STRING),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),J2=function(e){this.Lt=e};iH=function(){function e(){}return e.prototype.getBundleMetadata=function(t,n){return DM(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:rc(i.createTime),version:i.version};var i})},e.prototype.saveBundleMetadata=function(t,n){return DM(t).put({bundleId:(r=n).id,createTime:nc(an(r.createTime)),version:r.version});var r},e.prototype.getNamedQuery=function(t,n){return kM(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:jE(i.bundledQuery),readTime:rc(i.readTime)};var i})},e.prototype.saveNamedQuery=function(t,n){return kM(t).put(function(r){return{name:r.name,readTime:nc(an(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();oH=function(){function e(){this.Bt=new UE}return e.prototype.addToCollectionParentIndex=function(t,n){return this.Bt.add(n),B.resolve()},e.prototype.getCollectionParents=function(t,n){return B.resolve(this.Bt.getEntries(n))},e}(),UE=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Be(Vt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s},e.prototype.has=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new Be(Vt.comparator)).toArray()},e}(),sH=function(){function e(){this.qt=new UE}return e.prototype.addToCollectionParentIndex=function(t,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),s=n.popLast();t.addOnCommittedListener(function(){r.qt.add(n)});var a={collectionId:i,parent:Kr(s)};return PM(t).put(a)}return B.resolve()},e.prototype.getCollectionParents=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[m2(n),""],!1,!0);return PM(t).Nt(i).next(function(s){for(var a=0,c=s;a<c.length;a++){var l=c[a];if(l.collectionId!==n)break;r.push(qi(l.parent))}return r})},e}();NM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pi=function(){function e(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();pi.DEFAULT_COLLECTION_PERCENTILE=10,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pi.DEFAULT=new pi(41943040,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pi.DISABLED=new pi(-1,0,0);aH=function(){function e(t,n,r,i){this.userId=t,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return e.Qt=function(t,n,r,i){return ft(t.uid!==""),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ro(t).$t({index:Jt.userMutationsIndex,range:r},function(i,s,a){n=!1,a.done()}).next(function(){return n})},e.prototype.addMutationBatch=function(t,n,r,i){var s=this,a=zu(t),c=Ro(t);return c.add({}).next(function(l){ft(typeof l=="number");for(var d=new FE(l,n,r,i),p=function(S,M,k){var z=k.baseMutations.map(function(L){return kg(S.Lt,L)}),H=k.mutations.map(function(L){return kg(S.Lt,L)});return new Jt(M,k.batchId,k.localWriteTime.toMillis(),z,H)}(s.R,s.userId,d),g=[],v=new Be(function(S,M){return Rt(S.canonicalString(),M.canonicalString())}),b=0,_=i;b<_.length;b++){var I=_[b],T=gn.key(s.userId,I.key.path,l);v=v.add(I.key.path.popLast()),g.push(c.put(p)),g.push(a.put(T,gn.PLACEHOLDER))}return v.forEach(function(S){g.push(s.Ut.addToCollectionParentIndex(t,S))}),t.addOnCommittedListener(function(){s.Kt[l]=d.keys()}),B.waitFor(g).next(function(){return d})})},e.prototype.lookupMutationBatch=function(t,n){var r=this;return Ro(t).get(n).next(function(i){return i?(ft(i.userId===r.userId),qu(r.R,i)):null})},e.prototype.jt=function(t,n){var r=this;return this.Kt[n]?B.resolve(this.Kt[n]):this.lookupMutationBatch(t,n).next(function(i){if(i){var s=i.keys();return r.Kt[n]=s,s}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]),a=null;return Ro(t).$t({index:Jt.userMutationsIndex,range:s},function(c,l,d){l.userId===r.userId&&(ft(l.batchId>=i),a=qu(r.R,l)),d.done()}).next(function(){return a})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Ro(t).$t({index:Jt.userMutationsIndex,range:n,reverse:!0},function(i,s,a){r=s.batchId,a.done()}).next(function(){return r})},e.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ro(t).Nt(Jt.userMutationsIndex,r).next(function(i){return i.map(function(s){return qu(n.R,s)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=gn.prefixForPath(this.userId,n.path),s=IDBKeyRange.lowerBound(i),a=[];return zu(t).$t({range:s},function(c,l,d){var p=c[0],g=c[1],v=c[2],b=qi(g);if(p===r.userId&&n.path.isEqual(b))return Ro(t).get(v).next(function(_){if(!_)throw rt();ft(_.userId===r.userId),a.push(qu(r.R,_))});d.done()}).next(function(){return a})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new Be(Rt),s=[];return n.forEach(function(a){var c=gn.prefixForPath(r.userId,a.path),l=IDBKeyRange.lowerBound(c),d=zu(t).$t({range:l},function(p,g,v){var b=p[0],_=p[1],I=p[2],T=qi(_);b===r.userId&&a.path.isEqual(T)?i=i.add(I):v.done()});s.push(d)}),B.waitFor(s).next(function(){return r.Wt(t,i)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=this,i=n.path,s=i.length+1,a=gn.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(a),l=new Be(Rt);return zu(t).$t({range:c},function(d,p,g){var v=d[0],b=d[1],_=d[2],I=qi(b);v===r.userId&&i.isPrefixOf(I)?I.length===s&&(l=l.add(_)):g.done()}).next(function(){return r.Wt(t,l)})},e.prototype.Wt=function(t,n){var r=this,i=[],s=[];return n.forEach(function(a){s.push(Ro(t).get(a).next(function(c){if(c===null)throw rt();ft(c.userId===r.userId),i.push(qu(r.R,c))}))}),B.waitFor(s).next(function(){return i})},e.prototype.removeMutationBatch=function(t,n){var r=this;return eL(t.Mt,this.userId,n).next(function(i){return t.addOnCommittedListener(function(){r.Gt(n.batchId)}),B.forEach(i,function(s){return r.referenceDelegate.markPotentiallyOrphaned(t,s)})})},e.prototype.Gt=function(t){delete this.Kt[t]},e.prototype.performConsistencyCheck=function(t){var n=this;return this.checkEmpty(t).next(function(r){if(!r)return B.resolve();var i=IDBKeyRange.lowerBound(gn.prefixForUser(n.userId)),s=[];return zu(t).$t({range:i},function(a,c,l){if(a[0]===n.userId){var d=qi(a[1]);s.push(d)}else l.done()}).next(function(){ft(s.length===0)})})},e.prototype.containsKey=function(t,n){return nL(t,this.userId,n)},e.prototype.zt=function(t){var n=this;return rL(t).get(this.userId).next(function(r){return r||new Lo(n.userId,-1,"")})},e}();Ng=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),uH=function(){function e(t,n){this.referenceDelegate=t,this.R=n}return e.prototype.allocateTargetId=function(t){var n=this;return this.Xt(t).next(function(r){var i=new Ng(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(t,r).next(function(){return r.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(n){return At.fromTimestamp(new kn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.Xt(t).next(function(s){return s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),i.Zt(t,s)})},e.prototype.addTargetData=function(t,n){var r=this;return this.te(t,n).next(function(){return r.Xt(t).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(t,i)})})},e.prototype.updateTargetData=function(t,n){return this.te(t,n)},e.prototype.removeTargetData=function(t,n){var r=this;return this.removeMatchingKeysForTargetId(t,n.targetId).next(function(){return Bu(t).delete(n.targetId)}).next(function(){return r.Xt(t)}).next(function(i){return ft(i.targetCount>0),i.targetCount-=1,r.Zt(t,i)})},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,a=[];return Bu(t).$t(function(c,l){var d=sd(l);d.sequenceNumber<=n&&r.get(d.targetId)===null&&(s++,a.push(i.removeTargetData(t,d)))}).next(function(){return B.waitFor(a)}).next(function(){return s})},e.prototype.forEachTarget=function(t,n){return Bu(t).$t(function(r,i){var s=sd(i);n(s)})},e.prototype.Xt=function(t){return OM(t).get(lr.key).next(function(n){return ft(n!==null),n})},e.prototype.Zt=function(t,n){return OM(t).put(lr.key,n)},e.prototype.te=function(t,n){return Bu(t).put(tL(this.R,n))},e.prototype.ee=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(n){return n.targetCount})},e.prototype.getTargetData=function(t,n){var r=wd(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Bu(t).$t({range:i,index:Wn.queryTargetsIndexName},function(a,c,l){var d=sd(c);Bg(n,d.target)&&(s=d,l.done())}).next(function(){return s})},e.prototype.addMatchingKeys=function(t,n,r){var i=this,s=[],a=No(t);return n.forEach(function(c){var l=Kr(c.path);s.push(a.put(new un(r,l))),s.push(i.referenceDelegate.addReference(t,r,c))}),B.waitFor(s)},e.prototype.removeMatchingKeys=function(t,n,r){var i=this,s=No(t);return B.forEach(n,function(a){var c=Kr(a.path);return B.waitFor([s.delete([r,c]),i.referenceDelegate.removeReference(t,r,a)])})},e.prototype.removeMatchingKeysForTargetId=function(t,n){var r=No(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=No(t),s=zt();return i.$t({range:r,Ft:!0},function(a,c,l){var d=qi(a[1]),p=new ot(d);s=s.add(p)}).next(function(){return s})},e.prototype.containsKey=function(t,n){var r=Kr(n.path),i=IDBKeyRange.bound([r],[m2(r)],!1,!0),s=0;return No(t).$t({index:un.documentTargetsIndex,Ft:!0,range:i},function(a,c,l){var d=a[0];a[1],d!==0&&(s++,l.done())}).next(function(){return s>0})},e.prototype.lt=function(t,n){return Bu(t).get(n).next(function(r){return r?sd(r):null})},e}();cH=function(){function e(t){this.ne=t,this.buffer=new Be(MM),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var n=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();MM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),lH=function(){function e(t,n){this.garbageCollector=t,this.asyncQueue=n,this.oe=!1,this.ce=null}return e.prototype.start=function(t){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var n=this,r=this.oe?3e5:6e4;q("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return O(n,void 0,void 0,function(){var i;return N(this,function(s){switch(s.label){case 0:this.ce=null,this.oe=!0,s.label=1;case 1:return s.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return s.sent(),[3,7];case 3:return oa(i=s.sent())?(q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,sa(i)];case 5:s.sent(),s.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return s.sent(),[2]}})})})},e}(),hH=function(){function e(t,n){this.ae=t,this.params=n}return e.prototype.calculateTargetCount=function(t,n){return this.ae.he(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.nthSequenceNumber=function(t,n){var r=this;if(n===0)return B.resolve(dr.o);var i=new cH(n);return this.ae.forEachTarget(t,function(s){return i.re(s.sequenceNumber)}).next(function(){return r.ae.le(t,function(s){return i.re(s)})}).next(function(){return i.maxValue})},e.prototype.removeTargets=function(t,n,r){return this.ae.removeTargets(t,n,r)},e.prototype.removeOrphanedDocuments=function(t,n){return this.ae.removeOrphanedDocuments(t,n)},e.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(NM)):this.getCacheSize(t).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),NM):r.fe(t,n)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,n){var r,i,s,a,c,l,d,p=this,g=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(v){return v>p.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+p.params.maximumSequenceNumbersToCollect+" from "+v),i=p.params.maximumSequenceNumbersToCollect):i=v,a=Date.now(),p.nthSequenceNumber(t,i)}).next(function(v){return r=v,c=Date.now(),p.removeTargets(t,r,n)}).next(function(v){return s=v,l=Date.now(),p.removeOrphanedDocuments(t,r)}).next(function(v){return d=Date.now(),hE()<=Ft.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(a-g)+`ms
	Determined least recently used `+i+" in "+(c-a)+`ms
	Removed `+s+" targets in "+(l-c)+`ms
	Removed `+v+" documents in "+(d-l)+`ms
Total Duration: `+(d-g)+"ms"),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})})},e}(),dH=function(){function e(t,n){this.db=t,this.garbageCollector=function(r,i){return new hH(r,i)}(this,n)}return e.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.de=function(t){var n=0;return this.le(t,function(r){n++}).next(function(){return n})},e.prototype.forEachTarget=function(t,n){return this.db.getTargetCache().forEachTarget(t,n)},e.prototype.le=function(t,n){return this.we(t,function(r,i){return n(i)})},e.prototype.addReference=function(t,n,r){return gg(t,r)},e.prototype.removeReference=function(t,n,r){return gg(t,r)},e.prototype.removeTargets=function(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)},e.prototype.markPotentiallyOrphaned=function(t,n){return gg(t,n)},e.prototype._e=function(t,n){return function(r,i){var s=!1;return rL(r).Ot(function(a){return nL(r,a,i).next(function(c){return c&&(s=!0),B.resolve(!c)})}).next(function(){return s})}(t,n)},e.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],a=0;return this.we(t,function(c,l){if(l<=n){var d=r._e(t,c).next(function(p){if(!p)return a++,i.getEntry(t,c).next(function(){return i.removeEntry(c),No(t).delete([0,Kr(c.path)])})});s.push(d)}}).next(function(){return B.waitFor(s)}).next(function(){return i.apply(t)}).next(function(){return a})},e.prototype.removeTarget=function(t,n){var r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},e.prototype.updateLimboDocument=function(t,n){return gg(t,n)},e.prototype.we=function(t,n){var r,i=No(t),s=dr.o;return i.$t({index:un.documentTargetsIndex},function(a,c){var l=a[0];a[1];var d=c.path,p=c.sequenceNumber;l===0?(s!==dr.o&&n(new ot(qi(r)),s),s=p,r=d):s=dr.o}).next(function(){s!==dr.o&&n(new ot(qi(r)),s)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();dc=function(){function e(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return e.prototype.get=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0)for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];if(this.equalsFn(c,t))return l}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.mapKeyFn(t),i=this.inner[r];if(i!==void 0){for(var s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n])}else this.inner[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){ra(this.inner,function(n,r){for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];t(c,l)}})},e.prototype.isEmpty=function(){return g2(this.inner)},e}(),iL=function(){function e(){this.changes=new dc(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var n=this.changes.get(t);return n?n.readTime:At.min()},e.prototype.addEntry=function(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})},e.prototype.removeEntry=function(t,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(t,{document:cn.newInvalidDocument(t),readTime:n})},e.prototype.getEntry=function(t,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?B.resolve(r.document):this.getFromCache(t,n)},e.prototype.getEntries=function(t,n){return this.getAllFromCache(t,n)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),fH=function(){function e(t,n){this.R=t,this.Ut=n}return e.prototype.addEntry=function(t,n,r){return ko(t).put(vg(n),r)},e.prototype.removeEntry=function(t,n){var r=ko(t),i=vg(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.me(t,i)})},e.prototype.getEntry=function(t,n){var r=this;return ko(t).get(vg(n)).next(function(i){return r.ye(n,i)})},e.prototype.ge=function(t,n){var r=this;return ko(t).get(vg(n)).next(function(i){return{document:r.ye(n,i),size:Pg(i)}})},e.prototype.getEntries=function(t,n){var r=this,i=Ar();return this.pe(t,n,function(s,a){var c=r.ye(s,a);i=i.insert(s,c)}).next(function(){return i})},e.prototype.Ee=function(t,n){var r=this,i=Ar(),s=new wn(ot.comparator);return this.pe(t,n,function(a,c){var l=r.ye(a,c);i=i.insert(a,l),s=s.insert(a,Pg(c))}).next(function(){return{documents:i,Te:s}})},e.prototype.pe=function(t,n,r){if(n.isEmpty())return B.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),s=n.getIterator(),a=s.getNext();return ko(t).$t({range:i},function(c,l,d){for(var p=ot.fromSegments(c);a&&ot.comparator(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.Ct(a.path.toArray()):d.done()}).next(function(){for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){var i=this,s=Ar(),a=n.path.length+1,c={};if(r.isEqual(At.min())){var l=n.path.toArray();c.range=IDBKeyRange.lowerBound(l)}else{var d=n.path.toArray(),p=VE(r);c.range=IDBKeyRange.lowerBound([d,p],!0),c.index=de.collectionReadTimeIndex}return ko(t).$t(c,function(g,v,b){if(g.length===a){var _=yE(i.R,v);n.path.isPrefixOf(_.key.path)?Id(n,_)&&(s=s.insert(_.key,_)):b.done()}}).next(function(){return s})},e.prototype.newChangeBuffer=function(t){return new pH(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return LM(t).get(mi.key).next(function(n){return ft(!!n),n})},e.prototype.me=function(t,n){return LM(t).put(mi.key,n)},e.prototype.ye=function(t,n){if(n){var r=yE(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return cn.newInvalidDocument(t)},e}(),pH=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new dc(function(s){return s.toString()},function(s,a){return s.isEqual(a)}),i}return ut(t,e),t.prototype.applyChanges=function(n){var r=this,i=[],s=0,a=new Be(function(c,l){return Rt(c.canonicalString(),l.canonicalString())});return this.changes.forEach(function(c,l){var d=r.Ae.get(c);if(l.document.isValidDocument()){var p=RM(r.Ie.R,l.document,r.getReadTime(c));a=a.add(c.path.popLast());var g=Pg(p);s+=g-d,i.push(r.Ie.addEntry(n,c,p))}else if(s-=d,r.trackRemovals){var v=RM(r.Ie.R,cn.newNoDocument(c,At.min()),r.getReadTime(c));i.push(r.Ie.addEntry(n,c,v))}else i.push(r.Ie.removeEntry(n,c))}),a.forEach(function(c){i.push(r.Ie.Ut.addToCollectionParentIndex(n,c))}),i.push(this.Ie.updateMetadata(n,s)),B.waitFor(i)},t.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(s){return i.Ae.set(r,s.size),s.document})},t.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(s){var a=s.documents;return s.Te.forEach(function(c,l){i.Ae.set(c,l)}),a})},t}(iL);mH=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,n,r,i){var s=this;ft(r<i&&r>=0&&i<=11);var a=new X2("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(cr.store)}(t),function(l){l.createObjectStore(Lo.store,{keyPath:Lo.keyPath}),l.createObjectStore(Jt.store,{keyPath:Jt.keyPath,autoIncrement:!0}).createIndex(Jt.userMutationsIndex,Jt.userMutationsKeyPath,{unique:!0}),l.createObjectStore(gn.store)}(t),FM(t),function(l){l.createObjectStore(de.store)}(t));var c=B.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(un.store),l.deleteObjectStore(Wn.store),l.deleteObjectStore(lr.store)}(t),FM(t)),c=c.next(function(){return function(l){var d=l.store(lr.store),p=new lr(0,0,At.min().toTimestamp(),0);return d.put(lr.key,p)}(a)})),r<4&&i>=4&&(r!==0&&(c=c.next(function(){return function(l,d){return d.store(Jt.store).Nt().next(function(p){l.deleteObjectStore(Jt.store),l.createObjectStore(Jt.store,{keyPath:Jt.keyPath,autoIncrement:!0}).createIndex(Jt.userMutationsIndex,Jt.userMutationsKeyPath,{unique:!0});var g=d.store(Jt.store),v=p.map(function(b){return g.put(b)});return B.waitFor(v)})}(t,a)})),c=c.next(function(){(function(l){l.createObjectStore(zi.store,{keyPath:zi.keyPath})})(t)})),r<5&&i>=5&&(c=c.next(function(){return s.Re(a)})),r<6&&i>=6&&(c=c.next(function(){return function(l){l.createObjectStore(mi.store)}(t),s.be(a)})),r<7&&i>=7&&(c=c.next(function(){return s.ve(a)})),r<8&&i>=8&&(c=c.next(function(){return s.Pe(t,a)})),r<9&&i>=9&&(c=c.next(function(){(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t),function(l){var d=l.objectStore(de.store);d.createIndex(de.readTimeIndex,de.readTimeIndexPath,{unique:!1}),d.createIndex(de.collectionReadTimeIndex,de.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(c=c.next(function(){return s.Ve(a)})),r<11&&i>=11&&(c=c.next(function(){(function(l){l.createObjectStore(Zu.store,{keyPath:Zu.keyPath})})(t),function(l){l.createObjectStore(tc.store,{keyPath:tc.keyPath})}(t)})),c},e.prototype.be=function(t){var n=0;return t.store(de.store).$t(function(r,i){n+=Pg(i)}).next(function(){var r=new mi(n);return t.store(mi.store).put(mi.key,r)})},e.prototype.Re=function(t){var n=this,r=t.store(Lo.store),i=t.store(Jt.store);return r.Nt().next(function(s){return B.forEach(s,function(a){var c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return i.Nt(Jt.userMutationsIndex,c).next(function(l){return B.forEach(l,function(d){ft(d.userId===a.userId);var p=qu(n.R,d);return eL(t,a.userId,p).next(function(){})})})})})},e.prototype.ve=function(t){var n=t.store(un.store),r=t.store(de.store);return t.store(lr.store).get(lr.key).next(function(i){var s=[];return r.$t(function(a,c){var l=new Vt(a),d=function(p){return[0,Kr(p)]}(l);s.push(n.get(d).next(function(p){return p?B.resolve():function(g){return n.put(new un(0,Kr(g),i.highestListenSequenceNumber))}(l)}))}).next(function(){return B.waitFor(s)})})},e.prototype.Pe=function(t,n){t.createObjectStore(Xs.store,{keyPath:Xs.keyPath});var r=n.store(Xs.store),i=new UE,s=function(a){if(i.add(a)){var c=a.lastSegment(),l=a.popLast();return r.put({collectionId:c,parent:Kr(l)})}};return n.store(de.store).$t({Ft:!0},function(a,c){var l=new Vt(a);return s(l.popLast())}).next(function(){return n.store(gn.store).$t({Ft:!0},function(a,c){a[0];var l=a[1];a[2];var d=qi(l);return s(d.popLast())})})},e.prototype.Ve=function(t){var n=this,r=t.store(Wn.store);return r.$t(function(i,s){var a=sd(s),c=tL(n.R,a);return r.put(c)})},e}();aE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gH=function(){function e(t,n,r,i,s,a,c,l,d,p){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=a,this.document=c,this.De=d,this.Ce=p,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(g){return Promise.resolve()},!e.yt())throw new U(C.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dH(this,i),this.Le=n+"main",this.R=new J2(l),this.Be=new ec(this.Le,11,new mH(this.R)),this.qe=new uH(this.referenceDelegate,this.R),this.Ut=new sH,this.Ue=function(g,v){return new fH(g,v)}(this.R,this.Ut),this.Ke=new iH,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,p===!1&&De("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new U(C.FAILED_PRECONDITION,aE);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t.qe.getHighestSequenceNumber(n)})}).then(function(n){t.Ne=new dr(n,t.De)}).then(function(){t.xe=!0}).catch(function(n){return t.Be&&t.Be.close(),Promise.reject(n)})},e.prototype.He=function(t){var n=this;return this.Me=function(r){return O(n,void 0,void 0,function(){return N(this,function(i){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var n=this;this.Be.vt(function(r){return O(n,void 0,void 0,function(){return N(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return O(n,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return yg(n).put(new zi(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(n).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(n)}).next(function(r){return t.isPrimary&&!r?t.Xe(n).next(function(){return!1}):!!r&&t.Ze(n).next(function(){return!0})})}).catch(function(n){if(oa(n))return q("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Se.enqueueRetryable(function(){return t.Me(n)}),t.isPrimary=n})},e.prototype.Je=function(t){var n=this;return od(t).get(cr.key).next(function(r){return B.resolve(n.tn(r))})},e.prototype.en=function(t){return yg(t).delete(this.clientId)},e.prototype.nn=function(){return O(this,void 0,void 0,function(){var t,n,r,i,s=this;return N(this,function(a){switch(a.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var l=Qn(c,zi.store);return l.Nt().next(function(d){var p=s.rn(d,18e5),g=d.filter(function(v){return p.indexOf(v)===-1});return B.forEach(g,function(v){return l.delete(v.clientId)}).next(function(){return g})})}).catch(function(){return[]})]);case 1:if(t=a.sent(),this.Qe)for(n=0,r=t;n<r.length;n++)i=r[n],this.Qe.removeItem(this.on(i.clientId));a.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var n=this;return this.Ce?B.resolve(!0):od(t).get(cr.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new U(C.FAILED_PRECONDITION,aE);return!1}}return!(!n.networkEnabled||!n.inForeground)||yg(t).Nt().next(function(i){return n.rn(i,5e3).find(function(s){if(n.clientId!==s.clientId){var a=!n.networkEnabled&&s.networkEnabled,c=!n.inForeground&&s.inForeground,l=n.networkEnabled===s.networkEnabled;if(a||c&&l)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&q("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.shutdown=function(){return O(this,void 0,void 0,function(){var t=this;return N(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[cr.store,zi.store],function(r){var i=new CM(r,dr.o);return t.Xe(i).next(function(){return t.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,n){var r=this;return t.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return yg(n).Nt().next(function(r){return t.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return aH.Qt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;q("IndexedDbPersistence","Starting transaction:",t);var s,a=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(t,a,tH,function(c){return s=new CM(c,i.Ne?i.Ne.next():dr.o),n==="readwrite-primary"?i.Je(s).next(function(l){return!!l||i.Ye(s)}).next(function(l){if(!l)throw De("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new U(C.FAILED_PRECONDITION,Q2);return r(s)}).next(function(l){return i.Ze(s).next(function(){return l})}):i.dn(s).next(function(){return r(s)})}).then(function(c){return s.raiseOnCommittedEvent(),c})},e.prototype.dn=function(t){var n=this;return od(t).get(cr.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new U(C.FAILED_PRECONDITION,aE)})},e.prototype.Ze=function(t){var n=new cr(this.clientId,this.allowTabSynchronization,Date.now());return od(t).put(cr.key,n)},e.yt=function(){return ec.yt()},e.prototype.Xe=function(t){var n=this,r=od(t);return r.get(cr.key).next(function(i){return n.tn(i)?(q("IndexedDbPersistence","Releasing primary lease."),r.delete(cr.key)):B.resolve()})},e.prototype.sn=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(De("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.We=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground=t.document.visibilityState==="visible",t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ke=function(){n.un(),xN()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(t){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(t)))!==null;return q("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return De("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){De("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();vH=function(e,t){this.progress=e,this.wn=t},oL=function(){function e(t,n,r){this.Ue=t,this._n=n,this.Ut=r}return e.prototype.mn=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(i){return r.yn(t,n,i)})},e.prototype.yn=function(t,n,r){return this.Ue.getEntry(t,n).next(function(i){for(var s=0,a=r;s<a.length;s++)a[s].applyToLocalView(i);return i})},e.prototype.gn=function(t,n){t.forEach(function(r,i){for(var s=0,a=n;s<a.length;s++)a[s].applyToLocalView(i)})},e.prototype.pn=function(t,n){var r=this;return this.Ue.getEntries(t,n).next(function(i){return r.En(t,i).next(function(){return i})})},e.prototype.En=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,n).next(function(i){return r.gn(n,i)})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){return function(i){return ot.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(t,n.path):kE(n)?this.In(t,n,r):this.An(t,n,r)},e.prototype.Tn=function(t,n){return this.mn(t,new ot(n)).next(function(r){var i=gE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},e.prototype.In=function(t,n,r){var i=this,s=n.collectionGroup,a=gE();return this.Ut.getCollectionParents(t,s).next(function(c){return B.forEach(c,function(l){var d=function(p,g){return new Ki(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return i.An(t,d,r).next(function(p){p.forEach(function(g,v){a=a.insert(g,v)})})}).next(function(){return a})})},e.prototype.An=function(t,n,r){var i,s,a=this;return this.Ue.getDocumentsMatchingQuery(t,n,r).next(function(c){return i=c,a._n.getAllMutationBatchesAffectingQuery(t,n)}).next(function(c){return s=c,a.Rn(t,s,i).next(function(l){i=l;for(var d=0,p=s;d<p.length;d++)for(var g=p[d],v=0,b=g.mutations;v<b.length;v++){var _=b[v],I=_.key,T=i.get(I);T==null&&(T=cn.newInvalidDocument(I),i=i.insert(I,T)),mE(_,T,g.localWriteTime),T.isFoundDocument()||(i=i.remove(I))}})}).next(function(){return i.forEach(function(c,l){Id(n,l)||(i=i.remove(c))}),i})},e.prototype.Rn=function(t,n,r){for(var i=zt(),s=0,a=n;s<a.length;s++)for(var c=0,l=a[s].mutations;c<l.length;c++){var d=l[c];d instanceof Bo&&r.get(d.key)===null&&(i=i.add(d.key))}var p=r;return this.Ue.getEntries(t,i).next(function(g){return g.forEach(function(v,b){b.isFoundDocument()&&(p=p.insert(v,b))}),p})},e}(),yH=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.bn=r,this.vn=i}return e.Pn=function(t,n){for(var r=zt(),i=zt(),s=0,a=n.docChanges;s<a.length;s++){var c=a[s];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),sL=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,n,r,i){var s=this;return function(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(At.min())?this.Dn(t,n):this.Sn.pn(t,i).next(function(a){var c=s.Cn(n,a);return(wg(n)||Dg(n))&&s.Nn(n.limitType,c,i,r)?s.Dn(t,n):(hE()<=Ft.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pE(n)),s.Sn.getDocumentsMatchingQuery(t,n,r).next(function(l){return c.forEach(function(d){l=l.insert(d.key,d)}),l}))})},e.prototype.Cn=function(t,n){var r=new Be(A2(t));return n.forEach(function(i,s){Id(t,s)&&(r=r.add(s))}),r},e.prototype.Nn=function(t,n,r,i){if(r.size!==n.size)return!0;var s=t==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)},e.prototype.Dn=function(t,n){return hE()<=Ft.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",pE(n)),this.Sn.getDocumentsMatchingQuery(t,n,At.min())},e}(),bH=function(){function e(t,n,r,i){this.persistence=t,this.xn=n,this.R=i,this.kn=new wn(Rt),this.Fn=new dc(function(s){return wd(s)},Bg),this.$n=At.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new oL(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,n.kn)})},e}();SH=function(){function e(t){this.R=t,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,n){return B.resolve(this.Qn.get(n))},e.prototype.saveBundleMetadata=function(t,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:an(r.createTime)}),B.resolve()},e.prototype.getNamedQuery=function(t,n){return B.resolve(this.jn.get(n))},e.prototype.saveNamedQuery=function(t,n){return this.jn.set(n.name,function(r){return{name:r.name,query:jE(r.bundledQuery),readTime:an(r.readTime)}}(n)),B.resolve()},e}(),qE=function(){function e(){this.Wn=new Be(We.Gn),this.zn=new Be(We.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,n){var r=new We(t,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},e.prototype.Jn=function(t,n){var r=this;t.forEach(function(i){return r.addReference(i,n)})},e.prototype.removeReference=function(t,n){this.Yn(new We(t,n))},e.prototype.Xn=function(t,n){var r=this;t.forEach(function(i){return r.removeReference(i,n)})},e.prototype.Zn=function(t){var n=this,r=new ot(new Vt([])),i=new We(r,t),s=new We(r,t+1),a=[];return this.zn.forEachInRange([i,s],function(c){n.Yn(c),a.push(c.key)}),a},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(n){return t.Yn(n)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var n=new ot(new Vt([])),r=new We(n,t),i=new We(n,t+1),s=zt();return this.zn.forEachInRange([r,i],function(a){s=s.add(a.key)}),s},e.prototype.containsKey=function(t){var n=new We(t,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)},e}(),We=function(){function e(t,n){this.key=t,this.ns=n}return e.Gn=function(t,n){return ot.comparator(t.key,n.key)||Rt(t.ns,n.ns)},e.Hn=function(t,n){return Rt(t.ns,n.ns)||ot.comparator(t.key,n.key)},e}(),xH=function(){function e(t,n){this.Ut=t,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new Be(We.Gn)}return e.prototype.checkEmpty=function(t){return B.resolve(this._n.length===0)},e.prototype.addMutationBatch=function(t,n,r,i){var s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var a=new FE(s,n,r,i);this._n.push(a);for(var c=0,l=i;c<l.length;c++){var d=l[c];this.rs=this.rs.add(new We(d.key,s)),this.Ut.addToCollectionParentIndex(t,d.key.path.popLast())}return B.resolve(a)},e.prototype.lookupMutationBatch=function(t,n){return B.resolve(this.os(n))},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=n+1,i=this.cs(r),s=i<0?0:i;return B.resolve(this._n.length>s?this._n[s]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return B.resolve(this._n.length===0?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return B.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),a=[];return this.rs.forEachInRange([i,s],function(c){var l=r.os(c.ns);a.push(l)}),B.resolve(a)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new Be(Rt);return n.forEach(function(s){var a=new We(s,0),c=new We(s,Number.POSITIVE_INFINITY);r.rs.forEachInRange([a,c],function(l){i=i.add(l.ns)})}),B.resolve(this.us(i))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=n.path,i=r.length+1,s=r;ot.isDocumentKey(s)||(s=s.child(""));var a=new We(new ot(s),0),c=new Be(Rt);return this.rs.forEachWhile(function(l){var d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.ns)),!0)},a),B.resolve(this.us(c))},e.prototype.us=function(t){var n=this,r=[];return t.forEach(function(i){var s=n.os(i);s!==null&&r.push(s)}),r},e.prototype.removeMutationBatch=function(t,n){var r=this;ft(this.hs(n.batchId,"removed")===0),this._n.shift();var i=this.rs;return B.forEach(n.mutations,function(s){var a=new We(s.key,n.batchId);return i=i.delete(a),r.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(function(){r.rs=i})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,n){var r=new We(n,0),i=this.rs.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))},e.prototype.performConsistencyCheck=function(t){return this._n.length,B.resolve()},e.prototype.hs=function(t,n){return this.cs(t)},e.prototype.cs=function(t){return this._n.length===0?0:t-this._n[0].batchId},e.prototype.os=function(t){var n=this.cs(t);return n<0||n>=this._n.length?null:this._n[n]},e}(),CH=function(){function e(t,n){this.Ut=t,this.ls=n,this.docs=new wn(ot.comparator),this.size=0}return e.prototype.addEntry=function(t,n,r){var i=n.key,s=this.docs.get(i),a=s?s.size:0,c=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:c,readTime:r}),this.size+=c-a,this.Ut.addToCollectionParentIndex(t,i.path.popLast())},e.prototype.removeEntry=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype.getEntry=function(t,n){var r=this.docs.get(n);return B.resolve(r?r.document.clone():cn.newInvalidDocument(n))},e.prototype.getEntries=function(t,n){var r=this,i=Ar();return n.forEach(function(s){var a=r.docs.get(s);i=i.insert(s,a?a.document.clone():cn.newInvalidDocument(s))}),B.resolve(i)},e.prototype.getDocumentsMatchingQuery=function(t,n,r){for(var i=Ar(),s=new ot(n.path.child("")),a=this.docs.getIteratorFrom(s);a.hasNext();){var c=a.getNext(),l=c.key,d=c.value,p=d.document,g=d.readTime;if(!n.path.isPrefixOf(l.path))break;g.compareTo(r)<=0||Id(n,p)&&(i=i.insert(p.key,p.clone()))}return B.resolve(i)},e.prototype.fs=function(t,n){return B.forEach(this.docs,function(r){return n(r)})},e.prototype.newChangeBuffer=function(t){return new RH(this)},e.prototype.getSize=function(t){return B.resolve(this.size)},e}(),RH=function(e){function t(n){var r=this;return(r=e.call(this)||this).Ie=n,r}return ut(t,e),t.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(s,a){a.document.isValidDocument()?i.push(r.Ie.addEntry(n,a.document,r.getReadTime(s))):r.Ie.removeEntry(s)}),B.waitFor(i)},t.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},t.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},t}(iL),DH=function(){function e(t){this.persistence=t,this.ds=new dc(function(n){return wd(n)},Bg),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.ws=0,this._s=new qE,this.targetCount=0,this.ys=Ng.Jt()}return e.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(r,i){return n(i)}),B.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return B.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return B.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),B.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),B.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.ys=new Ng(n),this.highestTargetId=n),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,n){return this.te(n),this.targetCount+=1,B.resolve()},e.prototype.updateTargetData=function(t,n){return this.te(n),B.resolve()},e.prototype.removeTargetData=function(t,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,B.resolve()},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,a=[];return this.ds.forEach(function(c,l){l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i.ds.delete(c),a.push(i.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),B.waitFor(a).next(function(){return s})},e.prototype.getTargetCount=function(t){return B.resolve(this.targetCount)},e.prototype.getTargetData=function(t,n){var r=this.ds.get(n)||null;return B.resolve(r)},e.prototype.addMatchingKeys=function(t,n,r){return this._s.Jn(n,r),B.resolve()},e.prototype.removeMatchingKeys=function(t,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(function(a){s.push(i.markPotentiallyOrphaned(t,a))}),B.waitFor(s)},e.prototype.removeMatchingKeysForTargetId=function(t,n){return this._s.Zn(n),B.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=this._s.es(n);return B.resolve(r)},e.prototype.containsKey=function(t,n){return B.resolve(this._s.containsKey(n))},e}(),kH=function(){function e(t,n){var r=this;this.gs={},this.Ne=new dr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new DH(this),this.Ut=new oH,this.Ue=function(i,s){return new CH(i,function(a){return r.referenceDelegate.ps(a)})}(this.Ut),this.R=new J2(n),this.Ke=new SH(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var n=this.gs[t.toKey()];return n||(n=new xH(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=n),n},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;q("MemoryPersistence","Starting transaction:",t);var s=new PH(this.Ne.next());return this.referenceDelegate.Es(),r(s).next(function(a){return i.referenceDelegate.Ts(s).next(function(){return a})}).toPromise().then(function(a){return s.raiseOnCommittedEvent(),a})},e.prototype.Is=function(t,n){return B.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,n)}}))},e}(),PH=function(e){function t(n){var r=this;return(r=e.call(this)||this).currentSequenceNumber=n,r}return ut(t,e),t}(Y2),NH=function(){function e(t){this.persistence=t,this.As=new qE,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw rt()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),B.resolve()},e.prototype.removeReference=function(t,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),B.resolve()},e.prototype.markPotentiallyOrphaned=function(t,n){return this.vs.add(n.toString()),B.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.As.Zn(n.targetId).forEach(function(s){return r.vs.add(s.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(function(s){s.forEach(function(a){return r.vs.add(a.toString())})}).next(function(){return i.removeTargetData(t,n)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.vs,function(i){var s=ot.fromPath(i);return n.Ps(t,s).next(function(a){a||r.removeEntry(s)})}).next(function(){return n.Rs=null,r.apply(t)})},e.prototype.updateLimboDocument=function(t,n){var r=this;return this.Ps(t,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,n){var r=this;return B.or([function(){return B.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(t,n)},function(){return r.persistence.Is(t,n)}])},e}(),sn=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return this.uid!=null},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");UM=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.Vs=function(t,n,r){var i,s=JSON.parse(r),a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(i=new U(s.error.code,s.error.message)),a?new e(t,n,s.state,i):(De("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),cE=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.Vs=function(t,n){var r,i=JSON.parse(n),s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new U(i.error.code,i.error.message)),s?new e(t,i.state,r):(De("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),BM=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.Vs=function(t,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Gg(),a=0;i&&a<r.activeTargetIds.length;++a)i=b2(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new e(t,s):(De("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),OH=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.Vs=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(De("SharedClientState","Failed to parse online state: "+t),null)},e}(),bE=function(){function e(){this.activeTargetIds=Gg()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),lE=function(){function e(t,n,r,i,s){this.window=t,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new wn(Rt),this.started=!1,this.$s=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Os=VM(this.persistenceKey,this.Ns),this.Ms=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new bE),this.Ls=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.Us=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.Ks=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return O(this,void 0,void 0,function(){var t,n,r,i,s,a,c,l,d,p,g,v=this;return N(this,function(b){switch(b.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=b.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Ns&&(s=this.getItem(VM(this.persistenceKey,i)))&&(a=BM.Vs(i,s))&&(this.Fs=this.Fs.insert(a.clientId,a));for(this.Qs(),(c=this.storage.getItem(this.Us))&&(l=this.js(c))&&this.Ws(l),d=0,p=this.$s;d<p.length;d++)g=p[d],this.ks(g);return this.$s=[],this.window.addEventListener("pagehide",function(){return v.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(t){var n=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,n,r){this.zs(t,n,r),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var n="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(uE(this.persistenceKey,t));if(r){var i=cE.Vs(t,r);i&&(n=i.state)}}return this.Js.Ds(t),this.Qs(),n},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(uE(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,n,r){this.Ys(t,n,r)},e.prototype.handleUserChange=function(t,n,r){var i=this;n.forEach(function(s){i.Hs(s)}),this.currentUser=t,r.forEach(function(s){i.addPendingMutation(s)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return q("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){q("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){q("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.ks=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(q("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void De("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return O(n,void 0,void 0,function(){var i,s,a,c,l,d;return N(this,function(p){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(s=this.ni(r.key,r.newValue))return[2,this.ei(s.clientId,s)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(a=this.si(r.key,r.newValue)))return[2,this.ii(a)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(c=this.ri(r.key,r.newValue)))return[2,this.oi(c)]}else if(r.key===this.Us){if(r.newValue!==null&&(l=this.js(r.newValue)))return[2,this.Ws(l)]}else if(r.key===this.Ms)(d=function(g){var v=dr.o;if(g!=null)try{var b=JSON.parse(g);ft(typeof b=="number"),v=b}catch(_){De("SharedClientState","Failed to read sequence number from WebStorage",_)}return v}(r.newValue))!==dr.o&&this.sequenceNumberHandler(d);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,n,r){var i=new UM(this.currentUser,t,n,r),s=jM(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Ss())},e.prototype.Hs=function(t){var n=jM(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Xs=function(t){var n={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(n))},e.prototype.Ys=function(t,n,r){var i=uE(this.persistenceKey,t),s=new cE(t,n,r);this.setItem(i,s.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(t){var n=this.Ls.exec(t);return n?n[1]:null},e.prototype.ni=function(t,n){var r=this.ti(t);return BM.Vs(r,n)},e.prototype.si=function(t,n){var r=this.Bs.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return UM.Vs(new sn(s),i,n)},e.prototype.ri=function(t,n){var r=this.qs.exec(t),i=Number(r[1]);return cE.Vs(i,n)},e.prototype.js=function(t){return OH.Vs(t)},e.prototype.ii=function(t){return O(this,void 0,void 0,function(){return N(this,function(n){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(q("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,n){var r=this,i=n?this.Fs.insert(t,n):this.Fs.remove(t),s=this.Gs(this.Fs),a=this.Gs(i),c=[],l=[];return a.forEach(function(d){s.has(d)||c.push(d)}),s.forEach(function(d){a.has(d)||l.push(d)}),this.syncEngine.hi(c,l).then(function(){r.Fs=i})},e.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var n=Gg();return t.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},e}(),fL=function(){function e(){this.li=new bE,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,n,r){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,n,r){this.fi[t]=n},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new bE,Promise.resolve()},e.prototype.handleUserChange=function(t,n,r){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),MH=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),qM=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(0)},e.prototype.yi=function(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(1)},e.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),LH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},FH=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),VH=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return ut(t,e),t.prototype.Fi=function(n,r,i,s){return new Promise(function(a,c){var l=new oM;l.listenOnce(nM.COMPLETE,function(){try{switch(l.getLastErrorCode()){case pg.NO_ERROR:var p=l.getResponseJson();q("Connection","XHR received:",JSON.stringify(p)),a(p);break;case pg.TIMEOUT:q("Connection",'RPC "'+n+'" timed out'),c(new U(C.DEADLINE_EXCEEDED,"Request time out"));break;case pg.HTTP_ERROR:var g=l.getStatus();if(q("Connection",'RPC "'+n+'" failed with status:',g,"response text:",l.getResponseText()),g>0){var v=l.getResponseJson().error;if(v&&v.status&&v.message){var b=function(_){var I=_.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(I)>=0?I:C.UNKNOWN}(v.status);c(new U(b,v.message))}else c(new U(C.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new U(C.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{q("Connection",'RPC "'+n+'" completed.')}});var d=JSON.stringify(s);l.send(r,"POST",d,i,15)})},t.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],s=tM(),a=eM(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new iM({})),this.ki(c.initMessageHeaders,r),wN()||EN()||TN()||AN()||SN()||IN()||(c.httpHeadersOverwriteParam="$httpHeaders");var l=i.join("");q("Connection","Creating WebChannel: "+l,c);var d=s.createWebChannel(l,c),p=!1,g=!1,v=new FH({Ei:function(_){g?q("Connection","Not sending because WebChannel is closed:",_):(p||(q("Connection","Opening WebChannel transport."),d.open(),p=!0),q("Connection","WebChannel sending:",_),d.send(_))},Ti:function(){return d.close()}}),b=function(_,I,T){_.listen(I,function(S){try{T(S)}catch(M){setTimeout(function(){throw M},0)}})};return b(d,id.EventType.OPEN,function(){g||q("Connection","WebChannel transport opened.")}),b(d,id.EventType.CLOSE,function(){g||(g=!0,q("Connection","WebChannel transport closed"),v.Vi())}),b(d,id.EventType.ERROR,function(_){g||(g=!0,Ag("Connection","WebChannel transport errored:",_),v.Vi(new U(C.UNAVAILABLE,"The operation could not be completed")))}),b(d,id.EventType.MESSAGE,function(_){var I;if(!g){var T=_.data[0];ft(!!T);var S=T,M=S.error||((I=S[0])===null||I===void 0?void 0:I.error);if(M){q("Connection","WebChannel received error:",M);var k=M.status,z=function(L){var mt=Ce[L];if(mt!==void 0)return M2(mt)}(k),H=M.message;z===void 0&&(z=C.INTERNAL,H="Unknown error status: "+k+" with message "+M.message),g=!0,v.Vi(new U(z,H)),d.close()}else q("Connection","WebChannel received:",T),v.Si(T)}}),b(a,rM.STAT_EVENT,function(_){_.stat===oE.PROXY?q("Connection","Detected buffering proxy"):_.stat===oE.NOPROXY&&q("Connection","Detected no buffering proxy")}),setTimeout(function(){v.Pi()},0),v},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Di=n+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,n,r,i){var s=this.xi(t,n);q("RestConnection","Sending: ",s,r);var a={};return this.ki(a,i),this.Fi(t,s,a,r).then(function(c){return q("RestConnection","Received: ",c),c},function(c){throw Ag("RestConnection",t+" failed with error: ",c,"url: ",s,"request:",r),c})},e.prototype.$i=function(t,n,r,i){return this.Ni(t,n,r,i)},e.prototype.ki=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(t[r]=n.authHeaders[r])},e.prototype.xi=function(t,n){var r=LH[t];return this.Di+"/v1/"+n+":"+r},e}());zE=function(){function e(t,n,r,i,s){r===void 0&&(r=1e3),i===void 0&&(i=1.5),s===void 0&&(s=6e4),this.Se=t,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=s,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(t){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),s=Math.max(0,r-i);s>0&&q("ExponentialBackoff","Backing off for "+s+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,s,function(){return n.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),mL=function(){function e(t,n,r,i,s,a){this.Se=t,this.zi=r,this.Hi=i,this.Ji=s,this.listener=a,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new zE(t,n)}return e.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},e.prototype.er=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.nr()},e.prototype.stop=function(){return O(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return O(this,void 0,void 0,function(){return N(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,n){return O(this,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,t!==3?this.Zi.reset():n&&n.code===C.RESOURCE_EXHAUSTED?(De(n.toString()),De("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===C.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){t.Yi===r&&t.lr(i)},function(i){n(function(){var s=new U(C.UNKNOWN,"Fetching auth token failed: "+i.message);return t.dr(s)})})},e.prototype.lr=function(t){var n=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return O(t,void 0,void 0,function(){return N(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return q("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===t?r():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),jH=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,a)||this).R=s,c}return ut(t,e),t.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},t.prototype.onMessage=function(n){this.Zi.reset();var r=function(s,a){var c;if("targetChange"in a){a.targetChange;var l=function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:rt()}(a.targetChange.targetChangeType||"NO_CHANGE"),d=a.targetChange.targetIds||[],p=function(T,S){return T.I?(ft(S===void 0||typeof S=="string"),Pn.fromBase64String(S||"")):(ft(S===void 0||S instanceof Uint8Array),Pn.fromUint8Array(S||new Uint8Array))}(s,a.targetChange.resumeToken),g=(v=a.targetChange.cause)&&function(T){var S=T.code===void 0?C.UNKNOWN:M2(T.code);return new U(S,T.message||"")}(v);c=new V2(l,d,p,g||null)}else if("documentChange"in a){a.documentChange,(l=a.documentChange).document,l.document.name,l.document.updateTime,d=gi(s,l.document.name),p=an(l.document.updateTime);var v=new hr({mapValue:{fields:l.document.fields}}),b=(g=cn.newFoundDocument(d,p,v),l.targetIds||[]),_=l.removedTargetIds||[];c=new Ig(b,_,g.key,g)}else if("documentDelete"in a)a.documentDelete,(l=a.documentDelete).document,d=gi(s,l.document),p=l.readTime?an(l.readTime):At.min(),v=cn.newNoDocument(d,p),g=l.removedTargetIds||[],c=new Ig([],g,v.key,v);else if("documentRemove"in a)a.documentRemove,(l=a.documentRemove).document,d=gi(s,l.document),p=l.removedTargetIds||[],c=new Ig([],p,d,null);else{if(!("filter"in a))return rt();a.filter;var I=a.filter;I.targetId,l=I.count||0,d=new O$(l),p=I.targetId,c=new F2(p,d)}return c}(this.R,n),i=function(s){if(!("targetChange"in s))return At.min();var a=s.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?an(a.readTime):At.min()}(n);return this.listener._r(r,i)},t.prototype.mr=function(n){var r={};r.database=md(this.R),r.addTarget=function(s,a){var c,l=a.target;return(c=Cg(l)?{documents:G2(s,l)}:{query:K2(s,l)}).targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=j2(s,a.resumeToken):a.snapshotVersion.compareTo(At.min())>0&&(c.readTime=fd(s,a.snapshotVersion.toTimestamp())),c}(this.R,n);var i=function(s,a){var c=function(l,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,a.purpose);return c==null?null:{"goog-listen-tags":c}}(this.R,n);i&&(r.labels=i),this.cr(r)},t.prototype.yr=function(n){var r={};r.database=md(this.R),r.removeTarget=n,this.cr(r)},t}(mL),UH=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,a)||this).R=s,c.gr=!1,c}return ut(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(n){return this.Hi.Oi("Write",n)},t.prototype.onMessage=function(n){if(ft(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(s,a){return s&&s.length>0?(ft(a!==void 0),s.map(function(c){return function(l,d){var p=l.updateTime?an(l.updateTime):an(d);return p.isEqual(At.min())&&(p=an(d)),new k$(p,l.transformResults||[])}(c,a)})):[]}(n.writeResults,n.commitTime),i=an(n.commitTime);return this.listener.Tr(i,r)}return ft(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var n={};n.database=md(this.R),this.cr(n)},t.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(s){return kg(r.R,s)})};this.cr(i)},t}(mL),BH=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).credentials=n,s.Hi=r,s.R=i,s.Rr=!1,s}return ut(t,e),t.prototype.br=function(){if(this.Rr)throw new U(C.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(a){return s.Hi.Ni(n,r,i,a)}).catch(function(a){throw a.name==="FirebaseError"?(a.code===C.UNAUTHENTICATED&&s.credentials.invalidateToken(),a):new U(C.UNKNOWN,a.toString())})},t.prototype.$i=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(a){return s.Hi.$i(n,r,i,a)}).catch(function(a){throw a.name==="FirebaseError"?(a.code===C.UNAUTHENTICATED&&s.credentials.invalidateToken(),a):new U(C.UNKNOWN,a.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),qH=function(){function e(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.kr(),this.vr=0,t==="Online"&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(De(n),this.Vr=!1):q("OnlineStateTracker",n)},e.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},e}(),zH=function(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(a){n.enqueueAndForget(function(){return O(s,void 0,void 0,function(){return N(this,function(c){switch(c.label){case 0:return qo(this)?(q("RemoteStore","Restarting streams for network reachability change."),[4,function(l){return O(this,void 0,void 0,function(){var d;return N(this,function(p){switch(p.label){case 0:return(d=Q(l)).Or.add(4),[4,fc(d)];case 1:return p.sent(),d.Br.set("Unknown"),d.Or.delete(4),[4,Sd(d)];case 2:return p.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Br=new qH(n,r)};XH=function(){function e(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(a){})}return e.createAndSchedule=function(t,n,r,i,s){var a=new e(t,n,Date.now()+r,i,s);return a.start(r),a},e.prototype.start=function(t){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(C.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.timerHandle!==null?(t.clearTimeout(),t.op().then(function(n){return t.deferred.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();_L=function(){function e(t){this.comparator=t?function(n,r){return t(n,r)||ot.comparator(n.key,r.key)}:function(n,r){return ot.comparator(n.key,r.key)},this.keyedMap=gE(),this.sortedSet=new wn(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return this.keyedMap.get(t)!=null},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),zM=function(){function e(){this.Qr=new wn(ot.comparator)}return e.prototype.track=function(t){var n=t.doc.key,r=this.Qr.get(n);r?t.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,t):t.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Qr=this.Qr.remove(n):t.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):rt():this.Qr=this.Qr.insert(n,t)},e.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(n,r){t.push(r)}),t},e}(),Lg=function(){function e(t,n,r,i,s,a,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l}return e.fromInitialDocuments=function(t,n,r,i){var s=[];return n.forEach(function(a){s.push({type:0,doc:a})}),new e(t,n,_L.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_d(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),JH=function(){this.Wr=void 0,this.listeners=[]},ZH=function(){this.queries=new dc(function(e){return T2(e)},_d),this.onlineState="Unknown",this.Gr=new Set};YE=function(){function e(t,n,r){this.query=t,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var s=i[r];s.type!==3&&n.push(s)}t=new Lg(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var a=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),a=!0):this.eo(t,this.onlineState)&&(this.no(t),a=!0),this.Xr=t,a},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),n=!0),n},e.prototype.eo=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||t.docs.isEmpty()&&n!=="Offline")},e.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.no=function(t){t=Lg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}(),n8=function(){function e(t,n){this.payload=t,this.byteLength=n}return e.prototype.io=function(){return"metadata"in this.payload},e}(),GM=function(){function e(t){this.R=t}return e.prototype.qn=function(t){return gi(this.R,t)},e.prototype.Un=function(t){return t.metadata.exists?z2(this.R,t.document,!1):cn.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},e.prototype.Kn=function(t){return an(t)},e}(),EJ=function(){function e(t,n,r){this.ro=t,this.localStore=n,this.R=r,this.queries=[],this.documents=[],this.progress=r8(t)}return e.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var n=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++n):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},e.prototype.co=function(t){for(var n=new Map,r=new GM(this.R),i=0,s=t;i<s.length;i++){var a=s[i];if(a.metadata.queries)for(var c=r.qn(a.metadata.name),l=0,d=a.metadata.queries;l<d.length;l++){var p=d[l],g=(n.get(p)||zt()).add(c);n.set(p,g)}}return n},e.prototype.complete=function(){return O(this,void 0,void 0,function(){var t,n,r,i,s;return N(this,function(a){switch(a.label){case 0:return[4,TH(this.localStore,new GM(this.R),this.documents,this.ro.id)];case 1:t=a.sent(),n=this.co(this.documents),r=0,i=this.queries,a.label=2;case 2:return r<i.length?(s=i[r],[4,AH(this.localStore,s,n.get(s.name))]):[3,5];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new vH(Object.assign({},this.progress),t))]}})})},e}();IL=function(e){this.key=e},EL=function(e){this.key=e},TL=function(){function e(t,n){this.query=t,this.uo=n,this.ao=null,this.current=!1,this.ho=zt(),this.mutatedKeys=zt(),this.lo=A2(t),this.fo=new _L(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,n){var r=this,i=n?n.mo:new zM,s=n?n.fo:this.fo,a=n?n.mutatedKeys:this.mutatedKeys,c=s,l=!1,d=wg(this.query)&&s.size===this.query.limit?s.last():null,p=Dg(this.query)&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(function(v,b){var _=s.get(v),I=Id(r.query,b)?b:null,T=!!_&&r.mutatedKeys.has(_.key),S=!!I&&(I.hasLocalMutations||r.mutatedKeys.has(I.key)&&I.hasCommittedMutations),M=!1;_&&I?_.data.isEqual(I.data)?T!==S&&(i.track({type:3,doc:I}),M=!0):r.yo(_,I)||(i.track({type:2,doc:I}),M=!0,(d&&r.lo(I,d)>0||p&&r.lo(I,p)<0)&&(l=!0)):!_&&I?(i.track({type:0,doc:I}),M=!0):_&&!I&&(i.track({type:1,doc:_}),M=!0,(d||p)&&(l=!0)),M&&(I?(c=c.add(I),a=S?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),wg(this.query)||Dg(this.query))for(;c.size>this.query.limit;){var g=wg(this.query)?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),i.track({type:1,doc:g})}return{fo:c,mo:i,Nn:l,mutatedKeys:a}},e.prototype.yo=function(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},e.prototype.applyChanges=function(t,n,r){var i=this,s=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var a=t.mo.jr();a.sort(function(p,g){return function(v,b){var _=function(I){switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return _(v)-_(b)}(p.type,g.type)||i.lo(p.doc,g.doc)}),this.po(r);var c=n?this.Eo():[],l=this.ho.size===0&&this.current?1:0,d=l!==this.ao;return this.ao=l,a.length!==0||d?{snapshot:new Lg(this.query,t.fo,s,a,t.mutatedKeys,l===0,d,!1),To:c}:{To:c}},e.prototype.zr=function(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new zM,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var n=this;t&&(t.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var n=this.ho;this.ho=zt(),this.fo.forEach(function(i){t.Io(i.key)&&(t.ho=t.ho.add(i.key))});var r=[];return n.forEach(function(i){t.ho.has(i)||r.push(new EL(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new IL(i))}),r},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=zt();var n=this._o(t.documents);return this.applyChanges(n,!0)},e.prototype.Ro=function(){return Lg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},e}(),i8=function(e,t,n){this.query=e,this.targetId=t,this.view=n},o8=function(e){this.key=e,this.bo=!1},s8=function(){function e(t,n,r,i,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.vo={},this.Po=new dc(function(c){return T2(c)},_d),this.Vo=new Map,this.So=new Set,this.Do=new wn(ot.comparator),this.Co=new Map,this.No=new qE,this.xo={},this.ko=new Map,this.Fo=Ng.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),e}();CL=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return O(this,void 0,void 0,function(){return N(this,function(n){switch(n.label){case 0:return this.R=$g(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Ko=function(t){return aL(this.persistence,new sL,t.initialUser,this.R)},e.prototype.qo=function(t){return new kH(NH.bs,this.R)},e.prototype.Bo=function(t){return new fL},e.prototype.terminate=function(){return O(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),RL=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).Qo=n,s.cacheSizeBytes=r,s.forceOwnership=i,s.synchronizeTabs=!1,s}return ut(t,e),t.prototype.initialize=function(n){return O(this,void 0,void 0,function(){var r=this;return N(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return i.sent(),[4,EH(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,n)];case 3:return i.sent(),[4,nT(this.Qo.syncEngine)];case 4:return i.sent(),[4,pc(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},t.prototype.Ko=function(n){return aL(this.persistence,new sL,n.initialUser,this.R)},t.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new lH(r,n.asyncQueue)},t.prototype.qo=function(n){var r=BE(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?pi.withCacheSize(this.cacheSizeBytes):pi.DEFAULT;return new gH(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,pL(),Eg(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(n){return new fL},t}(CL),T8=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Qo=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ut(t,e),t.prototype.initialize=function(n){return O(this,void 0,void 0,function(){var r,i=this;return N(this,function(s){switch(s.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return s.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof lE?(this.sharedClientState.syncEngine={ui:b8.bind(null,r),ai:I8.bind(null,r),hi:E8.bind(null,r),fn:_8.bind(null,r),ci:y8.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.He(function(a){return O(i,void 0,void 0,function(){return N(this,function(c){switch(c.label){case 0:return[4,w8(this.Qo.syncEngine,a)];case 1:return c.sent(),this.gcScheduler&&(a&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):a||this.gcScheduler.stop()),[2]}})})})];case 4:return s.sent(),[2]}})})},t.prototype.Bo=function(n){var r=pL();if(!lE.yt(r))throw new U(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=BE(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new lE(r,n.asyncQueue,i,n.clientId,n.initialUser)},t}(RL),IE=function(){function e(){}return e.prototype.initialize=function(t,n){return O(this,void 0,void 0,function(){var r=this;return N(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(s){return KM(r.syncEngine,s,1)},this.remoteStore.remoteSyncer.handleCredentialChange=m8.bind(null,this.syncEngine),[4,wE(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new ZH},e.prototype.createDatastore=function(t){var n,r=$g(t.databaseInfo.databaseId),i=(n=t.databaseInfo,new VH(n));return function(s,a,c){return new BH(s,a,c)}(t.credentials,i,r)},e.prototype.createRemoteStore=function(t){var n,r,i,s,a,c=this;return n=this.localStore,r=this.datastore,i=t.asyncQueue,s=function(l){return KM(c.syncEngine,l,0)},a=qM.yt()?new qM:new MH,new zH(n,r,i,s,a)},e.prototype.createSyncEngine=function(t,n){return function(r,i,s,a,c,l,d){var p=new s8(r,i,s,a,c,l);return d&&(p.$o=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)},e.prototype.terminate=function(){return function(t){return O(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return n=Q(t),q("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,fc(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();Wg=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),TJ=function(){function e(t,n){var r=this;this.Go=t,this.R=n,this.metadata=new bn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(i){i&&i.io()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(i?.payload)))},function(i){return r.metadata.reject(i)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return O(this,void 0,void 0,function(){return N(this,function(t){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return O(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return O(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(s){switch(s.label){case 0:return[4,this.Jo()];case 1:return(t=s.sent())===null?[2,null]:(n=this.zo.decode(t),r=Number(n),isNaN(r)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(r)]);case 2:return i=s.sent(),[2,new n8(JSON.parse(i),t.length+r)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t===123})},e.prototype.Jo=function(){return O(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),n)])}})})},e.prototype.Xo=function(t){return O(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),n)]}})})},e.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},e.prototype.tc=function(){return O(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(t=r.sent()).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),[2,t.done]}})})},e}(),A8=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return O(this,void 0,void 0,function(){var n,r=this;return N(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new U(C.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return O(this,void 0,void 0,function(){var c,l,d,p,g,v;return N(this,function(b){switch(b.label){case 0:return c=Q(s),l=md(c.R)+"/documents",d={documents:a.map(function(_){return pd(c.R,_)})},[4,c.$i("BatchGetDocuments",l,d)];case 1:return p=b.sent(),g=new Map,p.forEach(function(_){var I=function(T,S){return"found"in S?function(M,k){ft(!!k.found),k.found.name,k.found.updateTime;var z=gi(M,k.found.name),H=an(k.found.updateTime),L=new hr({mapValue:{fields:k.found.fields}});return cn.newFoundDocument(z,H,L)}(T,S):"missing"in S?function(M,k){ft(!!k.missing),ft(!!k.readTime);var z=gi(M,k.missing),H=an(k.readTime);return cn.newNoDocument(z,H)}(T,S):rt()}(c.R,_);g.set(I.key.toString(),I)}),v=[],[2,(a.forEach(function(_){var I=g.get(_.toString());ft(!!I),v.push(I)}),v)]}})})}(this.datastore,t)];case 1:return[2,((n=i.sent()).forEach(function(s){return r.recordVersion(s)}),n)]}})})},e.prototype.set=function(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new Ad(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return O(this,void 0,void 0,function(){var t,n=this;return N(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,s){var a=ot.fromPath(s);n.mutations.push(new PE(a,n.precondition(a)))}),[4,function(i,s){return O(this,void 0,void 0,function(){var a,c,l;return N(this,function(d){switch(d.label){case 0:return a=Q(i),c=md(a.R)+"/documents",l={writes:s.map(function(p){return kg(a.R,p)})},[4,a.Ni("Commit",c,l)];case 1:return d.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw rt();n=At.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new U(C.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)},e.prototype.precondition=function(t){var n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?yn.updateTime(n):yn.none()},e.prototype.preconditionForUpdate=function(t){var n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(At.min()))throw new U(C.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yn.updateTime(n)}return yn.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),S8=function(){function e(t,n,r,i){this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new zE(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return O(t,void 0,void 0,function(){var n,r,i=this;return N(this,function(s){return n=new A8(this.datastore),(r=this.sc(n))&&r.then(function(a){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(a)}).catch(function(c){i.ic(c)})})}).catch(function(a){i.ic(a)}),[2]})})})},e.prototype.sc=function(t){try{var n=this.updateFunction(t);return!ia(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},e.prototype.ic=function(t){var n=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!O2(n)}return!1},e}(),x8=function(){function e(t,n,r){var i=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=sn.UNAUTHENTICATED,this.clientId=p2.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(s){return O(i,void 0,void 0,function(){return N(this,function(a){switch(a.label){case 0:return q("FirestoreClient","Received user=",s.uid),[4,this.credentialListener(s)];case 1:return a.sent(),this.user=s,[2]}})})})}return e.prototype.getConfiguration=function(){return O(this,void 0,void 0,function(){return N(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new U(C.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return O(t,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=s.sent(),i=gc(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();C8=function(e,t,n,r,i,s,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.useFetchStreams=c},Fg=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),XM=new Map,OL=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},JM=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){this.changeListener=n,t.enqueueRetryable(function(){return n(sn.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),R8=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){var r=this;this.changeListener=n,t.enqueueRetryable(function(){return n(r.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),D8=function(){function e(t){var n=this;this.currentUser=sn.UNAUTHENTICATED,this.oc=new bn,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){q("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};t.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=t.getImmediate({optional:!0});i?r(i):(q("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.cc!==n?(q("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(ft(typeof i.accessToken=="string"),new OL(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,n){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return O(r,void 0,void 0,function(){return N(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ft(t===null||typeof t=="string"),new sn(t)},e}(),k8=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r,this.type="FirstParty",this.user=sn.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),P8=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r}return e.prototype.getToken=function(){return Promise.resolve(new k8(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,n){t.enqueueRetryable(function(){return n(sn.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();n2=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new U(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new U(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ML("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),vd=function(){function e(t,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n2({}),this._settingsFrozen=!1,t instanceof Fg?(this._databaseId=t,this._credentials=new JM):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new U(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fg(r.options.projectId)}(t),this._credentials=new D8(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new U(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new U(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n2(t),t.credentials!==void 0&&(this._credentials=function(n){if(!n)return new JM;switch(n.type){case"gapi":var r=n.client;return ft(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new P8(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new U(C.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return t=this,(n=XM.get(t))&&(q("ComponentProvider","Removing Datastore"),XM.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),ce=function(){function e(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Fo(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),pr=function(){function e(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Fo=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,hc(i))||this)._path=i,s.type="collection",s}return ut(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new ce(this.firestore,null,new ot(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this._path)},t}(pr);N8=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new zE(this,"async_queue_retry"),this.Ic=function(){var r=Eg();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var n=Eg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},e.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var n=Eg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(t){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new bn;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},e.prototype.enqueueRetryable=function(t){var n=this;this.enqueueAndForget(function(){return n.wc.push(t),n.bc()})},e.prototype.bc=function(){return O(this,void 0,void 0,function(){var t,n=this;return N(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!oa(t=r.sent()))throw t;return q("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},e.prototype.Rc=function(t){var n=this,r=this.dc.then(function(){return n.gc=!0,t().catch(function(i){throw n.yc=i,n.gc=!1,De("INTERNAL UNHANDLED ERROR: ",function(s){var a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i)),i}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},e.prototype.enqueueAfterDelay=function(t,n,r){var i=this;this.Ac(),this.Tc.indexOf(t)>-1&&(n=0);var s=XH.createAndSchedule(this,t,n,r,function(a){return i.vc(a)});return this.mc.push(s),s},e.prototype.Ac=function(){this.yc&&rt()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return O(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return[4,t=this.dc];case 1:n.sent(),n.label=2;case 2:if(t!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.Vc=function(t){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===t)return!0;return!1},e.prototype.Sc=function(t){var n=this;return this.Pc().then(function(){n.mc.sort(function(a,c){return a.targetTimeMs-c.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var s=i[r];if(s.skipDelay(),t!=="all"&&s.timerId===t)break}return n.Pc()})},e.prototype.Dc=function(t){this.Tc.push(t)},e.prototype.vc=function(t){var n=this.mc.indexOf(t);this.mc.splice(n,1)},e}();AJ=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new bn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(t,n,r){this._progressObserver={next:t,error:n,complete:r}},e.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},e.prototype.then=function(t,n){return this._taskCompletionResolver.promise.then(t,n)},e.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},e.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},e.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},e}(),jL=-1,ke=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).type="firestore",i._queue=new N8,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return ut(t,e),t.prototype._terminate=function(){return this._firestoreClient||UL(this),this._firestoreClient.terminate()},t}(vd);vi=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new U(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $r(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),na=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(Pn.fromBase64String(t))}catch(n){throw new U(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(Pn.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),aa=function(e){this._methodName=e},xd=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new U(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new U(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return Rt(this._lat,t._lat)||Rt(this._long,t._long)},e}(),O8=/^__.*__$/,M8=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return this.fieldMask!==null?new Bo(t,this.data,this.fieldMask,n,this.fieldTransforms):new Td(t,this.data,n,this.fieldTransforms)},e}(),BL=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return new Bo(t,this.data,this.fieldMask,n,this.fieldTransforms)},e}();zL=function(){function e(t,n,r,i,s,a){this.settings=t,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Cc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.$c(t),i},e.prototype.Oc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.Cc(),i},e.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(t){return Vg(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(t){return this.fieldMask.find(function(n){return t.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return t.isPrefixOf(n.field)})!==void 0},e.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},e.prototype.$c=function(t){if(t.length===0)throw this.Lc("Document fields must not be empty");if(qL(this.Nc)&&O8.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),L8=function(){function e(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.R=r||$g(t)}return e.prototype.Uc=function(t,n,r,i){return i===void 0&&(i=!1),new zL({Nc:t,methodName:n,qc:r,path:$r.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();sT=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ut(t,e),t.prototype._toFieldTransform=function(n){if(n.Nc!==2)throw n.Nc===1?n.Lc(this._methodName+"() can only appear at the top level of your update data"):n.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(aa);F8=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ut(t,e),t.prototype._toFieldTransform=function(n){return new Ed(n.path,new Xu)},t.prototype.isEqual=function(n){return n instanceof t},t}(aa),V8=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return ut(t,e),t.prototype._toFieldTransform=function(n){var r=GL(this,n,!0),i=this.Kc.map(function(a){return ca(a,r)}),s=new ta(i);return new Ed(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(aa),j8=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return ut(t,e),t.prototype._toFieldTransform=function(n){var r=GL(this,n,!0),i=this.Kc.map(function(a){return ca(a,r)}),s=new ea(i);return new Ed(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(aa),U8=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Qc=r,i}return ut(t,e),t.prototype._toFieldTransform=function(n){var r=new Ju(n.R,C2(n.R,this.Qc));return new Ed(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(aa);B8=new RegExp("[~\\*/\\[\\]]");yd=function(){function e(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new ce(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this._document!==null},e.prototype.data=function(){if(this._document){if(this._converter){var t=new q8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var n=this._document.data.field(jg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}},e}(),q8=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ut(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(yd);Qs=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),Gi=function(e){function t(n,r,i,s,a,c){var l=this;return(l=e.call(this,n,r,i,s,c)||this)._firestore=n,l._firestoreImpl=n,l.metadata=a,l}return ut(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(jg("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},t}(yd),cd=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ut(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(Gi),Oo=function(){function e(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qs(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._snapshot.docs.forEach(function(i){t.call(n,new cd(r._firestore,r._userDataWriter,i.key,i,new Qs(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var s=0;return r._snapshot.docChanges.map(function(c){return{type:"added",doc:new cd(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Qs(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}})}var a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(c){return i||c.type!==3}).map(function(c){var l=new cd(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Qs(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(p=(a=a.add(c.doc)).indexOf(c.doc.key)),{type:z8(c.type),doc:l,oldIndex:d,newIndex:p}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},e}();Cd=function(){};G8=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).jc=n,s.Wc=r,s.Gc=i,s.type="where",s}return ut(t,e),t.prototype._apply=function(n){var r=ua(n.firestore),i=function(s,a,c,l,d,p,g){var v;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new U(C.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+p+"' queries on FieldPath.documentId().");if(p==="in"||p==="not-in"){c2(g,p);for(var b=[],_=0,I=g;_<I.length;_++){var T=I[_];b.push(u2(l,s,T))}v={arrayValue:{values:b}}}else v=u2(l,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||c2(g,p),v=KL(c,"where",g,p==="in"||p==="not-in");var S=fr.create(d,p,v);return function(M,k){if(k.g()){var z=DE(M);if(z!==null&&!z.isEqual(k.field))throw new U(C.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+z.toString()+"' and '"+k.field.toString()+"'");var H=RE(M);H!==null&&JL(M,k.field,H)}var L=function(mt,fn){for(var ht=0,Pi=mt.filters;ht<Pi.length;ht++){var A=Pi[ht];if(fn.indexOf(A.op)>=0)return A.op}return null}(M,function(mt){switch(mt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(k.op));if(L!==null)throw L===k.op?new U(C.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+k.op.toString()+"' filter."):new U(C.INVALID_ARGUMENT,"Invalid query. You cannot use '"+k.op.toString()+"' filters with '"+L.toString()+"' filters.")}(s,S),S}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new pr(n.firestore,n.converter,function(s,a){var c=s.filters.concat([a]);return new Ki(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(n._query,i))},t}(Cd),K8=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).jc=n,i.zc=r,i.type="orderBy",i}return ut(t,e),t.prototype._apply=function(n){var r=function(i,s,a){if(i.startAt!==null)throw new U(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new Ku(s,a);return function(l,d){if(RE(l)===null){var p=DE(l);p!==null&&JL(l,p,d.field)}}(i,c),c}(n._query,this.jc,this.zc);return new pr(n.firestore,n.converter,function(i,s){var a=i.explicitOrderBy.concat([s]);return new Ki(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n._query,r))},t}(Cd),o2=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Hc=r,s.Jc=i,s}return ut(t,e),t.prototype._apply=function(n){return new pr(n.firestore,n.converter,E2(n._query,this.Hc,this.Jc))},t}(Cd),s2=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=i,s}return ut(t,e),t.prototype._apply=function(n){var r=XL(n,this.type,this.Yc,this.Xc);return new pr(n.firestore,n.converter,function(i,s){return new Ki(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(n._query,r))},t}(Cd),a2=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=i,s}return ut(t,e),t.prototype._apply=function(n){var r=XL(n,this.type,this.Yc,this.Xc);return new pr(n.firestore,n.converter,function(i,s){return new Ki(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(n._query,r))},t}(Cd);hT=function(){function e(){}return e.prototype.convertValue=function(t,n){switch(n===void 0&&(n="none"),Zs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Re(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Wu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw rt()}},e.prototype.convertObject=function(t,n){var r=this,i={};return ra(t.fields,function(s,a){i[s]=r.convertValue(a,n)}),i},e.prototype.convertGeoPoint=function(t){return new xd(Re(t.latitude),Re(t.longitude))},e.prototype.convertArray=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.convertValue(i,n)})},e.prototype.convertServerTimestamp=function(t,n){switch(n){case"previous":var r=y2(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ld(t));default:return null}},e.prototype.convertTimestamp=function(t){var n=jo(t);return new kn(n.seconds,n.nanos)},e.prototype.convertDocumentKey=function(t,n){var r=Vt.fromString(t);ft(W2(r));var i=new Fg(r.get(1),r.get(3)),s=new ot(r.popFirst(5));return i.isEqual(n)||De("Document "+s+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),s},e}();$8=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return ut(t,e),t.prototype.convertBytes=function(n){return new na(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new ce(this.firestore,null,r)},t}(hT),H8=function(){function e(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ua(t)}return e.prototype.set=function(t,n,r){this._verifyNotCommitted();var i=Mo(t,this._firestore),s=Jg(i.converter,n,r),a=Xg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,yn.none())),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this._verifyNotCommitted();var a,c=Mo(t,this._firestore);return a=typeof(n=Ie(n))=="string"||n instanceof vi?uT(this._dataReader,"WriteBatch.update",c._key,n,r,i):aT(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(a.toMutation(c._key,yn.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var n=Mo(t,this._firestore);return this._mutations=this._mutations.concat(new Ad(n._key,yn.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new U(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();Js=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return ut(t,e),t.prototype.convertBytes=function(n){return new na(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new ce(this.firestore,null,r)},t}(hT);W8=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this)._firestore=n,i}return ut(t,e),t.prototype.get=function(n){var r=this,i=Mo(n,this._firestore),s=new Js(this._firestore);return e.prototype.get.call(this,n).then(function(a){return new Gi(r._firestore,s,i._key,a._document,new Qs(!1,!1),i.converter)})},t}(function(){function e(t,n){this._firestore=t,this._transaction=n,this._dataReader=ua(t)}return e.prototype.get=function(t){var n=this,r=Mo(t,this._firestore),i=new $8(this._firestore);return this._transaction.lookup([r._key]).then(function(s){if(!s||s.length!==1)return rt();var a=s[0];if(a.isFoundDocument())return new yd(n._firestore,i,a.key,a,r.converter);if(a.isNoDocument())return new yd(n._firestore,i,r._key,null,r.converter);throw rt()})},e.prototype.set=function(t,n,r){var i=Mo(t,this._firestore),s=Jg(i.converter,n,r),a=Xg(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,a),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var a,c=Mo(t,this._firestore);return a=typeof(n=Ie(n))=="string"||n instanceof vi?uT(this._dataReader,"Transaction.update",c._key,n,r,i):aT(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,a),this},e.prototype.delete=function(t){var n=Mo(t,this._firestore);return this._transaction.delete(n._key),this},e}());dT=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return f2(),new e(na.fromBase64String(t))},e.fromUint8Array=function(t){return d2(),new e(na.fromUint8Array(t))},e.prototype.toBase64=function(){return f2(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return d2(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),tF=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){i2(r=Ut(r,ke));var s=vn(r),a=r._freezeSettings(),c=new IE;return r2(s,c,new RL(c,a.cacheSizeBytes,i?.forceOwnership))}(t._delegate,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){i2(n=Ut(n,ke));var r=vn(n),i=n._freezeSettings(),s=new IE;return r2(r,s,new T8(s,i.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new U(C.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new bn;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return O(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,function(c){return O(this,void 0,void 0,function(){var l;return N(this,function(d){switch(d.label){case 0:return ec.yt()?(l=c+"main",[4,ec.delete(l)]):[2,Promise.resolve()];case 1:return d.sent(),[2]}})})}(BE(n._databaseId,n._persistenceKey))];case 1:return a.sent(),i.resolve(),[3,3];case 2:return s=a.sent(),i.reject(s),[3,3];case 3:return[2]}})})}),i.promise}(t._delegate)},e}(),fT=function(){function e(t,n,r){var i=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Fg||(this.tu=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var n=this._delegate._getSettings();t.merge||n.host===t.host||Ag("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},n),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),function(i,s,a,c){var l;c===void 0&&(c={});var d=(i=Ut(i,vd))._getSettings();if(d.host!=="firestore.googleapis.com"&&d.host!==s&&Ag("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:s+":"+a,ssl:!1})),c.mockUserToken){var p,g;if(typeof c.mockUserToken=="string")p=c.mockUserToken,g=sn.MOCK_USER;else{p=bN(c.mockUserToken,(l=i._app)===null||l===void 0?void 0:l.options.projectId);var v=c.mockUserToken.sub||c.mockUserToken.user_id;if(!v)throw new U(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new sn(v)}i._credentials=new R8(new OL(p,g))}}(this._delegate,t,n,r)},e.prototype.enableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return O(n,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return[4,HM(t)];case 1:return r=s.sent(),[4,WM(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!0),function(a){var c=Q(a);return c.Or.delete(0),Sd(c)}(i))]}})})})}(vn(Ut(this._delegate,ke)))},e.prototype.disableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return O(n,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return[4,HM(t)];case 1:return r=s.sent(),[4,WM(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!1),function(a){return O(this,void 0,void 0,function(){var c;return N(this,function(l){switch(l.label){case 0:return(c=Q(a)).Or.add(0),[4,fc(c)];case 1:return l.sent(),c.Br.set("Offline"),[2]}})})}(i))]}})})})}(vn(Ut(this._delegate,ke)))},e.prototype.enablePersistence=function(t){var n=!1,r=!1;return t&&ML("synchronizeTabs",n=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new bn;return t.asyncQueue.enqueueAndForget(function(){return O(n,void 0,void 0,function(){var i;return N(this,function(s){switch(s.label){case 0:return i=f8,[4,NL(t)];case 1:return[2,i.apply(void 0,[s.sent(),r])]}})})}),r.promise}(vn(Ut(this._delegate,ke)))},e.prototype.onSnapshotsInSync=function(t){return function(n,r){return function(i,s){var a=this,c=new Wg(s);return i.asyncQueue.enqueueAndForget(function(){return O(a,void 0,void 0,function(){var l;return N(this,function(d){switch(d.label){case 0:return l=function(p,g){Q(p).Gr.add(g),g.next()},[4,ac(i)];case 1:return[2,l.apply(void 0,[d.sent(),c])]}})})}),function(){c.Wo(),i.asyncQueue.enqueueAndForget(function(){return O(a,void 0,void 0,function(){var l;return N(this,function(d){switch(d.label){case 0:return l=function(p,g){Q(p).Gr.delete(g)},[4,ac(i)];case 1:return[2,l.apply(void 0,[d.sent(),c])]}})})})}}(vn(n=Ut(n,ke)),uc(r)?r:{next:r})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new U(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new bd(this,LL(this._delegate,t))}catch(n){throw Dn(n,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Vo(this,Tg(this._delegate,t))}catch(n){throw Dn(n,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Dd(this,function(n,r){if(n=Ut(n,vd),iT("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new U(C.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new pr(n,null,function(i){return new Ki(Vt.emptyPath(),i)}(r))}(this._delegate,t))}catch(n){throw Dn(n,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var n=this;return function(r,i){return function(s,a){var c=this,l=new bn;return s.asyncQueue.enqueueAndForget(function(){return O(c,void 0,void 0,function(){var d;return N(this,function(p){switch(p.label){case 0:return[4,function(g){return Qg(g).then(function(v){return v.datastore})}(s)];case 1:return d=p.sent(),new S8(s.asyncQueue,d,a,l).run(),[2]}})})}),l.promise}(vn(r),function(s){return i(new W8(r,s))})}(this._delegate,function(r){return t(new pT(n,r))})},e.prototype.batch=function(){var t=this;return vn(this._delegate),new mT(new H8(this._delegate,function(n){return Rd(t._delegate,n)}))},e.prototype.loadBundle=function(t){throw new U(C.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new U(C.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),Zg=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return ut(t,e),t.prototype.convertBytes=function(n){return new dT(new na(n))},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return Vo.eu(r,this.firestore,null)},t}(hT);pT=function(){function e(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new Zg(t)}return e.prototype.get=function(t){var n=this,r=Ys(t);return this._delegate.get(r).then(function(i){return new cc(n._firestore,new Gi(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},e.prototype.set=function(t,n,r){var i=Ys(t);return r?(oT("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];var c=Ys(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,re([c,n,r],s)),this},e.prototype.delete=function(t){var n=Ys(t);return this._delegate.delete(n),this},e}(),mT=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,n,r){var i=Ys(t);return r?(oT("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];var c=Ys(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,re([c,n,r],s)),this},e.prototype.delete=function(t){var n=Ys(t);return this._delegate.delete(n),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),tv=function(){function e(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}return e.prototype.fromFirestore=function(t,n){var r=new cd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new lc(this._firestore,r),n??{})},e.prototype.toFirestore=function(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var s=i.get(n);return s||(s=new e(t,new Zg(t),n),i.set(n,s)),s},e}();tv.su=new WeakMap;Vo=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Zg(t)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new U(C.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new ce(n._delegate,r,new ot(t)))},e.eu=function(t,n,r){return new e(n,new ce(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new bd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new bd(this.firestore,LL(this._delegate,t))}catch(n){throw Dn(n,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=Ie(t))instanceof ce&&FL(this._delegate,t)},e.prototype.set=function(t,n){n=oT("DocumentReference.set",n);try{return n?l2(this._delegate,t,n):l2(this._delegate,t)}catch(r){throw Dn(r,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?h2(this._delegate,t):h2.apply(void 0,re([this._delegate,t,n],r))}catch(s){throw Dn(s,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Rd(Ut((t=this._delegate).firestore,ke),[new Ad(t._key,yn.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=nF(n),s=rF(n,function(a){return new cc(t.firestore,new Gi(t.firestore._delegate,t._userDataWriter,a._key,a._document,a.metadata,t._delegate.converter))});return ZL(this._delegate,i,s)},e.prototype.get=function(t){var n=this;return(t?.source==="cache"?function(r){r=Ut(r,ce);var i=Ut(r.firestore,ke),s=vn(i),a=new Js(i);return function(c,l){var d=this,p=new bn;return c.asyncQueue.enqueueAndForget(function(){return O(d,void 0,void 0,function(){var g;return N(this,function(v){switch(v.label){case 0:return g=function(b,_,I){return O(this,void 0,void 0,function(){var T,S;return N(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,,3]),[4,function(k,z){var H=Q(k);return H.persistence.runTransaction("read document","readonly",function(L){return H.Mn.mn(L,z)})}(b,_)];case 1:return(S=M.sent()).isFoundDocument()?I.resolve(S):S.isNoDocument()?I.resolve(null):I.reject(new U(C.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return T=M.sent(),S=gc(T,"Failed to get document '"+_+" from cache"),I.reject(S),[3,3];case 3:return[2]}})})},[4,PL(c)];case 1:return[2,g.apply(void 0,[v.sent(),l,p])]}})})}),p.promise}(s,r._key).then(function(c){return new Gi(i,a,r._key,c,new Qs(c!==null&&c.hasLocalMutations,!0),r.converter)})}(this._delegate):t?.source==="server"?function(r){r=Ut(r,ce);var i=Ut(r.firestore,ke);return QM(vn(i),r._key,{source:"server"}).then(function(s){return TE(i,r,s)})}(this._delegate):function(r){r=Ut(r,ce);var i=Ut(r.firestore,ke);return QM(vn(i),r._key).then(function(s){return TE(i,r,s)})}(this._delegate)).then(function(r){return new cc(n.firestore,new Gi(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(tv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();cc=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"ref",{get:function(){return new Vo(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,n){return this._delegate.get(t,n)},e.prototype.isEqual=function(t){return QL(this._delegate,t._delegate)},e}(),lc=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ut(t,e),t.prototype.data=function(n){return this._delegate.data(n)},t}(cc),Dd=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Zg(t)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Do(this._delegate,function(i,s,a){var c=s,l=jg("where",i);return new G8(l,c,a)}(t,n,r)))}catch(i){throw Dn(i,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Do(this._delegate,function(r,i){i===void 0&&(i="asc");var s=i,a=jg("orderBy",r);return new K8(a,s)}(t,n)))}catch(r){throw Dn(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Do(this._delegate,function(n){return e2("limit",n),new o2("limit",n,"F")}(t)))}catch(n){throw Dn(n,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Do(this._delegate,function(n){return e2("limitToLast",n),new o2("limitToLast",n,"L")}(t)))}catch(n){throw Dn(n,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Do(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new s2("startAt",r,!0)}).apply(void 0,t)))}catch(r){throw Dn(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Do(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new s2("startAfter",r,!1)}).apply(void 0,t)))}catch(r){throw Dn(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Do(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new a2("endBefore",r,!0)}).apply(void 0,t)))}catch(r){throw Dn(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Do(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new a2("endAt",r,!1)}).apply(void 0,t)))}catch(r){throw Dn(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return VL(this._delegate,t._delegate)},e.prototype.get=function(t){var n=this;return(t?.source==="cache"?function(r){r=Ut(r,pr);var i=Ut(r.firestore,ke),s=vn(i),a=new Js(i);return function(c,l){var d=this,p=new bn;return c.asyncQueue.enqueueAndForget(function(){return O(d,void 0,void 0,function(){var g;return N(this,function(v){switch(v.label){case 0:return g=function(b,_,I){return O(this,void 0,void 0,function(){var T,S,M,k,z;return N(this,function(H){switch(H.label){case 0:return H.trys.push([0,2,,3]),[4,Og(b,_,!0)];case 1:return z=H.sent(),T=new TL(_,z.Bn),S=T._o(z.documents),M=T.applyChanges(S,!1),I.resolve(M.snapshot),[3,3];case 2:return k=H.sent(),z=gc(k,"Failed to execute query '"+_+" against cache"),I.reject(z),[3,3];case 3:return[2]}})})},[4,PL(c)];case 1:return[2,g.apply(void 0,[v.sent(),l,p])]}})})}),p.promise}(s,r._query).then(function(c){return new Oo(i,a,r,c)})}(this._delegate):t?.source==="server"?function(r){r=Ut(r,pr);var i=Ut(r.firestore,ke),s=vn(i),a=new Js(i);return YM(s,r._query,{source:"server"}).then(function(c){return new Oo(i,a,r,c)})}(this._delegate):function(r){r=Ut(r,pr);var i=Ut(r.firestore,ke),s=vn(i),a=new Js(i);return YL(r._query),YM(s,r._query).then(function(c){return new Oo(i,a,r,c)})}(this._delegate)).then(function(r){return new Ug(n.firestore,new Oo(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=nF(n),s=rF(n,function(a){return new Ug(t.firestore,new Oo(t.firestore._delegate,t._userDataWriter,t._delegate,a._snapshot))});return ZL(this._delegate,i,s)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(tv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),Q8=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new lc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),Ug=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"query",{get:function(){return new Dd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(n){return new lc(t._firestore,n)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var n=this;return this._delegate.docChanges(t).map(function(r){return new Q8(n._firestore,r)})},e.prototype.forEach=function(t,n){var r=this;this._delegate.forEach(function(i){t.call(n,new lc(r._firestore,i))})},e.prototype.isEqual=function(t){return QL(this._delegate,t._delegate)},e}(),bd=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i._delegate=r,i}return ut(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new Vo(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new Vo(this.firestore,n===void 0?Tg(this._delegate):Tg(this._delegate,n))}catch(r){throw Dn(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(i,s){var a=Ut(i.firestore,ke),c=Tg(i),l=Jg(i.converter,s);return Rd(a,[Xg(ua(i.firestore),"addDoc",c._key,l,i.converter!==null,{}).toMutation(c._key,yn.exists(!1))]).then(function(){return c})}(this._delegate,n).then(function(i){return new Vo(r.firestore,i)})},t.prototype.isEqual=function(n){return FL(this._delegate,n._delegate)},t.prototype.withConverter=function(n){return new t(this.firestore,n?this._delegate.withConverter(tv.nu(this.firestore,n)):this._delegate.withConverter(null))},t}(Dd);iF=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._delegate=new(vi.bind.apply(vi,re([void 0],t)))}return e.documentId=function(){return new e($r.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=Ie(t))instanceof vi&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),oF=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new F8("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new sT("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new V8("arrayUnion",i)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new j8("arrayRemove",i)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(r){return new U8("increment",r)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}();});function X8(e){(function(t,n){t.INTERNAL.registerComponent(new Pu("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Y8)))})(e,function(t,n){return new fT(t,new ke(t,n),new tF)}),e.registerVersion("@firebase/firestore","2.4.1")}var Y8,aF=Ur(()=>{"use strict";jh();sF();lI();Vh();Fm();sE();Y8={Firestore:fT,GeoPoint:xd,Timestamp:kn,Blob:dT,Transaction:pT,WriteBatch:mT,DocumentReference:Vo,DocumentSnapshot:cc,Query:Dd,QueryDocumentSnapshot:lc,QuerySnapshot:Ug,CollectionReference:bd,FieldPath:iF,FieldValue:oF,setLogLevel:eF,CACHE_SIZE_UNLIMITED:jL};X8(dt)});var J8={};var uF=Ur(()=>{"use strict";aF()});var d_=class extends Jk{constructor(){super(...arguments),this.supportsDOMEvents=!0}},f_=class e extends d_{static makeCurrent(){Xk(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=c6();return n==null?null:l6(n)}resetBaseElement(){fh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return nP(document.cookie,t)}},fh=null;function c6(){return fh=fh||document.querySelector("base"),fh?fh.getAttribute("href"):null}function l6(e){return new URL(e,document.baseURI).pathname}var p_=class{addToWindow(t){vo.getAngularTestability=(r,i=!0)=>{let s=t.findTestabilityInTree(r,i);if(s==null)throw new we(5103,!1);return s},vo.getAllAngularTestabilities=()=>t.getAllTestabilities(),vo.getAllAngularRootElements=()=>t.getAllRootElements();let n=r=>{let i=vo.getAllAngularTestabilities(),s=i.length,a=function(){s--,s==0&&r()};i.forEach(c=>{c.whenStable(a)})};vo.frameworkStabilizers||(vo.frameworkStabilizers=[]),vo.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,r){if(n==null)return null;let i=t.getTestability(n);return i??(r?lm().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},h6=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:t.\u0275fac});let e=t;return e})(),m_=new kt(""),gP=(()=>{let t=class t{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(a=>a.supports(r)),!i)throw new we(5101,!1);return this._eventNameToPlugin.set(r,i),i}};t.\u0275fac=function(i){return new(i||t)(G(m_),G(qt))},t.\u0275prov=wt({token:t,factory:t.\u0275fac});let e=t;return e})(),fm=class{constructor(t){this._doc=t}},l_="ng-app-id",vP=(()=>{let t=class t{constructor(r,i,s,a={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Fs(a),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${l_}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let a=s.get(r);return a.usage+=i,a.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,a=s?.get(i);if(a?.parentNode===r)return s.delete(i),a.removeAttribute(l_),a;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(l_,this.appId),r.appendChild(c),c}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),a=this.styleRef,c=a.get(i)?.elements;c?c.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(i){return new(i||t)(G(en),G(ih),G(oh,8),G(rr))},t.\u0275prov=wt({token:t,factory:t.\u0275fac});let e=t;return e})(),h_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},v_=/%COMP%/g,yP="%COMP%",d6=`_nghost-${yP}`,f6=`_ngcontent-${yP}`,p6=!0,m6=new kt("",{providedIn:"root",factory:()=>p6});function g6(e){return f6.replace(v_,e)}function v6(e){return d6.replace(v_,e)}function bP(e,t){return t.map(n=>n.replace(v_,e))}var pm=(()=>{let t=class t{constructor(r,i,s,a,c,l,d,p=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=l,this.ngZone=d,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=Fs(l),this.defaultRenderer=new ph(r,c,d,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===nh.ShadowDom&&(i=je(et({},i),{encapsulation:nh.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof mm?s.applyToHost(r):s instanceof mh&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,a=s.get(i.id);if(!a){let c=this.doc,l=this.ngZone,d=this.eventManager,p=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(i.encapsulation){case nh.Emulated:a=new mm(d,p,i,this.appId,g,c,l,v);break;case nh.ShadowDom:return new g_(d,p,r,i,c,l,this.nonce,v);default:a=new mh(d,p,i,g,c,l,v);break}s.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(i){return new(i||t)(G(gP),G(vP),G(ih),G(m6),G(en),G(rr),G(qt),G(oh))},t.\u0275prov=wt({token:t,factory:t.\u0275fac});let e=t;return e})(),ph=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(h_[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(pP(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(pP(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new we(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let s=h_[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=h_[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(sh.DashCase|sh.Important)?t.style.setProperty(n,r,i&sh.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&sh.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=lm().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function pP(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var g_=class extends ph{constructor(t,n,r,i,s,a,c,l){super(t,s,a,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=bP(i.id,i.styles);for(let p of d){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},mh=class extends ph{constructor(t,n,r,i,s,a,c,l){super(t,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?bP(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},mm=class extends mh{constructor(t,n,r,i,s,a,c,l){let d=i+"-"+r.id;super(t,n,r,s,a,c,l,d),this.contentAttr=g6(d),this.hostAttr=v6(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},y6=(()=>{let t=class t extends fm{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};t.\u0275fac=function(i){return new(i||t)(G(en))},t.\u0275prov=wt({token:t,factory:t.\u0275fac});let e=t;return e})(),mP=["alt","control","meta","shift"],b6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},w6={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},_6=(()=>{let t=class t extends fm{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,i,s){let a=t.parseEventName(i),c=t.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>lm().onAndCancel(r,a.domEventName,c))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let a=t._normalizeKey(i.pop()),c="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),c="code."),mP.forEach(p=>{let g=i.indexOf(p);g>-1&&(i.splice(g,1),c+=p+".")}),c+=a,i.length!=0||a.length===0)return null;let d={};return d.domEventName=s,d.fullKey=c,d}static matchEventFullKeyCode(r,i){let s=b6[r.key]||r.key,a="";return i.indexOf("code.")>-1&&(s=r.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),mP.forEach(c=>{if(c!==s){let l=w6[c];l(r)&&(a+=c+".")}}),a+=s,a===i)}static eventCallback(r,i,s){return a=>{t.matchEventFullKeyCode(a,r)&&s.runGuarded(()=>i(a))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(i){return new(i||t)(G(en))},t.\u0275prov=wt({token:t,factory:t.\u0275fac});let e=t;return e})();function I6(){f_.makeCurrent()}function E6(){return new Xw}function T6(){return Mk(document),document}var A6=[{provide:rr,useValue:iP},{provide:Lk,useValue:I6,multi:!0},{provide:en,useFactory:T6,deps:[]}],wP=Hk(Wk,"browser",A6),S6=new kt(""),x6=[{provide:sm,useClass:p_,deps:[]},{provide:Gk,useClass:am,deps:[qt,n_,sm]},{provide:am,useClass:am,deps:[qt,n_,sm]}],C6=[{provide:Ok,useValue:"root"},{provide:Xw,useFactory:E6,deps:[]},{provide:m_,useClass:y6,multi:!0,deps:[en,qt,rr]},{provide:m_,useClass:_6,multi:!0,deps:[en]},pm,vP,gP,{provide:im,useExisting:pm},{provide:aP,useClass:h6,deps:[]},[]],_P=(()=>{let t=class t{constructor(r){}static withServerTransition(r){return{ngModule:t,providers:[{provide:ih,useValue:r.appId}]}}};t.\u0275fac=function(i){return new(i||t)(G(S6,12))},t.\u0275mod=Xt({type:t}),t.\u0275inj=Yt({providers:[...C6,...x6],imports:[rP,Qk]});let e=t;return e})();var IP=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(i){return new(i||t)(G(en))},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Tt="primary",Dh=Symbol("RouteTitle"),I_=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Au(e){return new I_(e)}function D6(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let s=0;s<r.length;s++){let a=r[s],c=e[s];if(a.startsWith(":"))i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function k6(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!di(e[n],t[n]))return!1;return!0}function di(e,t){let n=e?E_(e):void 0,r=t?E_(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!MP(e[i],t[i]))return!1;return!0}function E_(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function MP(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}else return e===t}function LP(e){return e.length>0?e[e.length-1]:null}function To(e){return Tk(e)?e:Kk(e)?be(Promise.resolve(e)):ct(e)}var P6={exact:VP,subset:jP},FP={exact:N6,subset:O6,ignored:()=>!0};function TP(e,t,n){return P6[n.paths](e.root,t.root,n.matrixParams)&&FP[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function N6(e,t){return di(e,t)}function VP(e,t,n){if(!Us(e.segments,t.segments)||!ym(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!VP(e.children[r],t.children[r],n))return!1;return!0}function O6(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>MP(e[n],t[n]))}function jP(e,t,n){return UP(e,t,t.segments,n)}function UP(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Us(i,n)||t.hasChildren()||!ym(i,n,r))}else if(e.segments.length===n.length){if(!Us(e.segments,n)||!ym(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!jP(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!Us(e.segments,i)||!ym(e.segments,i,r)||!e.children[Tt]?!1:UP(e.children[Tt],t,s,r)}}function ym(e,t,n){return t.every((r,i)=>FP[n](e[i].parameters,r.parameters))}var _o=class{constructor(t=new jt([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Au(this.queryParams),this._queryParamMap}toString(){return F6.serialize(this)}},jt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bm(this)}},js=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Au(this.parameters),this._parameterMap}toString(){return qP(this)}};function M6(e,t){return Us(e,t)&&e.every((n,r)=>di(n.parameters,t[r].parameters))}function Us(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function L6(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===Tt&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Tt&&(n=n.concat(t(i,r)))}),n}var kh=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:()=>new Ih,providedIn:"root"});let e=t;return e})(),Ih=class{parse(t){let n=new A_(t);return new _o(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${gh(t.root,!0)}`,r=U6(t.queryParams),i=typeof t.fragment=="string"?`#${V6(t.fragment)}`:"";return`${n}${r}${i}`}},F6=new Ih;function bm(e){return e.segments.map(t=>qP(t)).join("/")}function gh(e,t){if(!e.hasChildren())return bm(e);if(t){let n=e.children[Tt]?gh(e.children[Tt],!1):"",r=[];return Object.entries(e.children).forEach(([i,s])=>{i!==Tt&&r.push(`${i}:${gh(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=L6(e,(r,i)=>i===Tt?[gh(e.children[Tt],!1)]:[`${i}:${gh(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Tt]!=null?`${bm(e)}/${n[0]}`:`${bm(e)}/(${n.join("//")})`}}function BP(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gm(e){return BP(e).replace(/%3B/gi,";")}function V6(e){return encodeURI(e)}function T_(e){return BP(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wm(e){return decodeURIComponent(e)}function AP(e){return wm(e.replace(/\+/g,"%20"))}function qP(e){return`${T_(e.path)}${j6(e.parameters)}`}function j6(e){return Object.entries(e).map(([t,n])=>`;${T_(t)}=${T_(n)}`).join("")}function U6(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${gm(n)}=${gm(i)}`).join("&"):`${gm(n)}=${gm(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var B6=/^[^\/()?;#]+/;function y_(e){let t=e.match(B6);return t?t[0]:""}var q6=/^[^\/()?;=#]+/;function z6(e){let t=e.match(q6);return t?t[0]:""}var G6=/^[^=?&#]+/;function K6(e){let t=e.match(G6);return t?t[0]:""}var $6=/^[^&#]+/;function H6(e){let t=e.match($6);return t?t[0]:""}var A_=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Tt]=new jt(t,n)),r}parseSegment(){let t=y_(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new we(4009,!1);return this.capture(t),new js(wm(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=z6(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=y_(this.remaining);i&&(r=i,this.capture(r))}t[wm(n)]=wm(r)}parseQueryParam(t){let n=K6(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=H6(this.remaining);a&&(r=a,this.capture(r))}let i=AP(n),s=AP(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(s)}else t[i]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=y_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new we(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Tt);let a=this.parseChildren();n[s]=Object.keys(a).length===1?a[Tt]:new jt([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new we(4011,!1)}};function zP(e){return e.segments.length>0?new jt([],{[Tt]:e}):e}function GP(e){let t={};for(let[r,i]of Object.entries(e.children)){let s=GP(i);if(r===Tt&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))t[a]=c;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let n=new jt(e.segments,t);return W6(n)}function W6(e){if(e.numberOfChildren===1&&e.children[Tt]){let t=e.children[Tt];return new jt(e.segments.concat(t.segments),t.children)}return e}function Su(e){return e instanceof _o}function Q6(e,t,n=null,r=null){let i=KP(e);return $P(i,t,n,r)}function KP(e){let t;function n(s){let a={};for(let l of s.children){let d=n(l);a[l.outlet]=d}let c=new jt(s.url,a);return s===e&&(t=c),c}let r=n(e.root),i=zP(r);return t??i}function $P(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return b_(i,i,i,n,r);let s=Y6(t);if(s.toRoot())return b_(i,i,new jt([],{}),n,r);let a=X6(s,i,e),c=a.processChildren?bh(a.segmentGroup,a.index,s.commands):WP(a.segmentGroup,a.index,s.commands);return b_(i,a.segmentGroup,c,n,r)}function _m(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Eh(e){return typeof e=="object"&&e!=null&&e.outlets}function b_(e,t,n,r,i){let s={};r&&Object.entries(r).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let a;e===t?a=n:a=HP(e,t,n);let c=zP(GP(a));return new _o(c,s,i)}function HP(e,t,n){let r={};return Object.entries(e.children).forEach(([i,s])=>{s===t?r[i]=n:r[i]=HP(s,t,n)}),new jt(e.segments,r)}var Im=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&_m(r[0]))throw new we(4003,!1);let i=r.find(Eh);if(i&&i!==LP(r))throw new we(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Y6(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Im(!0,0,e);let t=0,n=!1,r=e.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?n=!0:c===".."?t++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Im(n,t,r)}var Eu=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function X6(e,t,n){if(e.isAbsolute)return new Eu(t,!0,0);if(!n)return new Eu(t,!1,NaN);if(n.parent===null)return new Eu(n,!0,0);let r=_m(e.commands[0])?0:1,i=n.segments.length-1+r;return J6(n,i,e.numberOfDoubleDots)}function J6(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new we(4005,!1);i=r.segments.length}return new Eu(r,!1,i-s)}function Z6(e){return Eh(e[0])?e[0].outlets:{[Tt]:e}}function WP(e,t,n){if(e??=new jt([],{}),e.segments.length===0&&e.hasChildren())return bh(e,t,n);let r=tG(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let s=new jt(e.segments.slice(0,r.pathIndex),{});return s.children[Tt]=new jt(e.segments.slice(r.pathIndex),e.children),bh(s,0,i)}else return r.match&&i.length===0?new jt(e.segments,{}):r.match&&!e.hasChildren()?S_(e,t,n):r.match?bh(e,0,i):S_(e,t,n)}function bh(e,t,n){if(n.length===0)return new jt(e.segments,{});{let r=Z6(n),i={};if(Object.keys(r).some(s=>s!==Tt)&&e.children[Tt]&&e.numberOfChildren===1&&e.children[Tt].segments.length===0){let s=bh(e.children[Tt],t,n);return new jt(e.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=WP(e.children[s],t,a))}),Object.entries(e.children).forEach(([s,a])=>{r[s]===void 0&&(i[s]=a)}),new jt(e.segments,i)}}function tG(e,t,n){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;let a=e.segments[i],c=n[r];if(Eh(c))break;let l=`${c}`,d=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!xP(l,d,a))return s;r+=2}else{if(!xP(l,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function S_(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let s=n[i];if(Eh(s)){let l=eG(s.outlets);return new jt(r,l)}if(i===0&&_m(n[0])){let l=e.segments[t];r.push(new js(l.path,SP(n[0]))),i++;continue}let a=Eh(s)?s.outlets[Tt]:`${s}`,c=i<n.length-1?n[i+1]:null;a&&c&&_m(c)?(r.push(new js(a,SP(c))),i+=2):(r.push(new js(a,{})),i++)}return new jt(r,{})}function eG(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=S_(new jt([],{}),0,r))}),t}function SP(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function xP(e,t,n){return e==n.path&&di(t,n.parameters)}var wh="imperative",$e=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}($e||{}),Tr=class{constructor(t,n){this.id=t,this.url=n}},xu=class extends Tr{constructor(t,n,r="imperative",i=null){super(t,n),this.type=$e.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ji=class extends Tr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=$e.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},sr=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(sr||{}),Em=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Em||{}),Io=class extends Tr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=$e.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Eo=class extends Tr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=$e.NavigationSkipped}},Th=class extends Tr{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=$e.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Tm=class extends Tr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},x_=class extends Tr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C_=class extends Tr{constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=$e.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},R_=class extends Tr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},D_=class extends Tr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},k_=class{constructor(t){this.route=t,this.type=$e.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},P_=class{constructor(t){this.route=t,this.type=$e.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},N_=class{constructor(t){this.snapshot=t,this.type=$e.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},O_=class{constructor(t){this.snapshot=t,this.type=$e.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},M_=class{constructor(t){this.snapshot=t,this.type=$e.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},L_=class{constructor(t){this.snapshot=t,this.type=$e.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Am=class{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=$e.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Ah=class{},Sh=class{constructor(t){this.url=t}};var F_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ph,this.attachRef=null}},Ph=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new F_,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Sm=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=V_(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=V_(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=j_(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return j_(t,this._root).map(n=>n.value)}};function V_(e,t){if(e===t.value)return t;for(let n of t.children){let r=V_(e,n);if(r)return r}return null}function j_(e,t){if(e===t.value)return[t];for(let n of t.children){let r=j_(e,n);if(r.length)return r.unshift(t),r}return[]}var or=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Iu(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var xm=class extends Sm{constructor(t,n){super(t),this.snapshot=n,J_(this,t)}toString(){return this.snapshot.toString()}};function QP(e){let t=nG(e),n=new Ir([new js("",{})]),r=new Ir({}),i=new Ir({}),s=new Ir({}),a=new Ir(""),c=new Cu(n,r,s,a,i,Tt,e,t.root);return c.snapshot=t.root,new xm(new or(c,[]),t)}function nG(e){let t={},n={},r={},i="",s=new xh([],t,r,i,n,Tt,e,null,{});return new Cm("",new or(s,[]))}var Cu=class{constructor(t,n,r,i,s,a,c,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(yt(d=>d[Dh]))??ct(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(yt(t=>Au(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(yt(t=>Au(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function X_(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:et(et({},t.params),e.params),data:et(et({},t.data),e.data),resolve:et(et(et(et({},e.data),t.data),i?.data),e._resolvedData)}:r={params:et({},e.params),data:et({},e.data),resolve:et(et({},e.data),e._resolvedData??{})},i&&XP(i)&&(r.resolve[Dh]=i.title),r}var xh=class{get title(){return this.data?.[Dh]}constructor(t,n,r,i,s,a,c,l,d){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Au(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Au(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Cm=class extends Sm{constructor(t,n){super(n),this.url=t,J_(this,n)}toString(){return YP(this._root)}};function J_(e,t){t.value._routerState=e,t.children.forEach(n=>J_(e,n))}function YP(e){let t=e.children.length>0?` { ${e.children.map(YP).join(", ")} } `:"";return`${e.value}${t}`}function w_(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,di(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),di(t.params,n.params)||e.paramsSubject.next(n.params),k6(t.url,n.url)||e.urlSubject.next(n.url),di(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function U_(e,t){let n=di(e.params,t.params)&&M6(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||U_(e.parent,t.parent))}function XP(e){return typeof e.title=="string"||e.title===null}var Z_=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new Ls,this.deactivateEvents=new Ls,this.attachEvents=new Ls,this.detachEvents=new Ls,this.parentContexts=lt(Ph),this.location=lt(Uk),this.changeDetector=lt(cm),this.environmentInjector=lt(rh),this.inputBinder=lt(Nm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new we(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new we(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new we(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new we(4013,!1);this._activatedRoute=r;let s=this.location,c=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new B_(r,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:d,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Ms({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ww]});let e=t;return e})(),B_=class{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Cu?this.route:t===Ph?this.childContexts:this.parent.get(t,n)}},Nm=new kt(""),CP=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=gu([i.queryParams,i.params,i.data]).pipe(Ge(([a,c,l],d)=>(l=et(et(et({},a),c),l),d===0?ct(l):Promise.resolve(l)))).subscribe(a=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let c=Yk(i.component);if(!c){this.unsubscribeFromRouteData(r);return}for(let{templateName:l}of c.inputs)r.activatedComponentRef.setInput(l,a[l])});this.outletDataSubscriptions.set(r,s)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:t.\u0275fac});let e=t;return e})();function rG(e,t,n){let r=Ch(e,t._root,n?n._root:void 0);return new xm(r,t)}function Ch(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=iG(e,t,n);return new or(r,i)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(c=>Ch(e,c)),a}}let r=oG(t.value),i=t.children.map(s=>Ch(e,s));return new or(r,i)}}function iG(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Ch(e,r,i);return Ch(e,r)})}function oG(e){return new Cu(new Ir(e.url),new Ir(e.params),new Ir(e.queryParams),new Ir(e.fragment),new Ir(e.data),e.outlet,e.component,e)}var JP="ngNavigationCancelingError";function ZP(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Su(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=tN(!1,sr.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function tN(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[JP]=!0,n.cancellationCode=t,n}function sG(e){return eN(e)&&Su(e.url)}function eN(e){return!!e&&e[JP]}var aG=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["ng-component"]],standalone:!0,features:[uh],decls:1,vars:0,template:function(i,s){i&1&&xt(0,"router-outlet")},dependencies:[Z_],encapsulation:2});let e=t;return e})();function uG(e,t){return e.providers&&!e._injector&&(e._injector=t_(e.providers,t,`Route: ${e.path}`)),e._injector??t}function tI(e){let t=e.children&&e.children.map(tI),n=t?je(et({},e),{children:t}):et({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Tt&&(n.component=aG),n}function fi(e){return e.outlet||Tt}function cG(e,t){let n=e.filter(r=>fi(r)===t);return n.push(...e.filter(r=>fi(r)!==t)),n}function Nh(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var lG=(e,t,n,r)=>yt(i=>(new q_(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),q_=class{constructor(t,n,r,i,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),w_(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Iu(n);t.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(i===s)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Iu(t);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:c})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Iu(t);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Iu(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new L_(s.value.snapshot))}),t.children.length&&this.forwardEvent(new O_(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(w_(i),i===s)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),w_(c.route.value),this.activateChildRoutes(t,null,a.children)}else{let c=Nh(i.snapshot);a.attachRef=null,a.route=i,a.injector=c,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}},Rm=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Tu=class{constructor(t,n){this.component=t,this.route=n}};function hG(e,t,n){let r=e._root,i=t?t._root:null;return vh(r,i,n,[r.value])}function dG(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Du(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Pk(e)?e:t.get(e):r}function vh(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Iu(t);return e.children.forEach(a=>{fG(a,s[a.value.outlet],n,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>_h(c,n.getContext(a),i)),i}function fG(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,a=t?t.value:null,c=n?n.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let l=pG(a,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Rm(r)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?vh(e,t,c?c.children:null,r,i):vh(e,t,n,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Tu(c.outlet.component,a))}else a&&_h(t,c,i),i.canActivateChecks.push(new Rm(r)),s.component?vh(e,null,c?c.children:null,r,i):vh(e,null,n,r,i);return i}function pG(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Us(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Us(e.url,t.url)||!di(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!U_(e,t)||!di(e.queryParams,t.queryParams);case"paramsChange":default:return!U_(e,t)}}function _h(e,t,n){let r=Iu(e),i=e.value;Object.entries(r).forEach(([s,a])=>{i.component?t?_h(a,t.children.getContext(s),n):_h(a,null,n):_h(a,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Tu(t.outlet.component,i)):n.canDeactivateChecks.push(new Tu(null,i)):n.canDeactivateChecks.push(new Tu(null,i))}function Oh(e){return typeof e=="function"}function mG(e){return typeof e=="boolean"}function gG(e){return e&&Oh(e.canLoad)}function vG(e){return e&&Oh(e.canActivate)}function yG(e){return e&&Oh(e.canActivateChild)}function bG(e){return e&&Oh(e.canDeactivate)}function wG(e){return e&&Oh(e.canMatch)}function nN(e){return e instanceof Ak||e?.name==="EmptyError"}var vm=Symbol("INITIAL_VALUE");function Ru(){return Ge(e=>gu(e.map(t=>t.pipe(mo(1),go(vm)))).pipe(yt(t=>{for(let n of t)if(n!==!0){if(n===vm)return vm;if(n===!1||n instanceof _o)return n}return!0}),Er(t=>t!==vm),mo(1)))}function _G(e,t){return nr(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return a.length===0&&s.length===0?ct(je(et({},n),{guardsResult:!0})):IG(a,r,i,e).pipe(nr(c=>c&&mG(c)?EG(r,s,e,t):ct(c)),yt(c=>je(et({},n),{guardsResult:c})))})}function IG(e,t,n,r){return be(e).pipe(nr(i=>CG(i.component,i.route,n,t,r)),ui(i=>i!==!0,!0))}function EG(e,t,n,r){return be(t).pipe(yu(i=>Zp(AG(i.route.parent,r),TG(i.route,r),xG(e,i.path,n),SG(e,i.route,n))),ui(i=>i!==!0,!0))}function TG(e,t){return e!==null&&t&&t(new M_(e)),ct(!0)}function AG(e,t){return e!==null&&t&&t(new N_(e)),ct(!0)}function SG(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return ct(!0);let i=r.map(s=>qw(()=>{let a=Nh(t)??n,c=Du(s,a),l=vG(c)?c.canActivate(t,e):yo(a,()=>c(t,e));return To(l).pipe(ui())}));return ct(i).pipe(Ru())}function xG(e,t,n){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>dG(a)).filter(a=>a!==null).map(a=>qw(()=>{let c=a.guards.map(l=>{let d=Nh(a.node)??n,p=Du(l,d),g=yG(p)?p.canActivateChild(r,e):yo(d,()=>p(r,e));return To(g).pipe(ui())});return ct(c).pipe(Ru())}));return ct(s).pipe(Ru())}function CG(e,t,n,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return ct(!0);let a=s.map(c=>{let l=Nh(t)??i,d=Du(c,l),p=bG(d)?d.canDeactivate(e,t,n,r):yo(l,()=>d(e,t,n,r));return To(p).pipe(ui())});return ct(a).pipe(Ru())}function RG(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return ct(!0);let s=i.map(a=>{let c=Du(a,e),l=gG(c)?c.canLoad(t,n):yo(e,()=>c(t,n));return To(l)});return ct(s).pipe(Ru(),rN(r))}function rN(e){return Ik(Ke(t=>{if(Su(t))throw ZP(e,t)}),yt(t=>t===!0))}function DG(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return ct(!0);let s=i.map(a=>{let c=Du(a,e),l=wG(c)?c.canMatch(t,n):yo(e,()=>c(t,n));return To(l)});return ct(s).pipe(Ru(),rN(r))}var Rh=class{constructor(t){this.segmentGroup=t||null}},Dm=class extends Error{constructor(t){super(),this.urlTree=t}};function _u(e){return th(new Rh(e))}function kG(e){return th(new we(4e3,!1))}function PG(e){return th(tN(!1,sr.GuardRejected))}var z_=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ct(r);if(i.numberOfChildren>1||!i.children[Tt])return kG(t.redirectTo);i=i.children[Tt]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new Dm(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let s=this.createSegmentGroup(t,n.root,r,i);return new _o(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);r[i]=n[c]}else r[i]=s}),r}createSegmentGroup(t,n,r,i){let s=this.createSegments(t,n.segments,r,i),a={};return Object.entries(n.children).forEach(([c,l])=>{a[c]=this.createSegmentGroup(t,l,r,i)}),new jt(s,a)}createSegments(t,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new we(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},G_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NG(e,t,n,r,i){let s=eI(e,t,n);return s.matched?(r=uG(t,r),DG(r,t,n,i).pipe(yt(a=>a===!0?s:et({},G_)))):ct(s)}function eI(e,t,n){if(t.path==="**")return OG(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?et({},G_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||D6)(n,e,t);if(!i)return et({},G_);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let a=i.consumed.length>0?et(et({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function OG(e){return{matched:!0,parameters:e.length>0?LP(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function RP(e,t,n,r){return n.length>0&&FG(e,n,r)?{segmentGroup:new jt(t,LG(r,new jt(n,e.children))),slicedSegments:[]}:n.length===0&&VG(e,n,r)?{segmentGroup:new jt(e.segments,MG(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new jt(e.segments,e.children),slicedSegments:n}}function MG(e,t,n,r){let i={};for(let s of n)if(Om(e,t,s)&&!r[fi(s)]){let a=new jt([],{});i[fi(s)]=a}return et(et({},r),i)}function LG(e,t){let n={};n[Tt]=t;for(let r of e)if(r.path===""&&fi(r)!==Tt){let i=new jt([],{});n[fi(r)]=i}return n}function FG(e,t,n){return n.some(r=>Om(e,t,r)&&fi(r)!==Tt)}function VG(e,t,n){return n.some(r=>Om(e,t,r))}function Om(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function jG(e,t,n,r){return fi(e)!==r&&(r===Tt||!Om(t,n,e))?!1:eI(t,e,n).matched}function UG(e,t,n){return t.length===0&&!e.children[n]}var K_=class{};function BG(e,t,n,r,i,s,a="emptyOnly"){return new $_(e,t,n,r,i,a,s).recognize()}var qG=31,$_=class{constructor(t,n,r,i,s,a,c){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new z_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new we(4002,`'${t.segmentGroup}'`)}recognize(){let t=RP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(yt(n=>{let r=new xh([],Object.freeze({}),Object.freeze(et({},this.urlTree.queryParams)),this.urlTree.fragment,{},Tt,this.rootComponentType,null,{}),i=new or(r,n),s=new Cm("",i),a=Q6(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(s._root,null),{state:s,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Tt).pipe(vu(r=>{if(r instanceof Dm)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Rh?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=X_(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(yt(s=>s instanceof or?[s]:[]))}processChildren(t,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return be(i).pipe(yu(s=>{let a=r.children[s],c=cG(n,s);return this.processSegmentGroup(t,c,a,s)}),bu((s,a)=>(s.push(...a),s)),zw(null),Dk(),nr(s=>{if(s===null)return _u(r);let a=iN(s);return zG(a),ct(a)}))}processSegment(t,n,r,i,s,a){return be(n).pipe(yu(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,s,a).pipe(vu(l=>{if(l instanceof Rh)return ct(null);throw l}))),ui(c=>!!c),vu(c=>{if(nN(c))return UG(r,i,s)?ct(new K_):_u(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,s,a,c){return jG(r,i,s,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,a):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,s,a):_u(i):_u(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a){let{matched:c,consumedSegments:l,positionalParamSegments:d,remainingSegments:p}=eI(n,i,s);if(!c)return _u(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>qG&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d);return this.applyRedirects.lineralizeSegments(i,g).pipe(nr(v=>this.processSegment(t,r,n,v.concat(p),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,s){let a=NG(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Ge(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Ge(({routes:l})=>{let d=r._loadedInjector??t,{consumedSegments:p,remainingSegments:g,parameters:v}=c,b=new xh(p,v,Object.freeze(et({},this.urlTree.queryParams)),this.urlTree.fragment,KG(r),fi(r),r.component??r._loadedComponent??null,r,$G(r)),{segmentGroup:_,slicedSegments:I}=RP(n,p,g,l);if(I.length===0&&_.hasChildren())return this.processChildren(d,l,_).pipe(yt(S=>S===null?null:new or(b,S)));if(l.length===0&&I.length===0)return ct(new or(b,[]));let T=fi(r)===s;return this.processSegment(d,l,_,I,T?Tt:s,!0).pipe(yt(S=>new or(b,S instanceof or?[S]:[])))}))):_u(n)))}getChildConfig(t,n,r){return n.children?ct({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?ct({routes:n._loadedRoutes,injector:n._loadedInjector}):RG(t,n,r,this.urlSerializer).pipe(nr(i=>i?this.configLoader.loadChildren(t,n).pipe(Ke(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):PG(n))):ct({routes:[],injector:t})}};function zG(e){e.sort((t,n)=>t.value.outlet===Tt?-1:n.value.outlet===Tt?1:t.value.outlet.localeCompare(n.value.outlet))}function GG(e){let t=e.value.routeConfig;return t&&t.path===""}function iN(e){let t=[],n=new Set;for(let r of e){if(!GG(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=iN(r.children);t.push(new or(r.value,i))}return t.filter(r=>!n.has(r))}function KG(e){return e.data||{}}function $G(e){return e.resolve||{}}function HG(e,t,n,r,i,s){return nr(a=>BG(e,t,n,r,a.extractedUrl,i,s).pipe(yt(({state:c,tree:l})=>je(et({},a),{targetSnapshot:c,urlAfterRedirects:l}))))}function WG(e,t){return nr(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ct(n);let s=new Set(i.map(l=>l.route)),a=new Set;for(let l of s)if(!a.has(l))for(let d of oN(l))a.add(d);let c=0;return be(a).pipe(yu(l=>s.has(l)?QG(l,r,e,t):(l.data=X_(l,l.parent,e).resolve,ct(void 0))),Ke(()=>c++),Gw(1),nr(l=>c===a.size?ct(n):po))})}function oN(e){let t=e.children.map(n=>oN(n)).flat();return[e,...t]}function QG(e,t,n,r){let i=e.routeConfig,s=e._resolve;return i?.title!==void 0&&!XP(i)&&(s[Dh]=i.title),YG(s,e,t,r).pipe(yt(a=>(e._resolvedData=a,e.data=X_(e,e.parent,n).resolve,null)))}function YG(e,t,n,r){let i=E_(e);if(i.length===0)return ct({});let s={};return be(i).pipe(nr(a=>XG(e[a],t,n,r).pipe(ui(),Ke(c=>{s[a]=c}))),Gw(1),Ck(s),vu(a=>nN(a)?po:th(a)))}function XG(e,t,n,r){let i=Nh(t)??r,s=Du(e,i),a=s.resolve?s.resolve(t,n):yo(i,()=>s(t,n));return To(a)}function __(e){return Ge(t=>{let n=e(t);return n?be(n).pipe(yt(()=>t)):ct(t)})}var sN=(()=>{let t=class t{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(a=>a.outlet===Tt);return i}getResolvedTitleForRoute(r){return r.data[Dh]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:()=>lt(JG),providedIn:"root"});let e=t;return e})(),JG=(()=>{let t=class t extends sN{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};t.\u0275fac=function(i){return new(i||t)(G(IP))},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Mh=new kt("",{providedIn:"root",factory:()=>({})}),km=new kt(""),nI=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=lt(um)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ct(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=To(r.loadComponent()).pipe(yt(aN),Ke(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),tm(()=>{this.componentLoaders.delete(r)})),s=new Uw(i,()=>new Br).pipe(jw());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=ZG(i,this.compiler,r,this.onLoadEndListener).pipe(tm(()=>{this.childrenLoaders.delete(i)})),c=new Uw(a,()=>new Br).pipe(jw());return this.childrenLoaders.set(i,c),c}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ZG(e,t,n,r){return To(e.loadChildren()).pipe(yt(aN),nr(i=>i instanceof Bk||Array.isArray(i)?ct(i):be(t.compileModuleAsync(i))),yt(i=>{r&&r(e);let s,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(s=i.create(n).injector,a=s.get(km,[],{optional:!0,self:!0}).flat()),{routes:a.map(tI),injector:s}}))}function tK(e){return e&&typeof e=="object"&&"default"in e}function aN(e){return tK(e)?e.default:e}var rI=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:()=>lt(eK),providedIn:"root"});let e=t;return e})(),eK=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),uN=new kt(""),cN=new kt("");function nK(e,t,n){let r=e.get(cN),i=e.get(en);return e.get(qt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,a=new Promise(d=>{s=d}),c=i.startViewTransition(()=>(s(),rK(e))),{onViewTransitionCreated:l}=r;return l&&yo(e,()=>l({transition:c,from:t,to:n})),a})}function rK(e){return new Promise(t=>{jk(t,{injector:e})})}var iI=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Br,this.transitionAbortSubject=new Br,this.configLoader=lt(nI),this.environmentInjector=lt(rh),this.urlSerializer=lt(kh),this.rootContexts=lt(Ph),this.location=lt(lh),this.inputBindingEnabled=lt(Nm,{optional:!0})!==null,this.titleStrategy=lt(sN),this.options=lt(Mh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=lt(rI),this.createViewTransition=lt(uN,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ct(void 0),this.rootComponentType=null;let r=s=>this.events.next(new k_(s)),i=s=>this.events.next(new P_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(je(et(et({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ir({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:wh,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Er(a=>a.id!==0),yt(a=>je(et({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Ge(a=>{let c=!1,l=!1;return ct(a).pipe(Ge(d=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",sr.SupersededByNewNavigation),po;this.currentTransition=a,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?je(et({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=d.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!p&&g!=="reload"){let v="";return this.events.next(new Eo(d.id,this.urlSerializer.serialize(d.rawUrl),v,Em.IgnoredSameUrlNavigation)),d.resolve(null),po}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return ct(d).pipe(Ge(v=>{let b=this.transitions?.getValue();return this.events.next(new xu(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),b!==this.transitions?.getValue()?po:Promise.resolve(v)}),HG(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(v=>{a.targetSnapshot=v.targetSnapshot,a.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation=je(et({},this.currentNavigation),{finalUrl:v.urlAfterRedirects});let b=new Tm(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:v,extractedUrl:b,source:_,restoredState:I,extras:T}=d,S=new xu(v,this.urlSerializer.serialize(b),_,I);this.events.next(S);let M=QP(this.rootComponentType).snapshot;return this.currentTransition=a=je(et({},d),{targetSnapshot:M,urlAfterRedirects:b,extras:je(et({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=b,ct(a)}else{let v="";return this.events.next(new Eo(d.id,this.urlSerializer.serialize(d.extractedUrl),v,Em.IgnoredByUrlHandlingStrategy)),d.resolve(null),po}}),Ke(d=>{let p=new x_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),yt(d=>(this.currentTransition=a=je(et({},d),{guards:hG(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),a)),_G(this.environmentInjector,d=>this.events.next(d)),Ke(d=>{if(a.guardsResult=d.guardsResult,Su(d.guardsResult))throw ZP(this.urlSerializer,d.guardsResult);let p=new C_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(p)}),Er(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",sr.GuardRejected),!1)),__(d=>{if(d.guards.canActivateChecks.length)return ct(d).pipe(Ke(p=>{let g=new R_(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}),Ge(p=>{let g=!1;return ct(p).pipe(WG(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(p,"",sr.NoDataFromResolver)}}))}),Ke(p=>{let g=new D_(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}))}),__(d=>{let p=g=>{let v=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(g.routeConfig).pipe(Ke(b=>{g.component=b}),yt(()=>{})));for(let b of g.children)v.push(...p(b));return v};return gu(p(d.targetSnapshot.root)).pipe(zw(null),mo(1))}),__(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:d,targetSnapshot:p}=a,g=this.createViewTransition?.(this.environmentInjector,d.root,p.root);return g?be(g).pipe(yt(()=>a)):ct(a)}),yt(d=>{let p=rG(r.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=a=je(et({},d),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,a}),Ke(()=>{this.events.next(new Ah)}),lG(this.rootContexts,r.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),mo(1),Ke({next:d=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ji(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{c=!0}}),nm(this.transitionAbortSubject.pipe(Ke(d=>{throw d}))),tm(()=>{!c&&!l&&this.cancelNavigationTransition(a,"",sr.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),vu(d=>{if(l=!0,eN(d))this.events.next(new Io(a.id,this.urlSerializer.serialize(a.extractedUrl),d.message,d.cancellationCode)),sG(d)?this.events.next(new Sh(d.url)):a.resolve(!1);else{this.events.next(new Th(a.id,this.urlSerializer.serialize(a.extractedUrl),d,a.targetSnapshot??void 0));try{a.resolve(r.errorHandler(d))}catch(p){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(p)}}return po}))}))}cancelNavigationTransition(r,i,s){let a=new Io(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(a),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function iK(e){return e!==wh}var oK=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:()=>lt(sK),providedIn:"root"});let e=t;return e})(),H_=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},sK=(()=>{let t=class t extends H_{};t.\u0275fac=(()=>{let r;return function(s){return(r||(r=Qw(t)))(s||t)}})(),t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),lN=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:()=>lt(aK),providedIn:"root"});let e=t;return e})(),aK=(()=>{let t=class t extends lN{constructor(){super(...arguments),this.location=lt(lh),this.urlSerializer=lt(kh),this.options=lt(Mh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=lt(rI),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new _o,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=QP(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof xu)this.stateMemento=this.createStateMemento();else if(r instanceof Eo)this.rawUrlTree=i.initialUrl;else if(r instanceof Tm){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Ah?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Io&&(r.code===sr.GuardRejected||r.code===sr.NoDataFromResolver)?this.restoreHistory(i):r instanceof Th?this.restoreHistory(i,!0):r instanceof ji&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let a=this.browserPageId,c=et(et({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(s,"",c)}else{let a=et(et({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",a)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,a=this.currentPageId-s;a!==0?this.location.historyGo(a):this.currentUrlTree===r.finalUrl&&a===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(s){return(r||(r=Qw(t)))(s||t)}})(),t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),yh=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(yh||{});function hN(e,t){e.events.pipe(Er(n=>n instanceof ji||n instanceof Io||n instanceof Th||n instanceof Eo),yt(n=>n instanceof ji||n instanceof Eo?yh.COMPLETE:(n instanceof Io?n.code===sr.Redirect||n.code===sr.SupersededByNewNavigation:!1)?yh.REDIRECTING:yh.FAILED),Er(n=>n!==yh.REDIRECTING),mo(1)).subscribe(()=>{t()})}function uK(e){throw e}var cK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ue=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=lt(om),this.stateManager=lt(lN),this.options=lt(Mh,{optional:!0})||{},this.pendingTasks=lt(qk),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=lt(iI),this.urlSerializer=lt(kh),this.location=lt(lh),this.urlHandlingStrategy=lt(rI),this._events=new Br,this.errorHandler=this.options.errorHandler||uK,this.navigated=!1,this.routeReuseStrategy=lt(oK),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=lt(km,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!lt(Nm,{optional:!0}),this.eventsSubscription=new _k,this.isNgZoneEnabled=lt(qt)instanceof qt&&qt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(s!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof Io&&i.code!==sr.Redirect&&i.code!==sr.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ji)this.navigated=!0;else if(i instanceof Sh){let c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||iK(s.source)};this.scheduleNavigation(c,wh,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}dK(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let a={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let d=et({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(a.state=d)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(tI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:a,fragment:c,queryParamsHandling:l,preserveFragment:d}=i,p=d?this.currentUrlTree.fragment:c,g=null;switch(l){case"merge":g=et(et({},this.currentUrlTree.queryParams),a);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=a||null}g!==null&&(g=this.removeEmptyProps(g));let v;try{let b=s?s.snapshot:this.routerState.snapshot.root;v=KP(b)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),v=this.currentUrlTree.root}return $P(v,r,g,p??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Su(r)?r:this.parseUrl(r),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,wh,null,i)}navigate(r,i={skipLocationChange:!1}){return hK(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=et({},cK):i===!1?s=et({},lK):s=i,Su(r))return TP(this.currentUrlTree,r,s);let a=this.parseUrl(r);return TP(this.currentUrlTree,a,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,a])=>(a!=null&&(i[s]=a),i),{})}scheduleNavigation(r,i,s,a,c){if(this.disposed)return Promise.resolve(!1);let l,d,p;c?(l=c.resolve,d=c.reject,p=c.promise):p=new Promise((v,b)=>{l=v,d=b});let g=this.pendingTasks.add();return hN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:a,resolve:l,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(v=>Promise.reject(v))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function hK(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new we(4008,!1)}function dK(e){return!(e instanceof Ah)&&!(e instanceof Sh)}var Pm=class{};var fK=(()=>{let t=class t{constructor(r,i,s,a,c){this.router=r,this.injector=s,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Er(r=>r instanceof ji),yu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let a of i){a.providers&&!a._injector&&(a._injector=t_(a.providers,r,`Route: ${a.path}`));let c=a._injector??r,l=a._loadedInjector??c;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&s.push(this.preloadConfig(c,a)),(a.children||a._loadedRoutes)&&s.push(this.processRoutes(l,a.children??a._loadedRoutes))}return be(s).pipe(Bw())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=ct(null);let a=s.pipe(nr(c=>c===null?ct(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??r,c.routes))));if(i.loadComponent&&!i._loadedComponent){let c=this.loader.loadComponent(i);return be([a,c]).pipe(Bw())}else return a})}};t.\u0275fac=function(i){return new(i||t)(G(Ue),G(um),G(rh),G(Pm),G(nI))},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),dN=new kt(""),pK=(()=>{let t=class t{constructor(r,i,s,a,c={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof xu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof ji?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Eo&&r.code===Em.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Am&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Am(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(i){ah()},t.\u0275prov=wt({token:t,factory:t.\u0275fac});let e=t;return e})();function mK(e){return e.routerState.root}function Lh(e,t){return{\u0275kind:e,\u0275providers:t}}function gK(){let e=lt(Yw);return t=>{let n=e.get(i_);if(t!==n.components[0])return;let r=e.get(Ue),i=e.get(fN);e.get(oI)===1&&r.initialNavigation(),e.get(pN,null,Hw.Optional)?.setUpPreloading(),e.get(dN,null,Hw.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var fN=new kt("",{factory:()=>new Br}),oI=new kt("",{providedIn:"root",factory:()=>1});function vK(){return Lh(2,[{provide:oI,useValue:0},{provide:r_,multi:!0,deps:[Yw],useFactory:t=>{let n=t.get(Zk,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=t.get(Ue),s=t.get(fN);hN(i,()=>{r(!0)}),t.get(iI).afterPreactivation=()=>(r(!0),s.closed?ct(void 0):s),i.initialNavigation()}))}}])}function yK(){return Lh(3,[{provide:r_,multi:!0,useFactory:()=>{let t=lt(Ue);return()=>{t.setUpLocationChangeListener()}}},{provide:oI,useValue:2}])}var pN=new kt("");function bK(e){return Lh(0,[{provide:pN,useExisting:fK},{provide:Pm,useExisting:e}])}function wK(){return Lh(8,[CP,{provide:Nm,useExisting:CP}])}function _K(e){let t=[{provide:uN,useValue:nK},{provide:cN,useValue:et({skipNextTransition:!!e?.skipInitialTransition},e)}];return Lh(9,t)}var DP=new kt("ROUTER_FORROOT_GUARD"),IK=[lh,{provide:kh,useClass:Ih},Ue,Ph,{provide:Cu,useFactory:mK,deps:[Ue]},nI,[]],sI=(()=>{let t=class t{constructor(r){}static forRoot(r,i){return{ngModule:t,providers:[IK,[],{provide:km,multi:!0,useValue:r},{provide:DP,useFactory:SK,deps:[[Ue,new eh,new Nk]]},{provide:Mh,useValue:i||{}},i?.useHash?TK():AK(),EK(),i?.preloadingStrategy?bK(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?xK(i):[],i?.bindToComponentInputs?wK().\u0275providers:[],i?.enableViewTransitions?_K().\u0275providers:[],CK()]}}static forChild(r){return{ngModule:t,providers:[{provide:km,multi:!0,useValue:r}]}}};t.\u0275fac=function(i){return new(i||t)(G(DP,8))},t.\u0275mod=Xt({type:t}),t.\u0275inj=Yt({});let e=t;return e})();function EK(){return{provide:dN,useFactory:()=>{let e=lt(sP),t=lt(qt),n=lt(Mh),r=lt(iI),i=lt(kh);return n.scrollOffset&&e.setOffset(n.scrollOffset),new pK(i,r,e,t,n)}}}function TK(){return{provide:s_,useClass:eP}}function AK(){return{provide:s_,useClass:tP}}function SK(e){return"guarded"}function xK(e){return[e.initialNavigation==="disabled"?yK().\u0275providers:[],e.initialNavigation==="enabledBlocking"?vK().\u0275providers:[]]}var kP=new kt("");function CK(){return[{provide:kP,useFactory:gK},{provide:$k,multi:!0,useExisting:kP}]}var $n=(VN(),Fw(FN)),ar=class{static init(t){return $n.default.initializeApp(t),[]}static getFirestore(){return $n.default.firestore()}static _getFirestore(){return $n.default.firestore}static getAuth(){return $n.default.auth()}static getStorage(){return $n.default.storage()}static getFirestoreTimestamp(){return $n.default.firestore.Timestamp.now()}};UN();var Hn=class{constructor(){this.auth=ar.getAuth()}createAccountWith(t){return new Promise((n,r)=>{this.auth.createUserWithEmailAndPassword(t.email,t.password).then(i=>{try{t.onComplete(i)}catch{}n(i)}).catch(i=>{try{t.onFail(i)}catch{}r(i)})})}signInAnonymously(t){return new Promise((n,r)=>{this.auth.signInAnonymously().then(i=>{try{t.onComplete(i)}catch{}n(i)}).catch(i=>{try{t.onFail(i)}catch{}r(i)})})}signInWith(t){return new Promise((n,r)=>{t.provider?this.auth.signInWithPopup(this.getProvider(t.provider)).then(i=>{try{t.onComplete(i)}catch{}n(i)}).catch(i=>{try{t.onFail(i)}catch{}r(i)}):this.auth.signInWithEmailAndPassword(t.email,t.password).then(i=>{try{t.onComplete(i)}catch{}n(i)}).catch(i=>{try{t.onFail(i)}catch{}r(i)})})}getProvider(t){switch(t.toLowerCase()){case"google":return new $n.default.auth.GoogleAuthProvider;case"apple":return new $n.default.auth.OAuthProvider("apple.com");case"facebook":return new $n.default.auth.FacebookAuthProvider;case"yahoo":return new $n.default.auth.OAuthProvider("yahoo.com");case"github":return new $n.default.auth.GithubAuthProvider;case"twitter":return new $n.default.auth.TwitterAuthProvider;case"microsoft":return new $n.default.auth.OAuthProvider("microsoft.com")}}signOut(t){return new Promise((n,r)=>{t?this.auth.signOut().then(()=>{try{t.onComplete()}catch{}n()}).catch(()=>{try{t.onFail()}catch{}r(new Error("Failed to signout."))}):this.auth.signOut()})}listenToSignInStateChanges(t){this.auth.onAuthStateChanged(n=>{t(n)})}sendVerificationEmail(){try{this.validateIsSignedIn(),this.auth.currentUser.sendEmailVerification()}catch(t){console.error(`${t} User must be signed in to use the sendVerificaitonEmail() function.`)}}sendPasswordResetEmail(t){t.onComplete?this.auth.sendPasswordResetEmail(t.email).then(()=>t.onComplete(`Instructions to reset password was sent to ${t.email}.`)).catch(()=>t.onComplete("Failed to send password reset email.")):this.auth.sendPasswordResetEmail(t.email)}isEmailVerified(){try{return this.validateIsSignedIn(),this.auth.currentUser.emailVerified}catch(t){console.error(`User must be signed in to use the isEmailVerified() function. 
${t}`)}return!1}isSignedIn(){return this.auth.currentUser!=null||this.auth.currentUser!=null}validateIsSignedIn(){if(!this.isSignedIn())throw new Error("No user was signed in.")}getAuth(){return this.auth}checkSignInState(t){let n=this.getAuth().currentUser;try{t.whenChanged(n)}catch{}if(this.isSignedIn()){try{t.whenSignedIn(n)}catch{}if(this.isEmailVerified())try{t.whenSignedInAndEmailVerified(n)}catch{}else try{t.whenSignedInAndEmailNotVerified(n)}catch{}}else try{t.whenSignedOut(n)}catch{}}};var BN=(()=>{let t=class t{constructor(r){this.router=r,this.firebasetsAuth=new Hn}ngOnInit(){this.firebasetsAuth.getAuth().onAuthStateChanged(r=>{r?this.router.navigate(["feed"]):this.router.navigate([""])})}toLoginSubmit(r,i){let s=r.value,a=i.value;this.firebasetsAuth.signInWith({email:s,password:a,onComplete:c=>{this.router.navigate(["feed"])},onFail:c=>{alert("Email and password not match!")}})}toSignup(){this.router.navigate(["signup"])}toReset(){this.router.navigate(["reset"])}};t.\u0275fac=function(i){return new(i||t)(ir(Ue))},t.\u0275cmp=tn({type:t,selectors:[["app-login"]],decls:45,vars:0,consts:[["loginEmail",""],["loginPassword",""],[1,"session"],[1,"left"],["enable-background","new 0 0 300 302.5","version","1.1","viewBox","0 0 300 302.5",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg"],["type","text/css"],["d","m126 302.2c-2.3 0.7-5.7 0.2-7.7-1.2l-105-71.6c-2-1.3-3.7-4.4-3.9-6.7l-9.4-126.7c-0.2-2.4 1.1-5.6 2.8-7.2l93.2-86.4c1.7-1.6 5.1-2.6 7.4-2.3l125.6 18.9c2.3 0.4 5.2 2.3 6.4 4.4l63.5 110.1c1.2 2 1.4 5.5 0.6 7.7l-46.4 118.3c-0.9 2.2-3.4 4.6-5.7 5.3l-121.4 37.4zm63.4-102.7c2.3-0.7 4.8-3.1 5.7-5.3l19.9-50.8c0.9-2.2 0.6-5.7-0.6-7.7l-27.3-47.3c-1.2-2-4.1-4-6.4-4.4l-53.9-8c-2.3-0.4-5.7 0.7-7.4 2.3l-40 37.1c-1.7 1.6-3 4.9-2.8 7.2l4.1 54.4c0.2 2.4 1.9 5.4 3.9 6.7l45.1 30.8c2 1.3 5.4 1.9 7.7 1.2l52-16.2z",1,"st01"],["action","","autocomplete","off",1,"log-in"],[1,"floating-label"],["placeholder","Email","type","email","name","email","id","email","autocomplete","off","required",""],["for","email"],[1,"icon"],["enable-background","new 0 0 100 100","version","1.1","viewBox","0 0 100 100",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg"],["transform","translate(0 -952.36)"],["d","m17.5 977c-1.3 0-2.4 1.1-2.4 2.4v45.9c0 1.3 1.1 2.4 2.4 2.4h64.9c1.3 0 2.4-1.1 2.4-2.4v-45.9c0-1.3-1.1-2.4-2.4-2.4h-64.9zm2.4 4.8h60.2v1.2l-30.1 22-30.1-22v-1.2zm0 7l28.7 21c0.8 0.6 2 0.6 2.8 0l28.7-21v34.1h-60.2v-34.1z"],["width","100","height","100",1,"st0"],["placeholder","Password","type","password","name","password","id","password","autocomplete","off","required",""],["for","password"],["enable-background","new 0 0 24 24","version","1.1","viewBox","0 0 24 24",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg"],["width","24","height","24",1,"st0"],["d","M19,21H5V9h14V21z M6,20h12V10H6V20z",1,"st1"],["d","M16.5,10h-1V7c0-1.9-1.6-3.5-3.5-3.5S8.5,5.1,8.5,7v3h-1V7c0-2.5,2-4.5,4.5-4.5s4.5,2,4.5,4.5V10z",1,"st1"],["d","m12 16.5c-0.8 0-1.5-0.7-1.5-1.5s0.7-1.5 1.5-1.5 1.5 0.7 1.5 1.5-0.7 1.5-1.5 1.5zm0-2c-0.3 0-0.5 0.2-0.5 0.5s0.2 0.5 0.5 0.5 0.5-0.2 0.5-0.5-0.2-0.5-0.5-0.5z",1,"st1"],["type","submit","onClick","return false;",3,"click"],["target","_blank",1,"discrete",2,"margin-bottom","-35px",3,"click"],["target","_blank",1,"discrete",3,"click"]],template:function(i,s){if(i&1){let a=wu();X(0,"body")(1,"div",2)(2,"div",3),qn(),X(3,"svg",4)(4,"style",5),Et(5," .st01 { fill: #fff; } "),it(),xt(6,"path",6),it()(),zn(),X(7,"form",7)(8,"h4"),Et(9,"Login to "),X(10,"span"),Et(11,"1Thing."),it()(),X(12,"p"),Et(13,"Welcome back! Log in to your account to view feed today."),it(),X(14,"div",8),xt(15,"input",9,0),X(17,"label",10),Et(18,"Email:"),it(),X(19,"div",11),qn(),X(20,"svg",12)(21,"style",5),Et(22," .st0 { fill: none; } "),it(),X(23,"g",13),xt(24,"path",14),it(),xt(25,"rect",15),it()()(),zn(),X(26,"div",8),xt(27,"input",16,1),X(29,"label",17),Et(30,"Password:"),it(),X(31,"div",11),qn(),X(32,"svg",18)(33,"style",5),Et(34," .st0 { fill: none; } .st1 { fill: #010101; } "),it(),xt(35,"rect",19)(36,"path",20)(37,"path",21)(38,"path",22),it()()(),zn(),X(39,"button",23),Gn("click",function(){ci(a);let l=qr(16),d=qr(28);return li(s.toLoginSubmit(l,d))}),Et(40,"Log in"),it(),X(41,"a",24),Gn("click",function(){return ci(a),li(s.toSignup())}),Et(42,"Create an account"),it(),X(43,"a",25),Gn("click",function(){return ci(a),li(s.toReset())}),Et(44,"Reset Password"),it()()()()}},styles:[".all[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica,Arial,sans-serif;font-weight:300;margin:0}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100vh;width:100vw;margin:0;display:flex;align-items:flex-start;justify-content:flex-start;background:#f3f2f2}h4[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#000;opacity:.85}label[_ngcontent-%COMP%]{font-size:12.5px;color:#000;opacity:.8;font-weight:400}form[_ngcontent-%COMP%]{padding:40px 30px 20px;background:#fefefe;display:flex;flex-direction:column;align-items:flex-start;width:300px}form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:20px;color:#00000080}form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;font-weight:700}form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:155%;font-size:14px;color:#000;opacity:.65;font-weight:400;max-width:200px;margin-bottom:40px}a.discrete[_ngcontent-%COMP%]{color:#0006;font-size:14px;border-bottom:solid 1px rgba(0,0,0,0);padding-bottom:4px;margin-left:auto;font-weight:300;transition:all .3s ease;margin-top:40px;cursor:pointer}a.discrete[_ngcontent-%COMP%]:hover{border-bottom:solid 1px rgba(0,0,0,.2)}button[_ngcontent-%COMP%]{-webkit-appearance:none;width:auto;min-width:100px;border-radius:24px;text-align:center;padding:15px 40px;margin-top:5px;background-color:#b08bf8;color:#fff;font-size:14px;margin-left:auto;font-weight:500;box-shadow:0 2px 6px -1px #00000021;border:none;transition:all .3s ease;outline:0}button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 2px 6px -1px #b69de6a6}button[_ngcontent-%COMP%]:hover:active{transform:scale(.99)}input[_ngcontent-%COMP%]{font-size:16px;padding:20px 0;height:56px;border:none;border-bottom:solid 1px rgba(0,0,0,.1);background:#fff;width:280px;box-sizing:border-box;transition:all .3s linear;color:#000;font-weight:400;-webkit-appearance:none}input[_ngcontent-%COMP%]:focus{border-bottom:solid 1px #b69de6;outline:0;box-shadow:0 2px 6px -8px #b69de673}.floating-label[_ngcontent-%COMP%]{position:relative;margin-bottom:10px;width:100%}.floating-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 7px);left:0;opacity:0;transition:all .3s ease;padding-left:44px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 44px);margin-left:auto;display:flex}.floating-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;top:0;left:-13px;height:56px;width:44px;display:flex}.floating-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:30px;width:30px;margin:auto;opacity:.15;transition:all .3s ease}.floating-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:all .3s ease}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-moz-placeholder-shown){padding:28px 0 12px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-ms-input-placeholder){padding:28px 0 12px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown){padding:28px 0 12px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-moz-placeholder-shown) + label[_ngcontent-%COMP%]{transform:translateY(-10px);opacity:.7}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-ms-input-placeholder) + label[_ngcontent-%COMP%]{transform:translateY(-10px);opacity:.7}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{transform:translateY(-10px);opacity:.7}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-moz-placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-ms-input-placeholder) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-moz-placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#b69de6}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-ms-input-placeholder) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#b69de6}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#b69de6}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:valid):not(:focus) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]{-webkit-animation-name:_ngcontent-%COMP%_shake-shake;animation-name:_ngcontent-%COMP%_shake-shake;-webkit-animation-duration:.3s;animation-duration:.3s}@-webkit-keyframes _ngcontent-%COMP%_shake-shake{0%{transform:translate(-3px)}20%{transform:translate(3px)}40%{transform:translate(-3px)}60%{transform:translate(3px)}80%{transform:translate(-3px)}to{transform:translate(0)}}.session[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:auto;height:auto;margin:auto;background:#fff;border-radius:4px;box-shadow:0 2px 6px -1px #0000001f}.left[_ngcontent-%COMP%]{width:220px;height:auto;min-height:100%;position:relative;background-image:url(https://images.pexels.com/photos/114979/pexels-photo-114979.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940);background-size:cover;border-top-left-radius:4px;border-bottom-left-radius:4px}.left[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:40px;width:auto;margin:20px}"]});let e=t;return e})();uF();var vc=class{constructor(){this.listeners=new Map}appendArray(t){return ar._getFirestore().FieldValue.arrayUnion(t)}increment(t){return ar._getFirestore().FieldValue.increment(t)}genDocId(){return ar.getFirestore().collection("TEMP").doc().id}all(t){let n=ar.getFirestore().batch();for(let r of t.operations)r.getOperation(n);return new Promise((r,i)=>{n.commit().then(()=>{try{t.onComplete()}catch{}r()}).catch(s=>{try{t.onFail(s)}catch{}i(s)})})}create(t){return new Promise((n,r)=>{if(t.data==null||t.data==null)throw new Error("Error creating data. Data is null or undefined.");if(this.isCollectionPath(t.path)){let i=this.genCollectionReference(t.path).doc();i.set(t.data).then(()=>{try{t.onComplete(i.id)}catch{}n(i.id)}).catch(s=>{try{t.onFail(s)}catch{}r(s)})}else if(this.isDocumentPath(t.path)){let i=this.genDocumentReference(t.path);i.set(t.data).then(()=>{try{t.onComplete(i.id)}catch{}n(i.id)}).catch(s=>{try{t.onFail(s)}catch{}r(s)})}})}delete(t){return new Promise((n,r)=>{this.checkDocumentPathValidity(t.path),this.genDocumentReference(t.path).delete().then(()=>{try{t.onComplete()}catch{}n()}).catch(i=>{try{t.onFail(i)}catch{}r(i)})})}update(t){return new Promise((n,r)=>{this.checkDocumentPathValidity(t.path);let i=this.genDocumentReference(t.path);i.update(t.data).then(()=>{try{t.onComplete(i)}catch{}n(i)}).catch(s=>{try{t.onFail(s)}catch{}r(s)})})}getCollection(t){let n=this.genCollectionReference(t.path);return(t.where!=null||t.where!=null)&&t.where.length>0?new Promise((r,i)=>{let s,a=Array(t.where)[0];for(let c=0;c<a.length;c++)s==null?s=a[c].getQuery(n):s=a[c].concatQuery(s);s.get().then(c=>{try{t.onComplete(c)}catch{}r(c)}).catch(c=>{try{t.onFail(c)}catch{}i(c)})}):new Promise((r,i)=>{n.get().then(s=>{try{t.onComplete(s)}catch{}r(s)}).catch(s=>{try{t.onFail(s)}catch{}i(s)})})}getDocument(t){return new Promise((n,r)=>{this.genDocumentReference(t.path).get().then(i=>{try{t.onComplete(i)}catch{}n(i)}).catch(i=>{try{t.onFail(i)}catch{}r(i)})})}listenToDocument(t){this.validateListenerName(t.name),this.addListener(t.name,this.genDocumentReference(t.path).onSnapshot(n=>{try{t.onUpdate(n)}catch{}}))}listenToCollection(t){this.validateListenerName(t.name);let n=this.genCollectionReference(t.path);if((t.where!=null||t.where!=null)&&t.where.length>0){let r,i=Array(t.where)[0];for(let s=0;s<i.length;s++)r==null?r=i[s].getQuery(n):r=i[s].concatQuery(r);this.addListener(t.name,r.onSnapshot(s=>{try{t.onUpdate(s)}catch{}}))}else this.addListener(t.name,n.onSnapshot(r=>{try{t.onUpdate(r)}catch{}}))}genCollectionReference(t){this.checkCollectionPathValidity(t);let n=Array(t)[0],r,i;for(let s=0;s<n.length;s++)s%2==0?r==null?r=ar.getFirestore().collection(n[s]):r=i.collection(n[s]):i=r.doc(n[s]);return r}genDocumentReference(t){this.checkDocumentPathValidity(t);let n=Array(t)[0],r,i;for(let s=0;s<n.length;s++)s%2==0?r==null?r=ar.getFirestore().collection(n[s]):r=i.collection(n[s]):i=r.doc(n[s]);return i}addListener(t,n){return this.listeners.set(t,n),n}stopListeningTo(t){try{this.listeners.get(t)(),this.listeners.delete(t)}catch{}}stopListeningToAll(){this.listeners.forEach((t,n,r)=>{this.stopListeningTo(n)})}validateListenerName(t){if(t==null||t==null||typeof t!="string"||t.trim().length<=0)throw"Listener name cannot be empty.";if(this.listeners.get(t)!=null)throw`Listener name: ${t} is already taken.`}checkCollectionPathValidity(t){if(t==null||t==null||t.length<=0||!this.isCollectionPath(t))throw"Not a valid path to a collection."}isCollectionPath(t){return Array(t)[0].length%2==1}checkDocumentPathValidity(t){if(t==null||t==null||t.length<=0||!this.isDocumentPath(t))throw"Not a valid path to a document."}isDocumentPath(t){return Array(t)[0].length%2==0}};var cF=(()=>{let t=class t{constructor(r){this.firestore=new vc,this.firebasetsAuth=new Hn,this.router=r}ToSubmitSignup(r,i,s,a,c){let l=r.value,d=i.value,p=s.value,g=a.value,v=c.value;this.isAMatch(g,v)?this.firebasetsAuth.createAccountWith({email:p,password:g,onComplete:b=>{let _=b.user;alert("Registered Successfully"),_?this.firestore.create({path:["Users",_.uid],data:{publicName:l,username:d},onComplete:I=>{alert("Profile Created"),r.value="",i.value="",this.router.navigate([""])},onFail:I=>{console.error("Firestore Error:",I),alert(I)}}):(console.error("User object is null."),alert("Failed to create profile. Please try again."))},onFail:b=>{console.error("Authentication Error:",b),alert("Failed to create profile. Please try again.")}}):alert("Passwords do not match.")}isAMatch(r,i){return r===i}toLogin(){this.router.navigate([""])}};t.\u0275fac=function(i){return new(i||t)(ir(Ue))},t.\u0275cmp=tn({type:t,selectors:[["app-signup"]],decls:80,vars:0,consts:[["signupName",""],["signupUsername",""],["signupEmail",""],["signupPassword",""],["signupConfirmPassword",""],[1,"session"],[1,"left"],["enable-background","new 0 0 300 302.5","version","1.1","viewBox","0 0 300 302.5",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg"],["type","text/css"],["d","m126 302.2c-2.3 0.7-5.7 0.2-7.7-1.2l-105-71.6c-2-1.3-3.7-4.4-3.9-6.7l-9.4-126.7c-0.2-2.4 1.1-5.6 2.8-7.2l93.2-86.4c1.7-1.6 5.1-2.6 7.4-2.3l125.6 18.9c2.3 0.4 5.2 2.3 6.4 4.4l63.5 110.1c1.2 2 1.4 5.5 0.6 7.7l-46.4 118.3c-0.9 2.2-3.4 4.6-5.7 5.3l-121.4 37.4zm63.4-102.7c2.3-0.7 4.8-3.1 5.7-5.3l19.9-50.8c0.9-2.2 0.6-5.7-0.6-7.7l-27.3-47.3c-1.2-2-4.1-4-6.4-4.4l-53.9-8c-2.3-0.4-5.7 0.7-7.4 2.3l-40 37.1c-1.7 1.6-3 4.9-2.8 7.2l4.1 54.4c0.2 2.4 1.9 5.4 3.9 6.7l45.1 30.8c2 1.3 5.4 1.9 7.7 1.2l52-16.2z",1,"st01"],["action","","autocomplete","off",1,"log-in"],[1,"floating-label"],["placeholder","Name","type","text","name","text","id","Name","autocomplete","off","required",""],["for","username"],[1,"icon"],["enable-background","new 0 0 100 100","version","1.1","viewBox","0 0 100 100",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg"],["transform","translate(0 -952.36)"],["d","m17.5 977c-1.3 0-2.4 1.1-2.4 2.4v45.9c0 1.3 1.1 2.4 2.4 2.4h64.9c1.3 0 2.4-1.1 2.4-2.4v-45.9c0-1.3-1.1-2.4-2.4-2.4h-64.9zm2.4 4.8h60.2v1.2l-30.1 22-30.1-22v-1.2zm0 7l28.7 21c0.8 0.6 2 0.6 2.8 0l28.7-21v34.1h-60.2v-34.1z"],["width","100","height","100",1,"st0"],["placeholder","Username","type","text","name","text","id","username","autocomplete","off","required",""],["placeholder","Email","type","email","name","email","id","email","autocomplete","off","required",""],["for","email"],["placeholder","Password","type","password","name","password","id","password","autocomplete","off","required",""],["for","password"],["enable-background","new 0 0 24 24","version","1.1","viewBox","0 0 24 24",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg"],["width","24","height","24",1,"st0"],["d","M19,21H5V9h14V21z M6,20h12V10H6V20z",1,"st1"],["d","M16.5,10h-1V7c0-1.9-1.6-3.5-3.5-3.5S8.5,5.1,8.5,7v3h-1V7c0-2.5,2-4.5,4.5-4.5s4.5,2,4.5,4.5V10z",1,"st1"],["d","m12 16.5c-0.8 0-1.5-0.7-1.5-1.5s0.7-1.5 1.5-1.5 1.5 0.7 1.5 1.5-0.7 1.5-1.5 1.5zm0-2c-0.3 0-0.5 0.2-0.5 0.5s0.2 0.5 0.5 0.5 0.5-0.2 0.5-0.5-0.2-0.5-0.5-0.5z",1,"st1"],["placeholder","Comfirm Password","type","password","name","password_2","id","password_2","autocomplete","off","required",""],["for","password_2"],["type","submit","onClick","return false;",3,"click"],["target","_blank",1,"discrete",3,"click"]],template:function(i,s){if(i&1){let a=wu();X(0,"body")(1,"div",5)(2,"div",6),qn(),X(3,"svg",7)(4,"style",8),Et(5," .st01 { fill: #fff; } "),it(),xt(6,"path",9),it()(),zn(),X(7,"form",10)(8,"h4"),Et(9,"Sign up, "),X(10,"span"),Et(11,"1Thing."),it()(),X(12,"p"),Et(13,"Join now for view feed today."),it(),X(14,"div",11),xt(15,"input",12,0),X(17,"label",13),Et(18,"Name - Lastname:"),it(),X(19,"div",14),qn(),X(20,"svg",15)(21,"style",8),Et(22," .st0 { fill: none; } "),it(),X(23,"g",16),xt(24,"path",17),it(),xt(25,"rect",18),it()()(),zn(),X(26,"div",11),xt(27,"input",19,1),X(29,"label",13),Et(30,"Username:"),it(),X(31,"div",14),qn(),X(32,"svg",15)(33,"style",8),Et(34," .st0 { fill: none; } "),it(),X(35,"g",16),xt(36,"path",17),it(),xt(37,"rect",18),it()()(),zn(),X(38,"div",11),xt(39,"input",20,2),X(41,"label",21),Et(42,"Email:"),it(),X(43,"div",14),qn(),X(44,"svg",15)(45,"style",8),Et(46," .st0 { fill: none; } "),it(),X(47,"g",16),xt(48,"path",17),it(),xt(49,"rect",18),it()()(),zn(),X(50,"div",11),xt(51,"input",22,3),X(53,"label",23),Et(54,"Password:"),it(),X(55,"div",14),qn(),X(56,"svg",24)(57,"style",8),Et(58," .st0 { fill: none; } .st1 { fill: #010101; } "),it(),xt(59,"rect",25)(60,"path",26)(61,"path",27)(62,"path",28),it()()(),zn(),X(63,"div",11),xt(64,"input",29,4),X(66,"label",30),Et(67,"Confirm Password:"),it(),X(68,"div",14),qn(),X(69,"svg",24)(70,"style",8),Et(71," .st0 { fill: none; } .st1 { fill: #010101; } "),it(),xt(72,"rect",25)(73,"path",26)(74,"path",27)(75,"path",28),it()()(),zn(),X(76,"button",31),Gn("click",function(){ci(a);let l=qr(16),d=qr(28),p=qr(40),g=qr(52),v=qr(65);return li(s.ToSubmitSignup(l,d,p,g,v))}),Et(77,"Sign Up"),it(),X(78,"a",32),Gn("click",function(){return ci(a),li(s.toLogin())}),Et(79,"Back to Signin"),it()()()()}},styles:[".all[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica,Arial,sans-serif;font-weight:300;margin:0}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100vh;width:100vw;margin:0;display:flex;align-items:flex-start;justify-content:flex-start;background:#f3f2f2}h4[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#000;opacity:.85}label[_ngcontent-%COMP%]{font-size:12.5px;color:#000;opacity:.8;font-weight:400}form[_ngcontent-%COMP%]{padding:40px 30px 20px;background:#fefefe;display:flex;flex-direction:column;align-items:flex-start;width:300px}form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:20px;color:#00000080}form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;font-weight:700}form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:155%;font-size:14px;color:#000;opacity:.65;font-weight:400;max-width:200px;margin-bottom:40px}a.discrete[_ngcontent-%COMP%]{color:#0006;font-size:14px;border-bottom:solid 1px rgba(0,0,0,0);padding-bottom:4px;margin-left:auto;font-weight:300;transition:all .3s ease;margin-top:40px;cursor:pointer}a.discrete[_ngcontent-%COMP%]:hover{border-bottom:solid 1px rgba(0,0,0,.2)}button[_ngcontent-%COMP%]{-webkit-appearance:none;width:auto;min-width:100px;border-radius:24px;text-align:center;padding:15px 40px;margin-top:5px;background-color:#b08bf8;color:#fff;font-size:14px;margin-left:auto;font-weight:500;box-shadow:0 2px 6px -1px #00000021;border:none;transition:all .3s ease;outline:0}button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 2px 6px -1px #b69de6a6}button[_ngcontent-%COMP%]:hover:active{transform:scale(.99)}input[_ngcontent-%COMP%]{font-size:16px;padding:20px 0;height:56px;border:none;border-bottom:solid 1px rgba(0,0,0,.1);background:#fff;width:280px;box-sizing:border-box;transition:all .3s linear;color:#000;font-weight:400;-webkit-appearance:none}input[_ngcontent-%COMP%]:focus{border-bottom:solid 1px #b69de6;outline:0;box-shadow:0 2px 6px -8px #b69de673}.floating-label[_ngcontent-%COMP%]{position:relative;margin-bottom:10px;width:100%}.floating-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 7px);left:0;opacity:0;transition:all .3s ease;padding-left:44px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 44px);margin-left:auto;display:flex}.floating-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;top:0;left:-13px;height:56px;width:44px;display:flex}.floating-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:30px;width:30px;margin:auto;opacity:.15;transition:all .3s ease}.floating-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:all .3s ease}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-moz-placeholder-shown){padding:28px 0 12px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-ms-input-placeholder){padding:28px 0 12px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown){padding:28px 0 12px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-moz-placeholder-shown) + label[_ngcontent-%COMP%]{transform:translateY(-10px);opacity:.7}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-ms-input-placeholder) + label[_ngcontent-%COMP%]{transform:translateY(-10px);opacity:.7}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{transform:translateY(-10px);opacity:.7}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-moz-placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-ms-input-placeholder) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-moz-placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#b69de6}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-ms-input-placeholder) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#b69de6}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#b69de6}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:valid):not(:focus) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]{-webkit-animation-name:_ngcontent-%COMP%_shake-shake;animation-name:_ngcontent-%COMP%_shake-shake;-webkit-animation-duration:.3s;animation-duration:.3s}@-webkit-keyframes _ngcontent-%COMP%_shake-shake{0%{transform:translate(-3px)}20%{transform:translate(3px)}40%{transform:translate(-3px)}60%{transform:translate(3px)}80%{transform:translate(-3px)}to{transform:translate(0)}}.session[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:auto;height:auto;margin:auto;background:#fff;border-radius:4px;box-shadow:0 2px 6px -1px #0000001f}.left[_ngcontent-%COMP%]{width:220px;height:auto;min-height:100%;position:relative;background-image:url(https://images.pexels.com/photos/114979/pexels-photo-114979.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940);background-size:cover;border-top-left-radius:4px;border-bottom-left-radius:4px}.left[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:40px;width:auto;margin:20px}"]});let e=t;return e})();var lF=(()=>{let t=class t{constructor(){this.firebasetsAuth=new Hn,this.router=new Ue}toLogin(){this.router.navigate([""])}toResetSubmit(r){let i=r.value;this.firebasetsAuth.sendPasswordResetEmail({email:i,onComplete:s=>{alert(`Reset Email sent to ${i}`),this.router.navigate([""])}})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["app-resetemail"]],decls:29,vars:0,consts:[["resetEmail",""],[1,"session"],[1,"left"],["enable-background","new 0 0 300 302.5","version","1.1","viewBox","0 0 300 302.5",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg"],["type","text/css"],["d","m126 302.2c-2.3 0.7-5.7 0.2-7.7-1.2l-105-71.6c-2-1.3-3.7-4.4-3.9-6.7l-9.4-126.7c-0.2-2.4 1.1-5.6 2.8-7.2l93.2-86.4c1.7-1.6 5.1-2.6 7.4-2.3l125.6 18.9c2.3 0.4 5.2 2.3 6.4 4.4l63.5 110.1c1.2 2 1.4 5.5 0.6 7.7l-46.4 118.3c-0.9 2.2-3.4 4.6-5.7 5.3l-121.4 37.4zm63.4-102.7c2.3-0.7 4.8-3.1 5.7-5.3l19.9-50.8c0.9-2.2 0.6-5.7-0.6-7.7l-27.3-47.3c-1.2-2-4.1-4-6.4-4.4l-53.9-8c-2.3-0.4-5.7 0.7-7.4 2.3l-40 37.1c-1.7 1.6-3 4.9-2.8 7.2l4.1 54.4c0.2 2.4 1.9 5.4 3.9 6.7l45.1 30.8c2 1.3 5.4 1.9 7.7 1.2l52-16.2z",1,"st01"],["action","","autocomplete","off",1,"log-in"],[1,"floating-label"],["placeholder","Email","type","email","name","email","id","email","autocomplete","off","required",""],["for","email"],[1,"icon"],["enable-background","new 0 0 100 100","version","1.1","viewBox","0 0 100 100",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg"],["transform","translate(0 -952.36)"],["d","m17.5 977c-1.3 0-2.4 1.1-2.4 2.4v45.9c0 1.3 1.1 2.4 2.4 2.4h64.9c1.3 0 2.4-1.1 2.4-2.4v-45.9c0-1.3-1.1-2.4-2.4-2.4h-64.9zm2.4 4.8h60.2v1.2l-30.1 22-30.1-22v-1.2zm0 7l28.7 21c0.8 0.6 2 0.6 2.8 0l28.7-21v34.1h-60.2v-34.1z"],["width","100","height","100",1,"st0"],["type","submit","onClick","return false;",3,"click"],["target","_blank",1,"discrete",3,"click"]],template:function(i,s){if(i&1){let a=wu();X(0,"body")(1,"div",1)(2,"div",2),qn(),X(3,"svg",3)(4,"style",4),Et(5," .st01 { fill: #fff; } "),it(),xt(6,"path",5),it()(),zn(),X(7,"form",6)(8,"h4")(9,"span"),Et(10,"Reset Password."),it()(),X(11,"p"),Et(12,"Put your E-mail and get reset password in your email. "),it(),X(13,"div",7),xt(14,"input",8,0),X(16,"label",9),Et(17,"Email:"),it(),X(18,"div",10),qn(),X(19,"svg",11)(20,"style",4),Et(21," .st0 { fill: none; } "),it(),X(22,"g",12),xt(23,"path",13),it(),xt(24,"rect",14),it()()(),zn(),X(25,"button",15),Gn("click",function(){ci(a);let l=qr(15);return li(s.toResetSubmit(l))}),Et(26,"Reset"),it(),X(27,"a",16),Gn("click",function(){return ci(a),li(s.toLogin())}),Et(28,"Back to Login"),it()()()()}},styles:[".all[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica,Arial,sans-serif;font-weight:300;margin:0}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100vh;width:100vw;margin:0;display:flex;align-items:flex-start;justify-content:flex-start;background:#f3f2f2}h4[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#000;opacity:.85}label[_ngcontent-%COMP%]{font-size:12.5px;color:#000;opacity:.8;font-weight:400}form[_ngcontent-%COMP%]{padding:40px 30px 20px;background:#fefefe;display:flex;flex-direction:column;align-items:flex-start;width:300px}form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:20px;color:#00000080}form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;font-weight:700}form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:155%;font-size:14px;color:#000;opacity:.65;font-weight:400;max-width:200px;margin-bottom:40px}a.discrete[_ngcontent-%COMP%]{color:#0006;font-size:14px;border-bottom:solid 1px rgba(0,0,0,0);padding-bottom:4px;margin-left:auto;font-weight:300;transition:all .3s ease;margin-top:40px;cursor:pointer}a.discrete[_ngcontent-%COMP%]:hover{border-bottom:solid 1px rgba(0,0,0,.2)}button[_ngcontent-%COMP%]{-webkit-appearance:none;width:auto;min-width:100px;border-radius:24px;text-align:center;padding:15px 40px;margin-top:5px;background-color:#b08bf8;color:#fff;font-size:14px;margin-left:auto;font-weight:500;box-shadow:0 2px 6px -1px #00000021;border:none;transition:all .3s ease;outline:0}button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 2px 6px -1px #b69de6a6}button[_ngcontent-%COMP%]:hover:active{transform:scale(.99)}input[_ngcontent-%COMP%]{font-size:16px;padding:20px 0;height:56px;border:none;border-bottom:solid 1px rgba(0,0,0,.1);background:#fff;width:280px;box-sizing:border-box;transition:all .3s linear;color:#000;font-weight:400;-webkit-appearance:none}input[_ngcontent-%COMP%]:focus{border-bottom:solid 1px #b69de6;outline:0;box-shadow:0 2px 6px -8px #b69de673}.floating-label[_ngcontent-%COMP%]{position:relative;margin-bottom:10px;width:100%}.floating-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 7px);left:0;opacity:0;transition:all .3s ease;padding-left:44px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 44px);margin-left:auto;display:flex}.floating-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;top:0;left:-13px;height:56px;width:44px;display:flex}.floating-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:30px;width:30px;margin:auto;opacity:.15;transition:all .3s ease}.floating-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:all .3s ease}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-moz-placeholder-shown){padding:28px 0 12px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-ms-input-placeholder){padding:28px 0 12px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown){padding:28px 0 12px}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-moz-placeholder-shown) + label[_ngcontent-%COMP%]{transform:translateY(-10px);opacity:.7}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:-ms-input-placeholder) + label[_ngcontent-%COMP%]{transform:translateY(-10px);opacity:.7}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{transform:translateY(-10px);opacity:.7}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-moz-placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-ms-input-placeholder) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-moz-placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#b69de6}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:-ms-input-placeholder) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#b69de6}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid:not(:placeholder-shown) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#b69de6}.floating-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:valid):not(:focus) + label[_ngcontent-%COMP%] + .icon[_ngcontent-%COMP%]{-webkit-animation-name:_ngcontent-%COMP%_shake-shake;animation-name:_ngcontent-%COMP%_shake-shake;-webkit-animation-duration:.3s;animation-duration:.3s}@-webkit-keyframes _ngcontent-%COMP%_shake-shake{0%{transform:translate(-3px)}20%{transform:translate(3px)}40%{transform:translate(-3px)}60%{transform:translate(3px)}80%{transform:translate(-3px)}to{transform:translate(0)}}.session[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:auto;height:auto;margin:auto;background:#fff;border-radius:4px;box-shadow:0 2px 6px -1px #0000001f}.left[_ngcontent-%COMP%]{width:220px;height:auto;min-height:100%;position:relative;background-image:url(https://images.pexels.com/photos/114979/pexels-photo-114979.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940);background-size:cover;border-top-left-radius:4px;border-bottom-left-radius:4px}.left[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:40px;width:auto;margin:20px}"]});let e=t;return e})();var hF=(()=>{let t=class t{constructor(r){this.router=r,this.auth=new Hn,this.firestore=new vc,this.userDocument=null,this.auth?.listenToSignInStateChanges(i=>{this.auth.checkSignInState({whenSignedIn:s=>{this.getUserProfile()},whenSignedOut:s=>{},whenSignedInAndEmailNotVerified:s=>{},whenSignedInAndEmailVerified:s=>{},whenChanged:s=>{}})})}getUserProfile(){this.firestore.listenToDocument({name:"Getting Document",path:["Users",this.auth?.getAuth()?.currentUser?.uid||"{}"],onUpdate:r=>{this.userDocument=r.data()}})}toLogout(){this.auth.signOut(),this.router.navigate([""])}getProfile(){return this.userDocument?.username}};t.\u0275fac=function(i){return new(i||t)(ir(Ue))},t.\u0275cmp=tn({type:t,selectors:[["app-topbar"]],decls:9,vars:1,consts:[[1,"navbar"],[1,"logo"],[1,"nav-links"],[3,"click"]],template:function(i,s){i&1&&(X(0,"nav",0),xt(1,"div",1),X(2,"ul",2)(3,"li")(4,"a"),Et(5),it()(),X(6,"li")(7,"a",3),Gn("click",function(){return s.toLogout()}),Et(8,"logout"),it()()()()),i&2&&(Zw(5),e_("Hello, ",s.userDocument==null?null:s.userDocument.username,""))},styles:[".navbar[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,San Francisco,Helvetica,Arial,sans-serif;background-color:#b19cd9;padding:20px}.nav-links[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;justify-content:right;text-align:right}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline;margin-right:20px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}"]});let e=t;return e})();var dF=(()=>{let t=class t{constructor(r){this.router=r,this.firebasetsAuth=new Hn}ngOnInit(){this.firebasetsAuth.getAuth().onAuthStateChanged(r=>{r||this.router.navigate([""])})}};t.\u0275fac=function(i){return new(i||t)(ir(Ue))},t.\u0275cmp=tn({type:t,selectors:[["app-feed"]],decls:1,vars:0,template:function(i,s){i&1&&xt(0,"app-topbar")},dependencies:[hF]});let e=t;return e})();var tW=[{path:"",component:BN},{path:"signup",component:cF},{path:"reset",component:lF},{path:"feed",component:dF}],fF=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Xt({type:t}),t.\u0275inj=Yt({imports:[sI.forRoot(tW),sI]});let e=t;return e})();var pF=(()=>{let t=class t{constructor(){this.auth=new Hn,this.router=new Ue}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(i,s){i&1&&xt(0,"router-outlet")},dependencies:[Z_]});let e=t;return e})();var eW="@",nW=(()=>{let t=class t{constructor(r,i,s,a,c){this.doc=r,this.delegate=i,this.zone=s,this.animationType=a,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=lt(Fk,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-LAW5RYY5.js")).catch(i=>{throw new we(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc,this.scheduler);let a=new s(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(r,i){let s=this.delegate.createRenderer(r,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let a=new gT(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let l=c.createRenderer(r,i);a.use(l)}).catch(c=>{a.use(s)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(i){ah()},t.\u0275prov=wt({token:t,factory:t.\u0275fac});let e=t;return e})(),gT=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let n of this.replay)n(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,n){this.delegate.appendChild(t,n)}insertBefore(t,n,r,i){this.delegate.insertBefore(t,n,r,i)}removeChild(t,n,r){this.delegate.removeChild(t,n,r)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,r,i){this.delegate.setAttribute(t,n,r,i)}removeAttribute(t,n,r){this.delegate.removeAttribute(t,n,r)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,r,i){this.delegate.setStyle(t,n,r,i)}removeStyle(t,n,r){this.delegate.removeStyle(t,n,r)}setProperty(t,n,r){this.shouldReplay(n)&&this.replay.push(i=>i.setProperty(t,n,r)),this.delegate.setProperty(t,n,r)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,r){return this.shouldReplay(n)&&this.replay.push(i=>i.listen(t,n,r)),this.delegate.listen(t,n,r)}shouldReplay(t){return this.replay!==null&&t.startsWith(eW)}};function mF(e="animations"){return Vk("NgAsyncAnimations"),rm([{provide:im,useFactory:(t,n,r)=>new nW(t,n,r,e),deps:[en,pm,qt]},{provide:Jw,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var vT={production:!0,firebaseConfig:{apiKey:"AIzaSyDQSvJxcPBsFa6sttkCEwookpEp9Ghxsio",authDomain:"thing-702bc.firebaseapp.com",projectId:"thing-702bc",storageBucket:"thing-702bc.appspot.com",messagingSenderId:"855219867760",appId:"1:855219867760:web:6c89ba7257b02a332ca4b5",measurementId:"G-VZ7L6RQT3V"}};var yT;try{yT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{yT=!1}var Pd=(()=>{let t=class t{constructor(r){this._platformId=r,this.isBrowser=this._platformId?oP(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||yT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(i){return new(i||t)(G(rr))},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var kd;function rW(){if(kd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>kd=!0}))}finally{kd=kd||!1}return kd}function bT(e){return rW()?e:!!e.capture}function gF(e){return e.composedPath?e.composedPath()[0]:e.target}function vF(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function wT(e){return Array.isArray(e)?e:[e]}function _T(e){return e instanceof bo?e.nativeElement:e}var bF=new Set,la,iW=(()=>{let t=class t{constructor(r,i){this._platform=r,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):sW}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&oW(r,this._nonce),this._matchMedia(r)}};t.\u0275fac=function(i){return new(i||t)(G(Pd),G(oh,8))},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function oW(e,t){if(!bF.has(e))try{la||(la=document.createElement("style"),t&&(la.nonce=t),la.setAttribute("type","text/css"),document.head.appendChild(la)),la.sheet&&(la.sheet.insertRule(`@media ${e} {body{ }}`,0),bF.add(e))}catch(n){console.error(n)}}function sW(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var _F=(()=>{let t=class t{constructor(r,i){this._mediaMatcher=r,this._zone=i,this._queries=new Map,this._destroySubject=new Br}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return wF(wT(r)).some(s=>this._registerQuery(s).mql.matches)}observe(r){let s=wF(wT(r)).map(c=>this._registerQuery(c).observable),a=gu(s);return a=Zp(a.pipe(mo(1)),a.pipe(kk(1),xk(0))),a.pipe(yt(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:d,query:p})=>{l.matches=l.matches||d,l.breakpoints[p]=d}),l}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);let i=this._mediaMatcher.matchMedia(r),a={observable:new fo(c=>{let l=d=>this._zone.run(()=>c.next(d));return i.addListener(l),()=>{i.removeListener(l)}}).pipe(go(i),yt(({matches:c})=>({query:r,matches:c})),nm(this._destroySubject)),mql:i};return this._queries.set(r,a),a}};t.\u0275fac=function(i){return new(i||t)(G(iW),G(qt))},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function wF(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}function TF(e){return e.buttons===0||e.detail===0}function AF(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var ha=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(ha||{}),IF="cdk-high-contrast-black-on-white",EF="cdk-high-contrast-white-on-black",IT="cdk-high-contrast-active",SF=(()=>{let t=class t{constructor(r,i){this._platform=r,this._document=i,this._breakpointSubscription=lt(_F).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ha.NONE;let r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);let i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(r):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(r.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ha.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ha.BLACK_ON_WHITE}return ha.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let r=this._document.body.classList;r.remove(IT,IF,EF),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===ha.BLACK_ON_WHITE?r.add(IT,IF):i===ha.WHITE_ON_BLACK&&r.add(IT,EF)}}};t.\u0275fac=function(i){return new(i||t)(G(Pd),G(en))},t.\u0275prov=wt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ET=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Xt({type:t}),t.\u0275inj=Yt({});let e=t;return e})();function cW(){return!0}var lW=new kt("mat-sanity-checks",{providedIn:"root",factory:cW}),Go=(()=>{let t=class t{constructor(r,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,r._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return vF()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[r]}};t.\u0275fac=function(i){return new(i||t)(G(SF),G(lW,8),G(en))},t.\u0275mod=Xt({type:t}),t.\u0275inj=Yt({imports:[ET,ET]});let e=t;return e})();var xr=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(xr||{}),TT=class{constructor(t,n,r,i=!1){this._renderer=t,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=xr.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},xF=bT({passive:!0,capture:!0}),AT=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let n=gF(t);n&&this._events.get(t.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(s=>s.handleEvent(t))})}}addHandler(t,n,r,i){let s=this._events.get(n);if(s){let a=s.get(r);a?a.add(i):s.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,xF)})}removeHandler(t,n,r){let i=this._events.get(t);if(!i)return;let s=i.get(n);s&&(s.delete(r),s.size===0&&i.delete(n),i.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,xF)))}},CF={enterDuration:225,exitDuration:150},hW=800,RF=bT({passive:!0,capture:!0}),DF=["mousedown","touchstart"],kF=["mouseup","mouseleave","touchend","touchcancel"],Nd=class Nd{constructor(t,n,r,i){this._target=t,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=_T(r))}fadeInRipple(t,n,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=et(et({},CF),r.animation);r.centered&&(t=i.left+i.width/2,n=i.top+i.height/2);let a=r.radius||dW(t,n,i),c=t-i.left,l=n-i.top,d=s.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=`${c-a}px`,p.style.top=`${l-a}px`,p.style.height=`${a*2}px`,p.style.width=`${a*2}px`,r.color!=null&&(p.style.backgroundColor=r.color),p.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(p);let g=window.getComputedStyle(p),v=g.transitionProperty,b=g.transitionDuration,_=v==="none"||b==="0s"||b==="0s, 0s"||i.width===0&&i.height===0,I=new TT(this,p,r,_);p.style.transform="scale3d(1, 1, 1)",I.state=xr.FADING_IN,r.persistent||(this._mostRecentTransientRipple=I);let T=null;return!_&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let S=()=>this._finishRippleTransition(I),M=()=>this._destroyRipple(I);p.addEventListener("transitionend",S),p.addEventListener("transitioncancel",M),T={onTransitionEnd:S,onTransitionCancel:M}}),this._activeRipples.set(I,T),(_||!d)&&this._finishRippleTransition(I),I}fadeOutRipple(t){if(t.state===xr.FADING_OUT||t.state===xr.HIDDEN)return;let n=t.element,r=et(et({},CF),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=xr.FADING_OUT,(t._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=_T(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,DF.forEach(r=>{Nd._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{kF.forEach(n=>{this._triggerElement.addEventListener(n,this,RF)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===xr.FADING_IN?this._startFadeOutTransition(t):t.state===xr.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:r}=t.config;t.state=xr.VISIBLE,!r&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=xr.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel)),t.element.remove()}_onMousedown(t){let n=TF(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+hW;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!AF(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===xr.VISIBLE||t.config.terminateOnPointerUp&&t.state===xr.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(DF.forEach(n=>Nd._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&kF.forEach(n=>t.removeEventListener(n,this,RF)))}};Nd._eventManager=new AT;var PF=Nd;function dW(e,t,n){let r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}var LF=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Xt({type:t}),t.\u0275inj=Yt({imports:[Go,Go]});let e=t;return e})();var FF=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Xt({type:t}),t.\u0275inj=Yt({imports:[Go,Go]});let e=t;return e})();var VF=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Xt({type:t}),t.\u0275inj=Yt({imports:[Go,LF,Go]});let e=t;return e})();var pW="firebase",mW="10.9.0";wo(pW,mW,"app");var yc=new ch("ANGULARFIRE2_VERSION");var gW=(e,t)=>{let n=t?[t]:fP(),r=[];return n.forEach(i=>{i.container.getProvider(e).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},da=class{constructor(){return gW(vW)}},vW="app-check";function ST(){}var ev=class{zone;delegate;constructor(t,n=Ek){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){let i=this.zone,s=function(a){i.runGuarded(()=>{t.apply(this,[a])})};return this.delegate.schedule(s,n,r)}},xT=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ST,{},ST,ST)),n.pipe(Ke({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},nv=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ev(Zone.current)),this.insideAngular=n.run(()=>new ev(Zone.current,Yp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||e)(G(qt))};static \u0275prov=wt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function yW(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function Yn(e){return bW(yW())(e)}function bW(e){return function(n){return n=n.lift(new xT(e.ngZone)),n.pipe(mu(e.outsideAngular),Os(e.insideAngular))}}var wW="firebase",_W="10.9.0";Kn.registerVersion(wW,_W,"app-compat");var IW=["ngOnDestroy"],BF=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{if(e[s])return r?.spy?.get&&r.spy.get(s,e[s]),e[s];if(IW.indexOf(s)>-1)return()=>{};let a=t.toPromise().then(c=>{let l=c?.[s];return typeof l=="function"?l.bind(c):l?.then?l.then(d=>n.run(()=>d)):n.run(()=>l)});return new Proxy(()=>{},{get:(c,l)=>a[l],apply:(c,l,d)=>a.then(p=>{let g=p?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})});var rv=class{constructor(t){return t}},bc=new kt("angularfire2.app.options"),wc=new kt("angularfire2.app.name");function Od(e,t,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let a=Kn.apps.filter(c=>c&&c.name===i.name)[0]||t.runOutsideAngular(()=>Kn.initializeApp(e,i));try{if(JSON.stringify(e)!==JSON.stringify(a.options)){let c=!!module.hot;EW("error",`${a.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new rv(a)}var EW=(e,...t)=>{o_()&&typeof console<"u"&&console[e](...t)},TW={provide:rv,useFactory:Od,deps:[bc,qt,[new eh,wc]]},qF=(()=>{class e{static initializeApp(n,r){return{ngModule:e,providers:[{provide:bc,useValue:n},{provide:wc,useValue:r}]}}constructor(n){Kn.registerVersion("angularfire",yc.full,"core"),Kn.registerVersion("angularfire",yc.full,"app-compat"),Kn.registerVersion("angular",zk.full,n.toString())}static \u0275fac=function(r){return new(r||e)(G(rr))};static \u0275mod=Xt({type:e});static \u0275inj=Yt({providers:[TW]})}return e})();function iv(e,t,n,r,i){let[,s,a]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===e)||[];if(s)return AW(i,a)||(UF("error",`${t} was already initialized on the ${n} Firebase App with different settings.${SW?" You may need to reload as Firebase is not HMR aware.":""}`),UF("warn",{is:i,was:a})),s;{let c=r();return globalThis.\u0275AngularfireInstanceCache.push([e,c,i]),c}}function AW(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var SW=typeof module<"u"&&!!module.hot,UF=(e,...t)=>{o_()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var RW=new Map,DW={activated:!1,tokenObservers:[]},kW={initialized:!1,enabled:!1};function Hr(e){return RW.get(e)||Object.assign({},DW)}function HF(){return kW}var PW="https://content-firebaseappcheck.googleapis.com/v1";var NW="exchangeDebugToken",zF={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Gtt=24*60*60*1e3;var RT=class{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return D(this,null,function*(){this.stop();try{this.pending=new a_,this.pending.promise.catch(n=>{}),yield OW(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new a_,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function OW(e){return new Promise(t=>{setTimeout(t,e)})}var MW={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ko=new hP("appCheck","AppCheck",MW);function WF(e){if(!Hr(e).activated)throw Ko.create("use-before-activation",{appName:e.name})}function QF(r,i){return D(this,arguments,function*({url:e,body:t},n){let s={"Content-Type":"application/json"},a=n.getImmediate({optional:!0});if(a){let b=yield a.getHeartbeatsHeader();b&&(s["X-Firebase-Client"]=b)}let c={method:"POST",body:JSON.stringify(t),headers:s},l;try{l=yield fetch(e,c)}catch(b){throw Ko.create("fetch-network-error",{originalErrorMessage:b?.message})}if(l.status!==200)throw Ko.create("fetch-status-error",{httpStatus:l.status});let d;try{d=yield l.json()}catch(b){throw Ko.create("fetch-parse-error",{originalErrorMessage:b?.message})}let p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Ko.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let g=Number(p[1])*1e3,v=Date.now();return{token:d.token,expireTimeMillis:v+g,issuedAtTimeMillis:v}})}function YF(e,t){let{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${PW}/projects/${n}/apps/${r}:${NW}?key=${i}`,body:{debug_token:t}}}var LW="firebase-app-check-database",FW=1,DT="firebase-app-check-store";var ov=null;function VW(){return ov||(ov=new Promise((e,t)=>{try{let n=indexedDB.open(LW,FW);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Ko.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(DT,{keyPath:"compositeKey"})}}}catch(n){t(Ko.create("storage-open",{originalErrorMessage:n?.message}))}}),ov)}function jW(e,t){return UW(BW(e),t)}function UW(e,t){return D(this,null,function*(){let r=(yield VW()).transaction(DT,"readwrite"),s=r.objectStore(DT).put({compositeKey:e,value:t});return new Promise((a,c)=>{s.onsuccess=l=>{a()},r.onerror=l=>{var d;c(Ko.create("storage-set",{originalErrorMessage:(d=l.target.error)===null||d===void 0?void 0:d.message}))}})})}function BW(e){return`${e.options.appId}-${e.name}`}var kT=new dm("@firebase/app-check");function CT(e,t){return hm()?jW(e,t).catch(n=>{kT.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function XF(){return HF().enabled}function JF(){return D(this,null,function*(){let e=HF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var qW={error:"UNKNOWN_ERROR"};function zW(e){return uP.encodeString(JSON.stringify(e),!1)}function PT(e,t=!1){return D(this,null,function*(){let n=e.app;WF(n);let r=Hr(n),i=r.token,s;if(i&&!Md(i)&&(r.token=void 0,i=void 0),!i){let l=yield r.cachedTokenPromise;l&&(Md(l)?i=l:yield CT(n,void 0))}if(!t&&i&&Md(i))return{token:i.token};let a=!1;if(XF()){r.exchangeTokenPromise||(r.exchangeTokenPromise=QF(YF(n,yield JF()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),a=!0);let l=yield r.exchangeTokenPromise;return yield CT(n,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),a=!0),i=yield Hr(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?kT.warn(l.message):kT.error(l),s=l}let c;return i?s?Md(i)?c={token:i.token,internalError:s}:c=KF(s):(c={token:i.token},r.token=i,yield CT(n,i)):c=KF(s),a&&HW(n,c),c})}function GW(e){return D(this,null,function*(){let t=e.app;WF(t);let{provider:n}=Hr(t);if(XF()){let r=yield JF(),{token:i}=yield QF(YF(t,r),e.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function KW(e,t,n,r){let{app:i}=e,s=Hr(i),a={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,a],s.token&&Md(s.token)){let c=s.token;Promise.resolve().then(()=>{n({token:c.token}),GF(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>GF(e))}function ZF(e,t){let n=Hr(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function GF(e){let{app:t}=e,n=Hr(t),r=n.tokenRefresher;r||(r=$W(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function $W(e){let{app:t}=e;return new RT(()=>D(this,null,function*(){let n=Hr(t),r;if(n.token?r=yield PT(e,!0):r=yield PT(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Hr(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},zF.RETRIAL_MIN_WAIT,zF.RETRIAL_MAX_WAIT)}function HW(e,t){let n=Hr(e).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Md(e){return e.expireTimeMillis-Date.now()>0}function KF(e){return{token:zW(qW),error:e}}var NT=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=Hr(this.app);for(let n of t)ZF(this.app,n.next);return Promise.resolve()}};function WW(e,t){return new NT(e,t)}function QW(e){return{getToken:t=>PT(e,t),getLimitedUseToken:()=>GW(e),addTokenListener:t=>KW(e,"INTERNAL",t),removeTokenListener:t=>ZF(e.app,t)}}var YW="@firebase/app-check",XW="0.8.2";var JW="app-check",$F="app-check-internal";function ZW(){dh(new Vs(JW,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return WW(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider($F).initialize()})),dh(new Vs($F,e=>{let t=e.getProvider("app-check").getImmediate();return QW(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),wo(YW,XW)}ZW();var t7=["localhost","0.0.0.0","127.0.0.1"],net=typeof window<"u"&&t7.includes(window.location.hostname);var OT=new kt("angularfire2.auth.use-emulator"),MT=new kt("angularfire2.auth.settings"),LT=new kt("angularfire2.auth.tenant-id"),FT=new kt("angularfire2.auth.langugage-code"),VT=new kt("angularfire2.auth.use-device-language"),jT=new kt("angularfire.auth.persistence"),UT=(e,t,n,r,i,s,a,c)=>iv(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),a)for(let[d,p]of Object.entries(a))l.settings[d]=p;return c&&l.setPersistence(c),l},[n,r,i,s,a,c]),eV=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,a,c,l,d,p,g,v,b){let _=new Br,I=ct(void 0).pipe(Os(a.outsideAngular),Ge(()=>s.runOutsideAngular(()=>import("./chunk-LX6V6HMH.js"))),yt(()=>Od(n,s,r)),yt(T=>UT(T,s,c,d,p,g,l,v)),Kw({bufferSize:1,refCount:!1}));if(Fs(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{I.pipe(ui()).subscribe();let T=I.pipe(Ge(k=>k.getRedirectResult().then(z=>z,()=>null)),Yn,Kw({bufferSize:1,refCount:!1})),S=I.pipe(Ge(k=>new fo(z=>({unsubscribe:s.runOutsideAngular(()=>k.onAuthStateChanged(H=>z.next(H),H=>z.error(H),()=>z.complete()))})))),M=I.pipe(Ge(k=>new fo(z=>({unsubscribe:s.runOutsideAngular(()=>k.onIdTokenChanged(H=>z.next(H),H=>z.error(H),()=>z.complete()))}))));this.authState=T.pipe($w(S),mu(a.outsideAngular),Os(a.insideAngular)),this.user=T.pipe($w(M),mu(a.outsideAngular),Os(a.insideAngular)),this.idToken=this.user.pipe(Ge(k=>k?be(k.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(Ge(k=>k?be(k.getIdTokenResult()):ct(null))),this.credential=Sk(T,_,this.authState.pipe(Er(k=>!k))).pipe(yt(k=>k?.user?k:null),mu(a.outsideAngular),Os(a.insideAngular))}return BF(this,I,s,{spy:{apply:(T,S,M)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&M.then(k=>_.next(k))}}})}static \u0275fac=function(r){return new(r||e)(G(bc),G(wc,8),G(rr),G(qt),G(nv),G(OT,8),G(MT,8),G(LT,8),G(FT,8),G(VT,8),G(jT,8),G(da,8))};static \u0275prov=wt({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var n7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qr={},W,uA=uA||{},vt=n7||self;function bv(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Qd(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function r7(e){return Object.prototype.hasOwnProperty.call(e,BT)&&e[BT]||(e[BT]=++i7)}var BT="closure_uid_"+(1e9*Math.random()>>>0),i7=0;function o7(e,t,n){return e.call.apply(e.bind,arguments)}function s7(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function _n(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_n=o7:_n=s7,_n.apply(null,arguments)}function sv(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Ye(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[i].apply(r,a)}}function $o(){this.s=this.s,this.o=this.o}var a7=0;$o.prototype.s=!1;$o.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),a7!=0)&&r7(this)};$o.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var pV=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function cA(e){let t=e.length;if(0<t){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function nV(e,t){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(bv(r)){let i=e.length||0,s=r.length||0;e.length=i+s;for(let a=0;a<s;a++)e[i+a]=r[a]}else e.push(r)}}function In(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}In.prototype.h=function(){this.defaultPrevented=!0};var u7=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let n=()=>{};vt.addEventListener("test",n,t),vt.removeEventListener("test",n,t)}catch{}return e}();function Bd(e){return/^[\s\xa0]*$/.test(e)}function wv(){var e=vt.navigator;return e&&(e=e.userAgent)?e:""}function bi(e){return wv().indexOf(e)!=-1}function lA(e){return lA[" "](e),e}lA[" "]=function(){};function c7(e,t){var n=X7;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var l7=bi("Opera"),Tc=bi("Trident")||bi("MSIE"),mV=bi("Edge"),$T=mV||Tc,gV=bi("Gecko")&&!(wv().toLowerCase().indexOf("webkit")!=-1&&!bi("Edge"))&&!(bi("Trident")||bi("MSIE"))&&!bi("Edge"),h7=wv().toLowerCase().indexOf("webkit")!=-1&&!bi("Edge");function vV(){var e=vt.document;return e?e.documentMode:void 0}var HT;t:{if(av="",uv=function(){var e=wv();if(gV)return/rv:([^\);]+)(\)|;)/.exec(e);if(mV)return/Edge\/([\d\.]+)/.exec(e);if(Tc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(h7)return/WebKit\/(\S+)/.exec(e);if(l7)return/(?:Version)[ \/]?(\S+)/.exec(e)}(),uv&&(av=uv?uv[1]:""),Tc&&(cv=vV(),cv!=null&&cv>parseFloat(av))){HT=String(cv);break t}HT=av}var av,uv,cv,WT;vt.document&&Tc?(qT=vV(),WT=qT||parseInt(HT,10)||void 0):WT=void 0;var qT,d7=WT;function qd(e,t){if(In.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(gV){t:{try{lA(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:f7[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&qd.$.h.call(this)}}Ye(qd,In);var f7={2:"touch",3:"pen",4:"mouse"};qd.prototype.h=function(){qd.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yd="closure_listenable_"+(1e6*Math.random()|0),p7=0;function m7(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++p7,this.fa=this.ia=!1}function _v(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function hA(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function g7(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function yV(e){let t={};for(let n in e)t[n]=e[n];return t}var rV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bV(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let s=0;s<rV.length;s++)n=rV[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Iv(e){this.src=e,this.g={},this.h=0}Iv.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var a=YT(e,t,r,i);return-1<a?(t=e[a],n||(t.ia=!1)):(t=new m7(t,this.src,s,!!r,i),t.ia=n,e.push(t)),t};function QT(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=pV(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(_v(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function YT(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}var dA="closure_lm_"+(1e6*Math.random()|0),zT={};function wV(e,t,n,r,i){if(r&&r.once)return IV(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)wV(e,t[s],n,r,i);return null}return n=mA(n),e&&e[Yd]?e.O(t,n,Qd(r)?!!r.capture:!!r,i):_V(e,t,n,!1,r,i)}function _V(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=Qd(i)?!!i.capture:!!i,c=pA(e);if(c||(e[dA]=c=new Iv(e)),n=c.add(t,n,r,a,s),n.proxy)return n;if(r=v7(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)u7||(i=a),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(TV(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function v7(){function e(n){return t.call(e.src,e.listener,n)}let t=y7;return e}function IV(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)IV(e,t[s],n,r,i);return null}return n=mA(n),e&&e[Yd]?e.P(t,n,Qd(r)?!!r.capture:!!r,i):_V(e,t,n,!0,r,i)}function EV(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)EV(e,t[s],n,r,i);else r=Qd(r)?!!r.capture:!!r,n=mA(n),e&&e[Yd]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=YT(s,n,r,i),-1<n&&(_v(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=pA(e))&&(t=e.g[t.toString()],e=-1,t&&(e=YT(t,n,r,i)),(n=-1<e?t[e]:null)&&fA(n))}function fA(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Yd])QT(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(TV(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=pA(t))?(QT(n,e),n.h==0&&(n.src=null,t[dA]=null)):_v(e)}}}function TV(e){return e in zT?zT[e]:zT[e]="on"+e}function y7(e,t){if(e.fa)e=!0;else{t=new qd(t,this);var n=e.listener,r=e.la||e.src;e.ia&&fA(e),e=n.call(r,t)}return e}function pA(e){return e=e[dA],e instanceof Iv?e:null}var GT="__closure_events_fn_"+(1e9*Math.random()>>>0);function mA(e){return typeof e=="function"?e:(e[GT]||(e[GT]=function(t){return e.handleEvent(t)}),e[GT])}function Qe(){$o.call(this),this.i=new Iv(this),this.S=this,this.J=null}Ye(Qe,$o);Qe.prototype[Yd]=!0;Qe.prototype.removeEventListener=function(e,t,n,r){EV(this,e,t,n,r)};function hn(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new In(t,e);else if(t instanceof In)t.target=t.target||e;else{var i=t;t=new In(r,e),bV(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=lv(a,r,!0,t)&&i}if(a=t.g=e,i=lv(a,r,!0,t)&&i,i=lv(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)a=t.g=n[s],i=lv(a,r,!1,t)&&i}Qe.prototype.N=function(){if(Qe.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)_v(n[r]);delete e.g[t],e.h--}}this.J=null};Qe.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Qe.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function lv(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.fa&&a.capture==n){var c=a.listener,l=a.la||a.src;a.ia&&QT(e.i,a),i=c.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var gA=vt.JSON.stringify,XT=class{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}};function b7(){var e=vA;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var JT=class{constructor(){this.h=this.g=null}add(t,n){let r=AV.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}},AV=new XT(()=>new ZT,e=>e.reset()),ZT=class{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function w7(e){var t=1;e=e.split(":");let n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _7(e){vt.setTimeout(()=>{throw e},0)}var zd,Gd=!1,vA=new JT,SV=()=>{let e=vt.Promise.resolve(void 0);zd=()=>{e.then(I7)}},I7=()=>{for(var e;e=b7();){try{e.h.call(e.g)}catch(n){_7(n)}var t=AV;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Gd=!1};function Ev(e,t){Qe.call(this),this.h=e||1,this.g=t||vt,this.j=_n(this.qb,this),this.l=Date.now()}Ye(Ev,Qe);W=Ev.prototype;W.ga=!1;W.T=null;W.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hn(this,"tick"),this.ga&&(yA(this),this.start()))}};W.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function yA(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}W.N=function(){Ev.$.N.call(this),yA(this),delete this.g};function bA(e,t,n){if(typeof e=="function")n&&(e=_n(e,n));else if(e&&typeof e.handleEvent=="function")e=_n(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:vt.setTimeout(e,t||0)}function xV(e){e.g=bA(()=>{e.g=null,e.i&&(e.i=!1,xV(e))},e.j);let t=e.h;e.h=null,e.m.apply(null,t)}var tA=class extends $o{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:xV(this)}N(){super.N(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Kd(e){$o.call(this),this.h=e,this.g={}}Ye(Kd,$o);var iV=[];function CV(e,t,n,r){Array.isArray(n)||(n&&(iV[0]=n.toString()),n=iV);for(var i=0;i<n.length;i++){var s=wV(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function RV(e){hA(e.g,function(t,n){this.g.hasOwnProperty(n)&&fA(t)},e),e.g={}}Kd.prototype.N=function(){Kd.$.N.call(this),RV(this)};Kd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Tv(){this.g=!0}Tv.prototype.Ea=function(){this.g=!1};function E7(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",c=s.split("&"),l=0;l<c.length;l++){var d=c[l].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");a=2<=g.length&&g[1]=="type"?a+(p+"="+d+"&"):a+(p+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+a})}function T7(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+a})}function Ic(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+S7(e,n)+(r?" "+r:"")})}function A7(e,t){e.info(function(){return"TIMEOUT: "+t})}Tv.prototype.info=function(){};function S7(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return gA(n)}catch{return t}}var ga={},oV=null;function Av(){return oV=oV||new Qe}ga.Ta="serverreachability";function DV(e){In.call(this,ga.Ta,e)}Ye(DV,In);function $d(e){let t=Av();hn(t,new DV(t))}ga.STAT_EVENT="statevent";function kV(e,t){In.call(this,ga.STAT_EVENT,e),this.stat=t}Ye(kV,In);function Nn(e){let t=Av();hn(t,new kV(t,e))}ga.Ua="timingevent";function PV(e,t){In.call(this,ga.Ua,e),this.size=t}Ye(PV,In);function Xd(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return vt.setTimeout(function(){e()},t)}var Sv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},NV={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wA(){}wA.prototype.h=null;function sV(e){return e.h||(e.h=e.i())}function OV(){}var Jd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _A(){In.call(this,"d")}Ye(_A,In);function IA(){In.call(this,"c")}Ye(IA,In);var eA;function xv(){}Ye(xv,wA);xv.prototype.g=function(){return new XMLHttpRequest};xv.prototype.i=function(){return{}};eA=new xv;function Zd(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Kd(this),this.P=x7,e=$T?125:void 0,this.V=new Ev(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new MV}function MV(){this.i=null,this.g="",this.h=!1}var x7=45e3,LV={},nA={};W=Zd.prototype;W.setTimeout=function(e){this.P=e};function rA(e,t,n){e.L=1,e.A=Rv(Hi(t)),e.u=n,e.S=!0,FV(e,null)}function FV(e,t){e.G=Date.now(),tf(e),e.B=Hi(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),KV(n.i,"t",r),e.o=0,n=e.l.J,e.h=new MV,e.g=d4(e.l,n?t:null,!e.u),0<e.O&&(e.M=new tA(_n(e.Pa,e,e.g),e.O)),CV(e.U,e.g,"readystatechange",e.nb),t=e.I?yV(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),$d(),E7(e.j,e.v,e.B,e.m,e.W,e.u)}W.nb=function(e){e=e.target;let t=this.M;t&&wi(e)==3?t.l():this.Pa(e)};W.Pa=function(e){try{if(e==this.g)t:{let p=wi(this.g);var t=this.g.Ia();let g=this.g.da();if(!(3>p)&&(p!=3||$T||this.g&&(this.h.h||this.g.ja()||lV(this.g)))){this.J||p!=4||t==7||(t==8||0>=g?$d(3):$d(2)),Cv(this);var n=this.g.da();this.ca=n;e:if(VV(this)){var r=lV(this.g);e="";var i=r.length,s=wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fa(this),Ud(this);var a="";break e}this.h.i=new vt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,T7(this.j,this.v,this.B,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bd(c)){var d=c;break e}}d=null}if(n=d)Ic(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,iA(this,n);else{this.i=!1,this.s=3,Nn(12),fa(this),Ud(this);break t}}this.S?(jV(this,p,a),$T&&this.i&&p==3&&(CV(this.U,this.V,"tick",this.mb),this.V.start())):(Ic(this.j,this.m,a,null),iA(this,a)),p==4&&fa(this),this.i&&!this.J&&(p==4?u4(this.l,this):(this.i=!1,tf(this)))}else W7(this.g),n==400&&0<a.indexOf("Unknown SID")?(this.s=3,Nn(12)):(this.s=0,Nn(13)),fa(this),Ud(this)}}}catch{}finally{}};function VV(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function jV(e,t,n){let r=!0,i;for(;!e.J&&e.o<n.length;)if(i=C7(e,n),i==nA){t==4&&(e.s=4,Nn(14),r=!1),Ic(e.j,e.m,null,"[Incomplete Response]");break}else if(i==LV){e.s=4,Nn(15),Ic(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Ic(e.j,e.m,i,null),iA(e,i);VV(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,Nn(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),CA(t),t.M=!0,Nn(11))):(Ic(e.j,e.m,n,"[Invalid Chunked Response]"),fa(e),Ud(e))}W.mb=function(){if(this.g){var e=wi(this.g),t=this.g.ja();this.o<t.length&&(Cv(this),jV(this,e,t),this.i&&e!=4&&tf(this))}};function C7(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?nA:(n=Number(t.substring(n,r)),isNaN(n)?LV:(r+=1,r+n>t.length?nA:(t=t.slice(r,r+n),e.o=r+n,t)))}W.cancel=function(){this.J=!0,fa(this)};function tf(e){e.Y=Date.now()+e.P,UV(e,e.P)}function UV(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Xd(_n(e.lb,e),t)}function Cv(e){e.C&&(vt.clearTimeout(e.C),e.C=null)}W.lb=function(){this.C=null;let e=Date.now();0<=e-this.Y?(A7(this.j,this.B),this.L!=2&&($d(),Nn(17)),fa(this),this.s=2,Ud(this)):UV(this,this.Y-e)};function Ud(e){e.l.H==0||e.J||u4(e.l,e)}function fa(e){Cv(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,yA(e.V),RV(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function iA(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||oA(n.i,e))){if(!e.K&&oA(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)mv(n),Pv(n);else break t;xA(n),Nn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Xd(_n(n.ib,n),6e3));if(1>=WV(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else pa(n,11)}else if((e.K||n.g==e)&&mv(n),!Bd(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let d=i[t];if(n.V=d[0],d=d[1],n.H==2)if(d[0]=="c"){n.K=d[1],n.pa=d[2];let p=d[3];p!=null&&(n.ra=p,n.l.info("VER="+n.ra));let g=d[4];g!=null&&(n.Ga=g,n.l.info("SVER="+n.Ga));let v=d[5];v!=null&&typeof v=="number"&&0<v&&(r=1.5*v,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let b=e.g;if(b){let _=b.g?b.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var s=r.i;s.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(EA(s,s.h),s.h=null))}if(r.F){let I=b.g?b.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(r.Da=I,Zt(r.I,r.F,I))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var a=e;if(r.wa=h4(r,r.J?r.pa:null,r.Y),a.K){QV(r.i,a);var c=a,l=r.L;l&&c.setTimeout(l),c.C&&(Cv(c),tf(c)),r.g=a}else s4(r);0<n.j.length&&Nv(n)}else d[0]!="stop"&&d[0]!="close"||pa(n,7);else n.H==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?pa(n,7):SA(n):d[0]!="noop"&&n.h&&n.h.Aa(d),n.A=0)}}$d(4)}catch{}}function R7(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(bv(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function D7(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(bv(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(let r in e)t[n++]=r;return t}}}function BV(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(bv(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=D7(e),r=R7(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}var qV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k7(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ma(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ma){this.h=e.h,fv(this,e.j),this.s=e.s,this.g=e.g,pv(this,e.m),this.l=e.l;var t=e.i,n=new Hd;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),aV(this,n),this.o=e.o}else e&&(t=String(e).match(qV))?(this.h=!1,fv(this,t[1]||"",!0),this.s=Vd(t[2]||""),this.g=Vd(t[3]||"",!0),pv(this,t[4]),this.l=Vd(t[5]||"",!0),aV(this,t[6]||"",!0),this.o=Vd(t[7]||"")):(this.h=!1,this.i=new Hd(null,this.h))}ma.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jd(t,uV,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(jd(t,uV,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(jd(n,n.charAt(0)=="/"?O7:N7,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jd(n,L7)),e.join("")};function Hi(e){return new ma(e)}function fv(e,t,n){e.j=n?Vd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pv(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function aV(e,t,n){t instanceof Hd?(e.i=t,F7(e.i,e.h)):(n||(t=jd(t,M7)),e.i=new Hd(t,e.h))}function Zt(e,t,n){e.i.set(t,n)}function Rv(e){return Zt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Vd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jd(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,P7),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function P7(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var uV=/[#\/\?@]/g,N7=/[#\?:]/g,O7=/[#\?]/g,M7=/[#\?@]/g,L7=/#/g;function Hd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ho(e){e.g||(e.g=new Map,e.h=0,e.i&&k7(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}W=Hd.prototype;W.add=function(e,t){Ho(this),this.i=null,e=Ac(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function zV(e,t){Ho(e),t=Ac(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function GV(e,t){return Ho(e),t=Ac(e,t),e.g.has(t)}W.forEach=function(e,t){Ho(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};W.ta=function(){Ho(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){let i=e[r];for(let s=0;s<i.length;s++)n.push(t[r])}return n};W.Z=function(e){Ho(this);let t=[];if(typeof e=="string")GV(this,e)&&(t=t.concat(this.g.get(Ac(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};W.set=function(e,t){return Ho(this),this.i=null,e=Ac(this,e),GV(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};W.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function KV(e,t,n){zV(e,t),0<n.length&&(e.i=null,e.g.set(Ac(e,t),cA(n)),e.h+=n.length)}W.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];let s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;a[r]!==""&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")};function Ac(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function F7(e,t){t&&!e.j&&(Ho(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(zV(this,r),KV(this,i,n))},e)),e.j=t}var V7=class{constructor(e,t){this.g=e,this.map=t}};function $V(e){this.l=e||j7,vt.PerformanceNavigationTiming?(e=vt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(vt.g&&vt.g.Ka&&vt.g.Ka()&&vt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var j7=10;function HV(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function WV(e){return e.h?1:e.g?e.g.size:0}function oA(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function EA(e,t){e.g?e.g.add(t):e.h=t}function QV(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}$V.prototype.cancel=function(){if(this.i=YV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function YV(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.F);return t}return cA(e.i)}var U7=class{stringify(e){return vt.JSON.stringify(e,void 0)}parse(e){return vt.JSON.parse(e,void 0)}};function B7(){this.g=new U7}function q7(e,t,n){let r=n||"";try{BV(e,function(i,s){let a=i;Qd(i)&&(a=gA(i)),t.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function z7(e,t){let n=new Tv;if(vt.Image){let r=new Image;r.onload=sv(hv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=sv(hv,n,r,"TestLoadImage: error",!1,t),r.onabort=sv(hv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=sv(hv,n,r,"TestLoadImage: timeout",!1,t),vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function hv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function ef(e){this.l=e.ec||null,this.j=e.ob||!1}Ye(ef,wA);ef.prototype.g=function(){return new Dv(this.l,this.j)};ef.prototype.i=function(e){return function(){return e}}({});function Dv(e,t){Qe.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=TA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ye(Dv,Qe);var TA=0;W=Dv.prototype;W.open=function(e,t){if(this.readyState!=TA)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Wd(this)};W.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||vt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nf(this)),this.readyState=TA};W.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wd(this)),this.g&&(this.readyState=3,Wd(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof vt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XV(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function XV(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}W.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?nf(this):Wd(this),this.readyState==3&&XV(this)}};W.Za=function(e){this.g&&(this.response=this.responseText=e,nf(this))};W.Ya=function(e){this.g&&(this.response=e,nf(this))};W.ka=function(){this.g&&nf(this)};function nf(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Wd(e)}W.setRequestHeader=function(e,t){this.v.append(e,t)};W.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};W.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Wd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Dv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var G7=vt.JSON.parse;function fe(e){Qe.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=JV,this.L=this.M=!1}Ye(fe,Qe);var JV="",K7=/^https?$/i,$7=["POST","PUT"];W=fe.prototype;W.Oa=function(e){this.M=e};W.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():eA.g(),this.C=this.u?sV(this.u):sV(eA),this.g.onreadystatechange=_n(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){cV(this,s);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=vt.FormData&&e instanceof vt.FormData,!(0<=pV($7,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{e4(this),0<this.B&&((this.L=H7(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_n(this.ua,this)):this.A=bA(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){cV(this,s)}};function H7(e){return Tc&&typeof e.timeout=="number"&&e.ontimeout!==void 0}W.ua=function(){typeof uA<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hn(this,"timeout"),this.abort(8))};function cV(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ZV(e),kv(e)}function ZV(e){e.F||(e.F=!0,hn(e,"complete"),hn(e,"error"))}W.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,hn(this,"complete"),hn(this,"abort"),kv(this))};W.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kv(this,!0)),fe.$.N.call(this)};W.La=function(){this.s||(this.G||this.v||this.l?t4(this):this.kb())};W.kb=function(){t4(this)};function t4(e){if(e.h&&typeof uA<"u"&&(!e.C[1]||wi(e)!=4||e.da()!=2)){if(e.v&&wi(e)==4)bA(e.La,0,e);else if(hn(e,"readystatechange"),wi(e)==4){e.h=!1;try{let a=e.da();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){var i=String(e.I).match(qV)[1]||null;!i&&vt.self&&vt.self.location&&(i=vt.self.location.protocol.slice(0,-1)),r=!K7.test(i?i.toLowerCase():"")}n=r}if(n)hn(e,"complete"),hn(e,"success");else{e.m=6;try{var s=2<wi(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",ZV(e)}}finally{kv(e)}}}}function kv(e,t){if(e.g){e4(e);let n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||hn(e,"ready");try{n.onreadystatechange=r}catch{}}}function e4(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(vt.clearTimeout(e.A),e.A=null)}W.isActive=function(){return!!this.g};function wi(e){return e.g?e.g.readyState:0}W.da=function(){try{return 2<wi(this)?this.g.status:-1}catch{return-1}};W.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};W.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),G7(t)}};function lV(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case JV:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function W7(e){let t={};e=(e.g&&2<=wi(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Bd(e[r]))continue;var n=w7(e[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=t[i]||[];t[i]=s,s.push(n)}g7(t,function(r){return r.join(", ")})}W.Ia=function(){return this.m};W.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function n4(e){let t="";return hA(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function AA(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=n4(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Zt(e,t,n))}function Ld(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function r4(e){this.Ga=0,this.j=[],this.l=new Tv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ld("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ld("baseRetryDelayMs",5e3,e),this.hb=Ld("retryDelaySeedMs",1e4,e),this.eb=Ld("forwardChannelMaxRetries",2,e),this.xa=Ld("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new $V(e&&e.concurrentRequestLimit),this.Ja=new B7,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}W=r4.prototype;W.ra=8;W.H=1;function SA(e){if(i4(e),e.H==3){var t=e.W++,n=Hi(e.I);if(Zt(n,"SID",e.K),Zt(n,"RID",t),Zt(n,"TYPE","terminate"),rf(e,n),t=new Zd(e,e.l,t),t.L=2,t.A=Rv(Hi(n)),n=!1,vt.navigator&&vt.navigator.sendBeacon)try{n=vt.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&vt.Image&&(new Image().src=t.A,n=!0),n||(t.g=d4(t.l,null),t.g.ha(t.A)),t.G=Date.now(),tf(t)}l4(e)}function Pv(e){e.g&&(CA(e),e.g.cancel(),e.g=null)}function i4(e){Pv(e),e.u&&(vt.clearTimeout(e.u),e.u=null),mv(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&vt.clearTimeout(e.m),e.m=null)}function Nv(e){if(!HV(e.i)&&!e.m){e.m=!0;var t=e.Na;zd||SV(),Gd||(zd(),Gd=!0),vA.add(t,e),e.C=0}}function Q7(e,t){return WV(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Xd(_n(e.Na,e,t),c4(e,e.C)),e.C++,!0)}W.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;let i=new Zd(this,this.l,e),s=this.s;if(this.U&&(s?(s=yV(s),bV(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=o4(this,i,t),n=Hi(this.I),Zt(n,"RID",e),Zt(n,"CVER",22),this.F&&Zt(n,"X-HTTP-Session-Id",this.F),rf(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(n4(s)))+"&"+t:this.o&&AA(n,this.o,s)),EA(this.i,i),this.bb&&Zt(n,"TYPE","init"),this.P?(Zt(n,"$req",t),Zt(n,"SID","null"),i.aa=!0,rA(i,n,null)):rA(i,n,t),this.H=2}}else this.H==3&&(e?hV(this,e):this.j.length==0||HV(this.i)||hV(this))};function hV(e,t){var n;t?n=t.m:n=e.W++;let r=Hi(e.I);Zt(r,"SID",e.K),Zt(r,"RID",n),Zt(r,"AID",e.V),rf(e,r),e.o&&e.s&&AA(r,e.o,e.s),n=new Zd(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=o4(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),EA(e.i,n),rA(n,r,t)}function rf(e,t){e.na&&hA(e.na,function(n,r){Zt(t,r,n)}),e.h&&BV({},function(n,r){Zt(t,r,n)})}function o4(e,t,n){n=Math.min(e.j.length,n);var r=e.h?_n(e.h.Va,e.h,e):null;t:{var i=e.j;let s=-1;for(;;){let a=["count="+n];s==-1?0<n?(s=i[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let c=!0;for(let l=0;l<n;l++){let d=i[l].g,p=i[l].map;if(d-=s,0>d)s=Math.max(0,i[l].g-100),c=!1;else try{q7(p,a,"req"+d+"_")}catch{r&&r(p)}}if(c){r=a.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function s4(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;zd||SV(),Gd||(zd(),Gd=!0),vA.add(t,e),e.A=0}}function xA(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Xd(_n(e.Ma,e),c4(e,e.A)),e.A++,!0)}W.Ma=function(){if(this.u=null,a4(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Xd(_n(this.jb,this),e)}};W.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Nn(10),Pv(this),a4(this))};function CA(e){e.B!=null&&(vt.clearTimeout(e.B),e.B=null)}function a4(e){e.g=new Zd(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Hi(e.wa);Zt(t,"RID","rpc"),Zt(t,"SID",e.K),Zt(t,"AID",e.V),Zt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Zt(t,"TO",e.qa),Zt(t,"TYPE","xmlhttp"),rf(e,t),e.o&&e.s&&AA(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Rv(Hi(t)),n.u=null,n.S=!0,FV(n,e)}W.ib=function(){this.v!=null&&(this.v=null,Pv(this),xA(this),Nn(19))};function mv(e){e.v!=null&&(vt.clearTimeout(e.v),e.v=null)}function u4(e,t){var n=null;if(e.g==t){mv(e),CA(e),e.g=null;var r=2}else if(oA(e.i,t))n=t.F,QV(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r=Av(),hn(r,new PV(r,n)),Nv(e)}else s4(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(r==1&&Q7(e,t)||r==2&&xA(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:pa(e,5);break;case 4:pa(e,10);break;case 3:pa(e,6);break;default:pa(e,2)}}}function c4(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function pa(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=_n(e.pb,e);n||(n=new ma("//www.google.com/images/cleardot.gif"),vt.location&&vt.location.protocol=="http"||fv(n,"https"),Rv(n)),z7(n.toString(),r)}else Nn(2);e.H=0,e.h&&e.h.za(t),l4(e),i4(e)}W.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Nn(2)):(this.l.info("Failed to ping google.com"),Nn(1))};function l4(e){if(e.H=0,e.ma=[],e.h){let t=YV(e.i);(t.length!=0||e.j.length!=0)&&(nV(e.ma,t),nV(e.ma,e.j),e.i.i.length=0,cA(e.j),e.j.length=0),e.h.ya()}}function h4(e,t,n){var r=n instanceof ma?Hi(n):new ma(n);if(r.g!="")t&&(r.g=t+"."+r.g),pv(r,r.m);else{var i=vt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ma(null);r&&fv(s,r),t&&(s.g=t),i&&pv(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Zt(r,n,t),Zt(r,"VER",e.ra),rf(e,r),r}function d4(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new fe(new ef({ob:n})):new fe(e.va),t.Oa(e.J),t}W.isActive=function(){return!!this.h&&this.h.isActive(this)};function f4(){}W=f4.prototype;W.Ba=function(){};W.Aa=function(){};W.za=function(){};W.ya=function(){};W.isActive=function(){return!0};W.Va=function(){};function gv(){if(Tc&&!(10<=Number(d7)))throw Error("Environmental error: no available transport.")}gv.prototype.g=function(e,t){return new mr(e,t)};function mr(e,t){Qe.call(this),this.g=new r4(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Bd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Bd(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Sc(this)}Ye(mr,Qe);mr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Nn(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=h4(e,null,e.Y),Nv(e)};mr.prototype.close=function(){SA(this.g)};mr.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=gA(e),e=n);t.j.push(new V7(t.fb++,e)),t.H==3&&Nv(t)};mr.prototype.N=function(){this.g.h=null,delete this.j,SA(this.g),delete this.g,mr.$.N.call(this)};function p4(e){_A.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(let n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ye(p4,_A);function m4(){IA.call(this),this.status=1}Ye(m4,IA);function Sc(e){this.g=e}Ye(Sc,f4);Sc.prototype.Ba=function(){hn(this.g,"a")};Sc.prototype.Aa=function(e){hn(this.g,new p4(e))};Sc.prototype.za=function(e){hn(this.g,new m4)};Sc.prototype.ya=function(){hn(this.g,"b")};function Y7(){this.blockSize=-1}function Wr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ye(Wr,Y7);Wr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function KT(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;t=n+(a<<7&4294967295|a>>>25),a=s+(i^t&(n^i))+r[1]+3905402710&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[2]+606105819&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(t^i&(s^t))+r[3]+3250441966&4294967295,n=i+(a<<22&4294967295|a>>>10),a=t+(s^n&(i^s))+r[4]+4118548399&4294967295,t=n+(a<<7&4294967295|a>>>25),a=s+(i^t&(n^i))+r[5]+1200080426&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[6]+2821735955&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(t^i&(s^t))+r[7]+4249261313&4294967295,n=i+(a<<22&4294967295|a>>>10),a=t+(s^n&(i^s))+r[8]+1770035416&4294967295,t=n+(a<<7&4294967295|a>>>25),a=s+(i^t&(n^i))+r[9]+2336552879&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[10]+4294925233&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(t^i&(s^t))+r[11]+2304563134&4294967295,n=i+(a<<22&4294967295|a>>>10),a=t+(s^n&(i^s))+r[12]+1804603682&4294967295,t=n+(a<<7&4294967295|a>>>25),a=s+(i^t&(n^i))+r[13]+4254626195&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[14]+2792965006&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(t^i&(s^t))+r[15]+1236535329&4294967295,n=i+(a<<22&4294967295|a>>>10),a=t+(i^s&(n^i))+r[1]+4129170786&4294967295,t=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(t^n))+r[6]+3225465664&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[11]+643717713&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^t&(i^s))+r[0]+3921069994&4294967295,n=i+(a<<20&4294967295|a>>>12),a=t+(i^s&(n^i))+r[5]+3593408605&4294967295,t=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(t^n))+r[10]+38016083&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[15]+3634488961&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^t&(i^s))+r[4]+3889429448&4294967295,n=i+(a<<20&4294967295|a>>>12),a=t+(i^s&(n^i))+r[9]+568446438&4294967295,t=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(t^n))+r[14]+3275163606&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[3]+4107603335&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^t&(i^s))+r[8]+1163531501&4294967295,n=i+(a<<20&4294967295|a>>>12),a=t+(i^s&(n^i))+r[13]+2850285829&4294967295,t=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(t^n))+r[2]+4243563512&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[7]+1735328473&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^t&(i^s))+r[12]+2368359562&4294967295,n=i+(a<<20&4294967295|a>>>12),a=t+(n^i^s)+r[5]+4294588738&4294967295,t=n+(a<<4&4294967295|a>>>28),a=s+(t^n^i)+r[8]+2272392833&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[11]+1839030562&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^t)+r[14]+4259657740&4294967295,n=i+(a<<23&4294967295|a>>>9),a=t+(n^i^s)+r[1]+2763975236&4294967295,t=n+(a<<4&4294967295|a>>>28),a=s+(t^n^i)+r[4]+1272893353&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[7]+4139469664&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^t)+r[10]+3200236656&4294967295,n=i+(a<<23&4294967295|a>>>9),a=t+(n^i^s)+r[13]+681279174&4294967295,t=n+(a<<4&4294967295|a>>>28),a=s+(t^n^i)+r[0]+3936430074&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[3]+3572445317&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^t)+r[6]+76029189&4294967295,n=i+(a<<23&4294967295|a>>>9),a=t+(n^i^s)+r[9]+3654602809&4294967295,t=n+(a<<4&4294967295|a>>>28),a=s+(t^n^i)+r[12]+3873151461&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[15]+530742520&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^t)+r[2]+3299628645&4294967295,n=i+(a<<23&4294967295|a>>>9),a=t+(i^(n|~s))+r[0]+4096336452&4294967295,t=n+(a<<6&4294967295|a>>>26),a=s+(n^(t|~i))+r[7]+1126891415&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[14]+2878612391&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~t))+r[5]+4237533241&4294967295,n=i+(a<<21&4294967295|a>>>11),a=t+(i^(n|~s))+r[12]+1700485571&4294967295,t=n+(a<<6&4294967295|a>>>26),a=s+(n^(t|~i))+r[3]+2399980690&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[10]+4293915773&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~t))+r[1]+2240044497&4294967295,n=i+(a<<21&4294967295|a>>>11),a=t+(i^(n|~s))+r[8]+1873313359&4294967295,t=n+(a<<6&4294967295|a>>>26),a=s+(n^(t|~i))+r[15]+4264355552&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[6]+2734768916&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~t))+r[13]+1309151649&4294967295,n=i+(a<<21&4294967295|a>>>11),a=t+(i^(n|~s))+r[4]+4149444226&4294967295,t=n+(a<<6&4294967295|a>>>26),a=s+(n^(t|~i))+r[11]+3174756917&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[2]+718787259&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}Wr.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(i==0)for(;s<=n;)KT(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){KT(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){KT(this,r),i=0;break}}this.h=i,this.i+=t};Wr.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function Gt(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=e[i]|0;r&&s==t||(n[i]=s,r=!1)}this.g=n}var X7={};function RA(e){return-128<=e&&128>e?c7(e,function(t){return new Gt([t|0],0>t?-1:0)}):new Gt([e|0],0>e?-1:0)}function _i(e){if(isNaN(e)||!isFinite(e))return Ec;if(0>e)return ln(_i(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=sA;return new Gt(t,0)}function g4(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return ln(g4(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=_i(Math.pow(t,8)),r=Ec,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),a=parseInt(e.substring(i,i+s),t);8>s?(s=_i(Math.pow(t,s)),r=r.R(s).add(_i(a))):(r=r.R(n),r=r.add(_i(a)))}return r}var sA=4294967296,Ec=RA(0),aA=RA(1),dV=RA(16777216);W=Gt.prototype;W.ea=function(){if(Cr(this))return-ln(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:sA+r)*t,t*=sA}return e};W.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if($i(this))return"0";if(Cr(this))return"-"+ln(this).toString(e);for(var t=_i(Math.pow(e,6)),n=this,r="";;){var i=yv(n,t).g;n=vv(n,i.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,$i(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};W.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function $i(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Cr(e){return e.h==-1}W.X=function(e){return e=vv(this,e),Cr(e)?-1:$i(e)?0:1};function ln(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Gt(n,~e.h).add(aA)}W.abs=function(){return Cr(this)?ln(this):this};W.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(this.D(i)&65535)+(e.D(i)&65535),a=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=a>>>16,s&=65535,a&=65535,n[i]=a<<16|s}return new Gt(n,n[n.length-1]&-2147483648?-1:0)};function vv(e,t){return e.add(ln(t))}W.R=function(e){if($i(this)||$i(e))return Ec;if(Cr(this))return Cr(e)?ln(this).R(ln(e)):ln(ln(this).R(e));if(Cr(e))return ln(this.R(ln(e)));if(0>this.X(dV)&&0>e.X(dV))return _i(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,a=this.D(r)&65535,c=e.D(i)>>>16,l=e.D(i)&65535;n[2*r+2*i]+=a*l,dv(n,2*r+2*i),n[2*r+2*i+1]+=s*l,dv(n,2*r+2*i+1),n[2*r+2*i+1]+=a*c,dv(n,2*r+2*i+1),n[2*r+2*i+2]+=s*c,dv(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Gt(n,0)};function dv(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Fd(e,t){this.g=e,this.h=t}function yv(e,t){if($i(t))throw Error("division by zero");if($i(e))return new Fd(Ec,Ec);if(Cr(e))return t=yv(ln(e),t),new Fd(ln(t.g),ln(t.h));if(Cr(t))return t=yv(e,ln(t)),new Fd(ln(t.g),t.h);if(30<e.g.length){if(Cr(e)||Cr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=aA,r=t;0>=r.X(e);)n=fV(n),r=fV(r);var i=_c(n,1),s=_c(r,1);for(r=_c(r,2),n=_c(n,2);!$i(r);){var a=s.add(r);0>=a.X(e)&&(i=i.add(n),s=a),r=_c(r,1),n=_c(n,1)}return t=vv(e,i.R(t)),new Fd(i,t)}for(i=Ec;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=_i(n),a=s.R(t);Cr(a)||0<a.X(e);)n-=r,s=_i(n),a=s.R(t);$i(s)&&(s=aA),i=i.add(s),e=vv(e,a)}return new Fd(i,e)}W.gb=function(e){return yv(this,e).h};W.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Gt(n,this.h&e.h)};W.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Gt(n,this.h|e.h)};W.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Gt(n,this.h^e.h)};function fV(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Gt(n,e.h)}function _c(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Gt(i,e.h)}gv.prototype.createWebChannel=gv.prototype.g;mr.prototype.send=mr.prototype.u;mr.prototype.open=mr.prototype.m;mr.prototype.close=mr.prototype.close;Sv.NO_ERROR=0;Sv.TIMEOUT=8;Sv.HTTP_ERROR=6;NV.COMPLETE="complete";OV.EventType=Jd;Jd.OPEN="a";Jd.CLOSE="b";Jd.ERROR="c";Jd.MESSAGE="d";Qe.prototype.listen=Qe.prototype.O;fe.prototype.listenOnce=fe.prototype.P;fe.prototype.getLastError=fe.prototype.Sa;fe.prototype.getLastErrorCode=fe.prototype.Ia;fe.prototype.getStatus=fe.prototype.da;fe.prototype.getResponseJson=fe.prototype.Wa;fe.prototype.getResponseText=fe.prototype.ja;fe.prototype.send=fe.prototype.ha;fe.prototype.setWithCredentials=fe.prototype.Oa;Wr.prototype.digest=Wr.prototype.l;Wr.prototype.reset=Wr.prototype.reset;Wr.prototype.update=Wr.prototype.j;Gt.prototype.add=Gt.prototype.add;Gt.prototype.multiply=Gt.prototype.R;Gt.prototype.modulo=Gt.prototype.gb;Gt.prototype.compare=Gt.prototype.X;Gt.prototype.toNumber=Gt.prototype.ea;Gt.prototype.toString=Gt.prototype.toString;Gt.prototype.getBits=Gt.prototype.D;Gt.fromNumber=_i;Gt.fromString=g4;var v4=Qr.createWebChannelTransport=function(){return new gv},y4=Qr.getStatEventTarget=function(){return Av()},Ov=Qr.ErrorCode=Sv,b4=Qr.EventType=NV,w4=Qr.Event=ga,DA=Qr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bet=Qr.FetchXmlHttpFactory=ef,of=Qr.WebChannel=OV,_4=Qr.XhrIo=fe,I4=Qr.Md5=Wr,va=Qr.Integer=Gt;var E4="@firebase/firestore";var Oe=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Oe.UNAUTHENTICATED=new Oe(null),Oe.GOOGLE_CREDENTIALS=new Oe("google-credentials-uid"),Oe.FIRST_PARTY=new Oe("first-party-uid"),Oe.MOCK_USER=new Oe("mock-user");var rl="10.9.0";var ts=new dm("@firebase/firestore");function kc(){return ts.logLevel}function Ej(e){ts.setLogLevel(e)}function j(e,...t){if(ts.logLevel<=hi.DEBUG){let n=t.map(Nx);ts.debug(`Firestore (${rl}): ${e}`,...n)}}function Ee(e,...t){if(ts.logLevel<=hi.ERROR){let n=t.map(Nx);ts.error(`Firestore (${rl}): ${e}`,...n)}}function Dr(e,...t){if(ts.logLevel<=hi.WARN){let n=t.map(Nx);ts.warn(`Firestore (${rl}): ${e}`,...n)}}function Nx(e){if(typeof e=="string")return e;try{return function(n){return JSON.stringify(n)}(e)}catch{return e}}function Y(e="Unexpected state"){let t=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: `+e;throw Ee(t),new Error(t)}function nt(e,t){e||Y()}function Tj(e,t){e||Y()}function $(e,t){return e}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends lP{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Me=class{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}};var Kv=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},MA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Oe.UNAUTHENTICATED))}shutdown(){}},LA=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},FA=class{constructor(t){this.t=t,this.currentUser=Oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i,i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve(),s=new Me;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Me,t.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=s;t.enqueueRetryable(()=>D(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Me)}},0),a()}getToken(){let t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string"),new Kv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return nt(t===null||typeof t=="string"),new Oe(t)}},VA=class{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Oe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},jA=class{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new VA(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},UA=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},BA=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(nt(typeof n.token=="string"),this.R=n.token,new UA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function J7(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var $v=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";for(;r.length<20;){let i=J7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}};function bt(e,t){return e<t?-1:e>t?1:0}function Uc(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}function Aj(e){return e+"\0"}var le=class e{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?bt(this.nanoseconds,t.nanoseconds):bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var st=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new le(0,0))}static max(){return new e(new le(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Hv=class e{constructor(t,n,r){n===void 0?n=0:n>t.length&&Y(),r===void 0?r=t.length-n:r>t.length-n&&Y(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let s=t.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},Ot=class e extends Hv{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let n=[];for(let r of t){if(r.indexOf("//")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new e(n)}static emptyPath(){return new e([])}},Z7=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Te=class e extends Hv{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(t){return Z7.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},a=!1;for(;i<t.length;){let c=t[i];if(c==="\\"){if(i+1===t.length)throw new F(R.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new F(R.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}};var K=class e{constructor(t){this.path=t}static fromPath(t){return new e(Ot.fromString(t))}static fromName(t){return new e(Ot.fromString(t).popFirst(5))}static empty(){return new e(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ot.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ot.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new Ot(t.slice()))}};var Bc=class{constructor(t,n,r,i){this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}};function qA(e){return e.fields.find(t=>t.kind===2)}function ba(e){return e.fields.filter(t=>t.kind!==2)}Bc.UNKNOWN_ID=-1;var Fc=class{constructor(t,n){this.fieldPath=t,this.kind=n}};var vf=class e{constructor(t,n){this.sequenceNumber=t,this.offset=n}static empty(){return new e(0,kr.min())}};function Sj(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=st.fromTimestamp(r===1e9?new le(n+1,0):new le(n,r));return new kr(i,K.empty(),t)}function xj(e){return new kr(e.readTime,e.key,-1)}var kr=class e{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new e(st.min(),K.empty(),-1)}static max(){return new e(st.max(),K.empty(),-1)}};function Ox(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=K.comparator(e.documentKey,t.documentKey),n!==0?n:bt(e.largestBatchId,t.largestBatchId))}var Cj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function ls(e){return D(this,null,function*(){if(e.code!==R.FAILED_PRECONDITION||e.message!==Cj)throw e;j("LocalStore","Unexpectedly lost primary lease")})}var x=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):e.reject(n)}static resolve(t){return new e((n,r)=>{n(t)})}static reject(t){return new e((n,r)=>{r(t)})}static waitFor(t){return new e((n,r)=>{let i=0,s=0,a=!1;t.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next(i=>i?e.resolve(i):r());return n}static forEach(t,n){let r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new e((r,i)=>{let s=t.length,a=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;n(t[d]).next(p=>{a[d]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(t,n){return new e((r,i)=>{let s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}};var Qv=class e{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new Me,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Aa(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Mx(r.target.error);this.V.reject(new Aa(t,i))}}static open(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new Aa(n,s)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(j("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let n=this.transaction.objectStore(t);return new GA(n)}},Yi=class e{constructor(t,n,r){this.name=t,this.version=n,this.p=r,e.S(hh())===12.2&&Ee("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return j("SimpleDb","Removing database:",t),wa(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!hm())return!1;if(e.C())return!0;let t=hh(),n=e.S(t),r=0<n&&n<10,i=e.v(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){let n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){let n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(t){return D(this,null,function*(){return this.db||(j("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let a=s.target.result;n(a)},i.onblocked=()=>{r(new Aa(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let a=s.target.error;a.name==="VersionError"?r(new F(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new F(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Aa(t,a))},i.onupgradeneeded=s=>{j("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let a=s.target.result;this.p.N(a,i.transaction,s.oldVersion,this.version).next(()=>{j("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(t){this.L=t,this.db&&(this.db.onversionchange=n=>t(n))}runTransaction(t,n,r,i){return D(this,null,function*(){let s=n==="readonly",a=0;for(;;){++a;try{this.db=yield this.O(t);let c=Qv.open(this.db,t,s?"readonly":"readwrite",r),l=i(c).next(d=>(c.g(),d)).catch(d=>(c.abort(d),x.reject(d))).toPromise();return l.catch(()=>{}),yield c.m,l}catch(c){let l=c,d=l.name!=="FirebaseError"&&a<3;if(j("SimpleDb","Transaction failed with error:",l.message,"Retrying:",d),this.close(),!d)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}},zA=class{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return wa(this.k.delete())}},Aa=class extends F{constructor(t,n){super(R.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function hs(e){return e.name==="IndexedDbTransactionError"}var GA=class{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(j("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),wa(r)}add(t){return j("SimpleDb","ADD",this.store.name,t,t),wa(this.store.add(t))}get(t){return wa(this.store.get(t)).next(n=>(n===void 0&&(n=null),j("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return j("SimpleDb","DELETE",this.store.name,t),wa(this.store.delete(t))}count(){return j("SimpleDb","COUNT",this.store.name),wa(this.store.count())}W(t,n){let r=this.options(t,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new x((a,c)=>{s.onerror=l=>{c(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{let s=this.cursor(r),a=[];return this.G(s,(c,l)=>{a.push(l)}).next(()=>a)}}j(t,n){let r=this.store.getAll(t,n===null?void 0:n);return new x((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}H(t,n){j("SimpleDb","DELETE ALL",this.store.name);let r=this.options(t,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,a,c)=>c.delete())}Y(t,n){let r;n?r=t:(r={},n=t);let i=this.cursor(r);return this.G(i,n)}Z(t){let n=this.cursor({});return new x((r,i)=>{n.onerror=s=>{let a=Mx(s.target.error);i(a)},n.onsuccess=s=>{let a=s.target.result;a?t(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}G(t,n){let r=[];return new x((i,s)=>{t.onerror=a=>{s(a.target.error)},t.onsuccess=a=>{let c=a.target.result;if(!c)return void i();let l=new zA(c),d=n(c.primaryKey,c.value,l);if(d instanceof x){let p=d.catch(g=>(l.done(),x.reject(g)));r.push(p)}l.isDone?i():l.$===null?c.continue():c.continue(l.$)}}).next(()=>x.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){let r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}};function wa(e){return new x((t,n)=>{e.onsuccess=r=>{let i=r.target.result;t(i)},e.onerror=r=>{let i=Mx(r.target.error);n(i)}})}var T4=!1;function Mx(e){let t=Yi.S(hh());if(t>=12.2&&t<13){let n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){let r=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return T4||(T4=!0,setTimeout(()=>{throw r},0)),r}}return e}var KA=class{constructor(t,n){this.asyncQueue=t,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(t){j("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>D(this,null,function*(){this.task=null;try{j("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){hs(n)?j("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ls(n)}yield this.ee(6e4)}))}},$A=class{constructor(t,n){this.localStore=t,this.persistence=n}te(t=50){return D(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,t))})}ne(t,n){let r=new Set,i=n,s=!0;return x.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(a=>{if(a!==null&&!r.has(a))return j("IndexBackfiller",`Processing collection: ${a}`),this.re(t,a,i).next(c=>{i-=c,r.add(a)});s=!1})).next(()=>n-i)}re(t,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,n).next(i=>this.localStore.localDocuments.getNextDocuments(t,n,i,r).next(s=>{let a=s.changes;return this.localStore.indexManager.updateIndexEntries(t,a).next(()=>this.ie(i,s)).next(c=>(j("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(t,n,c))).next(()=>a.size)}))}ie(t,n){let r=t;return n.changes.forEach((i,s)=>{let a=xj(s);Ox(a,r)>0&&(r=a)}),new kr(r.readTime,r.documentKey,Math.max(n.batchId,t.largestBatchId))}};var gr=(()=>{class e{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return e._e=-1,e})();function jf(e){return e==null}function yf(e){return e===0&&1/e==-1/0}function Rj(e){return typeof e=="number"&&Number.isInteger(e)&&!yf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function On(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=A4(t)),t=tQ(e.get(n),t);return A4(t)}function tQ(e,t){let n=t,r=e.length;for(let i=0;i<r;i++){let s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function A4(e){return e+""}function Ii(e){let t=e.length;if(nt(t>=2),t===2)return nt(e.charAt(0)===""&&e.charAt(1)===""),Ot.emptyPath();let n=t-2,r=[],i="";for(let s=0;s<t;){let a=e.indexOf("",s);switch((a<0||a>n)&&Y(),e.charAt(a+1)){case"":let c=e.substring(s,a),l;i.length===0?l=c:(i+=c,l=i,i=""),r.push(l);break;case"":i+=e.substring(s,a),i+="\0";break;case"":i+=e.substring(s,a+1);break;default:Y()}s=a+2}return new Ot(r)}var S4=["userId","batchId"];function jv(e,t){return[e,On(t)]}function Dj(e,t,n){return[e,On(t),n]}var eQ={},nQ=["prefixPath","collectionGroup","readTime","documentId"],rQ=["prefixPath","collectionGroup","documentId"],iQ=["collectionGroup","readTime","prefixPath","documentId"],oQ=["canonicalId","targetId"],sQ=["targetId","path"],aQ=["path","targetId"],uQ=["collectionId","parent"],cQ=["indexId","uid"],lQ=["uid","sequenceNumber"],hQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dQ=["indexId","uid","orderedDocumentKey"],fQ=["userId","collectionPath","documentId"],pQ=["userId","collectionPath","largestBatchId"],mQ=["userId","collectionGroup","largestBatchId"],kj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gQ=[...kj,"documentOverlays"],Pj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nj=Pj,vQ=[...Nj,"indexConfiguration","indexState","indexEntries"];var bf=class extends Wv{constructor(t,n){super(),this.ae=t,this.currentSequenceNumber=n}};function Je(e,t){let n=$(e);return Yi.M(n.ae,t)}function x4(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fa(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Oj(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var te=class e{constructor(t,n){this.comparator=t,this.root=n||Ti.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ti.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ti.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){let t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Lc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Lc(this.root,t,this.comparator,!0)}},Lc=class{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ti=class e{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this,s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();let t=this.left.check();if(t!==this.right.check())throw Y();return t+(this.isRed()?0:1)}};Ti.EMPTY=null,Ti.RED=!0,Ti.BLACK=!1;Ti.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Ti(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ht=class e{constructor(t){this.comparator=t,this.data=new te(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){let r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){let n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yv(this.data.getIterator())}getIteratorFrom(t){return new Yv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(n=>{t.push(n)}),t}toString(){let t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){let n=new e(this.comparator);return n.data=t,n}},Yv=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function xc(e){return e.hasNext()?e.getNext():void 0}var vr=class e{constructor(t){this.fields=t,t.sort(Te.comparator)}static empty(){return new e([])}unionWith(t){let n=new Ht(Te.comparator);for(let r of this.fields)n=n.add(r);for(let r of t)n=n.add(r);return new e(n.toArray())}covers(t){for(let n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Uc(this.fields,t.fields,(n,r)=>n.isEqual(r))}};var Xv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Mj(){return typeof atob<"u"}var Xe=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Xv("Invalid base64 string: "+s):s}}(t);return new e(n)}static fromUint8Array(t){let n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(t);return new e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Xe.EMPTY_BYTE_STRING=new Xe("");var yQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(e){if(nt(!!e),typeof e=="string"){let t=0,n=yQ.exec(e);if(nt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:pe(e.seconds),nanos:pe(e.nanos)}}function pe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ns(e){return typeof e=="string"?Xe.fromBase64String(e):Xe.fromUint8Array(e)}function By(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Lx(e){let t=e.mapValue.fields.__previous_value__;return By(t)?Lx(t):t}function wf(e){let t=es(e.mapValue.fields.__local_write_time__.timestampValue);return new le(t.seconds,t.nanos)}var HA=class{constructor(t,n,r,i,s,a,c,l,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},rs=class e{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var Jo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uv={nullValue:"NULL_VALUE"};function Sa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?By(e)?4:Lj(e)?9007199254740991:10:Y()}function xi(e,t){if(e===t)return!0;let n=Sa(e);if(n!==Sa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return wf(e).isEqual(wf(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=es(i.timestampValue),c=es(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return ns(i.bytesValue).isEqual(ns(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return pe(i.geoPointValue.latitude)===pe(s.geoPointValue.latitude)&&pe(i.geoPointValue.longitude)===pe(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pe(i.integerValue)===pe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=pe(i.doubleValue),c=pe(s.doubleValue);return a===c?yf(a)===yf(c):isNaN(a)&&isNaN(c)}return!1}(e,t);case 9:return Uc(e.arrayValue.values||[],t.arrayValue.values||[],xi);case 10:return function(i,s){let a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(x4(a)!==x4(c))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!xi(a[l],c[l])))return!1;return!0}(e,t);default:return Y()}}function _f(e,t){return(e.values||[]).find(n=>xi(n,t))!==void 0}function is(e,t){if(e===t)return 0;let n=Sa(e),r=Sa(t);if(n!==r)return bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bt(e.booleanValue,t.booleanValue);case 2:return function(s,a){let c=pe(s.integerValue||s.doubleValue),l=pe(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(e,t);case 3:return C4(e.timestampValue,t.timestampValue);case 4:return C4(wf(e),wf(t));case 5:return bt(e.stringValue,t.stringValue);case 6:return function(s,a){let c=ns(s),l=ns(a);return c.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,a){let c=s.split("/"),l=a.split("/");for(let d=0;d<c.length&&d<l.length;d++){let p=bt(c[d],l[d]);if(p!==0)return p}return bt(c.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,a){let c=bt(pe(s.latitude),pe(a.latitude));return c!==0?c:bt(pe(s.longitude),pe(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,a){let c=s.values||[],l=a.values||[];for(let d=0;d<c.length&&d<l.length;++d){let p=is(c[d],l[d]);if(p)return p}return bt(c.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,a){if(s===Jo.mapValue&&a===Jo.mapValue)return 0;if(s===Jo.mapValue)return 1;if(a===Jo.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=a.fields||{},p=Object.keys(d);l.sort(),p.sort();for(let g=0;g<l.length&&g<p.length;++g){let v=bt(l[g],p[g]);if(v!==0)return v;let b=is(c[l[g]],d[p[g]]);if(b!==0)return b}return bt(l.length,p.length)}(e.mapValue,t.mapValue);default:throw Y()}}function C4(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return bt(e,t);let n=es(e),r=es(t),i=bt(n.seconds,r.seconds);return i!==0?i:bt(n.nanos,r.nanos)}function qc(e){return WA(e)}function WA(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){let r=es(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ns(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return K.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=WA(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${WA(n.fields[a])}`;return i+"}"}(e.mapValue):Y()}function xa(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function QA(e){return!!e&&"integerValue"in e}function If(e){return!!e&&"arrayValue"in e}function R4(e){return!!e&&"nullValue"in e}function D4(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bv(e){return!!e&&"mapValue"in e}function df(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return Fa(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=df(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=df(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Lj(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function bQ(e){return"nullValue"in e?Uv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?xa(rs.empty(),K.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Y()}function wQ(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?xa(rs.empty(),K.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Jo:Y()}function k4(e,t){let n=is(e.value,t.value);return n!==0?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function P4(e,t){let n=is(e.value,t.value);return n!==0?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Tn=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Bv(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=df(n)}setAll(t){let n=Te.emptyPath(),r={},i=[];t.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){let l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=c.popLast()}a?r[c.lastSegment()]=df(a):i.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){let n=this.field(t.popLast());Bv(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return xi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];Bv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Fa(n,(i,s)=>t[i]=s);for(let i of r)delete t[i]}clone(){return new e(df(this.value))}};function Fj(e){let t=[];return Fa(e.fields,(n,r)=>{let i=new Te([n]);if(Bv(r)){let s=Fj(r.mapValue).fields;if(s.length===0)t.push(i);else for(let a of s)t.push(i.child(a))}else t.push(i)}),new vr(t)}var Le=class e{constructor(t,n,r,i,s,a,c){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(t){return new e(t,0,st.min(),st.min(),st.min(),Tn.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,st.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,st.min(),st.min(),Tn.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,st.min(),st.min(),Tn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ci=class{constructor(t,n){this.position=t,this.inclusive=n}};function N4(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let s=t[i],a=e.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(a.referenceValue),n.key):r=is(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function O4(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!xi(e.position[n],t.position[n]))return!1;return!0}var Ca=class{constructor(t,n="asc"){this.field=t,this.dir=n}};function _Q(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Jv=class{},Dt=class e extends Jv{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new JA(t,n,r):n==="array-contains"?new eS(t,r):n==="in"?new Zv(t,r):n==="not-in"?new nS(t,r):n==="array-contains-any"?new rS(t,r):new e(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new ZA(t,r):new tS(t,r)}matches(t){let n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(is(n,this.value)):n!==null&&Sa(this.value)===Sa(n)&&this.matchesComparison(is(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Kt=class e extends Jv{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new e(t,n)}matches(t){return zc(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function zc(e){return e.op==="and"}function YA(e){return e.op==="or"}function Fx(e){return Vj(e)&&zc(e)}function Vj(e){for(let t of e.filters)if(t instanceof Kt)return!1;return!0}function XA(e){if(e instanceof Dt)return e.field.canonicalString()+e.op.toString()+qc(e.value);if(Fx(e))return e.filters.map(t=>XA(t)).join(",");{let t=e.filters.map(n=>XA(n)).join(",");return`${e.op}(${t})`}}function jj(e,t){return e instanceof Dt?function(r,i){return i instanceof Dt&&r.op===i.op&&r.field.isEqual(i.field)&&xi(r.value,i.value)}(e,t):e instanceof Kt?function(r,i){return i instanceof Kt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&jj(a,i.filters[c]),!0):!1}(e,t):void Y()}function Uj(e,t){let n=e.filters.concat(t);return Kt.create(n,e.op)}function Bj(e){return e instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${qc(n.value)}`}(e):e instanceof Kt?function(n){return n.op.toString()+" {"+n.getFilters().map(Bj).join(" ,")+"}"}(e):"Filter"}var JA=class extends Dt{constructor(t,n,r){super(t,n,r),this.key=K.fromName(r.referenceValue)}matches(t){let n=K.comparator(t.key,this.key);return this.matchesComparison(n)}},ZA=class extends Dt{constructor(t,n){super(t,"in",n),this.keys=qj("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}},tS=class extends Dt{constructor(t,n){super(t,"not-in",n),this.keys=qj("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}};function qj(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}var eS=class extends Dt{constructor(t,n){super(t,"array-contains",n)}matches(t){let n=t.data.field(this.field);return If(n)&&_f(n.arrayValue,this.value)}},Zv=class extends Dt{constructor(t,n){super(t,"in",n)}matches(t){let n=t.data.field(this.field);return n!==null&&_f(this.value.arrayValue,n)}},nS=class extends Dt{constructor(t,n){super(t,"not-in",n)}matches(t){if(_f(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=t.data.field(this.field);return n!==null&&!_f(this.value.arrayValue,n)}},rS=class extends Dt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){let n=t.data.field(this.field);return!(!If(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_f(this.value.arrayValue,r))}};var iS=class{constructor(t,n=null,r=[],i=[],s=null,a=null,c=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ce=null}};function oS(e,t=null,n=[],r=[],i=null,s=null,a=null){return new iS(e,t,n,r,i,s,a)}function Ra(e){let t=$(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>XA(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>qc(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>qc(r)).join(",")),t.ce=n}return t.ce}function Uf(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!_Q(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!jj(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!O4(e.startAt,t.startAt)&&O4(e.endAt,t.endAt)}function ty(e){return K.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function ey(e,t){return e.filters.filter(n=>n instanceof Dt&&n.field.isEqual(t))}function M4(e,t,n){let r=Uv,i=!0;for(let s of ey(e,t)){let a=Uv,c=!0;switch(s.op){case"<":case"<=":a=bQ(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=Uv}k4({value:r,inclusive:i},{value:a,inclusive:c})<0&&(r=a,i=c)}if(n!==null){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let a=n.position[s];k4({value:r,inclusive:i},{value:a,inclusive:n.inclusive})<0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}function L4(e,t,n){let r=Jo,i=!0;for(let s of ey(e,t)){let a=Jo,c=!0;switch(s.op){case">=":case">":a=wQ(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=Jo}P4({value:r,inclusive:i},{value:a,inclusive:c})>0&&(r=a,i=c)}if(n!==null){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let a=n.position[s];P4({value:r,inclusive:i},{value:a,inclusive:n.inclusive})>0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}var Yr=class{constructor(t,n=null,r=[],i=[],s=null,a="F",c=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function zj(e,t,n,r,i,s,a,c){return new Yr(e,t,n,r,i,s,a,c)}function il(e){return new Yr(e)}function F4(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Vx(e){return e.collectionGroup!==null}function Vc(e){let t=$(e);if(t.le===null){t.le=[];let n=new Set;for(let s of t.explicitOrderBy)t.le.push(s),n.add(s.field.canonicalString());let r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Ht(Te.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.le.push(new Ca(s,r))}),n.has(Te.keyField().canonicalString())||t.le.push(new Ca(Te.keyField(),r))}return t.le}function Mn(e){let t=$(e);return t.he||(t.he=IQ(t,Vc(e))),t.he}function IQ(e,t){if(e.limitType==="F")return oS(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ca(i.field,s)});let n=e.endAt?new Ci(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ci(e.startAt.position,e.startAt.inclusive):null;return oS(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function sS(e,t){let n=e.filters.concat([t]);return new Yr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ny(e,t,n){return new Yr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Bf(e,t){return Uf(Mn(e),Mn(t))&&e.limitType===t.limitType}function Gj(e){return`${Ra(Mn(e))}|lt:${e.limitType}`}function Pc(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Bj(i)).join(", ")}]`),jf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qc(i)).join(",")),`Target(${r})`}(Mn(e))}; limitType=${e.limitType})`}function qf(e,t){return t.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(let s of Vc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(a,c,l){let d=N4(a,c,l);return a.inclusive?d<=0:d<0}(r.startAt,Vc(r),i)||r.endAt&&!function(a,c,l){let d=N4(a,c,l);return a.inclusive?d>=0:d>0}(r.endAt,Vc(r),i))}(e,t)}function Kj(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function $j(e){return(t,n)=>{let r=!1;for(let i of Vc(e)){let s=EQ(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function EQ(e,t,n){let r=e.field.isKeyField()?K.comparator(t.key,n.key):function(s,a,c){let l=a.data.field(s),d=c.data.field(s);return l!==null&&d!==null?is(l,d):Y()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}var Ri=class{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){let n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){let r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){let n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Fa(this.inner,(n,r)=>{for(let[i,s]of r)t(i,s)})}isEmpty(){return Oj(this.inner)}size(){return this.innerSize}};var TQ=new te(K.comparator);function Xn(){return TQ}var Hj=new te(K.comparator);function lf(...e){let t=Hj;for(let n of e)t=t.insert(n.key,n);return t}function Wj(e){let t=Hj;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Ei(){return ff()}function Qj(){return ff()}function ff(){return new Ri(e=>e.toString(),(e,t)=>e.isEqual(t))}var AQ=new te(K.comparator),SQ=new Ht(K.comparator);function _t(...e){let t=SQ;for(let n of e)t=t.add(n);return t}var xQ=new Ht(bt);function jx(){return xQ}function Yj(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(t)?"-0":t}}function Xj(e){return{integerValue:""+e}}function Jj(e,t){return Rj(t)?Xj(t):Yj(e,t)}var Gc=class{constructor(){this._=void 0}};function CQ(e,t,n){return e instanceof os?function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&By(s)&&(s=Lx(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,t):e instanceof Xi?tU(e,t):e instanceof Ji?eU(e,t):function(i,s){let a=Zj(i,s),c=V4(a)+V4(i.Ie);return QA(a)&&QA(i.Ie)?Xj(c):Yj(i.serializer,c)}(e,t)}function RQ(e,t,n){return e instanceof Xi?tU(e,t):e instanceof Ji?eU(e,t):n}function Zj(e,t){return e instanceof ss?function(r){return QA(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}var os=class extends Gc{},Xi=class extends Gc{constructor(t){super(),this.elements=t}};function tU(e,t){let n=nU(t);for(let r of e.elements)n.some(i=>xi(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ji=class extends Gc{constructor(t){super(),this.elements=t}};function eU(e,t){let n=nU(t);for(let r of e.elements)n=n.filter(i=>!xi(i,r));return{arrayValue:{values:n}}}var ss=class extends Gc{constructor(t,n){super(),this.serializer=t,this.Ie=n}};function V4(e){return pe(e.integerValue||e.doubleValue)}function nU(e){return If(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Da=class{constructor(t,n){this.field=t,this.transform=n}};function DQ(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof Xi&&i instanceof Xi||r instanceof Ji&&i instanceof Ji?Uc(r.elements,i.elements,xi):r instanceof ss&&i instanceof ss?xi(r.Ie,i.Ie):r instanceof os&&i instanceof os}(e.transform,t.transform)}var aS=class{constructor(t,n){this.version=t,this.transformResults=n}},me=class e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function qv(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var Kc=class{};function rU(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new us(e.key,me.none()):new as(e.key,e.data,me.none());{let n=e.data,r=Tn.empty(),i=new Ht(Te.comparator);for(let s of t.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Xr(e.key,r,new vr(i.toArray()),me.none())}}function kQ(e,t,n){e instanceof as?function(i,s,a){let c=i.value.clone(),l=U4(i.fieldTransforms,s,a.transformResults);c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):e instanceof Xr?function(i,s,a){if(!qv(i.precondition,s))return void s.convertToUnknownDocument(a.version);let c=U4(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(iU(i)),l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function pf(e,t,n,r){return e instanceof as?function(s,a,c,l){if(!qv(s.precondition,a))return c;let d=s.value.clone(),p=B4(s.fieldTransforms,l,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xr?function(s,a,c,l){if(!qv(s.precondition,a))return c;let d=B4(s.fieldTransforms,l,a),p=a.data;return p.setAll(iU(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,r):function(s,a,c){return qv(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(e,t,n)}function PQ(e,t){let n=null;for(let r of e.fieldTransforms){let i=t.data.field(r.field),s=Zj(r.transform,i||null);s!=null&&(n===null&&(n=Tn.empty()),n.set(r.field,s))}return n||null}function j4(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Uc(r,i,(s,a)=>DQ(s,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var as=class extends Kc{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xr=class extends Kc{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function iU(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}}),t}function U4(e,t,n){let r=new Map;nt(e.length===n.length);for(let i=0;i<n.length;i++){let s=e[i],a=s.transform,c=t.data.field(s.field);r.set(s.field,RQ(a,c,n[i]))}return r}function B4(e,t,n){let r=new Map;for(let i of e){let s=i.transform,a=n.data.field(i.field);r.set(i.field,CQ(s,a,t))}return r}var us=class extends Kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ef=class extends Kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Tf=class{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(t.key)&&kQ(s,t,r[i])}}applyToLocalView(t,n){for(let r of this.baseMutations)r.key.isEqual(t.key)&&(n=pf(r,t,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(t.key)&&(n=pf(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){let r=Qj();return this.mutations.forEach(i=>{let s=t.get(i.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=n.has(i.key)?null:c;let l=rU(a,c);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(st.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),_t())}isEqual(t){return this.batchId===t.batchId&&Uc(this.mutations,t.mutations,(n,r)=>j4(n,r))&&Uc(this.baseMutations,t.baseMutations,(n,r)=>j4(n,r))}},uS=class e{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){nt(t.mutations.length===r.length);let i=function(){return AQ}(),s=t.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new e(t,n,r,i)}};var Af=class{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var cS=class{constructor(t,n){this.count=t,this.unchangedNames=n}};var Pe,Nt;function oU(e){switch(e){default:return Y();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function sU(e){if(e===void 0)return Ee("GRPC error has no .code"),R.UNKNOWN;switch(e){case Pe.OK:return R.OK;case Pe.CANCELLED:return R.CANCELLED;case Pe.UNKNOWN:return R.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return R.INTERNAL;case Pe.UNAVAILABLE:return R.UNAVAILABLE;case Pe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Pe.NOT_FOUND:return R.NOT_FOUND;case Pe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Pe.ABORTED:return R.ABORTED;case Pe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Pe.DATA_LOSS:return R.DATA_LOSS;default:return Y()}}(Nt=Pe||(Pe={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";var q4=null;function aU(){return new TextEncoder}var NQ=new va([4294967295,4294967295],0);function z4(e){let t=aU().encode(e),n=new I4;return n.update(t),new Uint8Array(n.digest())}function G4(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new va([n,r],0),new va([i,s],0)]}var lS=class e{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ta(`Invalid padding: ${n}`);if(r<0)throw new Ta(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Ta(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Ta(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=va.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(va.fromNumber(r)));return i.compare(NQ)===1&&(i=new va([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;let n=z4(t),[r,i]=G4(n);for(let s=0;s<this.hashCount;s++){let a=this.de(r,i,s);if(!this.Ae(a))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new e(s,i,n);return r.forEach(c=>a.insert(c)),a}insert(t){if(this.Te===0)return;let n=z4(t),[r,i]=G4(n);for(let s=0;s<this.hashCount;s++){let a=this.de(r,i,s);this.Re(a)}}Re(t){let n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}},Ta=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Sf=class e{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,xf.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(st.min(),i,new te(bt),Xn(),_t())}},xf=class e{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,_t(),_t(),_t())}};var jc=class{constructor(t,n,r,i){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i}},ry=class{constructor(t,n){this.targetId=t,this.fe=n}},iy=class{constructor(t,n,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}},oy=class{constructor(){this.ge=0,this.pe=$4(),this.ye=Xe.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=_t(),n=_t(),r=_t();return this.pe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new xf(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=$4()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,nt(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},hS=class{constructor(t){this.Be=t,this.ke=new Map,this.qe=Xn(),this.Qe=K4(),this.Ke=new te(bt)}$e(t){for(let n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(let n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{let r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:Y()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){let n=t.targetId,r=t.fe.count,i=this.Ye(n);if(i){let s=i.target;if(ty(s))if(r===0){let a=new K(s.path);this.We(n,a,Le.newNoDocument(a,st.min()))}else nt(r===1);else{let a=this.Ze(n);if(a!==r){let c=this.Xe(t),l=c?this.et(c,t,a):1;if(l!==0){this.He(n);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,d)}q4?.tt(function(p,g,v,b,_){var I,T,S,M,k,z;let H={localCacheCount:p,existenceFilterCount:g.count,databaseId:v.database,projectId:v.projectId},L=g.unchangedNames;return L&&(H.bloomFilter={applied:_===0,hashCount:(I=L?.hashCount)!==null&&I!==void 0?I:0,bitmapLength:(M=(S=(T=L?.bits)===null||T===void 0?void 0:T.bitmap)===null||S===void 0?void 0:S.length)!==null&&M!==void 0?M:0,padding:(z=(k=L?.bits)===null||k===void 0?void 0:k.padding)!==null&&z!==void 0?z:0,mightContain:mt=>{var fn;return(fn=b?.mightContain(mt))!==null&&fn!==void 0&&fn}}),H}(a,t.fe,this.Be.nt(),c,l))}}}}Xe(t){let n=t.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,a,c;try{a=ns(r).toUint8Array()}catch(l){if(l instanceof Xv)return Dr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new lS(a,i,s)}catch(l){return Dr(l instanceof Ta?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Te===0?null:c}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let a=this.Be.nt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(c)||(this.We(n,s,null),i++)}),i}it(t){let n=new Map;this.ke.forEach((s,a)=>{let c=this.Ye(a);if(c){if(s.current&&ty(c.target)){let l=new K(c.target.path);this.qe.get(l)!==null||this.st(a,l)||this.We(a,l,Le.newNoDocument(l,t))}s.De&&(n.set(a,s.ve()),s.Fe())}});let r=_t();this.Qe.forEach((s,a)=>{let c=!0;a.forEachWhile(l=>{let d=this.Ye(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.qe.forEach((s,a)=>a.setReadTime(t));let i=new Sf(t,n,this.Ke,this.qe,r);return this.qe=Xn(),this.Qe=K4(),this.Ke=new te(bt),i}Ue(t,n){if(!this.je(t))return;let r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;let i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){let n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new oy,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new Ht(bt),this.Qe=this.Qe.insert(t,n)),n}je(t){let n=this.Ye(t)!==null;return n||j("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){let n=this.ke.get(t);return n&&n.be?null:this.Be._t(t)}He(t){this.ke.set(t,new oy),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}};function K4(){return new te(K.comparator)}function $4(){return new te(K.comparator)}var OQ={asc:"ASCENDING",desc:"DESCENDING"},MQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LQ={and:"AND",or:"OR"},dS=class{constructor(t,n){this.databaseId=t,this.useProto3Json=n}};function fS(e,t){return e.useProto3Json||jf(t)?t:{value:t}}function $c(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function uU(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function FQ(e,t){return $c(e,t.toTimestamp())}function Ae(e){return nt(!!e),st.fromTimestamp(function(n){let r=es(n);return new le(r.seconds,r.nanos)}(e))}function Ux(e,t){return pS(e,t).canonicalString()}function pS(e,t){let n=function(i){return new Ot(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function cU(e){let t=Ot.fromString(e);return nt(bU(t)),t}function Cf(e,t){return Ux(e.databaseId,t.path)}function Ai(e,t){let n=cU(t);if(n.get(1)!==e.databaseId.projectId)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new K(dU(n))}function lU(e,t){return Ux(e.databaseId,t)}function hU(e){let t=cU(e);return t.length===4?Ot.emptyPath():dU(t)}function mS(e){return new Ot(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dU(e){return nt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function H4(e,t,n){return{name:Cf(e,t),fields:n.value.mapValue.fields}}function fU(e,t,n){let r=Ai(e,t.name),i=Ae(t.updateTime),s=t.createTime?Ae(t.createTime):st.min(),a=new Tn({mapValue:{fields:t.fields}}),c=Le.newFoundDocument(r,i,s,a);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function VQ(e,t){return"found"in t?function(r,i){nt(!!i.found),i.found.name,i.found.updateTime;let s=Ai(r,i.found.name),a=Ae(i.found.updateTime),c=i.found.createTime?Ae(i.found.createTime):st.min(),l=new Tn({mapValue:{fields:i.found.fields}});return Le.newFoundDocument(s,a,c,l)}(e,t):"missing"in t?function(r,i){nt(!!i.missing),nt(!!i.readTime);let s=Ai(r,i.missing),a=Ae(i.readTime);return Le.newNoDocument(s,a)}(e,t):Y()}function jQ(e,t){let n;if("targetChange"in t){t.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(nt(p===void 0||typeof p=="string"),Xe.fromBase64String(p||"")):(nt(p===void 0||p instanceof Uint8Array),Xe.fromUint8Array(p||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(d){let p=d.code===void 0?R.UNKNOWN:sU(d.code);return new F(p,d.message||"")}(a);n=new iy(r,i,s,c||null)}else if("documentChange"in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ai(e,r.document.name),s=Ae(r.document.updateTime),a=r.document.createTime?Ae(r.document.createTime):st.min(),c=new Tn({mapValue:{fields:r.document.fields}}),l=Le.newFoundDocument(i,s,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];n=new jc(d,p,l.key,l)}else if("documentDelete"in t){t.documentDelete;let r=t.documentDelete;r.document;let i=Ai(e,r.document),s=r.readTime?Ae(r.readTime):st.min(),a=Le.newNoDocument(i,s),c=r.removedTargetIds||[];n=new jc([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;let r=t.documentRemove;r.document;let i=Ai(e,r.document),s=r.removedTargetIds||[];n=new jc([],s,i,null)}else{if(!("filter"in t))return Y();{t.filter;let r=t.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new cS(i,s),c=r.targetId;n=new ry(c,a)}}return n}function Rf(e,t){let n;if(t instanceof as)n={update:H4(e,t.key,t.value)};else if(t instanceof us)n={delete:Cf(e,t.key)};else if(t instanceof Xr)n={update:H4(e,t.key,t.data),updateMask:KQ(t.fieldMask)};else{if(!(t instanceof Ef))return Y();n={verify:Cf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,a){let c=a.transform;if(c instanceof os)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Xi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ji)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ss)return{fieldPath:a.field.canonicalString(),increment:c.Ie};throw Y()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:FQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(e,t.precondition)),n}function gS(e,t){let n=t.currentDocument?function(s){return s.updateTime!==void 0?me.updateTime(Ae(s.updateTime)):s.exists!==void 0?me.exists(s.exists):me.none()}(t.currentDocument):me.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(a,c){let l=null;if("setToServerValue"in c)nt(c.setToServerValue==="REQUEST_TIME"),l=new os;else if("appendMissingElements"in c){let p=c.appendMissingElements.values||[];l=new Xi(p)}else if("removeAllFromArray"in c){let p=c.removeAllFromArray.values||[];l=new Ji(p)}else"increment"in c?l=new ss(a,c.increment):Y();let d=Te.fromServerFormat(c.fieldPath);return new Da(d,l)}(e,i)):[];if(t.update){t.update.name;let i=Ai(e,t.update.name),s=new Tn({mapValue:{fields:t.update.fields}});if(t.updateMask){let a=function(l){let d=l.fieldPaths||[];return new vr(d.map(p=>Te.fromServerFormat(p)))}(t.updateMask);return new Xr(i,s,a,n,r)}return new as(i,s,n,r)}if(t.delete){let i=Ai(e,t.delete);return new us(i,n)}if(t.verify){let i=Ai(e,t.verify);return new Ef(i,n)}return Y()}function UQ(e,t){return e&&e.length>0?(nt(t!==void 0),e.map(n=>function(i,s){let a=i.updateTime?Ae(i.updateTime):Ae(s);return a.isEqual(st.min())&&(a=Ae(s)),new aS(a,i.transformResults||[])}(n,t))):[]}function pU(e,t){return{documents:[lU(e,t.path)]}}function mU(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lU(e,i);let s=function(d){if(d.length!==0)return yU(Kt.create(d,"and"))}(t.filters);s&&(n.structuredQuery.where=s);let a=function(d){if(d.length!==0)return d.map(p=>function(v){return{field:Nc(v.field),direction:qQ(v.dir)}}(p))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);let c=fS(e,t.limit);return c!==null&&(n.structuredQuery.limit=c),t.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{ut:n,parent:i}}function gU(e){let t=hU(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){nt(r===1);let p=n.from[0];p.allDescendants?i=p.collectionId:t=t.child(p.collectionId)}let s=[];n.where&&(s=function(g){let v=vU(g);return v instanceof Kt&&Fx(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(_){return new Ca(Oc(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(v))}(n.orderBy));let c=null;n.limit&&(c=function(g){let v;return v=typeof g=="object"?g.value:g,jf(v)?null:v}(n.limit));let l=null;n.startAt&&(l=function(g){let v=!!g.before,b=g.values||[];return new Ci(b,v)}(n.startAt));let d=null;return n.endAt&&(d=function(g){let v=!g.before,b=g.values||[];return new Ci(b,v)}(n.endAt)),zj(t,i,a,s,c,"F",l,d)}function BQ(e,t){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function vU(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Oc(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Oc(n.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Oc(n.unaryFilter.field);return Dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Oc(n.unaryFilter.field);return Dt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(e):e.fieldFilter!==void 0?function(n){return Dt.create(Oc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Kt.create(n.compositeFilter.filters.map(r=>vU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(e):Y()}function qQ(e){return OQ[e]}function zQ(e){return MQ[e]}function GQ(e){return LQ[e]}function Nc(e){return{fieldPath:e.canonicalString()}}function Oc(e){return Te.fromServerFormat(e.fieldPath)}function yU(e){return e instanceof Dt?function(n){if(n.op==="=="){if(D4(n.value))return{unaryFilter:{field:Nc(n.field),op:"IS_NAN"}};if(R4(n.value))return{unaryFilter:{field:Nc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D4(n.value))return{unaryFilter:{field:Nc(n.field),op:"IS_NOT_NAN"}};if(R4(n.value))return{unaryFilter:{field:Nc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nc(n.field),op:zQ(n.op),value:n.value}}}(e):e instanceof Kt?function(n){let r=n.getFilters().map(i=>yU(i));return r.length===1?r[0]:{compositeFilter:{op:GQ(n.op),filters:r}}}(e):Y()}function KQ(e){let t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function bU(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var Hc=class e{constructor(t,n,r,i,s=st.min(),a=st.min(),c=Xe.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var sy=class{constructor(t){this.ct=t}};function $Q(e,t){let n;if(t.document)n=fU(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let r=K.fromSegments(t.noDocument.path),i=Pa(t.noDocument.readTime);n=Le.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Y();{let r=K.fromSegments(t.unknownDocument.path),i=Pa(t.unknownDocument.version);n=Le.newUnknownDocument(r,i)}}return t.readTime&&n.setReadTime(function(i){let s=new le(i[0],i[1]);return st.fromTimestamp(s)}(t.readTime)),n}function W4(e,t){let n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ay(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(s,a){return{name:Cf(s,a.key),fields:a.data.value.mapValue.fields,updateTime:$c(s,a.version.toTimestamp()),createTime:$c(s,a.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ka(t.version)};else{if(!t.isUnknownDocument())return Y();r.unknownDocument={path:n.path.toArray(),version:ka(t.version)}}return r}function ay(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ka(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Pa(e){let t=new le(e.seconds,e.nanoseconds);return st.fromTimestamp(t)}function _a(e,t){let n=(t.baseMutations||[]).map(s=>gS(e.ct,s));for(let s=0;s<t.mutations.length-1;++s){let a=t.mutations[s];if(s+1<t.mutations.length&&t.mutations[s+1].transform!==void 0){let c=t.mutations[s+1];a.updateTransforms=c.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}let r=t.mutations.map(s=>gS(e.ct,s)),i=le.fromMillis(t.localWriteTimeMs);return new Tf(t.batchId,i,n,r)}function hf(e){let t=Pa(e.readTime),n=e.lastLimboFreeSnapshotVersion!==void 0?Pa(e.lastLimboFreeSnapshotVersion):st.min(),r;return r=function(s){return s.documents!==void 0}(e.query)?function(s){return nt(s.documents.length===1),Mn(il(hU(s.documents[0])))}(e.query):function(s){return Mn(gU(s))}(e.query),new Hc(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Xe.fromBase64String(e.resumeToken))}function wU(e,t){let n=ka(t.snapshotVersion),r=ka(t.lastLimboFreeSnapshotVersion),i;i=ty(t.target)?pU(e.ct,t.target):mU(e.ct,t.target).ut;let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ra(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Bx(e){let t=gU({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ny(t,t.limit,"L"):t}function kA(e,t){return new Af(t.largestBatchId,gS(e.ct,t.overlayMutation))}function Q4(e,t){let n=t.path.lastSegment();return[e,On(t.path.popLast()),n]}function Y4(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:ka(r.readTime),documentKey:On(r.documentKey.path),largestBatchId:r.largestBatchId}}var vS=class{getBundleMetadata(t,n){return X4(t).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Pa(s.createTime),version:s.version}}(r)})}saveBundleMetadata(t,n){return X4(t).put(function(i){return{bundleId:i.id,createTime:ka(Ae(i.createTime)),version:i.version}}(n))}getNamedQuery(t,n){return J4(t).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Bx(s.bundledQuery),readTime:Pa(s.readTime)}}(r)})}saveNamedQuery(t,n){return J4(t).put(function(i){return{name:i.name,readTime:ka(Ae(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function X4(e){return Je(e,"bundles")}function J4(e){return Je(e,"namedQueries")}var uy=class e{constructor(t,n){this.serializer=t,this.userId=n}static lt(t,n){let r=n.uid||"";return new e(t,r)}getOverlay(t,n){return sf(t).get(Q4(this.userId,n)).next(r=>r?kA(this.serializer,r):null)}getOverlays(t,n){let r=Ei();return x.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){let i=[];return r.forEach((s,a)=>{let c=new Af(n,a);i.push(this.ht(t,c))}),x.waitFor(i)}removeOverlaysForBatchId(t,n,r){let i=new Set;n.forEach(a=>i.add(On(a.getCollectionPath())));let s=[];return i.forEach(a=>{let c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(sf(t).H("collectionPathOverlayIndex",c))}),x.waitFor(s)}getOverlaysForCollection(t,n,r){let i=Ei(),s=On(n),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return sf(t).W("collectionPathOverlayIndex",a).next(c=>{for(let l of c){let d=kA(this.serializer,l);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(t,n,r,i){let s=Ei(),a,c=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return sf(t).Y({index:"collectionGroupOverlayIndex",range:c},(l,d,p)=>{let g=kA(this.serializer,d);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):p.done()}).next(()=>s)}ht(t,n){return sf(t).put(function(i,s,a){let[c,l,d]=Q4(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Rf(i.ct,a.mutation)}}(this.serializer,this.userId,n))}};function sf(e){return Je(e,"documentOverlays")}var Wi=class{constructor(){}Pt(t,n){this.It(t,n),n.Tt()}It(t,n){if("nullValue"in t)this.Et(n,5);else if("booleanValue"in t)this.Et(n,10),n.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(n,15),n.dt(pe(t.integerValue));else if("doubleValue"in t){let r=pe(t.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),yf(r)?n.dt(0):n.dt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,n),this.Vt(n);else if("bytesValue"in t)this.Et(n,30),n.ft(ns(t.bytesValue)),this.Vt(n);else if("referenceValue"in t)this.gt(t.referenceValue,n);else if("geoPointValue"in t){let r=t.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in t?Lj(t)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,n),this.Vt(n)):"arrayValue"in t?(this.wt(t.arrayValue,n),this.Vt(n)):Y()}Rt(t,n){this.Et(n,25),this.St(t,n)}St(t,n){n.At(t)}yt(t,n){let r=t.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(t,n){let r=t.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(t,n){this.Et(n,37),K.fromName(t).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(t,n){t.dt(n)}Vt(t){t.dt(2)}};Wi.bt=new Wi;function HQ(e){if(e===0)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function Z4(e){let t=64-function(r){let i=0;for(let s=0;s<8;++s){let a=HQ(255&r[s]);if(i+=a,a!==8)break}return i}(e);return Math.ceil(t/8)}var yS=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){let n=t[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(t){let n=t[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(t){for(let n of t){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(t){for(let n of t){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(t){let n=this.Bt(t),r=Z4(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(t){let n=this.Bt(t),r=Z4(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Bt(t){let n=function(s){let a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(t),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(t){let n=255&t;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(t){let n=255&t;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){let n=t+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},bS=class{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Lt(t)}Tt(){this.Gt.Qt()}},wS=class{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}},Ia=class{constructor(){this.Gt=new yS,this.zt=new bS(this.Gt),this.jt=new wS(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return t===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Ea=class e{constructor(t,n,r,i){this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let t=this.directionalValue.length,n=t===0||this.directionalValue[t-1]===255?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}};function Wo(e,t){let n=e.indexId-t.indexId;return n!==0?n:(n=tj(e.arrayValue,t.arrayValue),n!==0?n:(n=tj(e.directionalValue,t.directionalValue),n!==0?n:K.comparator(e.documentKey,t.documentKey)))}function tj(e,t){for(let n=0;n<e.length&&n<t.length;++n){let r=e[n]-t[n];if(r!==0)return r}return e.length-t.length}var cy=class{constructor(t){this.Yt=new Ht((n,r)=>Te.comparator(n.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(let n of t.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(t){if(nt(t.collectionGroup===this.collectionId),this.en)return!1;let n=qA(t);if(n!==void 0&&!this.nn(n))return!1;let r=ba(t),i=new Set,s=0,a=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){let c=this.Yt.getIterator().getNext();if(!i.has(c.field.canonicalString())){let l=r[s];if(!this.rn(c,l)||!this.sn(this.Zt[a++],l))return!1}++s}for(;s<r.length;++s){let c=r[s];if(a>=this.Zt.length||!this.sn(this.Zt[a++],c))return!1}return!0}on(){if(this.en)return null;let t=new Ht(Te.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Fc(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),n.push(new Fc(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),n.push(new Fc(r.field,r.dir==="asc"?0:1)));return new Bc(Bc.UNKNOWN_ID,this.collectionId,n,vf.empty())}nn(t){for(let n of this.Xt)if(this.rn(n,t))return!0;return!1}rn(t,n){if(t===void 0||!t.field.isEqual(n.fieldPath))return!1;let r=t.op==="array-contains"||t.op==="array-contains-any";return n.kind===2===r}sn(t,n){return!!t.field.isEqual(n.fieldPath)&&(n.kind===0&&t.dir==="asc"||n.kind===1&&t.dir==="desc")}};function _U(e){var t,n;if(nt(e instanceof Dt||e instanceof Kt),e instanceof Dt){if(e instanceof Zv){let i=((n=(t=e.value.arrayValue)===null||t===void 0?void 0:t.values)===null||n===void 0?void 0:n.map(s=>Dt.create(e.field,"==",s)))||[];return Kt.create(i,"or")}return e}let r=e.filters.map(i=>_U(i));return Kt.create(r,e.op)}function WQ(e){if(e.getFilters().length===0)return[];let t=ES(_U(e));return nt(IU(t)),_S(t)||IS(t)?[t]:t.getFilters()}function _S(e){return e instanceof Dt}function IS(e){return e instanceof Kt&&Fx(e)}function IU(e){return _S(e)||IS(e)||function(n){if(n instanceof Kt&&YA(n)){for(let r of n.getFilters())if(!_S(r)&&!IS(r))return!1;return!0}return!1}(e)}function ES(e){if(nt(e instanceof Dt||e instanceof Kt),e instanceof Dt)return e;if(e.filters.length===1)return ES(e.filters[0]);let t=e.filters.map(r=>ES(r)),n=Kt.create(t,e.op);return n=ly(n),IU(n)?n:(nt(n instanceof Kt),nt(zc(n)),nt(n.filters.length>1),n.filters.reduce((r,i)=>qx(r,i)))}function qx(e,t){let n;return nt(e instanceof Dt||e instanceof Kt),nt(t instanceof Dt||t instanceof Kt),n=e instanceof Dt?t instanceof Dt?function(i,s){return Kt.create([i,s],"and")}(e,t):ej(e,t):t instanceof Dt?ej(t,e):function(i,s){if(nt(i.filters.length>0&&s.filters.length>0),zc(i)&&zc(s))return Uj(i,s.getFilters());let a=YA(i)?i:s,c=YA(i)?s:i,l=a.filters.map(d=>qx(d,c));return Kt.create(l,"or")}(e,t),ly(n)}function ej(e,t){if(zc(t))return Uj(t,e.getFilters());{let n=t.filters.map(r=>qx(e,r));return Kt.create(n,"or")}}function ly(e){if(nt(e instanceof Dt||e instanceof Kt),e instanceof Dt)return e;let t=e.getFilters();if(t.length===1)return ly(t[0]);if(Vj(e))return e;let n=t.map(i=>ly(i)),r=[];return n.forEach(i=>{i instanceof Dt?r.push(i):i instanceof Kt&&(i.op===e.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Kt.create(r,e.op)}var TS=class{constructor(){this._n=new Df}addToCollectionParentIndex(t,n){return this._n.add(n),x.resolve()}getCollectionParents(t,n){return x.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return x.resolve()}deleteFieldIndex(t,n){return x.resolve()}deleteAllFieldIndexes(t){return x.resolve()}createTargetIndexes(t,n){return x.resolve()}getDocumentsMatchingTarget(t,n){return x.resolve(null)}getIndexType(t,n){return x.resolve(0)}getFieldIndexes(t,n){return x.resolve([])}getNextCollectionGroupToUpdate(t){return x.resolve(null)}getMinOffset(t,n){return x.resolve(kr.min())}getMinOffsetFromCollectionGroup(t,n){return x.resolve(kr.min())}updateCollectionGroup(t,n,r){return x.resolve()}updateIndexEntries(t,n){return x.resolve()}},Df=class{constructor(){this.index={}}add(t){let n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Ht(Ot.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){let n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Ht(Ot.comparator)).toArray()}};var Mv=new Uint8Array(0),AS=class{constructor(t,n){this.databaseId=n,this.an=new Df,this.un=new Ri(r=>Ra(r),(r,i)=>Uf(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();t.addOnCommittedListener(()=>{this.an.add(n)});let s={collectionId:r,parent:On(i)};return nj(t).put(s)}return x.resolve()}getCollectionParents(t,n){let r=[],i=IDBKeyRange.bound([n,""],[Aj(n),""],!1,!0);return nj(t).W(i).next(s=>{for(let a of s){if(a.collectionId!==n)break;r.push(Ii(a.parent))}return r})}addFieldIndex(t,n){let r=af(t),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let a=Rc(t);return s.next(c=>{a.put(Y4(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(t,n){let r=af(t),i=Rc(t),s=Cc(t);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let n=af(t),r=Cc(t),i=Rc(t);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(t,n){return x.forEach(this.cn(n),r=>this.getIndexType(t,r).next(i=>{if(i===0||i===1){let s=new cy(r).on();if(s!=null)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,n){let r=Cc(t),i=!0,s=new Map;return x.forEach(this.cn(n),a=>this.ln(t,a).next(c=>{i&&(i=!!c),s.set(a,c)})).next(()=>{if(i){let a=_t(),c=[];return x.forEach(s,(l,d)=>{j("IndexedDbIndexManager",`Using index ${function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`}(l)} to execute ${Ra(n)}`);let p=function(k,z){let H=qA(z);if(H===void 0)return null;for(let L of ey(k,H.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(d,l),g=function(k,z){let H=new Map;for(let L of ba(z))for(let mt of ey(k,L.fieldPath))switch(mt.op){case"==":case"in":H.set(L.fieldPath.canonicalString(),mt.value);break;case"not-in":case"!=":return H.set(L.fieldPath.canonicalString(),mt.value),Array.from(H.values())}return null}(d,l),v=function(k,z){let H=[],L=!0;for(let mt of ba(z)){let fn=mt.kind===0?M4(k,mt.fieldPath,k.startAt):L4(k,mt.fieldPath,k.startAt);H.push(fn.value),L&&(L=fn.inclusive)}return new Ci(H,L)}(d,l),b=function(k,z){let H=[],L=!0;for(let mt of ba(z)){let fn=mt.kind===0?L4(k,mt.fieldPath,k.endAt):M4(k,mt.fieldPath,k.endAt);H.push(fn.value),L&&(L=fn.inclusive)}return new Ci(H,L)}(d,l),_=this.hn(l,d,v),I=this.hn(l,d,b),T=this.Pn(l,d,g),S=this.In(l.indexId,p,_,v.inclusive,I,b.inclusive,T);return x.forEach(S,M=>r.j(M,n.limit).next(k=>{k.forEach(z=>{let H=K.fromSegments(z.documentKey);a.has(H)||(a=a.add(H),c.push(H))})}))}).next(()=>c)}return x.resolve(null)})}cn(t){let n=this.un.get(t);return n||(t.filters.length===0?n=[t]:n=WQ(Kt.create(t.filters,"and")).map(r=>oS(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,n),n)}In(t,n,r,i,s,a,c){let l=(n!=null?n.length:1)*Math.max(r.length,s.length),d=l/(n!=null?n.length:1),p=[];for(let g=0;g<l;++g){let v=n?this.Tn(n[g/d]):Mv,b=this.En(t,v,r[g%d],i),_=this.dn(t,v,s[g%d],a),I=c.map(T=>this.En(t,v,T,!0));p.push(...this.createRange(b,_,I))}return p}En(t,n,r,i){let s=new Ea(t,K.empty(),n,r);return i?s:s.Jt()}dn(t,n,r,i){let s=new Ea(t,K.empty(),n,r);return i?s.Jt():s}ln(t,n){let r=new cy(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(t,i).next(s=>{let a=null;for(let c of s)r.tn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(t,n){let r=2,i=this.cn(n);return x.forEach(i,s=>this.ln(t,s).next(a=>{a?r!==0&&a.fields.length<function(l){let d=new Ht(Te.comparator),p=!1;for(let g of l.filters)for(let v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:d=d.add(v.field));for(let g of l.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(t,n){let r=new Ia;for(let i of ba(t)){let s=n.data.field(i.fieldPath);if(s==null)return null;let a=r.Ht(i.kind);Wi.bt.Pt(s,a)}return r.Wt()}Tn(t){let n=new Ia;return Wi.bt.Pt(t,n.Ht(0)),n.Wt()}Rn(t,n){let r=new Ia;return Wi.bt.Pt(xa(this.databaseId,n),r.Ht(function(s){let a=ba(s);return a.length===0?0:a[a.length-1].kind}(t))),r.Wt()}Pn(t,n,r){if(r===null)return[];let i=[];i.push(new Ia);let s=0;for(let a of ba(t)){let c=r[s++];for(let l of i)if(this.Vn(n,a.fieldPath)&&If(c))i=this.mn(i,a,c);else{let d=l.Ht(a.kind);Wi.bt.Pt(c,d)}}return this.fn(i)}hn(t,n,r){return this.Pn(t,n,r.position)}fn(t){let n=[];for(let r=0;r<t.length;++r)n[r]=t[r].Wt();return n}mn(t,n,r){let i=[...t],s=[];for(let a of r.arrayValue.values||[])for(let c of i){let l=new Ia;l.seed(c.Wt()),Wi.bt.Pt(a,l.Ht(n.kind)),s.push(l)}return s}Vn(t,n){return!!t.filters.find(r=>r instanceof Dt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,n){let r=af(t),i=Rc(t);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{let a=[];return x.forEach(s,c=>i.get([c.indexId,this.uid]).next(l=>{a.push(function(p,g){let v=g?new vf(g.sequenceNumber,new kr(Pa(g.readTime),new K(Ii(g.documentKey)),g.largestBatchId)):vf.empty(),b=p.fields.map(([_,I])=>new Fc(Te.fromServerFormat(_),I));return new Bc(p.indexId,p.collectionGroup,b,v)}(c,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:bt(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(t,n,r){let i=af(t),s=Rc(t);return this.gn(t).next(a=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(c=>x.forEach(c,l=>s.put(Y4(l.indexId,this.uid,a,r)))))}updateIndexEntries(t,n){let r=new Map;return x.forEach(n,(i,s)=>{let a=r.get(i.collectionGroup);return(a?x.resolve(a):this.getFieldIndexes(t,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),x.forEach(c,l=>this.pn(t,i,l).next(d=>{let p=this.yn(s,l);return d.isEqual(p)?x.resolve():this.wn(t,s,l,d,p)}))))})}Sn(t,n,r,i){return Cc(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(t,n,r,i){return Cc(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(t,n,r){let i=Cc(t),s=new Ht(Wo);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(a,c)=>{s=s.add(new Ea(r.indexId,n,c.arrayValue,c.directionalValue))}).next(()=>s)}yn(t,n){let r=new Ht(Wo),i=this.An(n,t);if(i==null)return r;let s=qA(n);if(s!=null){let a=t.data.field(s.fieldPath);if(If(a))for(let c of a.arrayValue.values||[])r=r.add(new Ea(n.indexId,t.key,this.Tn(c),i))}else r=r.add(new Ea(n.indexId,t.key,Mv,i));return r}wn(t,n,r,i,s){j("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let a=[];return function(l,d,p,g,v){let b=l.getIterator(),_=d.getIterator(),I=xc(b),T=xc(_);for(;I||T;){let S=!1,M=!1;if(I&&T){let k=p(I,T);k<0?M=!0:k>0&&(S=!0)}else I!=null?M=!0:S=!0;S?(g(T),T=xc(_)):M?(v(I),I=xc(b)):(I=xc(b),T=xc(_))}}(i,s,Wo,c=>{a.push(this.Sn(t,n,r,c))},c=>{a.push(this.bn(t,n,r,c))}),x.waitFor(a)}gn(t){let n=1;return Rc(t).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(t,n,r){r=r.sort((a,c)=>Wo(a,c)).filter((a,c,l)=>!c||Wo(a,l[c-1])!==0);let i=[];i.push(t);for(let a of r){let c=Wo(a,t),l=Wo(a,n);if(c===0)i[0]=t.Jt();else if(c>0&&l<0)i.push(a),i.push(a.Jt());else if(l>0)break}i.push(n);let s=[];for(let a=0;a<i.length;a+=2){if(this.Dn(i[a],i[a+1]))return[];let c=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Mv,[]],l=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Mv,[]];s.push(IDBKeyRange.bound(c,l))}return s}Dn(t,n){return Wo(t,n)>0}getMinOffsetFromCollectionGroup(t,n){return this.getFieldIndexes(t,n).next(rj)}getMinOffset(t,n){return x.mapArray(this.cn(n),r=>this.ln(t,r).next(i=>i||Y())).next(rj)}};function nj(e){return Je(e,"collectionParents")}function Cc(e){return Je(e,"indexEntries")}function af(e){return Je(e,"indexConfiguration")}function Rc(e){return Je(e,"indexState")}function rj(e){nt(e.length!==0);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){let i=e[r].indexState.offset;Ox(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new kr(t.readTime,t.documentKey,n)}var ij={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rr=class e{constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function EU(e,t,n){let r=e.store("mutations"),i=e.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId),c=0,l=r.Y({range:a},(p,g,v)=>(c++,v.delete()));s.push(l.next(()=>{nt(c===1)}));let d=[];for(let p of n.mutations){let g=Dj(t,p.key.path,n.batchId);s.push(i.delete(g)),d.push(p.key)}return x.waitFor(s).next(()=>d)}function hy(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Y();t=e.noDocument}return JSON.stringify(t).length}Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(41943040,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);var dy=class e{constructor(t,n,r,i){this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(t,n,r,i){nt(t.uid!=="");let s=t.isAuthenticated()?t.uid:"";return new e(s,n,r,i)}checkEmpty(t){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qo(t).Y({index:"userMutationsIndex",range:r},(i,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(t,n,r,i){let s=Mc(t),a=Qo(t);return a.add({}).next(c=>{nt(typeof c=="number");let l=new Tf(c,n,r,i),d=function(b,_,I){let T=I.baseMutations.map(M=>Rf(b.ct,M)),S=I.mutations.map(M=>Rf(b.ct,M));return{userId:_,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:T,mutations:S}}(this.serializer,this.userId,l),p=[],g=new Ht((v,b)=>bt(v.canonicalString(),b.canonicalString()));for(let v of i){let b=Dj(this.userId,v.key.path,c);g=g.add(v.key.path.popLast()),p.push(a.put(d)),p.push(s.put(b,eQ))}return g.forEach(v=>{p.push(this.indexManager.addToCollectionParentIndex(t,v))}),t.addOnCommittedListener(()=>{this.Cn[c]=l.keys()}),x.waitFor(p).next(()=>l)})}lookupMutationBatch(t,n){return Qo(t).get(n).next(r=>r?(nt(r.userId===this.userId),_a(this.serializer,r)):null)}vn(t,n){return this.Cn[n]?x.resolve(this.Cn[n]):this.lookupMutationBatch(t,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(t,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Qo(t).Y({index:"userMutationsIndex",range:i},(a,c,l)=>{c.userId===this.userId&&(nt(c.batchId>=r),s=_a(this.serializer,c)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Qo(t).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(t){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qo(t).W("userMutationsIndex",n).next(r=>r.map(i=>_a(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(t,n){let r=jv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Mc(t).Y({range:i},(a,c,l)=>{let[d,p,g]=a,v=Ii(p);if(d===this.userId&&n.path.isEqual(v))return Qo(t).get(g).next(b=>{if(!b)throw Y();nt(b.userId===this.userId),s.push(_a(this.serializer,b))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ht(bt),i=[];return n.forEach(s=>{let a=jv(this.userId,s.path),c=IDBKeyRange.lowerBound(a),l=Mc(t).Y({range:c},(d,p,g)=>{let[v,b,_]=d,I=Ii(b);v===this.userId&&s.path.isEqual(I)?r=r.add(_):g.done()});i.push(l)}),x.waitFor(i).next(()=>this.Fn(t,r))}getAllMutationBatchesAffectingQuery(t,n){let r=n.path,i=r.length+1,s=jv(this.userId,r),a=IDBKeyRange.lowerBound(s),c=new Ht(bt);return Mc(t).Y({range:a},(l,d,p)=>{let[g,v,b]=l,_=Ii(v);g===this.userId&&r.isPrefixOf(_)?_.length===i&&(c=c.add(b)):p.done()}).next(()=>this.Fn(t,c))}Fn(t,n){let r=[],i=[];return n.forEach(s=>{i.push(Qo(t).get(s).next(a=>{if(a===null)throw Y();nt(a.userId===this.userId),r.push(_a(this.serializer,a))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(t,n){return EU(t.ae,this.userId,n).next(r=>(t.addOnCommittedListener(()=>{this.Mn(n.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(n=>{if(!n)return x.resolve();let r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return Mc(t).Y({range:r},(s,a,c)=>{if(s[0]===this.userId){let l=Ii(s[1]);i.push(l)}else c.done()}).next(()=>{nt(i.length===0)})})}containsKey(t,n){return TU(t,this.userId,n)}xn(t){return AU(t).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function TU(e,t,n){let r=jv(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),a=!1;return Mc(e).Y({range:s,J:!0},(c,l,d)=>{let[p,g,v]=c;p===t&&g===i&&(a=!0),d.done()}).next(()=>a)}function Qo(e){return Je(e,"mutations")}function Mc(e){return Je(e,"documentMutations")}function AU(e){return Je(e,"mutationQueues")}var Wc=class e{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new e(0)}static Ln(){return new e(-1)}};var SS=class{constructor(t,n){this.referenceDelegate=t,this.serializer=n}allocateTargetId(t){return this.Bn(t).next(n=>{let r=new Wc(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(t,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Bn(t).next(n=>st.fromTimestamp(new le(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Bn(t).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(t,n,r){return this.Bn(t).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(t,i)))}addTargetData(t,n){return this.qn(t,n).next(()=>this.Bn(t).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(t,r))))}updateTargetData(t,n){return this.qn(t,n)}removeTargetData(t,n){return this.removeMatchingKeysForTargetId(t,n.targetId).next(()=>Dc(t).delete(n.targetId)).next(()=>this.Bn(t)).next(r=>(nt(r.targetCount>0),r.targetCount-=1,this.kn(t,r)))}removeTargets(t,n,r){let i=0,s=[];return Dc(t).Y((a,c)=>{let l=hf(c);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(t,l)))}).next(()=>x.waitFor(s)).next(()=>i)}forEachTarget(t,n){return Dc(t).Y((r,i)=>{let s=hf(i);n(s)})}Bn(t){return oj(t).get("targetGlobalKey").next(n=>(nt(n!==null),n))}kn(t,n){return oj(t).put("targetGlobalKey",n)}qn(t,n){return Dc(t).put(wU(this.serializer,n))}Qn(t,n){let r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.Bn(t).next(n=>n.targetCount)}getTargetData(t,n){let r=Ra(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Dc(t).Y({range:i,index:"queryTargetsIndex"},(a,c,l)=>{let d=hf(c);Uf(n,d.target)&&(s=d,l.done())}).next(()=>s)}addMatchingKeys(t,n,r){let i=[],s=Yo(t);return n.forEach(a=>{let c=On(a.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(t,r,a))}),x.waitFor(i)}removeMatchingKeys(t,n,r){let i=Yo(t);return x.forEach(n,s=>{let a=On(s.path);return x.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(t,r,s)])})}removeMatchingKeysForTargetId(t,n){let r=Yo(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Yo(t),s=_t();return i.Y({range:r,J:!0},(a,c,l)=>{let d=Ii(a[1]),p=new K(d);s=s.add(p)}).next(()=>s)}containsKey(t,n){let r=On(n.path),i=IDBKeyRange.bound([r],[Aj(r)],!1,!0),s=0;return Yo(t).Y({index:"documentTargetsIndex",J:!0,range:i},([a,c],l,d)=>{a!==0&&(s++,d.done())}).next(()=>s>0)}_t(t,n){return Dc(t).get(n).next(r=>r?hf(r):null)}};function Dc(e){return Je(e,"targets")}function oj(e){return Je(e,"targetGlobal")}function Yo(e){return Je(e,"targetDocuments")}function sj([e,t],[n,r]){let i=bt(e,n);return i===0?bt(t,r):i}var xS=class{constructor(t){this.Kn=t,this.buffer=new Ht(sj),this.$n=0}Un(){return++this.$n}Wn(t){let n=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();sj(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},CS=class{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(t){j("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>D(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){hs(n)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ls(n)}yield this.zn(3e5)}))}},RS=class{constructor(t,n){this.jn=t,this.params=n}calculateTargetCount(t,n){return this.jn.Hn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return x.resolve(gr._e);let r=new xS(n);return this.jn.forEachTarget(t,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(t,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.jn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.jn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(ij)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ij):this.Yn(t,n))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,n){let r,i,s,a,c,l,d,p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(t,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(t,r,n))).next(g=>(s=g,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(g=>(d=Date.now(),kc()<=hi.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(l-c)+`ms
	Removed ${g} documents in `+(d-l)+`ms
Total Duration: ${d-p}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function QQ(e,t){return new RS(e,t)}var DS=class{constructor(t,n){this.db=t,this.garbageCollector=QQ(this,n)}Hn(t){let n=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}Zn(t){let n=0;return this.Jn(t,r=>{n++}).next(()=>n)}forEachTarget(t,n){return this.db.getTargetCache().forEachTarget(t,n)}Jn(t,n){return this.Xn(t,(r,i)=>n(i))}addReference(t,n,r){return Lv(t,r)}removeReference(t,n,r){return Lv(t,r)}removeTargets(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)}markPotentiallyOrphaned(t,n){return Lv(t,n)}er(t,n){return function(i,s){let a=!1;return AU(i).Z(c=>TU(i,c,s).next(l=>(l&&(a=!0),x.resolve(!l)))).next(()=>a)}(t,n)}removeOrphanedDocuments(t,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Xn(t,(a,c)=>{if(c<=n){let l=this.er(t,a).next(d=>{if(!d)return s++,r.getEntry(t,a).next(()=>(r.removeEntry(a,st.min()),Yo(t).delete(function(g){return[0,On(g.path)]}(a))))});i.push(l)}}).next(()=>x.waitFor(i)).next(()=>r.apply(t)).next(()=>s)}removeTarget(t,n){let r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,n){return Lv(t,n)}Xn(t,n){let r=Yo(t),i,s=gr._e;return r.Y({index:"documentTargetsIndex"},([a,c],{path:l,sequenceNumber:d})=>{a===0?(s!==gr._e&&n(new K(Ii(i)),s),s=d,i=l):s=gr._e}).next(()=>{s!==gr._e&&n(new K(Ii(i)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function Lv(e,t){return Yo(e).put(function(r,i){return{targetId:0,path:On(r.path),sequenceNumber:i}}(t,e.currentSequenceNumber))}var fy=class{constructor(){this.changes=new Ri(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Le.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var kS=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,n,r){return ya(t).put(r)}removeEntry(t,n,r){return ya(t).delete(function(s,a){let c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ay(a),c[c.length-1]]}(n,r))}updateMetadata(t,n){return this.getMetadata(t).next(r=>(r.byteSize+=n,this.tr(t,r)))}getEntry(t,n){let r=Le.newInvalidDocument(n);return ya(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(uf(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(t,n){let r={size:0,document:Le.newInvalidDocument(n)};return ya(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(uf(n))},(i,s)=>{r={document:this.nr(n,s),size:hy(s)}}).next(()=>r)}getEntries(t,n){let r=Xn();return this.ir(t,n,(i,s)=>{let a=this.nr(i,s);r=r.insert(i,a)}).next(()=>r)}sr(t,n){let r=Xn(),i=new te(K.comparator);return this.ir(t,n,(s,a)=>{let c=this.nr(s,a);r=r.insert(s,c),i=i.insert(s,hy(a))}).next(()=>({documents:r,_r:i}))}ir(t,n,r){if(n.isEmpty())return x.resolve();let i=new Ht(cj);n.forEach(l=>i=i.add(l));let s=IDBKeyRange.bound(uf(i.first()),uf(i.last())),a=i.getIterator(),c=a.getNext();return ya(t).Y({index:"documentKeyIndex",range:s},(l,d,p)=>{let g=K.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&cj(c,g)<0;)r(c,null),c=a.getNext();c&&c.isEqual(g)&&(r(c,d),c=a.hasNext()?a.getNext():null),c?p.U(uf(c)):p.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(t,n,r,i,s){let a=n.path,c=[a.popLast().toArray(),a.lastSegment(),ay(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ya(t).W(IDBKeyRange.bound(c,l,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let p=Xn();for(let g of d){let v=this.nr(K.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(qf(n,v)||i.has(v.key))&&(p=p.insert(v.key,v))}return p})}getAllFromCollectionGroup(t,n,r,i){let s=Xn(),a=uj(n,r),c=uj(n,kr.max());return ya(t).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(l,d,p)=>{let g=this.nr(K.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(t){return new PS(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(n=>n.byteSize)}getMetadata(t){return aj(t).get("remoteDocumentGlobalKey").next(n=>(nt(!!n),n))}tr(t,n){return aj(t).put("remoteDocumentGlobalKey",n)}nr(t,n){if(n){let r=$Q(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(st.min())))return r}return Le.newInvalidDocument(t)}};function SU(e){return new kS(e)}var PS=class extends fy{constructor(t,n){super(),this.ar=t,this.trackRemovals=n,this.ur=new Ri(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){let n=[],r=0,i=new Ht((s,a)=>bt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{let c=this.ur.get(s);if(n.push(this.ar.removeEntry(t,s,c.readTime)),a.isValidDocument()){let l=W4(this.ar.serializer,a);i=i.add(s.path.popLast());let d=hy(l);r+=d-c.size,n.push(this.ar.addEntry(t,s,l))}else if(r-=c.size,this.trackRemovals){let l=W4(this.ar.serializer,a.convertToNoDocument(st.min()));n.push(this.ar.addEntry(t,s,l))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(t,s))}),n.push(this.ar.updateMetadata(t,r)),x.waitFor(n)}getFromCache(t,n){return this.ar.rr(t,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,n){return this.ar.sr(t,n).next(({documents:r,_r:i})=>(i.forEach((s,a)=>{this.ur.set(s,{size:a,readTime:r.get(s).readTime})}),r))}};function aj(e){return Je(e,"remoteDocumentGlobal")}function ya(e){return Je(e,"remoteDocumentsV14")}function uf(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function uj(e,t){let n=t.documentKey.path.toArray();return[e,ay(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cj(e,t){let n=e.path.toArray(),r=t.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=bt(n[s],r[s]),i)return i;return i=bt(n.length,r.length),i||(i=bt(n[n.length-2],r[r.length-2]),i||bt(n[n.length-1],r[r.length-1]))}var NS=class{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}};var py=class{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&pf(r.mutation,i,vr.empty(),le.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,_t()).next(()=>r))}getLocalViewOfDocuments(t,n,r=_t()){let i=Ei();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let a=lf();return s.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){let r=Ei();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,_t()))}populateOverlays(t,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((a,c)=>{n.set(a,c)})})}computeViews(t,n,r,i){let s=Xn(),a=ff(),c=function(){return ff()}();return n.forEach((l,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Xr)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),pf(p.mutation,d,p.mutation.getFieldMask(),le.now())):a.set(d.key,vr.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var g;return c.set(d,new NS(p,(g=a.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(t,n){let r=ff(),i=new te((a,c)=>a-c),s=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(let c of a)c.keys().forEach(l=>{let d=n.get(l);if(d===null)return;let p=r.get(l)||vr.empty();p=c.applyToLocalView(d,p),r.set(l,p);let g=(i.get(c.batchId)||_t()).add(l);i=i.insert(c.batchId,g)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,p=l.value,g=Qj();p.forEach(v=>{if(!s.has(v)){let b=rU(n.get(v),r.get(v));b!==null&&g.set(v,b),s=s.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(t,d,g))}return x.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Vx(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):x.resolve(Ei()),c=-1,l=s;return a.next(d=>x.forEach(d,(p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(p)?x.resolve():this.remoteDocumentCache.getEntry(t,p).next(v=>{l=l.insert(p,v)}))).next(()=>this.populateOverlays(t,d,s)).next(()=>this.computeViews(t,l,d,_t())).next(p=>({batchId:c,changes:Wj(p)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new K(n)).next(r=>{let i=lf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){let s=n.collectionGroup,a=lf();return this.indexManager.getCollectionParents(t,s).next(c=>x.forEach(c,l=>{let d=function(g,v){return new Yr(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,d,r,i).next(p=>{p.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(a=>{s.forEach((l,d)=>{let p=d.getKey();a.get(p)===null&&(a=a.insert(p,Le.newInvalidDocument(p)))});let c=lf();return a.forEach((l,d)=>{let p=s.get(l);p!==void 0&&pf(p.mutation,d,vr.empty(),le.now()),qf(n,d)&&(c=c.insert(l,d))}),c})}};var OS=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return x.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ae(i.createTime)}}(n)),x.resolve()}getNamedQuery(t,n){return x.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Bx(i.bundledQuery),readTime:Ae(i.readTime)}}(n)),x.resolve()}};var MS=class{constructor(){this.overlays=new te(K.comparator),this.hr=new Map}getOverlay(t,n){return x.resolve(this.overlays.get(n))}getOverlays(t,n){let r=Ei();return x.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),x.resolve()}removeOverlaysForBatchId(t,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),x.resolve()}getOverlaysForCollection(t,n,r){let i=Ei(),s=n.length+1,a=new K(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return x.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new te((d,p)=>d-p),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Ei(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let c=Ei(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return x.resolve(c)}ht(t,n,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Af(n,r));let s=this.hr.get(n);s===void 0&&(s=_t(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var kf=class{constructor(){this.Pr=new Ht(Ne.Ir),this.Tr=new Ht(Ne.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){let r=new Ne(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ne(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){let n=new K(new Ot([])),r=new Ne(n,t),i=new Ne(n,t+1),s=[];return this.Tr.forEachInRange([r,i],a=>{this.Ar(a),s.push(a.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let n=new K(new Ot([])),r=new Ne(n,t),i=new Ne(n,t+1),s=_t();return this.Tr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(t){let n=new Ne(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}},Ne=class{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return K.comparator(t.key,n.key)||bt(t.pr,n.pr)}static Er(t,n){return bt(t.pr,n.pr)||K.comparator(t.key,n.key)}};var LS=class{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ht(Ne.Ir)}checkEmpty(t){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Tf(s,n,r,i);this.mutationQueue.push(a);for(let c of i)this.wr=this.wr.add(new Ne(c.key,s)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return x.resolve(a)}lookupMutationBatch(t,n){return x.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){let r=n+1,i=this.br(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){let r=new Ne(n,0),i=new Ne(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],a=>{let c=this.Sr(a.pr);s.push(c)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ht(bt);return n.forEach(i=>{let s=new Ne(i,0),a=new Ne(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,a],c=>{r=r.add(c.pr)})}),x.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){let r=n.path,i=r.length+1,s=r;K.isDocumentKey(s)||(s=s.child(""));let a=new Ne(new K(s),0),c=new Ht(bt);return this.wr.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.pr)),!0)},a),x.resolve(this.Dr(c))}Dr(t){let n=[];return t.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){nt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return x.forEach(n.mutations,i=>{let s=new Ne(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){let r=new Ne(n,0),i=this.wr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,x.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var FS=class{constructor(t){this.vr=t,this.docs=function(){return new te(K.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){let n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Le.newInvalidDocument(n))}getEntries(t,n){let r=Xn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Le.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Xn(),a=n.path,c=new K(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:p}}=l.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Ox(xj(p),r)<=0||(i.has(p.key)||qf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Y()}Fr(t,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new VS(this)}getSize(t){return x.resolve(this.size)}},VS=class extends fy{constructor(t){super(),this.ar=t}applyChanges(t){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),x.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}};var jS=class{constructor(t){this.persistence=t,this.Mr=new Ri(n=>Ra(n),Uf),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.Or=0,this.Nr=new kf,this.targetCount=0,this.Lr=Wc.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(t){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return x.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),x.resolve()}qn(t){this.Mr.set(t.target,t);let n=t.targetId;n>this.highestTargetId&&(this.Lr=new Wc(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,x.resolve()}updateTargetData(t,n){return this.qn(n),x.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(t,n,r){let i=0,s=[];return this.Mr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Mr.delete(a),s.push(this.removeMatchingKeysForTargetId(t,c.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(t){return x.resolve(this.targetCount)}getTargetData(t,n){let r=this.Mr.get(n)||null;return x.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),x.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(t,a))}),x.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),x.resolve()}getMatchingKeysForTargetId(t,n){let r=this.Nr.gr(n);return x.resolve(r)}containsKey(t,n){return x.resolve(this.Nr.containsKey(n))}};var my=class{constructor(t,n){this.Br={},this.overlays={},this.kr=new gr(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new jS(this),this.indexManager=new TS,this.remoteDocumentCache=function(i){return new FS(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new sy(n),this.$r=new OS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new MS,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new LS(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){j("MemoryPersistence","Starting transaction:",t);let i=new US(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}},US=class extends Wv{constructor(t){super(),this.currentSequenceNumber=t}},gy=class e{constructor(t){this.persistence=t,this.zr=new kf,this.jr=null}static Hr(t){return new e(t)}get Jr(){if(this.jr)return this.jr;throw Y()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),x.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),x.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Jr,r=>{let i=K.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,st.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return x.or([()=>x.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}};var BS=class{constructor(t){this.serializer=t}N(t,n,r,i){let s=new Qv("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(t),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",S4,{unique:!0}),l.createObjectStore("documentMutations")}(t),lj(t),function(l){l.createObjectStore("remoteDocuments")}(t));let a=x.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(t),lj(t)),a=a.next(()=>function(l){let d=l.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:st.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(l,d){return d.store("mutations").W().next(p=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",S4,{unique:!0});let g=d.store("mutations"),v=p.map(b=>g.put(b));return x.waitFor(v)})}(t,s))),a=a.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),r<5&&i>=5&&(a=a.next(()=>this.Xr(s))),r<6&&i>=6&&(a=a.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(t),this.ei(s)))),r<7&&i>=7&&(a=a.next(()=>this.ti(s))),r<8&&i>=8&&(a=a.next(()=>this.ni(t,s))),r<9&&i>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&i>=10&&(a=a.next(()=>this.ri(s))),r<11&&i>=11&&(a=a.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(a=a.next(()=>{(function(l){let d=l.createObjectStore("documentOverlays",{keyPath:fQ});d.createIndex("collectionPathOverlayIndex",pQ,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",mQ,{unique:!1})})(t)})),r<13&&i>=13&&(a=a.next(()=>function(l){let d=l.createObjectStore("remoteDocumentsV14",{keyPath:nQ});d.createIndex("documentKeyIndex",rQ),d.createIndex("collectionGroupIndex",iQ)}(t)).next(()=>this.ii(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.si(t,s))),r<15&&i>=15&&(a=a.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:cQ}).createIndex("sequenceNumberIndex",lQ,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:hQ}).createIndex("documentKeyIndex",dQ,{unique:!1})}(t))),a}ei(t){let n=0;return t.store("remoteDocuments").Y((r,i)=>{n+=hy(i)}).next(()=>{let r={byteSize:n};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(t){let n=t.store("mutationQueues"),r=t.store("mutations");return n.W().next(i=>x.forEach(i,s=>{let a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",a).next(c=>x.forEach(c,l=>{nt(l.userId===s.userId);let d=_a(this.serializer,l);return EU(t,s.userId,d).next(()=>{})}))}))}ti(t){let n=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.Y((a,c)=>{let l=new Ot(a),d=function(g){return[0,On(g)]}(l);s.push(n.get(d).next(p=>p?x.resolve():(g=>n.put({targetId:0,path:On(g),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>x.waitFor(s))})}ni(t,n){t.createObjectStore("collectionParents",{keyPath:uQ});let r=n.store("collectionParents"),i=new Df,s=a=>{if(i.add(a)){let c=a.lastSegment(),l=a.popLast();return r.put({collectionId:c,parent:On(l)})}};return n.store("remoteDocuments").Y({J:!0},(a,c)=>{let l=new Ot(a);return s(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([a,c,l],d)=>{let p=Ii(c);return s(p.popLast())}))}ri(t){let n=t.store("targets");return n.Y((r,i)=>{let s=hf(i),a=wU(this.serializer,s);return n.put(a)})}ii(t,n){let r=n.store("remoteDocuments"),i=[];return r.Y((s,a)=>{let c=n.store("remoteDocumentsV14"),l=function(g){return g.document?new K(Ot.fromString(g.document.name).popFirst(5)):g.noDocument?K.fromSegments(g.noDocument.path):g.unknownDocument?K.fromSegments(g.unknownDocument.path):Y()}(a).path.toArray(),d={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(d))}).next(()=>x.waitFor(i))}si(t,n){let r=n.store("mutations"),i=SU(this.serializer),s=new my(gy.Hr,this.serializer.ct);return r.W().next(a=>{let c=new Map;return a.forEach(l=>{var d;let p=(d=c.get(l.userId))!==null&&d!==void 0?d:_t();_a(this.serializer,l).keys().forEach(g=>p=p.add(g)),c.set(l.userId,p)}),x.forEach(c,(l,d)=>{let p=new Oe(d),g=uy.lt(this.serializer,p),v=s.getIndexManager(p),b=dy.lt(p,this.serializer,v,s.referenceDelegate);return new py(i,b,g,v).recalculateAndSaveOverlaysForDocumentKeys(new bf(n,gr._e),l).next()})})}};function lj(e){e.createObjectStore("targetDocuments",{keyPath:sQ}).createIndex("documentTargetsIndex",aQ,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",oQ,{unique:!0}),e.createObjectStore("targetGlobal")}var PA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qS=class e{constructor(t,n,r,i,s,a,c,l,d,p,g=15){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=a,this.document=c,this._i=d,this.ai=p,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=v=>Promise.resolve(),!e.D())throw new F(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new DS(this,i),this.Ti=n+"main",this.serializer=new sy(l),this.Ei=new Yi(this.Ti,this.ui,new BS(this.serializer)),this.Qr=new SS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=SU(this.serializer),this.$r=new vS,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,p===!1&&Ee("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(R.FAILED_PRECONDITION,PA);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Qr.getHighestSequenceNumber(t))}).then(t=>{this.kr=new gr(t,this._i)}).then(()=>{this.qr=!0}).catch(t=>(this.Ei&&this.Ei.close(),Promise.reject(t)))}fi(t){return this.Ii=n=>D(this,null,function*(){if(this.started)return t(n)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.B(n=>D(this,null,function*(){n.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget(()=>D(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Fv(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(t).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(t)).next(n=>this.isPrimary&&!n?this.yi(t).next(()=>!1):!!n&&this.wi(t).next(()=>!0))).catch(t=>{if(hs(t))return j("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.oi.enqueueRetryable(()=>this.Ii(t)),this.isPrimary=t})}gi(t){return cf(t).get("owner").next(n=>x.resolve(this.Si(n)))}bi(t){return Fv(t).delete(this.clientId)}Di(){return D(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Je(n,"clientMetadata");return r.W().next(i=>{let s=this.vi(i,18e5),a=i.filter(c=>s.indexOf(c)===-1);return x.forEach(a,c=>r.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.di)for(let n of t)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?x.resolve(!0):cf(t).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new F(R.FAILED_PRECONDITION,PA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fv(t).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(s||a&&c)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&j("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return D(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let n=new bf(t,gr._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(t,n){return t.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",t=>Fv(t).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(t,n){return dy.lt(t,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new AS(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return uy.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,n,r){j("IndexedDbPersistence","Starting transaction:",t);let i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===15?vQ:l===14?Nj:l===13?Pj:l===12?gQ:l===11?kj:void Y()}(this.ui),a;return this.Ei.runTransaction(t,i,s,c=>(a=new bf(c,this.kr?this.kr.next():gr._e),n==="readwrite-primary"?this.gi(a).next(l=>!!l||this.pi(a)).next(l=>{if(!l)throw Ee(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new F(R.FAILED_PRECONDITION,Cj);return r(a)}).next(l=>this.wi(a).next(()=>l)):this.ki(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}ki(t){return cf(t).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(R.FAILED_PRECONDITION,PA)})}wi(t){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cf(t).put("owner",n)}static D(){return Yi.D()}yi(t){let n=cf(t);return n.get("owner").next(r=>this.Si(r)?(j("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Ci(t,n){let r=Date.now();return!(t<r-n)&&(!(t>r)||(Ee(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;u_()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(t)))!==null;return j("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ee("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){Ee("Failed to set zombie client id.",t)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}};function cf(e){return Je(e,"owner")}function Fv(e){return Je(e,"clientMetadata")}function zx(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var zS=class e{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=_t(),i=_t();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new e(t,n.fromCache,r,i)}};var GS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var vy=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return u_()?8:Yi.v(hh())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){let s={result:null};return this.ji(t,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new GS;return this.Ji(t,n,a).next(c=>{if(s.result=c,this.Ui)return this.Yi(t,n,a,c.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(kc()<=hi.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Pc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),x.resolve()):(kc()<=hi.DEBUG&&j("QueryEngine","Query:",Pc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(kc()<=hi.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Pc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Mn(n))):x.resolve())}ji(t,n){if(F4(n))return x.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ny(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{let a=_t(...s);return this.zi.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,r).next(l=>{let d=this.Zi(n,c);return this.Xi(n,d,a,l.readTime)?this.ji(t,ny(n,null,"F")):this.es(t,d,n,l)}))})))}Hi(t,n,r,i){return F4(n)||i.isEqual(st.min())?x.resolve(null):this.zi.getDocuments(t,r).next(s=>{let a=this.Zi(n,s);return this.Xi(n,a,r,i)?x.resolve(null):(kc()<=hi.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pc(n)),this.es(t,a,n,Sj(i,-1)).next(c=>c))})}Zi(t,n){let r=new Ht($j(t));return n.forEach((i,s)=>{qf(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;let s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return kc()<=hi.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Pc(n)),this.zi.getDocumentsMatchingQuery(t,n,kr.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}};var KS=class{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new te(bt),this.rs=new Ri(s=>Ra(s),Uf),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new py(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}};function xU(e,t,n,r){return new KS(e,t,n,r)}function CU(e,t){return D(this,null,function*(){let n=$(e);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],c=[],l=_t();for(let d of i){a.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}for(let d of s){c.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}return n.localDocuments.getDocuments(r,l).next(d=>({us:d,removedBatchIds:a,addedBatchIds:c}))})})})}function YQ(e,t){let n=$(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(c,l,d,p){let g=d.batch,v=g.keys(),b=x.resolve();return v.forEach(_=>{b=b.next(()=>p.getEntry(l,_)).next(I=>{let T=d.docVersions.get(_);nt(T!==null),I.version.compareTo(T)<0&&(g.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),p.addEntry(I)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=_t();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function RU(e){let t=$(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function XQ(e,t){let n=$(e),r=t.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let c=[];t.targetChanges.forEach((p,g)=>{let v=i.get(g);if(!v)return;c.push(n.Qr.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(s,p.addedDocuments,g)));let b=v.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?b=b.withResumeToken(Xe.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(g,b),function(I,T,S){return I.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(v,b,p)&&c.push(n.Qr.updateTargetData(s,b))});let l=Xn(),d=_t();if(t.documentUpdates.forEach(p=>{t.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(DU(s,a,t.documentUpdates).next(p=>{l=p.cs,d=p.ls})),!r.isEqual(st.min())){let p=n.Qr.getLastRemoteSnapshotVersion(s).next(g=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return x.waitFor(c).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(n.ns=i,s))}function DU(e,t,n){let r=_t(),i=_t();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let a=Xn();return n.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(st.min())?(t.removeEntry(c,l.readTime),a=a.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(l),a=a.insert(c,l)):j("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{cs:a,ls:i}})}function JQ(e,t){let n=$(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Qc(e,t){let n=$(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,x.resolve(i)):n.Qr.allocateTargetId(r).next(a=>(i=new Hc(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}function Yc(e,t,n){return D(this,null,function*(){let r=$(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!hs(a))throw a;j("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)})}function yy(e,t,n){let r=$(e),i=st.min(),s=_t();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,d,p){let g=$(l),v=g.rs.get(p);return v!==void 0?x.resolve(g.ns.get(v)):g.Qr.getTargetData(d,p)}(r,a,Mn(t)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(a,c.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(a,t,n?i:st.min(),n?s:_t())).next(c=>(NU(r,Kj(t),c),{documents:c,hs:s})))}function kU(e,t){let n=$(e),r=$(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,t).next(a=>a?a.target:null))}function PU(e,t){let n=$(e),r=n.ss.get(t)||st.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,t,Sj(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(NU(n,t,i),i))}function NU(e,t,n){let r=e.ss.get(t)||st.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}function ZQ(e,t,n,r){return D(this,null,function*(){let i=$(e),s=_t(),a=Xn();for(let d of n){let p=t.Ps(d.metadata.name);d.document&&(s=s.add(p));let g=t.Is(d);g.setReadTime(t.Ts(d.metadata.readTime)),a=a.insert(p,g)}let c=i.os.newChangeBuffer({trackRemovals:!0}),l=yield Qc(i,function(p){return Mn(il(Ot.fromString(`__bundle__/docs/${p}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>DU(d,c,a).next(p=>(c.apply(d),p)).next(p=>i.Qr.removeMatchingKeysForTargetId(d,l.targetId).next(()=>i.Qr.addMatchingKeys(d,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,p.cs,p.ls)).next(()=>p.cs)))})}function tY(r,i){return D(this,arguments,function*(e,t,n=_t()){let s=yield Qc(e,Mn(Bx(t.bundledQuery))),a=$(e);return a.persistence.runTransaction("Save named query","readwrite",c=>{let l=Ae(t.readTime);if(s.snapshotVersion.compareTo(l)>=0)return a.$r.saveNamedQuery(c,t);let d=s.withResumeToken(Xe.EMPTY_BYTE_STRING,l);return a.ns=a.ns.insert(d.targetId,d),a.Qr.updateTargetData(c,d).next(()=>a.Qr.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.Qr.addMatchingKeys(c,n,s.targetId)).next(()=>a.$r.saveNamedQuery(c,t))})})}function hj(e,t){return`firestore_clients_${e}_${t}`}function dj(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function NA(e,t){return`firestore_targets_${e}_${t}`}var by=class e{constructor(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}static Es(t,n,r){let i=JSON.parse(r),s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new F(i.error.code,i.error.message))),a?new e(t,n,i.state,s):(Ee("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},mf=class e{constructor(t,n,r){this.targetId=t,this.state=n,this.error=r}static Es(t,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new F(r.error.code,r.error.message))),s?new e(t,r.state,i):(Ee("SharedClientState",`Failed to parse target state for ID '${t}': ${n}`),null)}ds(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},wy=class e{constructor(t,n){this.clientId=t,this.activeTargetIds=n}static Es(t,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=jx();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=Rj(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new e(t,s):(Ee("SharedClientState",`Failed to parse client data for instance '${t}': ${n}`),null)}},$S=class e{constructor(t,n){this.clientId=t,this.onlineState=n}static Es(t){let n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(Ee("SharedClientState",`Failed to parse online state: ${t}`),null)}},Pf=class{constructor(){this.activeTargetIds=jx()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},gf=class{constructor(t,n,r,i,s){this.window=t,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new te(bt),this.started=!1,this.ys=[];let a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=hj(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Pf),this.bs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}start(){return D(this,null,function*(){let t=yield this.syncEngine.Bi();for(let r of t){if(r===this.Vs)continue;let i=this.getItem(hj(this.persistenceKey,r));if(i){let s=wy.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(t)&&(n=!0)}),n}addPendingMutation(t){this.Ls(t,"pending")}updateMutationState(t,n,r){this.Ls(t,n,r),this.Bs(t)}addLocalQueryTarget(t){let n="not-current";if(this.isActiveQueryTarget(t)){let r=this.storage.getItem(NA(this.persistenceKey,t));if(r){let i=mf.Es(t,r);i&&(n=i.state)}}return this.ks.As(t),this.Ms(),n}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(NA(this.persistenceKey,t))}updateQueryState(t,n,r){this.qs(t,n,r)}handleUserChange(t,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){let n=this.storage.getItem(t);return j("SharedClientState","READ",t,n),n}setItem(t,n){j("SharedClientState","SET",t,n),this.storage.setItem(t,n)}removeItem(t){j("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){let n=t;if(n.storageArea===this.storage){if(j("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ee("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>D(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(s){let a=gr._e;if(s!=null)try{let c=JSON.parse(s);nt(typeof c=="number"),a=c}catch(c){Ee("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(n.newValue);r!==gr._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(t,n,r){let i=new by(this.currentUser,t,n,r),s=dj(this.persistenceKey,this.currentUser,t);this.setItem(s,i.ds())}Bs(t){let n=dj(this.persistenceKey,this.currentUser,t);this.removeItem(n)}Qs(t){let n={clientId:this.Vs,onlineState:t};this.storage.setItem(this.vs,JSON.stringify(n))}qs(t,n,r){let i=NA(this.persistenceKey,t),s=new mf(t,n,r);this.setItem(i,s.ds())}Ks(t){let n=JSON.stringify(Array.from(t));this.setItem(this.Fs,n)}$s(t){let n=this.bs.exec(t);return n?n[1]:null}Ws(t,n){let r=this.$s(t);return wy.Es(r,n)}Gs(t,n){let r=this.Ds.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return by.Es(new Oe(s),i,n)}js(t,n){let r=this.Cs.exec(t),i=Number(r[1]);return mf.Es(i,n)}xs(t){return $S.Es(t)}Js(t){return JSON.parse(t)}zs(t){return D(this,null,function*(){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Zs(t.batchId,t.state,t.error);j("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,n){let r=n?this.ps.insert(t,n):this.ps.remove(t),i=this.Ns(this.ps),s=this.Ns(r),a=[],c=[];return s.forEach(l=>{i.has(l)||a.push(l)}),i.forEach(l=>{s.has(l)||c.push(l)}),this.syncEngine.eo(a,c).then(()=>{this.ps=r})}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let n=jx();return t.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},_y=class{constructor(){this.no=new Pf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Pf,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var HS=class{io(t){}shutdown(){}};var Iy=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Vv=null;function OA(){return Vv===null?Vv=function(){return 268435456+Math.round(2147483648*Math.random())}():Vv++,"0x"+Vv.toString(16)}var eY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var WS=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}};var En="WebChannelConnection",QS=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,a){let c=OA(),l=this.bo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${c}:`,l,i);let d={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(d,s,a),this.Co(n,l,d,i).then(p=>(j("RestConnection",`Received RPC '${n}' ${c}: `,p),p),p=>{throw Dr("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",l,"request:",i),p})}vo(n,r,i,s,a,c){return this.So(n,r,i,s,a)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}bo(n,r){let i=eY[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,i){let s=OA();return new Promise((a,c)=>{let l=new _4;l.setWithCredentials(!0),l.listenOnce(b4.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ov.NO_ERROR:let p=l.getResponseJson();j(En,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ov.TIMEOUT:j(En,`RPC '${t}' ${s} timed out`),c(new F(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ov.HTTP_ERROR:let g=l.getStatus();if(j(En,`RPC '${t}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let v=l.getResponseJson();Array.isArray(v)&&(v=v[0]);let b=v?.error;if(b&&b.status&&b.message){let _=function(T){let S=T.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(S)>=0?S:R.UNKNOWN}(b.status);c(new F(_,b.message))}else c(new F(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new F(R.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{j(En,`RPC '${t}' ${s} completed.`)}});let d=JSON.stringify(i);j(En,`RPC '${t}' ${s} sending request:`,i),l.send(n,"POST",d,r,15)})}Fo(t,n,r){let i=OA(),s=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=v4(),c=y4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;let p=s.join("");j(En,`Creating RPC '${t}' stream ${i}: ${p}`,l);let g=a.createWebChannel(p,l),v=!1,b=!1,_=new WS({lo:T=>{b?j(En,`Not sending because RPC '${t}' stream ${i} is closed:`,T):(v||(j(En,`Opening RPC '${t}' stream ${i} transport.`),g.open(),v=!0),j(En,`RPC '${t}' stream ${i} sending:`,T),g.send(T))},ho:()=>g.close()}),I=(T,S,M)=>{T.listen(S,k=>{try{M(k)}catch(z){setTimeout(()=>{throw z},0)}})};return I(g,of.EventType.OPEN,()=>{b||j(En,`RPC '${t}' stream ${i} transport opened.`)}),I(g,of.EventType.CLOSE,()=>{b||(b=!0,j(En,`RPC '${t}' stream ${i} transport closed`),_.Vo())}),I(g,of.EventType.ERROR,T=>{b||(b=!0,Dr(En,`RPC '${t}' stream ${i} transport errored:`,T),_.Vo(new F(R.UNAVAILABLE,"The operation could not be completed")))}),I(g,of.EventType.MESSAGE,T=>{var S;if(!b){let M=T.data[0];nt(!!M);let k=M,z=k.error||((S=k[0])===null||S===void 0?void 0:S.error);if(z){j(En,`RPC '${t}' stream ${i} received error:`,z);let H=z.status,L=function(ht){let Pi=Pe[ht];if(Pi!==void 0)return sU(Pi)}(H),mt=z.message;L===void 0&&(L=R.INTERNAL,mt="Unknown error status: "+H+" with message "+z.message),b=!0,_.Vo(new F(L,mt)),g.close()}else j(En,`RPC '${t}' stream ${i} received:`,M),_.mo(M)}}),I(c,w4.STAT_EVENT,T=>{T.stat===DA.PROXY?j(En,`RPC '${t}' stream ${i} detected buffering proxy`):T.stat===DA.NOPROXY&&j(En,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}};function OU(){return typeof window<"u"?window:null}function zv(){return typeof document<"u"?document:null}function zf(e){return new dS(e,!0)}var Nf=class{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var Ey=class{constructor(t,n,r,i,s,a,c,l){this.oi=t,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Nf(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return D(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}e_(){return D(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(t,n){return D(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(Ee(n.toString()),Ee("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{t(()=>{let i=new F(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(t,n){let r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>D(this,null,function*(){this.state=0,this.start()}))}__(t){return j("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},YS=class extends Ey{constructor(t,n,r,i,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();let n=jQ(this.serializer,t),r=function(s){if(!("targetChange"in s))return st.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?st.min():a.readTime?Ae(a.readTime):st.min()}(t);return this.listener.u_(n,r)}c_(t){let n={};n.database=mS(this.serializer),n.addTarget=function(s,a){let c,l=a.target;if(c=ty(l)?{documents:pU(s,l)}:{query:mU(s,l).ut},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=uU(s,a.resumeToken);let d=fS(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(st.min())>0){c.readTime=$c(s,a.snapshotVersion.toTimestamp());let d=fS(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,t);let r=BQ(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){let n={};n.database=mS(this.serializer),n.removeTarget=t,this.t_(n)}},XS=class extends Ey{constructor(t,n,r,i,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(nt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();let n=UQ(t.writeResults,t.commitTime),r=Ae(t.commitTime);return this.listener.T_(r,n)}return nt(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let t={};t.database=mS(this.serializer),this.t_(t)}I_(t){let n={streamToken:this.lastStreamToken,writes:t.map(r=>Rf(this.serializer,r))};this.t_(n)}};var JS=class extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.So(t,pS(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(R.UNKNOWN,s.toString())})}vo(t,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(t,pS(n,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(R.UNKNOWN,a.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var ZS=class{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){let n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ee(n),this.g_=!1):j("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var tx=class{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(a=>{r.enqueueAndForget(()=>D(this,null,function*(){ds(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(l){return D(this,null,function*(){let d=$(l);d.v_.add(4),yield ol(d),d.x_.set("Unknown"),d.v_.delete(4),yield Gf(d)})}(this))}))}),this.x_=new ZS(r,i)}};function Gf(e){return D(this,null,function*(){if(ds(e))for(let t of e.F_)yield t(!0)})}function ol(e){return D(this,null,function*(){for(let t of e.F_)yield t(!1)})}function qy(e,t){let n=$(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),$x(n)?Kx(n):al(n).Jo()&&Gx(n,t))}function Xc(e,t){let n=$(e),r=al(n);n.C_.delete(t),r.Jo()&&MU(n,t),n.C_.size===0&&(r.Jo()?r.Xo():ds(n)&&n.x_.set("Unknown"))}function Gx(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(st.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}al(e).c_(t)}function MU(e,t){e.O_.Oe(t),al(e).l_(t)}function Kx(e){e.O_=new hS({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),al(e).start(),e.x_.p_()}function $x(e){return ds(e)&&!al(e).Ho()&&e.C_.size>0}function ds(e){return $(e).v_.size===0}function LU(e){e.O_=void 0}function nY(e){return D(this,null,function*(){e.C_.forEach((t,n)=>{Gx(e,t)})})}function rY(e,t){return D(this,null,function*(){LU(e),$x(e)?(e.x_.S_(t),Kx(e)):e.x_.set("Unknown")})}function iY(e,t,n){return D(this,null,function*(){if(e.x_.set("Online"),t instanceof iy&&t.state===2&&t.cause)try{yield function(i,s){return D(this,null,function*(){let a=s.cause;for(let c of s.targetIds)i.C_.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.C_.delete(c),i.O_.removeTarget(c))})}(e,t)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield Ty(e,r)}else if(t instanceof jc?e.O_.$e(t):t instanceof ry?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(st.min()))try{let r=yield RU(e.localStore);n.compareTo(r)>=0&&(yield function(s,a){let c=s.O_.it(a);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let p=s.C_.get(d);p&&s.C_.set(d,p.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,d)=>{let p=s.C_.get(l);if(!p)return;s.C_.set(l,p.withResumeToken(Xe.EMPTY_BYTE_STRING,p.snapshotVersion)),MU(s,l);let g=new Hc(p.target,l,d,p.sequenceNumber);Gx(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(e,n))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield Ty(e,r)}})}function Ty(e,t,n){return D(this,null,function*(){if(!hs(t))throw t;e.v_.add(1),yield ol(e),e.x_.set("Offline"),n||(n=()=>RU(e.localStore)),e.asyncQueue.enqueueRetryable(()=>D(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield n(),e.v_.delete(1),yield Gf(e)}))})}function FU(e,t){return t().catch(n=>Ty(e,n,t))}function sl(e){return D(this,null,function*(){let t=$(e),n=cs(t),r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;oY(t);)try{let i=yield JQ(t.localStore,r);if(i===null){t.D_.length===0&&n.Xo();break}r=i.batchId,sY(t,i)}catch(i){yield Ty(t,i)}VU(t)&&jU(t)})}function oY(e){return ds(e)&&e.D_.length<10}function sY(e,t){e.D_.push(t);let n=cs(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function VU(e){return ds(e)&&!cs(e).Ho()&&e.D_.length>0}function jU(e){cs(e).start()}function aY(e){return D(this,null,function*(){cs(e).d_()})}function uY(e){return D(this,null,function*(){let t=cs(e);for(let n of e.D_)t.I_(n.mutations)})}function cY(e,t,n){return D(this,null,function*(){let r=e.D_.shift(),i=uS.from(r,t,n);yield FU(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield sl(e)})}function lY(e,t){return D(this,null,function*(){t&&cs(e).P_&&(yield function(r,i){return D(this,null,function*(){if(function(a){return oU(a)&&a!==R.ABORTED}(i.code)){let s=r.D_.shift();cs(r).Zo(),yield FU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield sl(r)}})}(e,t)),VU(e)&&jU(e)})}function fj(e,t){return D(this,null,function*(){let n=$(e);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=ds(n);n.v_.add(3),yield ol(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),yield Gf(n)})}function ex(e,t){return D(this,null,function*(){let n=$(e);t?(n.v_.delete(2),yield Gf(n)):t||(n.v_.add(2),yield ol(n),n.x_.set("Unknown"))})}function al(e){return e.N_||(e.N_=function(n,r,i){let s=$(n);return s.R_(),new YS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:nY.bind(null,e),To:rY.bind(null,e),u_:iY.bind(null,e)}),e.F_.push(t=>D(this,null,function*(){t?(e.N_.Zo(),$x(e)?Kx(e):e.x_.set("Unknown")):(yield e.N_.stop(),LU(e))}))),e.N_}function cs(e){return e.L_||(e.L_=function(n,r,i){let s=$(n);return s.R_(),new XS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:aY.bind(null,e),To:lY.bind(null,e),E_:uY.bind(null,e),T_:cY.bind(null,e)}),e.F_.push(t=>D(this,null,function*(){t?(e.L_.Zo(),yield sl(e)):(yield e.L_.stop(),e.D_.length>0&&(j("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))}))),e.L_}var nx=class e{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Me,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){let a=Date.now()+r,c=new e(t,n,a,i,s);return c.start(r),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(R.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ul(e,t){if(Ee("AsyncQueue",`${t}: ${e}`),hs(e))return new F(R.UNAVAILABLE,`${t}: ${e}`);throw e}var Ay=class e{constructor(t){this.comparator=t?(n,r)=>t(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=lf(),this.sortedSet=new te(this.comparator)}static emptySet(t){return new e(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){let n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){let n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}};var Sy=class{constructor(){this.B_=new te(K.comparator)}track(t){let n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):Y():this.B_=this.B_.insert(n,t)}k_(){let t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}},Jc=class e{constructor(t,n,r,i,s,a,c,l,d){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(t,n,r,i,s){let a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new e(t,n,Ay.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var rx=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(t=>t.U_())}},ix=class{constructor(){this.queries=new Ri(t=>Gj(t),Bf),this.onlineState="Unknown",this.W_=new Set}};function Hx(e,t){return D(this,null,function*(){let n=$(e),r=3,i=t.query,s=n.queries.get(i);s?!s.K_()&&t.U_()&&(r=2):(s=new rx,r=t.U_()?0:1);try{switch(r){case 0:s.q_=yield n.onListen(i,!0);break;case 1:s.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(a){let c=ul(a,`Initialization of query '${Pc(t.query)}' failed`);return void t.onError(c)}n.queries.set(i,s),s.Q_.push(t),t.G_(n.onlineState),s.q_&&t.z_(s.q_)&&Qx(n)})}function Wx(e,t){return D(this,null,function*(){let n=$(e),r=t.query,i=3,s=n.queries.get(r);if(s){let a=s.Q_.indexOf(t);a>=0&&(s.Q_.splice(a,1),s.Q_.length===0?i=t.U_()?0:1:!s.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function hY(e,t){let n=$(e),r=!1;for(let i of t){let s=i.query,a=n.queries.get(s);if(a){for(let c of a.Q_)c.z_(i)&&(r=!0);a.q_=i}}r&&Qx(n)}function dY(e,t,n){let r=$(e),i=r.queries.get(t);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(t)}function Qx(e){e.W_.forEach(t=>{t.next()})}var ox,pj;(pj=ox||(ox={})).j_="default",pj.Cache="cache";var Of=class{constructor(t,n,r){this.query=t,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(t){if(!this.options.includeMetadataChanges){let r=[];for(let i of t.docChanges)i.type!==3&&r.push(i);t=new Jc(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),n=!0):this.X_(t,this.onlineState)&&(this.ea(t),n=!0),this.Y_=t,n}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),n=!0),n}X_(t,n){if(!t.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Z_(t){if(t.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(t){t=Jc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==ox.Cache}};var sx=class{constructor(t,n){this.na=t,this.byteLength=n}ra(){return"metadata"in this.na}};var xy=class{constructor(t){this.serializer=t}Ps(t){return Ai(this.serializer,t)}Is(t){return t.metadata.exists?fU(this.serializer,t.document,!1):Le.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return Ae(t)}},ax=class{constructor(t,n,r){this.ia=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UU(t)}sa(t){this.progress.bytesLoaded+=t.byteLength;let n=this.progress.documentsLoaded;if(t.na.namedQuery)this.queries.push(t.na.namedQuery);else if(t.na.documentMetadata){this.documents.push({metadata:t.na.documentMetadata}),t.na.documentMetadata.exists||++n;let r=Ot.fromString(t.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.na.document&&(this.documents[this.documents.length-1].document=t.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(t){let n=new Map,r=new xy(this.serializer);for(let i of t)if(i.metadata.queries){let s=r.Ps(i.metadata.name);for(let a of i.metadata.queries){let c=(n.get(a)||_t()).add(s);n.set(a,c)}}return n}complete(){return D(this,null,function*(){let t=yield ZQ(this.localStore,new xy(this.serializer),this.documents,this.ia.id),n=this.oa(this.documents);for(let r of this.queries)yield tY(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:t}})}};function UU(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Cy=class{constructor(t){this.key=t}},Ry=class{constructor(t){this.key=t}},Dy=class{constructor(t,n){this.query=t,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=_t(),this.mutatedKeys=_t(),this.ha=$j(t),this.Pa=new Ay(this.ha)}get Ia(){return this.ua}Ta(t,n){let r=n?n.Ea:new Sy,i=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,a=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((p,g)=>{let v=i.get(p),b=qf(this.query,g)?g:null,_=!!v&&this.mutatedKeys.has(v.key),I=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),T=!1;v&&b?v.data.isEqual(b.data)?_!==I&&(r.track({type:3,doc:b}),T=!0):this.da(v,b)||(r.track({type:2,doc:b}),T=!0,(l&&this.ha(b,l)>0||d&&this.ha(b,d)<0)&&(c=!0)):!v&&b?(r.track({type:0,doc:b}),T=!0):v&&!b&&(r.track({type:1,doc:v}),T=!0,(l||d)&&(c=!0)),T&&(b?(a=a.add(b),s=I?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Pa:a,Ea:r,Xi:c,mutatedKeys:s}}da(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){let s=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;let a=t.Ea.k_();a.sort((p,g)=>function(b,_){let I=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return I(b)-I(_)}(p.type,g.type)||this.ha(p.doc,g.doc)),this.Aa(r),i=i!=null&&i;let c=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,d=l!==this.ca;return this.ca=l,a.length!==0||d?{snapshot:new Jc(this.query,t.Pa,s,a,t.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:c}:{Va:c}}G_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Sy,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=t.current)}Ra(){if(!this.current)return[];let t=this.la;this.la=_t(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return t.forEach(r=>{this.la.has(r)||n.push(new Ry(r))}),this.la.forEach(r=>{t.has(r)||n.push(new Cy(r))}),n}fa(t){this.ua=t.hs,this.la=_t();let n=this.Ta(t.documents);return this.applyChanges(n,!0)}ga(){return Jc.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},ux=class{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}},cx=class{constructor(t){this.key=t,this.pa=!1}},lx=class{constructor(t,n,r,i,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.ya={},this.wa=new Ri(c=>Gj(c),Bf),this.Sa=new Map,this.ba=new Set,this.Da=new te(K.comparator),this.Ca=new Map,this.va=new kf,this.Fa={},this.Ma=new Map,this.xa=Wc.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function fY(e,t,n=!0){return D(this,null,function*(){let r=zy(e),i,s=r.wa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield BU(r,t,n,!0),i})}function pY(e,t){return D(this,null,function*(){let n=zy(e);yield BU(n,t,!0,!1)})}function BU(e,t,n,r){return D(this,null,function*(){let i=yield Qc(e.localStore,Mn(t)),s=i.targetId,a=n?e.sharedClientState.addLocalQueryTarget(s):"not-current",c;return r&&(c=yield Yx(e,t,s,a==="current",i.resumeToken)),e.isPrimaryClient&&n&&qy(e.remoteStore,i),c})}function Yx(e,t,n,r,i){return D(this,null,function*(){e.Na=(g,v,b)=>function(I,T,S,M){return D(this,null,function*(){let k=T.view.Ta(S);k.Xi&&(k=yield yy(I.localStore,T.query,!1).then(({documents:mt})=>T.view.Ta(mt,k)));let z=M&&M.targetChanges.get(T.targetId),H=M&&M.targetMismatches.get(T.targetId)!=null,L=T.view.applyChanges(k,I.isPrimaryClient,z,H);return hx(I,T.targetId,L.Va),L.snapshot})}(e,g,v,b);let s=yield yy(e.localStore,t,!0),a=new Dy(t,s.hs),c=a.Ta(s.documents),l=xf.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),d=a.applyChanges(c,e.isPrimaryClient,l);hx(e,n,d.Va);let p=new ux(t,n,a);return e.wa.set(t,p),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),d.snapshot})}function mY(e,t,n){return D(this,null,function*(){let r=$(e),i=r.wa.get(t),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(a=>!Bf(a,t))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Yc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Xc(r.remoteStore,i.targetId),Zc(r,i.targetId)}).catch(ls))):(Zc(r,i.targetId),yield Yc(r.localStore,i.targetId,!0))})}function gY(e,t){return D(this,null,function*(){let n=$(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xc(n.remoteStore,r.targetId))})}function vY(e,t,n){return D(this,null,function*(){let r=t1(e);try{let i=yield function(a,c){let l=$(a),d=le.now(),p=c.reduce((b,_)=>b.add(_.key),_t()),g,v;return l.persistence.runTransaction("Locally write mutations","readwrite",b=>{let _=Xn(),I=_t();return l.os.getEntries(b,p).next(T=>{_=T,_.forEach((S,M)=>{M.isValidDocument()||(I=I.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(b,_)).next(T=>{g=T;let S=[];for(let M of c){let k=PQ(M,g.get(M.key).overlayedDocument);k!=null&&S.push(new Xr(M.key,k,Fj(k.value.mapValue),me.exists(!0)))}return l.mutationQueue.addMutationBatch(b,d,S,c)}).next(T=>{v=T;let S=T.applyToLocalDocumentSet(g,I);return l.documentOverlayCache.saveOverlays(b,T.batchId,S)})}).then(()=>({batchId:v.batchId,changes:Wj(g)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,l){let d=a.Fa[a.currentUser.toKey()];d||(d=new te(bt)),d=d.insert(c,l),a.Fa[a.currentUser.toKey()]=d}(r,i.batchId,n),yield eo(r,i.changes),yield sl(r.remoteStore)}catch(i){let s=ul(i,"Failed to persist write");n.reject(s)}})}function qU(e,t){return D(this,null,function*(){let n=$(e);try{let r=yield XQ(n.localStore,t);t.targetChanges.forEach((i,s)=>{let a=n.Ca.get(s);a&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.pa=!0:i.modifiedDocuments.size>0?nt(a.pa):i.removedDocuments.size>0&&(nt(a.pa),a.pa=!1))}),yield eo(n,r,t)}catch(r){yield ls(r)}})}function mj(e,t,n){let r=$(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((s,a)=>{let c=a.view.G_(t);c.snapshot&&i.push(c.snapshot)}),function(a,c){let l=$(a);l.onlineState=c;let d=!1;l.queries.forEach((p,g)=>{for(let v of g.Q_)v.G_(c)&&(d=!0)}),d&&Qx(l)}(r.eventManager,t),i.length&&r.ya.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function yY(e,t,n){return D(this,null,function*(){let r=$(e);r.sharedClientState.updateQueryState(t,"rejected",n);let i=r.Ca.get(t),s=i&&i.key;if(s){let a=new te(K.comparator);a=a.insert(s,Le.newNoDocument(s,st.min()));let c=_t().add(s),l=new Sf(st.min(),new Map,new te(bt),a,c);yield qU(r,l),r.Da=r.Da.remove(s),r.Ca.delete(t),Zx(r)}else yield Yc(r.localStore,t,!1).then(()=>Zc(r,t,n)).catch(ls)})}function bY(e,t){return D(this,null,function*(){let n=$(e),r=t.batch.batchId;try{let i=yield YQ(n.localStore,t);Jx(n,r,null),Xx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield eo(n,i)}catch(i){yield ls(i)}})}function wY(e,t,n){return D(this,null,function*(){let r=$(e);try{let i=yield function(a,c){let l=$(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return l.mutationQueue.lookupMutationBatch(d,c).next(g=>(nt(g!==null),p=g.keys(),l.mutationQueue.removeMutationBatch(d,g))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>l.localDocuments.getDocuments(d,p))})}(r.localStore,t);Jx(r,t,n),Xx(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield eo(r,i)}catch(i){yield ls(i)}})}function _Y(e,t){return D(this,null,function*(){let n=$(e);ds(n.remoteStore)||j("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(a){let c=$(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>c.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void t.resolve();let i=n.Ma.get(r)||[];i.push(t),n.Ma.set(r,i)}catch(r){let i=ul(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}})}function Xx(e,t){(e.Ma.get(t)||[]).forEach(n=>{n.resolve()}),e.Ma.delete(t)}function Jx(e,t,n){let r=$(e),i=r.Fa[r.currentUser.toKey()];if(i){let s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function Zc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach(r=>{e.va.containsKey(r)||zU(e,r)})}function zU(e,t){e.ba.delete(t.path.canonicalString());let n=e.Da.get(t);n!==null&&(Xc(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),Zx(e))}function hx(e,t,n){for(let r of n)r instanceof Cy?(e.va.addReference(r.key,t),IY(e,r)):r instanceof Ry?(j("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||zU(e,r.key)):Y()}function IY(e,t){let n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(j("SyncEngine","New document in limbo: "+n),e.ba.add(r),Zx(e))}function Zx(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){let t=e.ba.values().next().value;e.ba.delete(t);let n=new K(Ot.fromString(t)),r=e.xa.next();e.Ca.set(r,new cx(n)),e.Da=e.Da.insert(n,r),qy(e.remoteStore,new Hc(Mn(il(n.path)),r,"TargetPurposeLimboResolution",gr._e))}}function eo(e,t,n){return D(this,null,function*(){let r=$(e),i=[],s=[],a=[];r.wa.isEmpty()||(r.wa.forEach((c,l)=>{a.push(r.Na(l,t,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);let p=zS.Ki(l.targetId,d);s.push(p)}}))}),yield Promise.all(a),r.ya.u_(i),yield function(l,d){return D(this,null,function*(){let p=$(l);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>x.forEach(d,v=>x.forEach(v.qi,b=>p.persistence.referenceDelegate.addReference(g,v.targetId,b)).next(()=>x.forEach(v.Qi,b=>p.persistence.referenceDelegate.removeReference(g,v.targetId,b)))))}catch(g){if(!hs(g))throw g;j("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let v=g.targetId;if(!g.fromCache){let b=p.ns.get(v),_=b.snapshotVersion,I=b.withLastLimboFreeSnapshotVersion(_);p.ns=p.ns.insert(v,I)}}})}(r.localStore,s))})}function EY(e,t){return D(this,null,function*(){let n=$(e);if(!n.currentUser.isEqual(t)){j("SyncEngine","User change. New user:",t.toKey());let r=yield CU(n.localStore,t);n.currentUser=t,function(s,a){s.Ma.forEach(c=>{c.forEach(l=>{l.reject(new F(R.CANCELLED,a))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield eo(n,r.us)}})}function TY(e,t){let n=$(e),r=n.Ca.get(t);if(r&&r.pa)return _t().add(r.key);{let i=_t(),s=n.Sa.get(t);if(!s)return i;for(let a of s){let c=n.wa.get(a);i=i.unionWith(c.view.Ia)}return i}}function AY(e,t){return D(this,null,function*(){let n=$(e),r=yield yy(n.localStore,t.query,!0),i=t.view.fa(r);return n.isPrimaryClient&&hx(n,t.targetId,i.Va),i})}function SY(e,t){return D(this,null,function*(){let n=$(e);return PU(n.localStore,t).then(r=>eo(n,r))})}function xY(e,t,n,r){return D(this,null,function*(){let i=$(e),s=yield function(c,l){let d=$(c),p=$(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>p.vn(g,l).next(v=>v?d.localDocuments.getDocuments(g,v):x.resolve(null)))}(i.localStore,t);s!==null?(n==="pending"?yield sl(i.remoteStore):n==="acknowledged"||n==="rejected"?(Jx(i,t,r||null),Xx(i,t),function(c,l){$($(c).mutationQueue).Mn(l)}(i.localStore,t)):Y(),yield eo(i,s)):j("SyncEngine","Cannot apply mutation batch with id: "+t)})}function CY(e,t){return D(this,null,function*(){let n=$(e);if(zy(n),t1(n),t===!0&&n.Oa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield gj(n,r.toArray());n.Oa=!0,yield ex(n.remoteStore,!0);for(let s of i)qy(n.remoteStore,s)}else if(t===!1&&n.Oa!==!1){let r=[],i=Promise.resolve();n.Sa.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(Zc(n,a),Yc(n.localStore,a,!0))),Xc(n.remoteStore,a)}),yield i,yield gj(n,r),function(a){let c=$(a);c.Ca.forEach((l,d)=>{Xc(c.remoteStore,d)}),c.va.mr(),c.Ca=new Map,c.Da=new te(K.comparator)}(n),n.Oa=!1,yield ex(n.remoteStore,!1)}})}function gj(e,t,n){return D(this,null,function*(){let r=$(e),i=[],s=[];for(let a of t){let c,l=r.Sa.get(a);if(l&&l.length!==0){c=yield Qc(r.localStore,Mn(l[0]));for(let d of l){let p=r.wa.get(d),g=yield AY(r,p);g.snapshot&&s.push(g.snapshot)}}else{let d=yield kU(r.localStore,a);c=yield Qc(r.localStore,d),yield Yx(r,GU(d),a,!1,c.resumeToken)}i.push(c)}return r.ya.u_(s),i})}function GU(e){return zj(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function RY(e){return function(n){return $($(n).persistence).Bi()}($(e).localStore)}function DY(e,t,n,r){return D(this,null,function*(){let i=$(e);if(i.Oa)return void j("SyncEngine","Ignoring unexpected query state notification.");let s=i.Sa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{let a=yield PU(i.localStore,Kj(s[0])),c=Sf.createSynthesizedRemoteEventForCurrentChange(t,n==="current",Xe.EMPTY_BYTE_STRING);yield eo(i,a,c);break}case"rejected":yield Yc(i.localStore,t,!0),Zc(i,t,r);break;default:Y()}})}function kY(e,t,n){return D(this,null,function*(){let r=zy(e);if(r.Oa){for(let i of t){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){j("SyncEngine","Adding an already active target "+i);continue}let s=yield kU(r.localStore,i),a=yield Qc(r.localStore,s);yield Yx(r,GU(s),a.targetId,!1,a.resumeToken),qy(r.remoteStore,a)}for(let i of n)r.Sa.has(i)&&(yield Yc(r.localStore,i,!1).then(()=>{Xc(r.remoteStore,i),Zc(r,i)}).catch(ls))}})}function zy(e){let t=$(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=qU.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=TY.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=yY.bind(null,t),t.ya.u_=hY.bind(null,t.eventManager),t.ya.La=dY.bind(null,t.eventManager),t}function t1(e){let t=$(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bY.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wY.bind(null,t),t}function PY(e,t,n){let r=$(e);(function(s,a,c){return D(this,null,function*(){try{let l=yield a.getMetadata();if(yield function(b,_){let I=$(b),T=Ae(_.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",S=>I.$r.getBundleMetadata(S,_.id)).then(S=>!!S&&S.createTime.compareTo(T)>=0)}(s.localStore,l))return yield a.close(),c._completeWith(function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}}(l)),Promise.resolve(new Set);c._updateProgress(UU(l));let d=new ax(l,s.localStore,a.serializer),p=yield a.Ba();for(;p;){let v=yield d.sa(p);v&&c._updateProgress(v),p=yield a.Ba()}let g=yield d.complete();return yield eo(s,g.aa,void 0),yield function(b,_){let I=$(b);return I.persistence.runTransaction("Save bundle","readwrite",T=>I.$r.saveBundleMetadata(T,_))}(s.localStore,l),c._completeWith(g.progress),Promise.resolve(g._a)}catch(l){return Dr("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}})})(r,t,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Mf=class{constructor(){this.synchronizeTabs=!1}initialize(t){return D(this,null,function*(){this.serializer=zf(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return xU(this.persistence,new vy,t.initialUser,this.serializer)}createPersistence(t){return new my(gy.Hr,this.serializer)}createSharedClientState(t){return new _y}terminate(){return D(this,null,function*(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ky=class e extends Mf{constructor(t,n,r){super(),this.ka=t,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){return D(this,null,function*(){yield Vw(e.prototype,this,"initialize").call(this,t),yield this.ka.initialize(this,t),yield t1(this.ka.syncEngine),yield sl(this.ka.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(t){return xU(this.persistence,new vy,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,n){let r=this.persistence.referenceDelegate.garbageCollector;return new CS(r,t.asyncQueue,n)}createIndexBackfillerScheduler(t,n){let r=new $A(n,this.persistence);return new KA(t.asyncQueue,r)}createPersistence(t){let n=zx(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new qS(this.synchronizeTabs,n,t.clientId,r,t.asyncQueue,OU(),zv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new _y}},dx=class e extends ky{constructor(t,n){super(t,n,!1),this.ka=t,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(t){return D(this,null,function*(){yield Vw(e.prototype,this,"initialize").call(this,t);let n=this.ka.syncEngine;this.sharedClientState instanceof gf&&(this.sharedClientState.syncEngine={Zs:xY.bind(null,n),Xs:DY.bind(null,n),eo:kY.bind(null,n),Bi:RY.bind(null,n),Ys:SY.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>D(this,null,function*(){yield CY(this.ka.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(t){let n=OU();if(!gf.D(n))throw new F(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=zx(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new gf(n,t.asyncQueue,r,t.clientId,t.initialUser)}},Lf=class{initialize(t,n){return D(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mj(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=EY.bind(null,this.syncEngine),yield ex(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ix}()}createDatastore(t){let n=zf(t.databaseInfo.databaseId),r=function(s){return new QS(s)}(t.databaseInfo);return function(s,a,c,l){return new JS(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,a,c){return new tx(r,i,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,n=>mj(this.syncEngine,n,0),function(){return Iy.D()?new Iy:new HS}())}createSyncEngine(t,n){return function(i,s,a,c,l,d,p){let g=new lx(i,s,a,c,l,d);return p&&(g.Oa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return D(this,null,function*(){var t;yield function(r){return D(this,null,function*(){let i=$(r);j("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield ol(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};function vj(e,t=10240){let n=0;return{read(){return D(this,null,function*(){if(n<e.byteLength){let i={value:e.slice(n,n+t),done:!1};return n+=t,i}return{done:!0}})},cancel(){return D(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var tl=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):Ee("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}};var fx=class{constructor(t,n){this.Ka=t,this.serializer=n,this.metadata=new Me,this.buffer=new Uint8Array,this.$a=function(){return new TextDecoder("utf-8")}(),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}getMetadata(){return D(this,null,function*(){return this.metadata.promise})}Ba(){return D(this,null,function*(){return yield this.getMetadata(),this.Ua()})}Ua(){return D(this,null,function*(){let t=yield this.Wa();if(t===null)return null;let n=this.$a.decode(t),r=Number(n);isNaN(r)&&this.Ga(`length string (${n}) is not valid number`);let i=yield this.za(r);return new sx(JSON.parse(i),t.length+r)})}ja(){return this.buffer.findIndex(t=>t===123)}Wa(){return D(this,null,function*(){for(;this.ja()<0&&!(yield this.Ha()););if(this.buffer.length===0)return null;let t=this.ja();t<0&&this.Ga("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),n})}za(t){return D(this,null,function*(){for(;this.buffer.length<t;)(yield this.Ha())&&this.Ga("Reached the end of bundle when more is expected.");let n=this.$a.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),n})}Ga(t){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${t}`)}Ha(){return D(this,null,function*(){let t=yield this.Ka.read();if(!t.done){let n=new Uint8Array(this.buffer.length+t.value.length);n.set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n}return t.done})}};var px=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return D(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,s){return D(this,null,function*(){let a=$(i),c={documents:s.map(g=>Cf(a.serializer,g))},l=yield a.vo("BatchGetDocuments",a.serializer.databaseId,Ot.emptyPath(),c,s.length),d=new Map;l.forEach(g=>{let v=VQ(a.serializer,g);d.set(v.key.toString(),v)});let p=[];return s.forEach(g=>{let v=d.get(g.toString());nt(!!v),p.push(v)}),p})}(this.datastore,t);return n.forEach(r=>this.recordVersion(r)),n})}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new us(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return D(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,r)=>{let i=K.fromPath(r);this.mutations.push(new Ef(i,this.precondition(i)))}),yield function(r,i){return D(this,null,function*(){let s=$(r),a={writes:i.map(c=>Rf(s.serializer,c))};yield s.So("Commit",s.serializer.databaseId,Ot.emptyPath(),a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Y();n=st.min()}let r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new F(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){let n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(st.min())?me.exists(!1):me.updateTime(n):me.none()}preconditionForUpdate(t){let n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(st.min()))throw new F(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return me.updateTime(n)}return me.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var mx=class{constructor(t,n,r,i,s){this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Ja=r.maxAttempts,this.jo=new Nf(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo(()=>D(this,null,function*(){let t=new px(this.datastore),n=this.Xa(t);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.eu(i)}))}).catch(r=>{this.eu(r)})}))}Xa(t){try{let n=this.updateFunction(t);return!jf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(t){this.Ja>0&&this.tu(t)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(t)}tu(t){if(t.name==="FirebaseError"){let n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!oU(n)}return!1}};var gx=class{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Oe.UNAUTHENTICATED,this.clientId=$v.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>D(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Me;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let r=ul(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}};function Gv(e,t){return D(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(i=>D(this,null,function*(){r.isEqual(i)||(yield CU(t.localStore,i),r=i)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function vx(e,t){return D(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let n=yield e1(e);j("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>fj(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>fj(t.remoteStore,i)),e._onlineComponents=t})}function KU(e){return e.name==="FirebaseError"?e.code===R.FAILED_PRECONDITION||e.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}function e1(e){return D(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Gv(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!KU(n))throw n;Dr("Error using user provided cache. Falling back to memory cache: "+n),yield Gv(e,new Mf)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield Gv(e,new Mf);return e._offlineComponents})}function Gy(e){return D(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield vx(e,e._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield vx(e,new Lf))),e._onlineComponents})}function $U(e){return e1(e).then(t=>t.persistence)}function n1(e){return e1(e).then(t=>t.localStore)}function HU(e){return Gy(e).then(t=>t.remoteStore)}function r1(e){return Gy(e).then(t=>t.syncEngine)}function NY(e){return Gy(e).then(t=>t.datastore)}function el(e){return D(this,null,function*(){let t=yield Gy(e),n=t.eventManager;return n.onListen=fY.bind(null,t.syncEngine),n.onUnlisten=mY.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=pY.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=gY.bind(null,t.syncEngine),n})}function OY(e){return e.asyncQueue.enqueue(()=>D(this,null,function*(){let t=yield $U(e),n=yield HU(e);return t.setNetworkEnabled(!0),function(i){let s=$(i);return s.v_.delete(0),Gf(s)}(n)}))}function MY(e){return e.asyncQueue.enqueue(()=>D(this,null,function*(){let t=yield $U(e),n=yield HU(e);return t.setNetworkEnabled(!1),function(i){return D(this,null,function*(){let s=$(i);s.v_.add(0),yield ol(s),s.x_.set("Offline")})}(n)}))}function LY(e,t){let n=new Me;return e.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,s,a){return D(this,null,function*(){try{let c=yield function(d,p){let g=$(d);return g.persistence.runTransaction("read document","readonly",v=>g.localDocuments.getDocument(v,p))}(i,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new F(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){let l=ul(c,`Failed to get document '${s} from cache`);a.reject(l)}})}(yield n1(e),t,n)})),n.promise}function WU(e,t,n={}){let r=new Me;return e.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(s,a,c,l,d){let p=new tl({next:v=>{a.enqueueAndForget(()=>Wx(s,g));let b=v.docs.has(c);!b&&v.fromCache?d.reject(new F(R.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&l&&l.source==="server"?d.reject(new F(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new Of(il(c.path),p,{includeMetadataChanges:!0,ta:!0});return Hx(s,g)}(yield el(e),e.asyncQueue,t,n,r)})),r.promise}function FY(e,t){let n=new Me;return e.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,s,a){return D(this,null,function*(){try{let c=yield yy(i,s,!0),l=new Dy(s,c.hs),d=l.Ta(c.documents),p=l.applyChanges(d,!1);a.resolve(p.snapshot)}catch(c){let l=ul(c,`Failed to execute query '${s} against cache`);a.reject(l)}})}(yield n1(e),t,n)})),n.promise}function QU(e,t,n={}){let r=new Me;return e.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(s,a,c,l,d){let p=new tl({next:v=>{a.enqueueAndForget(()=>Wx(s,g)),v.fromCache&&l.source==="server"?d.reject(new F(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new Of(c,p,{includeMetadataChanges:!0,ta:!0});return Hx(s,g)}(yield el(e),e.asyncQueue,t,n,r)})),r.promise}function VY(e,t){let n=new tl(t);return e.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,s){$(i).W_.add(s),s.next()}(yield el(e),n)})),()=>{n.Qa(),e.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,s){$(i).W_.delete(s)}(yield el(e),n)}))}}function jY(e,t,n,r){let i=function(a,c){let l;return l=typeof a=="string"?aU().encode(a):a,function(p,g){return new fx(p,g)}(function(p,g){if(p instanceof Uint8Array)return vj(p,g);if(p instanceof ArrayBuffer)return vj(new Uint8Array(p),g);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),c)}(n,zf(t));e.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){PY(yield r1(e),i,r)}))}function UY(e,t){return e.asyncQueue.enqueue(()=>D(this,null,function*(){return function(r,i){let s=$(r);return s.persistence.runTransaction("Get named query","readonly",a=>s.$r.getNamedQuery(a,i))}(yield n1(e),t)}))}function YU(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var yj=new Map;function i1(e,t,n){if(!n)throw new F(R.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function o1(e,t,n,r){if(t===!0&&r===!0)throw new F(R.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function bj(e){if(!K.isDocumentKey(e))throw new F(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function wj(e){if(K.isDocumentKey(e))throw new F(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ky(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Y()}function Mt(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new F(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ky(e);throw new F(R.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function XU(e,t){if(t<=0)throw new F(R.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}var Py=class{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new F(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new F(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}o1("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YU((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Na=class{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Py({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Py(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MA;switch(r.type){case"firstParty":return new jA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=yj.get(n);r&&(j("ComponentProvider","Removing Datastore"),yj.delete(n),r.terminate())}(this),Promise.resolve()}};function JU(e,t,n,r={}){var i;let s=(e=Mt(e,Na))._getSettings(),a=`${t}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=Oe.MOCK_USER;else{c=cP(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new F(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Oe(d)}e._authCredentials=new LA(new Kv(c,l))}}var dn=class e{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},Qt=class e{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Si(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},Si=class e extends dn{constructor(t,n,r){super(t,n,il(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Qt(this.firestore,null,new K(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function s1(e,t,...n){if(e=ue(e),i1("collection","path",t),e instanceof Na){let r=Ot.fromString(t,...n);return wj(r),new Si(e,null,r)}{if(!(e instanceof Qt||e instanceof Si))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(Ot.fromString(t,...n));return wj(r),new Si(e.firestore,null,r)}}function ZU(e,t){if(e=Mt(e,Na),i1("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dn(e,null,function(r){return new Yr(Ot.emptyPath(),r)}(t))}function Kf(e,t,...n){if(e=ue(e),arguments.length===1&&(t=$v.newId()),i1("doc","path",t),e instanceof Na){let r=Ot.fromString(t,...n);return bj(r),new Qt(e,null,new K(r))}{if(!(e instanceof Qt||e instanceof Si))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(Ot.fromString(t,...n));return bj(r),new Qt(e.firestore,e instanceof Si?e.converter:null,new K(r))}}function a1(e,t){return e=ue(e),t=ue(t),(e instanceof Qt||e instanceof Si)&&(t instanceof Qt||t instanceof Si)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function u1(e,t){return e=ue(e),t=ue(t),e instanceof dn&&t instanceof dn&&e.firestore===t.firestore&&Bf(e._query,t._query)&&e.converter===t.converter}var yx=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Nf(this,"async_queue_retry"),this.cu=()=>{let n=zv();n&&j("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let t=zv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;let n=zv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise(()=>{});let n=new Me;return this.hu(()=>this.iu&&this.au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ru.push(t),this.Pu()))}Pu(){return D(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!hs(t))throw t;j("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(t){let n=this.nu.then(()=>(this._u=!0,t().catch(r=>{this.ou=r,this._u=!1;let i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Ee("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(t,n,r){this.lu(),this.uu.indexOf(t)>-1&&(n=0);let i=nx.createAndSchedule(this,t,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&Y()}verifyOperationInProgress(){}Tu(){return D(this,null,function*(){let t;do t=this.nu,yield t;while(t!==this.nu)})}Eu(t){for(let n of this.su)if(n.timerId===t)return!0;return!1}du(t){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tu()})}Au(t){this.uu.push(t)}Iu(t){let n=this.su.indexOf(t);this.su.splice(n,1)}};function bx(e){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(e,["next","error","complete"])}var wx=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Me,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,n,r){this._progressObserver={next:t,error:n,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,n){return this._taskCompletionResolver.promise.then(t,n)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var tB=-1,oe=class extends Na{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new yx}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||eB(this),this._firestoreClient.terminate()}};function qe(e){return e._firestoreClient||eB(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function eB(e){var t,n,r;let i=e._freezeSettings(),s=function(c,l,d,p){return new HA(c,l,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,YU(p.experimentalLongPollingOptions),p.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new gx(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function nB(e,t){hB(e=Mt(e,oe));let n=qe(e);if(n._uninitializedComponentsProvider)throw new F(R.FAILED_PRECONDITION,"SDK cache is already specified.");Dr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=e._freezeSettings(),i=new Lf;return iB(n,i,new ky(i,r.cacheSizeBytes,t?.forceOwnership))}function rB(e){hB(e=Mt(e,oe));let t=qe(e);if(t._uninitializedComponentsProvider)throw new F(R.FAILED_PRECONDITION,"SDK cache is already specified.");Dr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=e._freezeSettings(),r=new Lf;return iB(t,r,new dx(r,n.cacheSizeBytes))}function iB(e,t,n){let r=new Me;return e.asyncQueue.enqueue(()=>D(this,null,function*(){try{yield Gv(e,n),yield vx(e,t),r.resolve()}catch(i){let s=i;if(!KU(s))throw s;Dr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function oB(e){if(e._initialized&&!e._terminated)throw new F(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new Me;return e._queue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{yield function(r){return D(this,null,function*(){if(!Yi.D())return Promise.resolve();let i=r+"main";yield Yi.delete(i)})}(zx(e._databaseId,e._persistenceKey)),t.resolve()}catch(n){t.reject(n)}})),t.promise}function sB(e){return function(n){let r=new Me;return n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return _Y(yield r1(n),r)})),r.promise}(qe(e=Mt(e,oe)))}function aB(e){return OY(qe(e=Mt(e,oe)))}function uB(e){return MY(qe(e=Mt(e,oe)))}function cB(e,t){let n=qe(e=Mt(e,oe)),r=new wx;return jY(n,e._databaseId,t,r),r}function lB(e,t){return UY(qe(e=Mt(e,oe)),t).then(n=>n?new dn(e,null,n.query):null)}function hB(e){if(e._initialized||e._terminated)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Di=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e(Xe.fromBase64String(t))}catch(n){throw new F(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new e(Xe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Jr=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new F(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Te(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Zi=class{constructor(t){this._methodName=t}};var Oa=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new F(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new F(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return bt(this._lat,t._lat)||bt(this._long,t._long)}};var BY=/^__.*__$/,_x=class{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Xr(t,this.data,this.fieldMask,n,this.fieldTransforms):new as(t,this.data,n,this.fieldTransforms)}},Ny=class{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Xr(t,this.data,this.fieldMask,n,this.fieldTransforms)}};function dB(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var Oy=class e{constructor(t,n,r,i,s,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.mu({path:r,gu:!1});return i.pu(t),i}yu(t){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return My(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(t.length===0)throw this.Su("Document fields must not be empty");if(dB(this.Vu)&&BY.test(t))throw this.Su('Document fields cannot begin and end with "__"')}},Ix=class{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||zf(t)}Cu(t,n,r,i=!1){return new Oy({Vu:t,methodName:n,Du:r,path:Te.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Va(e){let t=e._freezeSettings(),n=zf(e._databaseId);return new Ix(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $y(e,t,n,r,i,s={}){let a=e.Cu(s.merge||s.mergeFields?2:0,t,n,i);h1("Data must be an object, but it was:",a,r);let c=mB(r,a),l,d;if(s.merge)l=new vr(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){let p=[];for(let g of s.mergeFields){let v=xx(t,g,n);if(!a.contains(v))throw new F(R.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);vB(p,v)||p.push(v)}l=new vr(p),d=a.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,d=a.fieldTransforms;return new _x(new Tn(c),l,d)}var Ff=class e extends Zi{_toFieldTransform(t){if(t.Vu!==2)throw t.Vu===1?t.Su(`${this._methodName}() can only appear at the top level of your update data`):t.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof e}};function fB(e,t,n){return new Oy({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Ex=class e extends Zi{_toFieldTransform(t){return new Da(t.path,new os)}isEqual(t){return t instanceof e}},Tx=class e extends Zi{constructor(t,n){super(t),this.vu=n}_toFieldTransform(t){let n=fB(this,t,!0),r=this.vu.map(s=>ja(s,n)),i=new Xi(r);return new Da(t.path,i)}isEqual(t){return t instanceof e&&c_(this.vu,t.vu)}},Ax=class e extends Zi{constructor(t,n){super(t),this.vu=n}_toFieldTransform(t){let n=fB(this,t,!0),r=this.vu.map(s=>ja(s,n)),i=new Ji(r);return new Da(t.path,i)}isEqual(t){return t instanceof e&&c_(this.vu,t.vu)}},Sx=class e extends Zi{constructor(t,n){super(t),this.Fu=n}_toFieldTransform(t){let n=new ss(t.serializer,Jj(t.serializer,this.Fu));return new Da(t.path,n)}isEqual(t){return t instanceof e&&this.Fu===t.Fu}};function c1(e,t,n,r){let i=e.Cu(1,t,n);h1("Data must be an object, but it was:",i,r);let s=[],a=Tn.empty();Fa(r,(l,d)=>{let p=d1(t,l,n);d=ue(d);let g=i.yu(p);if(d instanceof Ff)s.push(p);else{let v=ja(d,g);v!=null&&(s.push(p),a.set(p,v))}});let c=new vr(s);return new Ny(a,c,i.fieldTransforms)}function l1(e,t,n,r,i,s){let a=e.Cu(1,t,n),c=[xx(t,r,n)],l=[i];if(s.length%2!=0)throw new F(R.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)c.push(xx(t,s[v])),l.push(s[v+1]);let d=[],p=Tn.empty();for(let v=c.length-1;v>=0;--v)if(!vB(d,c[v])){let b=c[v],_=l[v];_=ue(_);let I=a.yu(b);if(_ instanceof Ff)d.push(b);else{let T=ja(_,I);T!=null&&(d.push(b),p.set(b,T))}}let g=new vr(d);return new Ny(p,g,a.fieldTransforms)}function pB(e,t,n,r=!1){return ja(n,e.Cu(r?4:3,t))}function ja(e,t){if(gB(e=ue(e)))return h1("Unsupported field value:",t,e),mB(e,t);if(e instanceof Zi)return function(r,i){if(!dB(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&t.Vu!==4)throw t.Su("Nested arrays are not supported");return function(r,i){let s=[],a=0;for(let c of r){let l=ja(c,i.wu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Jj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=le.fromDate(r);return{timestampValue:$c(i.serializer,s)}}if(r instanceof le){let s=new le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$c(i.serializer,s)}}if(r instanceof Oa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Di)return{bytesValue:uU(i.serializer,r._byteString)};if(r instanceof Qt){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Su(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ux(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${Ky(r)}`)}(e,t)}function mB(e,t){let n={};return Oj(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fa(e,(r,i)=>{let s=ja(i,t.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function gB(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof le||e instanceof Oa||e instanceof Di||e instanceof Qt||e instanceof Zi)}function h1(e,t,n){if(!gB(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Ky(n);throw r==="an object"?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function xx(e,t,n){if((t=ue(t))instanceof Jr)return t._internalPath;if(typeof t=="string")return d1(e,t);throw My("Field path arguments must be of type string or ",e,!1,void 0,n)}var qY=new RegExp("[~\\*/\\[\\]]");function d1(e,t,n){if(t.search(qY)>=0)throw My(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Jr(...t.split("."))._internalPath}catch{throw My(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function My(e,t,n,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${t}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new F(R.INVALID_ARGUMENT,c+e+l)}function vB(e,t){return e.some(n=>n.isEqual(t))}var Ma=class{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Cx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let n=this._document.data.field(Hy("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}},Cx=class extends Ma{data(){return super.data()}};function Hy(e,t){return typeof t=="string"?d1(e,t):t instanceof Jr?t._internalPath:t._delegate._internalPath}function yB(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new F(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vf=class{},La=class extends Vf{};function no(e,t,...n){let r=[];t instanceof Vf&&r.push(t),r=r.concat(n),function(s){let a=s.filter(l=>l instanceof Rx).length,c=s.filter(l=>l instanceof Ly).length;if(a>1||a>0&&c>0)throw new F(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)e=i._apply(e);return e}var Ly=class e extends La{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new e(t,n,r)}_apply(t){let n=this._parse(t);return CB(t._query,n),new dn(t.firestore,t.converter,sS(t._query,n))}_parse(t){let n=Va(t.firestore);return function(s,a,c,l,d,p,g){let v;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new F(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Ij(g,p);let b=[];for(let _ of g)b.push(_j(l,s,_));v={arrayValue:{values:b}}}else v=_j(l,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Ij(g,p),v=pB(c,a,g,p==="in"||p==="not-in");return Dt.create(d,p,v)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}};function bB(e,t,n){let r=t,i=Hy("where",e);return Ly._create(i,r,n)}var Rx=class e extends Vf{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new e(t,n)}_parse(t){let n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(t){let n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let a=i,c=s.getFlattenedFilters();for(let l of c)CB(a,l),a=sS(a,l)}(t._query,n),new dn(t.firestore,t.converter,sS(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Dx=class e extends La{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new e(t,n)}_apply(t){let n=function(i,s,a){if(i.startAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ca(s,a)}(t._query,this._field,this._direction);return new dn(t.firestore,t.converter,function(i,s){let a=i.explicitOrderBy.concat([s]);return new Yr(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}};function wB(e,t="asc"){let n=t,r=Hy("orderBy",e);return Dx._create(r,n)}var Fy=class e extends La{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new e(t,n,r)}_apply(t){return new dn(t.firestore,t.converter,ny(t._query,this._limit,this._limitType))}};function _B(e){return XU("limit",e),Fy._create("limit",e,"F")}function IB(e){return XU("limitToLast",e),Fy._create("limitToLast",e,"L")}var Vy=class e extends La{constructor(t,n,r){super(),this.type=t,this._docOrFields=n,this._inclusive=r}static _create(t,n,r){return new e(t,n,r)}_apply(t){let n=xB(t,this.type,this._docOrFields,this._inclusive);return new dn(t.firestore,t.converter,function(i,s){return new Yr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(t._query,n))}};function EB(...e){return Vy._create("startAt",e,!0)}function TB(...e){return Vy._create("startAfter",e,!1)}var jy=class e extends La{constructor(t,n,r){super(),this.type=t,this._docOrFields=n,this._inclusive=r}static _create(t,n,r){return new e(t,n,r)}_apply(t){let n=xB(t,this.type,this._docOrFields,this._inclusive);return new dn(t.firestore,t.converter,function(i,s){return new Yr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(t._query,n))}};function AB(...e){return jy._create("endBefore",e,!1)}function SB(...e){return jy._create("endAt",e,!0)}function xB(e,t,n,r){if(n[0]=ue(n[0]),n[0]instanceof Ma)return function(s,a,c,l,d){if(!l)throw new F(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);let p=[];for(let g of Vc(s))if(g.field.isKeyField())p.push(xa(a,l.key));else{let v=l.data.field(g.field);if(By(v))throw new F(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){let b=g.field.canonicalString();throw new F(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}p.push(v)}return new Ci(p,d)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{let i=Va(e.firestore);return function(a,c,l,d,p,g){let v=a.explicitOrderBy;if(p.length>v.length)throw new F(R.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let b=[];for(let _=0;_<p.length;_++){let I=p[_];if(v[_].field.isKeyField()){if(typeof I!="string")throw new F(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof I}`);if(!Vx(a)&&I.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${I}' contains a slash.`);let T=a.path.child(Ot.fromString(I));if(!K.isDocumentKey(T))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);let S=new K(T);b.push(xa(c,S))}else{let T=pB(l,d,I);b.push(T)}}return new Ci(b,g)}(e._query,e.firestore._databaseId,i,t,n,r)}}function _j(e,t,n){if(typeof(n=ue(n))=="string"){if(n==="")throw new F(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vx(t)&&n.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(Ot.fromString(n));if(!K.isDocumentKey(r))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xa(e,new K(r))}if(n instanceof Qt)return xa(e,n._key);throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ky(n)}.`)}function Ij(e,t){if(!Array.isArray(e)||e.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function CB(e,t){let n=function(i,s){for(let a of i)for(let c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var nl=class{convertValue(t,n="none"){switch(Sa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return pe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ns(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Y()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){let r={};return Fa(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Oa(pe(t.latitude),pe(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":let r=Lx(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wf(t));default:return null}}convertTimestamp(t){let n=es(t);return new le(n.seconds,n.nanos)}convertDocumentKey(t,n){let r=Ot.fromString(t);nt(bU(r));let i=new rs(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||Ee(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Wy(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var kx=class extends nl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Di(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new Qt(this.firestore,null,n)}};var Qi=class{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Pr=class extends Ma{constructor(t,n,r,i,s,a){super(t,n,r,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let n=new Zo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){let r=this._document.data.field(Hy("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Zo=class extends Pr{data(t={}){return super.data(t)}},Zr=class{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Zo(this._firestore,this._userDataWriter,r.key,r,new Qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let l=new Zo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Zo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:zY(c.type),doc:l,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function zY(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function f1(e,t){return e instanceof Pr&&t instanceof Pr?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Zr&&t instanceof Zr&&e._firestore===t._firestore&&u1(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function RB(e){e=Mt(e,Qt);let t=Mt(e.firestore,oe);return WU(qe(t),e._key).then(n=>v1(t,e,n))}var to=class extends nl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Di(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new Qt(this.firestore,null,n)}};function DB(e){e=Mt(e,Qt);let t=Mt(e.firestore,oe),n=qe(t),r=new to(t);return LY(n,e._key).then(i=>new Pr(t,r,e._key,i,new Qi(i!==null&&i.hasLocalMutations,!0),e.converter))}function kB(e){e=Mt(e,Qt);let t=Mt(e.firestore,oe);return WU(qe(t),e._key,{source:"server"}).then(n=>v1(t,e,n))}function PB(e){e=Mt(e,dn);let t=Mt(e.firestore,oe),n=qe(t),r=new to(t);return yB(e._query),QU(n,e._query).then(i=>new Zr(t,r,e,i))}function NB(e){e=Mt(e,dn);let t=Mt(e.firestore,oe),n=qe(t),r=new to(t);return FY(n,e._query).then(i=>new Zr(t,r,e,i))}function OB(e){e=Mt(e,dn);let t=Mt(e.firestore,oe),n=qe(t),r=new to(t);return QU(n,e._query,{source:"server"}).then(i=>new Zr(t,r,e,i))}function p1(e,t,n){e=Mt(e,Qt);let r=Mt(e.firestore,oe),i=Wy(e.converter,t,n);return cl(r,[$y(Va(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,me.none())])}function m1(e,t,n,...r){e=Mt(e,Qt);let i=Mt(e.firestore,oe),s=Va(i),a;return a=typeof(t=ue(t))=="string"||t instanceof Jr?l1(s,"updateDoc",e._key,t,n,r):c1(s,"updateDoc",e._key,t),cl(i,[a.toMutation(e._key,me.exists(!0))])}function MB(e){return cl(Mt(e.firestore,oe),[new us(e._key,me.none())])}function LB(e,t){let n=Mt(e.firestore,oe),r=Kf(e),i=Wy(e.converter,t);return cl(n,[$y(Va(e.firestore),"addDoc",r._key,i,e.converter!==null,{}).toMutation(r._key,me.exists(!1))]).then(()=>r)}function g1(e,...t){var n,r,i;e=ue(e);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||bx(t[a])||(s=t[a],a++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(bx(t[a])){let g=t[a];t[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),t[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),t[a+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let l,d,p;if(e instanceof Qt)d=Mt(e.firestore,oe),p=il(e._key.path),l={next:g=>{t[a]&&t[a](v1(d,e,g))},error:t[a+1],complete:t[a+2]};else{let g=Mt(e,dn);d=Mt(g.firestore,oe),p=g._query;let v=new to(d);l={next:b=>{t[a]&&t[a](new Zr(d,v,g,b))},error:t[a+1],complete:t[a+2]},yB(e._query)}return function(v,b,_,I){let T=new tl(I),S=new Of(b,T,_);return v.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return Hx(yield el(v),S)})),()=>{T.Qa(),v.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return Wx(yield el(v),S)}))}}(qe(d),p,c,l)}function FB(e,t){return VY(qe(e=Mt(e,oe)),bx(t)?t:{next:t})}function cl(e,t){return function(r,i){let s=new Me;return r.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return vY(yield r1(r),i,s)})),s.promise}(qe(e),t)}function v1(e,t,n){let r=n.docs.get(t._key),i=new to(e);return new Pr(e,i,t._key,r,new Qi(n.hasPendingWrites,n.fromCache),t.converter)}var GY={maxAttempts:5};var Uy=class{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Va(t)}set(t,n,r){this._verifyNotCommitted();let i=Xo(t,this._firestore),s=Wy(i.converter,n,r),a=$y(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,me.none())),this}update(t,n,r,...i){this._verifyNotCommitted();let s=Xo(t,this._firestore),a;return a=typeof(n=ue(n))=="string"||n instanceof Jr?l1(this._dataReader,"WriteBatch.update",s._key,n,r,i):c1(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,me.exists(!0))),this}delete(t){this._verifyNotCommitted();let n=Xo(t,this._firestore);return this._mutations=this._mutations.concat(new us(n._key,me.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Xo(e,t){if((e=ue(e)).firestore!==t)throw new F(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Px=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Va(n)}get(n){let r=Xo(n,this._firestore),i=new kx(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Y();let a=s[0];if(a.isFoundDocument())return new Ma(this._firestore,i,a.key,a,r.converter);if(a.isNoDocument())return new Ma(this._firestore,i,r._key,null,r.converter);throw Y()})}set(n,r,i){let s=Xo(n,this._firestore),a=Wy(s.converter,r,i),c=$y(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,c),this}update(n,r,i,...s){let a=Xo(n,this._firestore),c;return c=typeof(r=ue(r))=="string"||r instanceof Jr?l1(this._dataReader,"Transaction.update",a._key,r,i,s):c1(this._dataReader,"Transaction.update",a._key,r),this._transaction.update(a._key,c),this}delete(n){let r=Xo(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(t,n){super(t,n),this._firestore=t}get(t){let n=Xo(t,this._firestore),r=new to(this._firestore);return super.get(t).then(i=>new Pr(this._firestore,r,n._key,i._document,new Qi(!1,!1),n.converter))}};function VB(e,t,n){e=Mt(e,oe);let r=Object.assign(Object.assign({},GY),n);return function(s){if(s.maxAttempts<1)throw new F(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,a,c){let l=new Me;return s.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){let d=yield NY(s);new mx(s.asyncQueue,d,c,a,l).Ya()})),l.promise}(qe(e),i=>t(new Px(e,i)),r)}function jB(){return new Ff("deleteField")}function UB(){return new Ex("serverTimestamp")}function BB(...e){return new Tx("arrayUnion",e)}function qB(...e){return new Ax("arrayRemove",e)}function zB(e){return new Sx("increment",e)}(function(t,n=!0){(function(i){rl=i})(dP),dh(new Vs("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new oe(new FA(r.getProvider("auth-internal")),new BA(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new F(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rs(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),wo(E4,"4.5.0",t),wo(E4,"4.5.0","esm2017")})();var KY="@firebase/firestore-compat",$Y="0.3.27";function E1(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function GB(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function KB(){if(!Mj())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Qy=class e{constructor(t){this._delegate=t}static fromBase64String(t){return KB(),new e(Di.fromBase64String(t))}static fromUint8Array(t){return GB(),new e(Di.fromUint8Array(t))}toBase64(){return KB(),this._delegate.toBase64()}toUint8Array(){return GB(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function y1(e){return HY(e,["next","error","complete"])}function HY(e,t){if(typeof e!="object"||e===null)return!1;let n=e;for(let r of t)if(r in n&&typeof n[r]=="function")return!0;return!1}var b1=class{enableIndexedDbPersistence(t,n){return nB(t._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(t){return rB(t._delegate)}clearIndexedDbPersistence(t){return oB(t._delegate)}},Yy=class{constructor(t,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof rs||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let n=this._delegate._getSettings();!t.merge&&n.host!==t.host&&Dr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},n),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,n,r={}){JU(this._delegate,t,n,r)}enableNetwork(){return aB(this._delegate)}disableNetwork(){return uB(this._delegate)}enablePersistence(t){let n=!1,r=!1;return t&&(n=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,o1("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return sB(this._delegate)}onSnapshotsInSync(t){return FB(this._delegate,t)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new dl(this,s1(this._delegate,t))}catch(n){throw Ln(n,"collection()","Firestore.collection()")}}doc(t){try{return new ki(this,Kf(this._delegate,t))}catch(n){throw Ln(n,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new za(this,ZU(this._delegate,t))}catch(n){throw Ln(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return VB(this._delegate,n=>t(new Xy(this,n)))}batch(){return qe(this._delegate),new Jy(new Uy(this._delegate,t=>cl(this._delegate,t)))}loadBundle(t){return cB(this._delegate,t)}namedQuery(t){return lB(this._delegate,t).then(n=>n?new za(this,n):null)}},ll=class extends nl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qy(new Di(t))}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return ki.forKey(n,this.firestore,null)}};function WY(e){Ej(e)}var Xy=class{constructor(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new ll(t)}get(t){let n=Ua(t);return this._delegate.get(n).then(r=>new Ba(this._firestore,new Pr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(t,n,r){let i=Ua(t);return r?(E1("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(t,n,r,...i){let s=Ua(t);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(t){let n=Ua(t);return this._delegate.delete(n),this}},Jy=class{constructor(t){this._delegate=t}set(t,n,r){let i=Ua(t);return r?(E1("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(t,n,r,...i){let s=Ua(t);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(t){let n=Ua(t);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},hl=class e{constructor(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}fromFirestore(t,n){let r=new Zo(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new qa(this._firestore,r),n??{})}toFirestore(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)}static getInstance(t,n){let r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));let s=i.get(n);return s||(s=new e(t,new ll(t),n),i.set(n,s)),s}};hl.INSTANCES=new WeakMap;var ki=class e{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new ll(t)}static forPath(t,n,r){if(t.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new e(n,new Qt(n._delegate,r,new K(t)))}static forKey(t,n,r){return new e(n,new Qt(n._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new dl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new dl(this.firestore,s1(this._delegate,t))}catch(n){throw Ln(n,"collection()","DocumentReference.collection()")}}isEqual(t){return t=ue(t),t instanceof Qt?a1(this._delegate,t):!1}set(t,n){n=E1("DocumentReference.set",n);try{return n?p1(this._delegate,t,n):p1(this._delegate,t)}catch(r){throw Ln(r,"setDoc()","DocumentReference.set()")}}update(t,n,...r){try{return arguments.length===1?m1(this._delegate,t):m1(this._delegate,t,n,...r)}catch(i){throw Ln(i,"updateDoc()","DocumentReference.update()")}}delete(){return MB(this._delegate)}onSnapshot(...t){let n=$B(t),r=HB(t,i=>new Ba(this.firestore,new Pr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return g1(this._delegate,n,r)}get(t){let n;return t?.source==="cache"?n=DB(this._delegate):t?.source==="server"?n=kB(this._delegate):n=RB(this._delegate),n.then(r=>new Ba(this.firestore,new Pr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(hl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function Ln(e,t,n){return e.message=e.message.replace(t,n),e}function $B(e){for(let t of e)if(typeof t=="object"&&!y1(t))return t;return{}}function HB(e,t){var n,r;let i;return y1(e[0])?i=e[0]:y1(e[1])?i=e[1]:typeof e[0]=="function"?i={next:e[0],error:e[1],complete:e[2]}:i={next:e[1],error:e[2],complete:e[3]},{next:s=>{i.next&&i.next(t(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ba=class{constructor(t,n){this._firestore=t,this._delegate=n}get ref(){return new ki(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,n){return this._delegate.get(t,n)}isEqual(t){return f1(this._delegate,t._delegate)}},qa=class extends Ba{data(t){let n=this._delegate.data(t);return this._delegate._converter||Tj(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},za=class e{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new ll(t)}where(t,n,r){try{return new e(this.firestore,no(this._delegate,bB(t,n,r)))}catch(i){throw Ln(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,n){try{return new e(this.firestore,no(this._delegate,wB(t,n)))}catch(r){throw Ln(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new e(this.firestore,no(this._delegate,_B(t)))}catch(n){throw Ln(n,"limit()","Query.limit()")}}limitToLast(t){try{return new e(this.firestore,no(this._delegate,IB(t)))}catch(n){throw Ln(n,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new e(this.firestore,no(this._delegate,EB(...t)))}catch(n){throw Ln(n,"startAt()","Query.startAt()")}}startAfter(...t){try{return new e(this.firestore,no(this._delegate,TB(...t)))}catch(n){throw Ln(n,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new e(this.firestore,no(this._delegate,AB(...t)))}catch(n){throw Ln(n,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new e(this.firestore,no(this._delegate,SB(...t)))}catch(n){throw Ln(n,"endAt()","Query.endAt()")}}isEqual(t){return u1(this._delegate,t._delegate)}get(t){let n;return t?.source==="cache"?n=NB(this._delegate):t?.source==="server"?n=OB(this._delegate):n=PB(this._delegate),n.then(r=>new $f(this.firestore,new Zr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){let n=$B(t),r=HB(t,i=>new $f(this.firestore,new Zr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return g1(this._delegate,n,r)}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(hl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},w1=class{constructor(t,n){this._firestore=t,this._delegate=n}get type(){return this._delegate.type}get doc(){return new qa(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},$f=class{constructor(t,n){this._firestore=t,this._delegate=n}get query(){return new za(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new qa(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(n=>new w1(this._firestore,n))}forEach(t,n){this._delegate.forEach(r=>{t.call(n,new qa(this._firestore,r))})}isEqual(t){return f1(this._delegate,t._delegate)}},dl=class e extends za{constructor(t,n){super(t,n),this.firestore=t,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new ki(this.firestore,t):null}doc(t){try{return t===void 0?new ki(this.firestore,Kf(this._delegate)):new ki(this.firestore,Kf(this._delegate,t))}catch(n){throw Ln(n,"doc()","CollectionReference.doc()")}}add(t){return LB(this._delegate,t).then(n=>new ki(this.firestore,n))}isEqual(t){return a1(this._delegate,t._delegate)}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(hl.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function Ua(e){return Mt(e,Qt)}var _1=class e{constructor(...t){this._delegate=new Jr(...t)}static documentId(){return new e(Te.keyField().canonicalString())}isEqual(t){return t=ue(t),t instanceof Jr?this._delegate._internalPath.isEqual(t._internalPath):!1}};var I1=class e{constructor(t){this._delegate=t}static serverTimestamp(){let t=UB();return t._methodName="FieldValue.serverTimestamp",new e(t)}static delete(){let t=jB();return t._methodName="FieldValue.delete",new e(t)}static arrayUnion(...t){let n=BB(...t);return n._methodName="FieldValue.arrayUnion",new e(n)}static arrayRemove(...t){let n=qB(...t);return n._methodName="FieldValue.arrayRemove",new e(n)}static increment(t){let n=zB(t);return n._methodName="FieldValue.increment",new e(n)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var QY={Firestore:Yy,GeoPoint:Oa,Timestamp:le,Blob:Qy,Transaction:Xy,WriteBatch:Jy,DocumentReference:ki,DocumentSnapshot:Ba,Query:za,QueryDocumentSnapshot:qa,QuerySnapshot:$f,CollectionReference:dl,FieldPath:_1,FieldValue:I1,setLogLevel:WY,CACHE_SIZE_UNLIMITED:tB};function YY(e,t){e.INTERNAL.registerComponent(new Vs("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return t(r,i)},"PUBLIC").setServiceProps(Object.assign({},QY)))}function XY(e){YY(e,(t,n)=>new Yy(t,n,new b1)),e.registerVersion(KY,$Y)}XY(Kn);function JY(e,t=Yp){return new fo(n=>{let r;return t!=null?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function WB(e,t){return JY(e,t)}function ZY(e,t){return WB(e,t).pipe(go(void 0),em(),yt(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function S1(e,t){return WB(e,t).pipe(yt(n=>({payload:n,type:"query"})))}var Zy=class{ref;afs;constructor(t,n){this.ref=t,this.afs=n}set(t,n){return this.ref.set(t,n)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,n){let r=this.ref.collection(t),{ref:i,query:s}=ZB(r,n);return new eb(i,s,this.afs)}snapshotChanges(){return ZY(this.ref,this.afs.schedulers.outsideAngular).pipe(Yn)}valueChanges(t={}){return this.snapshotChanges().pipe(yt(({payload:n})=>t.idField?je(et({},n.data()),{[t.idField]:n.id}):n.data()))}get(t){return be(this.ref.get(t)).pipe(Yn)}};function tb(e,t){return S1(e,t).pipe(go(void 0),em(),yt(n=>{let[r,i]=n,s=i.payload.docChanges(),a=s.map(c=>({type:c.type,payload:c}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,l)=>{let d=s.find(g=>g.doc.ref.isEqual(c.ref)),p=r?.payload.docs.find(g=>g.ref.isEqual(c.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(c.metadata)||!d&&p&&JSON.stringify(p.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:c}})}),a}))}function QB(e,t,n){return tb(e,n).pipe(bu((r,i)=>tX(r,i.map(s=>s.payload),t),[]),Rk(),yt(r=>r.map(i=>({type:i.type,payload:i}))))}function tX(e,t,n){return t.forEach(r=>{n.indexOf(r.type)>-1&&(e=eX(e,r))}),e}function T1(e,t,n,...r){let i=e.slice();return i.splice(t,n,...r),i}function eX(e,t){switch(t.type){case"added":if(!(e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)))return T1(e,t.newIndex,0,t);break;case"modified":if(e[t.oldIndex]==null||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}else return T1(e,t.newIndex,1,t);break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return T1(e,t.oldIndex,1);break}return e}function YB(e){return(!e||e.length===0)&&(e=["added","removed","modified"]),e}var eb=class{ref;query;afs;constructor(t,n,r){this.ref=t,this.query=n,this.afs=r}stateChanges(t){let n=tb(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(n=n.pipe(yt(r=>r.filter(i=>t.indexOf(i.type)>-1)))),n.pipe(go(void 0),em(),Er(([r,i])=>i.length>0||!r),yt(([,r])=>r),Yn)}auditTrail(t){return this.stateChanges(t).pipe(bu((n,r)=>[...n,...r],[]))}snapshotChanges(t){let n=YB(t);return QB(this.query,n,this.afs.schedulers.outsideAngular).pipe(Yn)}valueChanges(t={}){return S1(this.query,this.afs.schedulers.outsideAngular).pipe(yt(n=>n.payload.docs.map(r=>t.idField?je(et({},r.data()),{[t.idField]:r.id}):r.data())),Yn)}get(t){return be(this.query.get(t)).pipe(Yn)}add(t){return this.ref.add(t)}doc(t){return new Zy(this.ref.doc(t),this.afs)}},A1=class{query;afs;constructor(t,n){this.query=t,this.afs=n}stateChanges(t){return!t||t.length===0?tb(this.query,this.afs.schedulers.outsideAngular).pipe(Yn):tb(this.query,this.afs.schedulers.outsideAngular).pipe(yt(n=>n.filter(r=>t.indexOf(r.type)>-1)),Er(n=>n.length>0),Yn)}auditTrail(t){return this.stateChanges(t).pipe(bu((n,r)=>[...n,...r],[]))}snapshotChanges(t){let n=YB(t);return QB(this.query,n,this.afs.schedulers.outsideAngular).pipe(Yn)}valueChanges(t={}){return S1(this.query,this.afs.schedulers.outsideAngular).pipe(yt(r=>r.payload.docs.map(i=>t.idField?et({[t.idField]:i.id},i.data()):i.data())),Yn)}get(t){return be(this.query.get(t)).pipe(Yn)}},XB=new kt("angularfire2.enableFirestorePersistence"),JB=new kt("angularfire2.firestore.persistenceSettings"),nX=new kt("angularfire2.firestore.settings"),rX=new kt("angularfire2.firestore.use-emulator");function ZB(e,t=n=>n){return{query:t(e),ref:e}}var iX=(()=>{class e{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,a,c,l,d,p,g,v,b,_,I,T,S,M){this.schedulers=l;let k=Od(n,c,r),z=p;g&&UT(k,c,v,_,I,T,b,S),[this.firestore,this.persistenceEnabled$]=iv(`${k.name}.firestore`,"AngularFirestore",k.name,()=>{let H=c.runOutsideAngular(()=>k.firestore());if(s&&H.settings(s),z&&H.useEmulator(...z),i&&!Fs(a)){let L=()=>{try{return be(H.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(mt){return typeof console<"u"&&console.warn(mt),ct(!1)}};return[H,c.runOutsideAngular(L)]}else return[H,ct(!1)]},[s,z,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:s,query:a}=ZB(i,r),c=this.schedulers.ngZone.run(()=>s);return new eb(c,a,this)}collectionGroup(n,r){let i=r||(a=>a),s=this.firestore.collectionGroup(n);return new A1(i(s),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Zy(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||e)(G(bc),G(wc,8),G(XB,8),G(nX,8),G(rr),G(qt),G(nv),G(JB,8),G(rX,8),G(eV,8),G(OT,8),G(MT,8),G(LT,8),G(FT,8),G(VT,8),G(jT,8),G(da,8))};static \u0275prov=wt({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),tq=(()=>{class e{constructor(){Kn.registerVersion("angularfire",yc.full,"fst-compat")}static enablePersistence(n){return{ngModule:e,providers:[{provide:XB,useValue:!0},{provide:JB,useValue:n}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Xt({type:e});static \u0275inj=Yt({providers:[iX]})}return e})();var eq=(()=>{let t=class t{constructor(){ar.init(vT.firebaseConfig)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Xt({type:t,bootstrap:[pF]}),t.\u0275inj=Yt({providers:[mF()],imports:[_P,fF,FF,VF,qF.initializeApp(vT.firebaseConfig),tq]});let e=t;return e})();wP().bootstrapModule(eq).catch(e=>console.error(e));
